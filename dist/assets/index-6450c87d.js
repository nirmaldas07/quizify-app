(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var C1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ig={exports:{}},vc={},og={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ia=Symbol.for("react.element"),T1=Symbol.for("react.portal"),A1=Symbol.for("react.fragment"),I1=Symbol.for("react.strict_mode"),R1=Symbol.for("react.profiler"),P1=Symbol.for("react.provider"),D1=Symbol.for("react.context"),L1=Symbol.for("react.forward_ref"),M1=Symbol.for("react.suspense"),O1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),Sm=Symbol.iterator;function z1(t){return t===null||typeof t!="object"?null:(t=Sm&&t[Sm]||t["@@iterator"],typeof t=="function"?t:null)}var ag={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lg=Object.assign,cg={};function Di(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||ag}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ug(){}ug.prototype=Di.prototype;function oh(t,e,n){this.props=t,this.context=e,this.refs=cg,this.updater=n||ag}var ah=oh.prototype=new ug;ah.constructor=oh;lg(ah,Di.prototype);ah.isPureReactComponent=!0;var km=Array.isArray,dg=Object.prototype.hasOwnProperty,lh={current:null},hg={key:!0,ref:!0,__self:!0,__source:!0};function fg(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)dg.call(e,r)&&!hg.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:ia,type:t,key:o,ref:a,props:i,_owner:lh.current}}function V1(t,e){return{$$typeof:ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ch(t){return typeof t=="object"&&t!==null&&t.$$typeof===ia}function $1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Em=/\/+/g;function ru(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$1(""+t.key):e.toString(36)}function cl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ia:case T1:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+ru(a,0):r,km(i)?(n="",t!=null&&(n=t.replace(Em,"$&/")+"/"),cl(i,e,n,"",function(d){return d})):i!=null&&(ch(i)&&(i=V1(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Em,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",km(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+ru(o,c);a+=cl(o,e,n,u,i)}else if(u=z1(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+ru(o,c++),a+=cl(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Aa(t,e,n){if(t==null)return t;var r=[],i=0;return cl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function B1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},ul={transition:null},U1={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:ul,ReactCurrentOwner:lh};function mg(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Aa,forEach:function(t,e,n){Aa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Aa(t,function(){e++}),e},toArray:function(t){return Aa(t,function(e){return e})||[]},only:function(t){if(!ch(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Di;Pe.Fragment=A1;Pe.Profiler=R1;Pe.PureComponent=oh;Pe.StrictMode=I1;Pe.Suspense=M1;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1;Pe.act=mg;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lg({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=lh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)dg.call(e,u)&&!hg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ia,type:t.type,key:i,ref:o,props:r,_owner:a}};Pe.createContext=function(t){return t={$$typeof:D1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:P1,_context:t},t.Consumer=t};Pe.createElement=fg;Pe.createFactory=function(t){var e=fg.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:L1,render:t}};Pe.isValidElement=ch;Pe.lazy=function(t){return{$$typeof:F1,_payload:{_status:-1,_result:t},_init:B1}};Pe.memo=function(t,e){return{$$typeof:O1,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=ul.transition;ul.transition={};try{t()}finally{ul.transition=e}};Pe.unstable_act=mg;Pe.useCallback=function(t,e){return mn.current.useCallback(t,e)};Pe.useContext=function(t){return mn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return mn.current.useEffect(t,e)};Pe.useId=function(){return mn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return mn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Pe.useRef=function(t){return mn.current.useRef(t)};Pe.useState=function(t){return mn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return mn.current.useTransition()};Pe.version="18.3.1";og.exports=Pe;var h=og.exports;const dn=sg(h);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=h,H1=Symbol.for("react.element"),Q1=Symbol.for("react.fragment"),G1=Object.prototype.hasOwnProperty,W1=q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function pg(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)G1.call(e,r)&&!Y1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:H1,type:t,key:o,ref:a,props:i,_owner:W1.current}}vc.Fragment=Q1;vc.jsx=pg;vc.jsxs=pg;ig.exports=vc;var s=ig.exports,qu={},gg={exports:{}},In={},xg={exports:{}},yg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,F){var B=U.length;U.push(F);e:for(;0<B;){var $=B-1>>>1,L=U[$];if(0<i(L,F))U[$]=F,U[B]=L,B=$;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var F=U[0],B=U.pop();if(B!==F){U[0]=B;e:for(var $=0,L=U.length,z=L>>>1;$<z;){var Q=2*($+1)-1,Z=U[Q],H=Q+1,oe=U[H];if(0>i(Z,B))H<L&&0>i(oe,Z)?(U[$]=oe,U[H]=B,$=H):(U[$]=Z,U[Q]=B,$=Q);else if(H<L&&0>i(oe,B))U[$]=oe,U[H]=B,$=H;else break e}}return F}function i(U,F){var B=U.sortIndex-F.sortIndex;return B!==0?B:U.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,g=null,y=3,N=!1,b=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=U)r(d),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(d)}}function I(U){if(C=!1,S(U),!b)if(n(u)!==null)b=!0,ne(D);else{var F=n(d);F!==null&&K(I,F.startTime-U)}}function D(U,F){b=!1,C&&(C=!1,_(m),m=-1),N=!0;var B=y;try{for(S(F),g=n(u);g!==null&&(!(g.expirationTime>F)||U&&!A());){var $=g.callback;if(typeof $=="function"){g.callback=null,y=g.priorityLevel;var L=$(g.expirationTime<=F);F=t.unstable_now(),typeof L=="function"?g.callback=L:g===n(u)&&r(u),S(F)}else r(u);g=n(u)}if(g!==null)var z=!0;else{var Q=n(d);Q!==null&&K(I,Q.startTime-F),z=!1}return z}finally{g=null,y=B,N=!1}}var M=!1,k=null,m=-1,x=5,w=-1;function A(){return!(t.unstable_now()-w<x)}function E(){if(k!==null){var U=t.unstable_now();w=U;var F=!0;try{F=k(!0,U)}finally{F?T():(M=!1,k=null)}}else M=!1}var T;if(typeof j=="function")T=function(){j(E)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,te=X.port2;X.port1.onmessage=E,T=function(){te.postMessage(null)}}else T=function(){P(E,0)};function ne(U){k=U,M||(M=!0,T())}function K(U,F){m=P(function(){U(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||N||(b=!0,ne(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var B=y;y=F;try{return U()}finally{y=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var B=y;y=U;try{return F()}finally{y=B}},t.unstable_scheduleCallback=function(U,F,B){var $=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?$+B:$):B=$,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=B+L,U={id:f++,callback:F,priorityLevel:U,startTime:B,expirationTime:L,sortIndex:-1},B>$?(U.sortIndex=B,e(d,U),n(u)===null&&U===n(d)&&(C?(_(m),m=-1):C=!0,K(I,B-$))):(U.sortIndex=L,e(u,U),b||N||(b=!0,ne(D))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var F=y;return function(){var B=y;y=F;try{return U.apply(this,arguments)}finally{y=B}}}})(yg);xg.exports=yg;var K1=xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=h,An=K1;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vg=new Set,Do={};function $s(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(Do[t]=e,t=0;t<e.length;t++)vg.add(e[t])}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=Object.prototype.hasOwnProperty,J1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_m={},Cm={};function Z1(t){return Hu.call(Cm,t)?!0:Hu.call(_m,t)?!1:J1.test(t)?Cm[t]=!0:(_m[t]=!0,!1)}function eb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tb(t,e,n,r){if(e===null||typeof e>"u"||eb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pn(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var uh=/[\-:]([a-z])/g;function dh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(uh,dh);Kt[e]=new pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(uh,dh);Kt[e]=new pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(uh,dh);Kt[e]=new pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new pn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function hh(t,e,n,r){var i=Kt.hasOwnProperty(e)?Kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tb(e,n,i,r)&&(n=null),r||i===null?Z1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),ei=Symbol.for("react.fragment"),fh=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),bg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),mh=Symbol.for("react.forward_ref"),Gu=Symbol.for("react.suspense"),Wu=Symbol.for("react.suspense_list"),ph=Symbol.for("react.memo"),Vr=Symbol.for("react.lazy"),jg=Symbol.for("react.offscreen"),Tm=Symbol.iterator;function Ji(t){return t===null||typeof t!="object"?null:(t=Tm&&t[Tm]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,su;function fo(t){if(su===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);su=e&&e[1]||""}return`
`+su+t}var iu=!1;function ou(t,e){if(!t||iu)return"";iu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{iu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fo(t):""}function nb(t){switch(t.tag){case 5:return fo(t.type);case 16:return fo("Lazy");case 13:return fo("Suspense");case 19:return fo("SuspenseList");case 0:case 2:case 15:return t=ou(t.type,!1),t;case 11:return t=ou(t.type.render,!1),t;case 1:return t=ou(t.type,!0),t;default:return""}}function Yu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ei:return"Fragment";case Zs:return"Portal";case Qu:return"Profiler";case fh:return"StrictMode";case Gu:return"Suspense";case Wu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wg:return(t.displayName||"Context")+".Consumer";case bg:return(t._context.displayName||"Context")+".Provider";case mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ph:return e=t.displayName||null,e!==null?e:Yu(t.type)||"Memo";case Vr:e=t._payload,t=t._init;try{return Yu(t(e))}catch{}}return null}function rb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yu(e);case 8:return e===fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ng(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sb(t){var e=Ng(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ra(t){t._valueTracker||(t._valueTracker=sb(t))}function Sg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ng(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ku(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Am(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=is(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kg(t,e){e=e.checked,e!=null&&hh(t,"checked",e,!1)}function Xu(t,e){kg(t,e);var n=is(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ju(t,e.type,is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ju(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mo=Array.isArray;function di(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+is(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Zu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(mo(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:is(n)}}function Eg(t,e){var n=is(e.value),r=is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _g(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ed(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_g(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pa,Cg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pa=Pa||document.createElement("div"),Pa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ib=["Webkit","ms","Moz","O"];Object.keys(yo).forEach(function(t){ib.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yo[e]=yo[t]})});function Tg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yo.hasOwnProperty(t)&&yo[t]?(""+e).trim():e+"px"}function Ag(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Tg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ob=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function td(t,e){if(e){if(ob[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function nd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rd=null;function gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sd=null,hi=null,fi=null;function Dm(t){if(t=la(t)){if(typeof sd!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Sc(e),sd(t.stateNode,t.type,e))}}function Ig(t){hi?fi?fi.push(t):fi=[t]:hi=t}function Rg(){if(hi){var t=hi,e=fi;if(fi=hi=null,Dm(t),e)for(t=0;t<e.length;t++)Dm(e[t])}}function Pg(t,e){return t(e)}function Dg(){}var au=!1;function Lg(t,e,n){if(au)return t(e,n);au=!0;try{return Pg(t,e,n)}finally{au=!1,(hi!==null||fi!==null)&&(Dg(),Rg())}}function Mo(t,e){var n=t.stateNode;if(n===null)return null;var r=Sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var id=!1;if(Sr)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){id=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{id=!1}function ab(t,e,n,r,i,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var vo=!1,Il=null,Rl=!1,od=null,lb={onError:function(t){vo=!0,Il=t}};function cb(t,e,n,r,i,o,a,c,u){vo=!1,Il=null,ab.apply(lb,arguments)}function ub(t,e,n,r,i,o,a,c,u){if(cb.apply(this,arguments),vo){if(vo){var d=Il;vo=!1,Il=null}else throw Error(de(198));Rl||(Rl=!0,od=d)}}function Bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lm(t){if(Bs(t)!==t)throw Error(de(188))}function db(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Lm(i),t;if(o===r)return Lm(i),e;o=o.sibling}throw Error(de(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function Og(t){return t=db(t),t!==null?Fg(t):null}function Fg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fg(t);if(e!==null)return e;t=t.sibling}return null}var zg=An.unstable_scheduleCallback,Mm=An.unstable_cancelCallback,hb=An.unstable_shouldYield,fb=An.unstable_requestPaint,Et=An.unstable_now,mb=An.unstable_getCurrentPriorityLevel,xh=An.unstable_ImmediatePriority,Vg=An.unstable_UserBlockingPriority,Pl=An.unstable_NormalPriority,pb=An.unstable_LowPriority,$g=An.unstable_IdlePriority,bc=null,ar=null;function gb(t){if(ar&&typeof ar.onCommitFiberRoot=="function")try{ar.onCommitFiberRoot(bc,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:vb,xb=Math.log,yb=Math.LN2;function vb(t){return t>>>=0,t===0?32:31-(xb(t)/yb|0)|0}var Da=64,La=4194304;function po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=po(c):(o&=a,o!==0&&(r=po(o)))}else a=n&~i,a!==0?r=po(a):o!==0&&(r=po(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),i=1<<n,r|=t[n],e&=~i;return r}function bb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Zn(o),c=1<<a,u=i[a];u===-1?(!(c&n)||c&r)&&(i[a]=bb(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function ad(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Bg(){var t=Da;return Da<<=1,!(Da&4194240)&&(Da=64),t}function lu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function jb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function yh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Xe=0;function Ug(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qg,vh,Hg,Qg,Gg,ld=!1,Ma=[],Yr=null,Kr=null,Xr=null,Oo=new Map,Fo=new Map,Ur=[],Nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Om(t,e){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fo.delete(e.pointerId)}}function eo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=la(e),e!==null&&vh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Sb(t,e,n,r,i){switch(e){case"focusin":return Yr=eo(Yr,t,e,n,r,i),!0;case"dragenter":return Kr=eo(Kr,t,e,n,r,i),!0;case"mouseover":return Xr=eo(Xr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Oo.set(o,eo(Oo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Fo.set(o,eo(Fo.get(o)||null,t,e,n,r,i)),!0}return!1}function Wg(t){var e=js(t.target);if(e!==null){var n=Bs(e);if(n!==null){if(e=n.tag,e===13){if(e=Mg(n),e!==null){t.blockedOn=e,Gg(t.priority,function(){Hg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rd=r,n.target.dispatchEvent(r),rd=null}else return e=la(n),e!==null&&vh(e),t.blockedOn=n,!1;e.shift()}return!0}function Fm(t,e,n){dl(t)&&n.delete(e)}function kb(){ld=!1,Yr!==null&&dl(Yr)&&(Yr=null),Kr!==null&&dl(Kr)&&(Kr=null),Xr!==null&&dl(Xr)&&(Xr=null),Oo.forEach(Fm),Fo.forEach(Fm)}function to(t,e){t.blockedOn===e&&(t.blockedOn=null,ld||(ld=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,kb)))}function zo(t){function e(i){return to(i,t)}if(0<Ma.length){to(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yr!==null&&to(Yr,t),Kr!==null&&to(Kr,t),Xr!==null&&to(Xr,t),Oo.forEach(e),Fo.forEach(e),n=0;n<Ur.length;n++)r=Ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ur.length&&(n=Ur[0],n.blockedOn===null);)Wg(n),n.blockedOn===null&&Ur.shift()}var mi=Ar.ReactCurrentBatchConfig,Ll=!0;function Eb(t,e,n,r){var i=Xe,o=mi.transition;mi.transition=null;try{Xe=1,bh(t,e,n,r)}finally{Xe=i,mi.transition=o}}function _b(t,e,n,r){var i=Xe,o=mi.transition;mi.transition=null;try{Xe=4,bh(t,e,n,r)}finally{Xe=i,mi.transition=o}}function bh(t,e,n,r){if(Ll){var i=cd(t,e,n,r);if(i===null)yu(t,e,r,Ml,n),Om(t,r);else if(Sb(i,t,e,n,r))r.stopPropagation();else if(Om(t,r),e&4&&-1<Nb.indexOf(t)){for(;i!==null;){var o=la(i);if(o!==null&&qg(o),o=cd(t,e,n,r),o===null&&yu(t,e,r,Ml,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else yu(t,e,r,null,n)}}var Ml=null;function cd(t,e,n,r){if(Ml=null,t=gh(r),t=js(t),t!==null)if(e=Bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ml=t,null}function Yg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mb()){case xh:return 1;case Vg:return 4;case Pl:case pb:return 16;case $g:return 536870912;default:return 16}default:return 16}}var Hr=null,wh=null,hl=null;function Kg(){if(hl)return hl;var t,e=wh,n=e.length,r,i="value"in Hr?Hr.value:Hr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return hl=i.slice(t,1<r?1-r:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function zm(){return!1}function Rn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Oa:zm,this.isPropagationStopped=zm,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=Rn(Li),aa=bt({},Li,{view:0,detail:0}),Cb=Rn(aa),cu,uu,no,wc=bt({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==no&&(no&&t.type==="mousemove"?(cu=t.screenX-no.screenX,uu=t.screenY-no.screenY):uu=cu=0,no=t),cu)},movementY:function(t){return"movementY"in t?t.movementY:uu}}),Vm=Rn(wc),Tb=bt({},wc,{dataTransfer:0}),Ab=Rn(Tb),Ib=bt({},aa,{relatedTarget:0}),du=Rn(Ib),Rb=bt({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Pb=Rn(Rb),Db=bt({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lb=Rn(Db),Mb=bt({},Li,{data:0}),$m=Rn(Mb),Ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zb[t])?!!e[t]:!1}function Nh(){return Vb}var $b=bt({},aa,{key:function(t){if(t.key){var e=Ob[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bb=Rn($b),Ub=bt({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=Rn(Ub),qb=bt({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),Hb=Rn(qb),Qb=bt({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gb=Rn(Qb),Wb=bt({},wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yb=Rn(Wb),Kb=[9,13,27,32],Sh=Sr&&"CompositionEvent"in window,bo=null;Sr&&"documentMode"in document&&(bo=document.documentMode);var Xb=Sr&&"TextEvent"in window&&!bo,Xg=Sr&&(!Sh||bo&&8<bo&&11>=bo),Um=String.fromCharCode(32),qm=!1;function Jg(t,e){switch(t){case"keyup":return Kb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ti=!1;function Jb(t,e){switch(t){case"compositionend":return Zg(e);case"keypress":return e.which!==32?null:(qm=!0,Um);case"textInput":return t=e.data,t===Um&&qm?null:t;default:return null}}function Zb(t,e){if(ti)return t==="compositionend"||!Sh&&Jg(t,e)?(t=Kg(),hl=wh=Hr=null,ti=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xg&&e.locale!=="ko"?null:e.data;default:return null}}var ew={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ew[t.type]:e==="textarea"}function ex(t,e,n,r){Ig(r),e=Ol(e,"onChange"),0<e.length&&(n=new jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wo=null,Vo=null;function tw(t){dx(t,0)}function jc(t){var e=si(t);if(Sg(e))return t}function nw(t,e){if(t==="change")return e}var tx=!1;if(Sr){var hu;if(Sr){var fu="oninput"in document;if(!fu){var Qm=document.createElement("div");Qm.setAttribute("oninput","return;"),fu=typeof Qm.oninput=="function"}hu=fu}else hu=!1;tx=hu&&(!document.documentMode||9<document.documentMode)}function Gm(){wo&&(wo.detachEvent("onpropertychange",nx),Vo=wo=null)}function nx(t){if(t.propertyName==="value"&&jc(Vo)){var e=[];ex(e,Vo,t,gh(t)),Lg(tw,e)}}function rw(t,e,n){t==="focusin"?(Gm(),wo=e,Vo=n,wo.attachEvent("onpropertychange",nx)):t==="focusout"&&Gm()}function sw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(Vo)}function iw(t,e){if(t==="click")return jc(e)}function ow(t,e){if(t==="input"||t==="change")return jc(e)}function aw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:aw;function $o(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hu.call(e,i)||!tr(t[i],e[i]))return!1}return!0}function Wm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,e){var n=Wm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wm(n)}}function rx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sx(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lw(t){var e=sx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rx(n.ownerDocument.documentElement,n)){if(r!==null&&kh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ym(n,o);var a=Ym(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cw=Sr&&"documentMode"in document&&11>=document.documentMode,ni=null,ud=null,jo=null,dd=!1;function Km(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dd||ni==null||ni!==Al(r)||(r=ni,"selectionStart"in r&&kh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jo&&$o(jo,r)||(jo=r,r=Ol(ud,"onSelect"),0<r.length&&(e=new jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ni)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ri={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},mu={},ix={};Sr&&(ix=document.createElement("div").style,"AnimationEvent"in window||(delete ri.animationend.animation,delete ri.animationiteration.animation,delete ri.animationstart.animation),"TransitionEvent"in window||delete ri.transitionend.transition);function Nc(t){if(mu[t])return mu[t];if(!ri[t])return t;var e=ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ix)return mu[t]=e[n];return t}var ox=Nc("animationend"),ax=Nc("animationiteration"),lx=Nc("animationstart"),cx=Nc("transitionend"),ux=new Map,Xm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){ux.set(t,e),$s(e,[t])}for(var pu=0;pu<Xm.length;pu++){var gu=Xm[pu],uw=gu.toLowerCase(),dw=gu[0].toUpperCase()+gu.slice(1);hs(uw,"on"+dw)}hs(ox,"onAnimationEnd");hs(ax,"onAnimationIteration");hs(lx,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(cx,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hw=new Set("cancel close invalid load scroll toggle".split(" ").concat(go));function Jm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ub(r,e,void 0,t),t.currentTarget=null}function dx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&i.isPropagationStopped())break e;Jm(i,c,d),o=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&i.isPropagationStopped())break e;Jm(i,c,d),o=u}}}if(Rl)throw t=od,Rl=!1,od=null,t}function lt(t,e){var n=e[gd];n===void 0&&(n=e[gd]=new Set);var r=t+"__bubble";n.has(r)||(hx(e,t,2,!1),n.add(r))}function xu(t,e,n){var r=0;e&&(r|=4),hx(n,t,r,e)}var za="_reactListening"+Math.random().toString(36).slice(2);function Bo(t){if(!t[za]){t[za]=!0,vg.forEach(function(n){n!=="selectionchange"&&(hw.has(n)||xu(n,!1,t),xu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[za]||(e[za]=!0,xu("selectionchange",!1,e))}}function hx(t,e,n,r){switch(Yg(e)){case 1:var i=Eb;break;case 4:i=_b;break;default:i=bh}n=i.bind(null,e,n,t),i=void 0,!id||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yu(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;c!==null;){if(a=js(c),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}c=c.parentNode}}r=r.return}Lg(function(){var d=o,f=gh(n),g=[];e:{var y=ux.get(t);if(y!==void 0){var N=jh,b=t;switch(t){case"keypress":if(fl(n)===0)break e;case"keydown":case"keyup":N=Bb;break;case"focusin":b="focus",N=du;break;case"focusout":b="blur",N=du;break;case"beforeblur":case"afterblur":N=du;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Vm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Hb;break;case ox:case ax:case lx:N=Pb;break;case cx:N=Gb;break;case"scroll":N=Cb;break;case"wheel":N=Yb;break;case"copy":case"cut":case"paste":N=Lb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Bm}var C=(e&4)!==0,P=!C&&t==="scroll",_=C?y!==null?y+"Capture":null:y;C=[];for(var j=d,S;j!==null;){S=j;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,_!==null&&(I=Mo(j,_),I!=null&&C.push(Uo(j,I,S)))),P)break;j=j.return}0<C.length&&(y=new N(y,b,null,n,f),g.push({event:y,listeners:C}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",y&&n!==rd&&(b=n.relatedTarget||n.fromElement)&&(js(b)||b[kr]))break e;if((N||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,N?(b=n.relatedTarget||n.toElement,N=d,b=b?js(b):null,b!==null&&(P=Bs(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(N=null,b=d),N!==b)){if(C=Vm,I="onMouseLeave",_="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(C=Bm,I="onPointerLeave",_="onPointerEnter",j="pointer"),P=N==null?y:si(N),S=b==null?y:si(b),y=new C(I,j+"leave",N,n,f),y.target=P,y.relatedTarget=S,I=null,js(f)===d&&(C=new C(_,j+"enter",b,n,f),C.target=S,C.relatedTarget=P,I=C),P=I,N&&b)t:{for(C=N,_=b,j=0,S=C;S;S=Ys(S))j++;for(S=0,I=_;I;I=Ys(I))S++;for(;0<j-S;)C=Ys(C),j--;for(;0<S-j;)_=Ys(_),S--;for(;j--;){if(C===_||_!==null&&C===_.alternate)break t;C=Ys(C),_=Ys(_)}C=null}else C=null;N!==null&&Zm(g,y,N,C,!1),b!==null&&P!==null&&Zm(g,P,b,C,!0)}}e:{if(y=d?si(d):window,N=y.nodeName&&y.nodeName.toLowerCase(),N==="select"||N==="input"&&y.type==="file")var D=nw;else if(Hm(y))if(tx)D=ow;else{D=sw;var M=rw}else(N=y.nodeName)&&N.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(D=iw);if(D&&(D=D(t,d))){ex(g,D,n,f);break e}M&&M(t,y,d),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Ju(y,"number",y.value)}switch(M=d?si(d):window,t){case"focusin":(Hm(M)||M.contentEditable==="true")&&(ni=M,ud=d,jo=null);break;case"focusout":jo=ud=ni=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Km(g,n,f);break;case"selectionchange":if(cw)break;case"keydown":case"keyup":Km(g,n,f)}var k;if(Sh)e:{switch(t){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else ti?Jg(t,n)&&(m="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(m="onCompositionStart");m&&(Xg&&n.locale!=="ko"&&(ti||m!=="onCompositionStart"?m==="onCompositionEnd"&&ti&&(k=Kg()):(Hr=f,wh="value"in Hr?Hr.value:Hr.textContent,ti=!0)),M=Ol(d,m),0<M.length&&(m=new $m(m,t,null,n,f),g.push({event:m,listeners:M}),k?m.data=k:(k=Zg(n),k!==null&&(m.data=k)))),(k=Xb?Jb(t,n):Zb(t,n))&&(d=Ol(d,"onBeforeInput"),0<d.length&&(f=new $m("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=k))}dx(g,e)})}function Uo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ol(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Mo(t,n),o!=null&&r.unshift(Uo(t,o,i)),o=Mo(t,e),o!=null&&r.push(Uo(t,o,i))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zm(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=Mo(n,o),u!=null&&a.unshift(Uo(n,u,c))):i||(u=Mo(n,o),u!=null&&a.push(Uo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var fw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function ep(t){return(typeof t=="string"?t:""+t).replace(fw,`
`).replace(mw,"")}function Va(t,e,n){if(e=ep(e),ep(t)!==e&&n)throw Error(de(425))}function Fl(){}var hd=null,fd=null;function md(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pd=typeof setTimeout=="function"?setTimeout:void 0,pw=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(t){return tp.resolve(null).then(t).catch(xw)}:pd;function xw(t){setTimeout(function(){throw t})}function vu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zo(e)}function Jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function np(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),or="__reactFiber$"+Mi,qo="__reactProps$"+Mi,kr="__reactContainer$"+Mi,gd="__reactEvents$"+Mi,yw="__reactListeners$"+Mi,vw="__reactHandles$"+Mi;function js(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kr]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=np(t);t!==null;){if(n=t[or])return n;t=np(t)}return e}t=n,n=t.parentNode}return null}function la(t){return t=t[or]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Sc(t){return t[qo]||null}var xd=[],ii=-1;function fs(t){return{current:t}}function ut(t){0>ii||(t.current=xd[ii],xd[ii]=null,ii--)}function st(t,e){ii++,xd[ii]=t.current,t.current=e}var os={},cn=fs(os),vn=fs(!1),Rs=os;function wi(t,e){var n=t.type.contextTypes;if(!n)return os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bn(t){return t=t.childContextTypes,t!=null}function zl(){ut(vn),ut(cn)}function rp(t,e,n){if(cn.current!==os)throw Error(de(168));st(cn,e),st(vn,n)}function fx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(de(108,rb(t)||"Unknown",i));return bt({},n,r)}function Vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||os,Rs=cn.current,st(cn,t),st(vn,vn.current),!0}function sp(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=fx(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,ut(vn),ut(cn),st(cn,t)):ut(vn),st(vn,n)}var gr=null,kc=!1,bu=!1;function mx(t){gr===null?gr=[t]:gr.push(t)}function bw(t){kc=!0,mx(t)}function ms(){if(!bu&&gr!==null){bu=!0;var t=0,e=Xe;try{var n=gr;for(Xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gr=null,kc=!1}catch(i){throw gr!==null&&(gr=gr.slice(t+1)),zg(xh,ms),i}finally{Xe=e,bu=!1}}return null}var oi=[],ai=0,$l=null,Bl=0,Dn=[],Ln=0,Ps=null,xr=1,yr="";function vs(t,e){oi[ai++]=Bl,oi[ai++]=$l,$l=t,Bl=e}function px(t,e,n){Dn[Ln++]=xr,Dn[Ln++]=yr,Dn[Ln++]=Ps,Ps=t;var r=xr;t=yr;var i=32-Zn(r)-1;r&=~(1<<i),n+=1;var o=32-Zn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xr=1<<32-Zn(e)+i|n<<i|r,yr=o+t}else xr=1<<o|n<<i|r,yr=t}function Eh(t){t.return!==null&&(vs(t,1),px(t,1,0))}function _h(t){for(;t===$l;)$l=oi[--ai],oi[ai]=null,Bl=oi[--ai],oi[ai]=null;for(;t===Ps;)Ps=Dn[--Ln],Dn[Ln]=null,yr=Dn[--Ln],Dn[Ln]=null,xr=Dn[--Ln],Dn[Ln]=null}var Tn=null,Cn=null,mt=!1,Wn=null;function gx(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ip(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,Cn=Jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:xr,overflow:yr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,Cn=null,!0):!1;default:return!1}}function yd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vd(t){if(mt){var e=Cn;if(e){var n=e;if(!ip(t,e)){if(yd(t))throw Error(de(418));e=Jr(n.nextSibling);var r=Tn;e&&ip(t,e)?gx(r,n):(t.flags=t.flags&-4097|2,mt=!1,Tn=t)}}else{if(yd(t))throw Error(de(418));t.flags=t.flags&-4097|2,mt=!1,Tn=t}}}function op(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function $a(t){if(t!==Tn)return!1;if(!mt)return op(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!md(t.type,t.memoizedProps)),e&&(e=Cn)){if(yd(t))throw xx(),Error(de(418));for(;e;)gx(t,e),e=Jr(e.nextSibling)}if(op(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Tn?Jr(t.stateNode.nextSibling):null;return!0}function xx(){for(var t=Cn;t;)t=Jr(t.nextSibling)}function ji(){Cn=Tn=null,mt=!1}function Ch(t){Wn===null?Wn=[t]:Wn.push(t)}var ww=Ar.ReactCurrentBatchConfig;function ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=i.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Ba(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ap(t){var e=t._init;return e(t._payload)}function yx(t){function e(_,j){if(t){var S=_.deletions;S===null?(_.deletions=[j],_.flags|=16):S.push(j)}}function n(_,j){if(!t)return null;for(;j!==null;)e(_,j),j=j.sibling;return null}function r(_,j){for(_=new Map;j!==null;)j.key!==null?_.set(j.key,j):_.set(j.index,j),j=j.sibling;return _}function i(_,j){return _=ns(_,j),_.index=0,_.sibling=null,_}function o(_,j,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<j?(_.flags|=2,j):S):(_.flags|=2,j)):(_.flags|=1048576,j)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,j,S,I){return j===null||j.tag!==6?(j=_u(S,_.mode,I),j.return=_,j):(j=i(j,S),j.return=_,j)}function u(_,j,S,I){var D=S.type;return D===ei?f(_,j,S.props.children,I,S.key):j!==null&&(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Vr&&ap(D)===j.type)?(I=i(j,S.props),I.ref=ro(_,j,S),I.return=_,I):(I=bl(S.type,S.key,S.props,null,_.mode,I),I.ref=ro(_,j,S),I.return=_,I)}function d(_,j,S,I){return j===null||j.tag!==4||j.stateNode.containerInfo!==S.containerInfo||j.stateNode.implementation!==S.implementation?(j=Cu(S,_.mode,I),j.return=_,j):(j=i(j,S.children||[]),j.return=_,j)}function f(_,j,S,I,D){return j===null||j.tag!==7?(j=Ts(S,_.mode,I,D),j.return=_,j):(j=i(j,S),j.return=_,j)}function g(_,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return j=_u(""+j,_.mode,S),j.return=_,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ia:return S=bl(j.type,j.key,j.props,null,_.mode,S),S.ref=ro(_,null,j),S.return=_,S;case Zs:return j=Cu(j,_.mode,S),j.return=_,j;case Vr:var I=j._init;return g(_,I(j._payload),S)}if(mo(j)||Ji(j))return j=Ts(j,_.mode,S,null),j.return=_,j;Ba(_,j)}return null}function y(_,j,S,I){var D=j!==null?j.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:c(_,j,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:return S.key===D?u(_,j,S,I):null;case Zs:return S.key===D?d(_,j,S,I):null;case Vr:return D=S._init,y(_,j,D(S._payload),I)}if(mo(S)||Ji(S))return D!==null?null:f(_,j,S,I,null);Ba(_,S)}return null}function N(_,j,S,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(S)||null,c(j,_,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ia:return _=_.get(I.key===null?S:I.key)||null,u(j,_,I,D);case Zs:return _=_.get(I.key===null?S:I.key)||null,d(j,_,I,D);case Vr:var M=I._init;return N(_,j,S,M(I._payload),D)}if(mo(I)||Ji(I))return _=_.get(S)||null,f(j,_,I,D,null);Ba(j,I)}return null}function b(_,j,S,I){for(var D=null,M=null,k=j,m=j=0,x=null;k!==null&&m<S.length;m++){k.index>m?(x=k,k=null):x=k.sibling;var w=y(_,k,S[m],I);if(w===null){k===null&&(k=x);break}t&&k&&w.alternate===null&&e(_,k),j=o(w,j,m),M===null?D=w:M.sibling=w,M=w,k=x}if(m===S.length)return n(_,k),mt&&vs(_,m),D;if(k===null){for(;m<S.length;m++)k=g(_,S[m],I),k!==null&&(j=o(k,j,m),M===null?D=k:M.sibling=k,M=k);return mt&&vs(_,m),D}for(k=r(_,k);m<S.length;m++)x=N(k,_,m,S[m],I),x!==null&&(t&&x.alternate!==null&&k.delete(x.key===null?m:x.key),j=o(x,j,m),M===null?D=x:M.sibling=x,M=x);return t&&k.forEach(function(A){return e(_,A)}),mt&&vs(_,m),D}function C(_,j,S,I){var D=Ji(S);if(typeof D!="function")throw Error(de(150));if(S=D.call(S),S==null)throw Error(de(151));for(var M=D=null,k=j,m=j=0,x=null,w=S.next();k!==null&&!w.done;m++,w=S.next()){k.index>m?(x=k,k=null):x=k.sibling;var A=y(_,k,w.value,I);if(A===null){k===null&&(k=x);break}t&&k&&A.alternate===null&&e(_,k),j=o(A,j,m),M===null?D=A:M.sibling=A,M=A,k=x}if(w.done)return n(_,k),mt&&vs(_,m),D;if(k===null){for(;!w.done;m++,w=S.next())w=g(_,w.value,I),w!==null&&(j=o(w,j,m),M===null?D=w:M.sibling=w,M=w);return mt&&vs(_,m),D}for(k=r(_,k);!w.done;m++,w=S.next())w=N(k,_,m,w.value,I),w!==null&&(t&&w.alternate!==null&&k.delete(w.key===null?m:w.key),j=o(w,j,m),M===null?D=w:M.sibling=w,M=w);return t&&k.forEach(function(E){return e(_,E)}),mt&&vs(_,m),D}function P(_,j,S,I){if(typeof S=="object"&&S!==null&&S.type===ei&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:e:{for(var D=S.key,M=j;M!==null;){if(M.key===D){if(D=S.type,D===ei){if(M.tag===7){n(_,M.sibling),j=i(M,S.props.children),j.return=_,_=j;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Vr&&ap(D)===M.type){n(_,M.sibling),j=i(M,S.props),j.ref=ro(_,M,S),j.return=_,_=j;break e}n(_,M);break}else e(_,M);M=M.sibling}S.type===ei?(j=Ts(S.props.children,_.mode,I,S.key),j.return=_,_=j):(I=bl(S.type,S.key,S.props,null,_.mode,I),I.ref=ro(_,j,S),I.return=_,_=I)}return a(_);case Zs:e:{for(M=S.key;j!==null;){if(j.key===M)if(j.tag===4&&j.stateNode.containerInfo===S.containerInfo&&j.stateNode.implementation===S.implementation){n(_,j.sibling),j=i(j,S.children||[]),j.return=_,_=j;break e}else{n(_,j);break}else e(_,j);j=j.sibling}j=Cu(S,_.mode,I),j.return=_,_=j}return a(_);case Vr:return M=S._init,P(_,j,M(S._payload),I)}if(mo(S))return b(_,j,S,I);if(Ji(S))return C(_,j,S,I);Ba(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,j!==null&&j.tag===6?(n(_,j.sibling),j=i(j,S),j.return=_,_=j):(n(_,j),j=_u(S,_.mode,I),j.return=_,_=j),a(_)):n(_,j)}return P}var Ni=yx(!0),vx=yx(!1),Ul=fs(null),ql=null,li=null,Th=null;function Ah(){Th=li=ql=null}function Ih(t){var e=Ul.current;ut(Ul),t._currentValue=e}function bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pi(t,e){ql=t,Th=li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Th!==t)if(t={context:t,memoizedValue:e,next:null},li===null){if(ql===null)throw Error(de(308));li=t,ql.dependencies={lanes:0,firstContext:t}}else li=li.next=t;return e}var Ns=null;function Rh(t){Ns===null?Ns=[t]:Ns.push(t)}function bx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Rh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Er(t,r)}function Er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function Ph(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Er(t,n)}return i=r.interleaved,i===null?(e.next=e,Rh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Er(t,n)}function ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}function lp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hl(t,e,n,r){var i=t.updateQueue;$r=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(o!==null){var g=i.baseState;a=0,f=d=u=null,c=o;do{var y=c.lane,N=c.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:N,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,C=c;switch(y=e,N=n,C.tag){case 1:if(b=C.payload,typeof b=="function"){g=b.call(N,g,y);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=C.payload,y=typeof b=="function"?b.call(N,g,y):b,y==null)break e;g=bt({},g,y);break e;case 2:$r=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[c]:y.push(c))}else N={eventTime:N,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=N,u=g):f=f.next=N,a|=y;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;y=c,c=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(f===null&&(u=g),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ls|=a,t.lanes=a,t.memoizedState=g}}function cp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(de(191,i));i.call(r)}}}var ca={},lr=fs(ca),Ho=fs(ca),Qo=fs(ca);function Ss(t){if(t===ca)throw Error(de(174));return t}function Dh(t,e){switch(st(Qo,e),st(Ho,t),st(lr,ca),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ed(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ed(e,t)}ut(lr),st(lr,e)}function Si(){ut(lr),ut(Ho),ut(Qo)}function jx(t){Ss(Qo.current);var e=Ss(lr.current),n=ed(e,t.type);e!==n&&(st(Ho,t),st(lr,n))}function Lh(t){Ho.current===t&&(ut(lr),ut(Ho))}var yt=fs(0);function Ql(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wu=[];function Mh(){for(var t=0;t<wu.length;t++)wu[t]._workInProgressVersionPrimary=null;wu.length=0}var pl=Ar.ReactCurrentDispatcher,ju=Ar.ReactCurrentBatchConfig,Ds=0,vt=null,Mt=null,Vt=null,Gl=!1,No=!1,Go=0,jw=0;function en(){throw Error(de(321))}function Oh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function Fh(t,e,n,r,i,o){if(Ds=o,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pl.current=t===null||t.memoizedState===null?Ew:_w,t=n(r,i),No){o=0;do{if(No=!1,Go=0,25<=o)throw Error(de(301));o+=1,Vt=Mt=null,e.updateQueue=null,pl.current=Cw,t=n(r,i)}while(No)}if(pl.current=Wl,e=Mt!==null&&Mt.next!==null,Ds=0,Vt=Mt=vt=null,Gl=!1,e)throw Error(de(300));return t}function zh(){var t=Go!==0;return Go=0,t}function sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?vt.memoizedState=Vt=t:Vt=Vt.next=t,Vt}function zn(){if(Mt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=Vt===null?vt.memoizedState:Vt.next;if(e!==null)Vt=e,Mt=t;else{if(t===null)throw Error(de(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Vt===null?vt.memoizedState=Vt=t:Vt=Vt.next=t}return Vt}function Wo(t,e){return typeof e=="function"?e(t):e}function Nu(t){var e=zn(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=Mt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=a=null,u=null,d=o;do{var f=d.lane;if((Ds&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,a=r):u=u.next=g,vt.lanes|=f,Ls|=f}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=c,tr(r,e.memoizedState)||(yn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,vt.lanes|=o,Ls|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Su(t){var e=zn(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);tr(o,e.memoizedState)||(yn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Nx(){}function Sx(t,e){var n=vt,r=zn(),i=e(),o=!tr(r.memoizedState,i);if(o&&(r.memoizedState=i,yn=!0),r=r.queue,Vh(_x.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Yo(9,Ex.bind(null,n,r,i,e),void 0,null),Bt===null)throw Error(de(349));Ds&30||kx(n,e,i)}return i}function kx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ex(t,e,n,r){e.value=n,e.getSnapshot=r,Cx(e)&&Tx(t)}function _x(t,e,n){return n(function(){Cx(e)&&Tx(t)})}function Cx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function Tx(t){var e=Er(t,1);e!==null&&er(e,t,1,-1)}function up(t){var e=sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:t},e.queue=t,t=t.dispatch=kw.bind(null,vt,t),[e.memoizedState,t]}function Yo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ax(){return zn().memoizedState}function gl(t,e,n,r){var i=sr();vt.flags|=t,i.memoizedState=Yo(1|e,n,void 0,r===void 0?null:r)}function Ec(t,e,n,r){var i=zn();r=r===void 0?null:r;var o=void 0;if(Mt!==null){var a=Mt.memoizedState;if(o=a.destroy,r!==null&&Oh(r,a.deps)){i.memoizedState=Yo(e,n,o,r);return}}vt.flags|=t,i.memoizedState=Yo(1|e,n,o,r)}function dp(t,e){return gl(8390656,8,t,e)}function Vh(t,e){return Ec(2048,8,t,e)}function Ix(t,e){return Ec(4,2,t,e)}function Rx(t,e){return Ec(4,4,t,e)}function Px(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dx(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,Px.bind(null,e,t),n)}function $h(){}function Lx(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mx(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Oh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ox(t,e,n){return Ds&21?(tr(n,e)||(n=Bg(),vt.lanes|=n,Ls|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yn=!0),t.memoizedState=n)}function Nw(t,e){var n=Xe;Xe=n!==0&&4>n?n:4,t(!0);var r=ju.transition;ju.transition={};try{t(!1),e()}finally{Xe=n,ju.transition=r}}function Fx(){return zn().memoizedState}function Sw(t,e,n){var r=ts(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zx(t))Vx(e,n);else if(n=bx(t,e,n,r),n!==null){var i=fn();er(n,t,r,i),$x(n,e,r)}}function kw(t,e,n){var r=ts(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zx(t))Vx(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(i.hasEagerState=!0,i.eagerState=c,tr(c,a)){var u=e.interleaved;u===null?(i.next=i,Rh(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=bx(t,e,i,r),n!==null&&(i=fn(),er(n,t,r,i),$x(n,e,r))}}function zx(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function Vx(t,e){No=Gl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $x(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,yh(t,n)}}var Wl={readContext:Fn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},Ew={readContext:Fn,useCallback:function(t,e){return sr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:dp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gl(4194308,4,Px.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gl(4194308,4,t,e)},useInsertionEffect:function(t,e){return gl(4,2,t,e)},useMemo:function(t,e){var n=sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sw.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=sr();return t={current:t},e.memoizedState=t},useState:up,useDebugValue:$h,useDeferredValue:function(t){return sr().memoizedState=t},useTransition:function(){var t=up(!1),e=t[0];return t=Nw.bind(null,t[1]),sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,i=sr();if(mt){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),Bt===null)throw Error(de(349));Ds&30||kx(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,dp(_x.bind(null,r,o,t),[t]),r.flags|=2048,Yo(9,Ex.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=sr(),e=Bt.identifierPrefix;if(mt){var n=yr,r=xr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Go++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_w={readContext:Fn,useCallback:Lx,useContext:Fn,useEffect:Vh,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:Rx,useMemo:Mx,useReducer:Nu,useRef:Ax,useState:function(){return Nu(Wo)},useDebugValue:$h,useDeferredValue:function(t){var e=zn();return Ox(e,Mt.memoizedState,t)},useTransition:function(){var t=Nu(Wo)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Sx,useId:Fx,unstable_isNewReconciler:!1},Cw={readContext:Fn,useCallback:Lx,useContext:Fn,useEffect:Vh,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:Rx,useMemo:Mx,useReducer:Su,useRef:Ax,useState:function(){return Su(Wo)},useDebugValue:$h,useDeferredValue:function(t){var e=zn();return Mt===null?e.memoizedState=t:Ox(e,Mt.memoizedState,t)},useTransition:function(){var t=Su(Wo)[0],e=zn().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Sx,useId:Fx,unstable_isNewReconciler:!1};function Hn(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _c={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fn(),i=ts(t),o=vr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Zr(t,o,i),e!==null&&(er(e,t,i,r),ml(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fn(),i=ts(t),o=vr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Zr(t,o,i),e!==null&&(er(e,t,i,r),ml(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fn(),r=ts(t),i=vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Zr(t,i,r),e!==null&&(er(e,t,r,n),ml(e,t,r))}};function hp(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!$o(n,r)||!$o(i,o):!0}function Bx(t,e,n){var r=!1,i=os,o=e.contextType;return typeof o=="object"&&o!==null?o=Fn(o):(i=bn(e)?Rs:cn.current,r=e.contextTypes,o=(r=r!=null)?wi(t,i):os),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function fp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_c.enqueueReplaceState(e,e.state,null)}function jd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ph(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Fn(o):(o=bn(e)?Rs:cn.current,i.context=wi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(wd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_c.enqueueReplaceState(i,i.state,null),Hl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=nb(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Tw=typeof WeakMap=="function"?WeakMap:Map;function Ux(t,e,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kl||(Kl=!0,Pd=r),Nd(t,e)},n}function qx(t,e,n){n=vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nd(t,e),typeof r!="function"&&(es===null?es=new Set([this]):es.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function mp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Tw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Uw.bind(null,t,e,n),e.then(t,t))}function pp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gp(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vr(-1,1),e.tag=2,Zr(n,e,1))),n.lanes|=1),t)}var Aw=Ar.ReactCurrentOwner,yn=!1;function hn(t,e,n,r){e.child=t===null?vx(e,null,n,r):Ni(e,t.child,n,r)}function xp(t,e,n,r,i){n=n.render;var o=e.ref;return pi(e,i),r=Fh(t,e,n,r,o,i),n=zh(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(mt&&n&&Eh(e),e.flags|=1,hn(t,e,r,i),e.child)}function yp(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Yh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Hx(t,e,o,r,i)):(t=bl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:$o,n(a,r)&&t.ref===e.ref)return _r(t,e,i)}return e.flags|=1,t=ns(o,r),t.ref=e.ref,t.return=e,e.child=t}function Hx(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if($o(o,r)&&t.ref===e.ref)if(yn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(yn=!0);else return e.lanes=t.lanes,_r(t,e,i)}return Sd(t,e,n,r,i)}function Qx(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(ui,_n),_n|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(ui,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,st(ui,_n),_n|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,st(ui,_n),_n|=r;return hn(t,e,i,n),e.child}function Gx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sd(t,e,n,r,i){var o=bn(n)?Rs:cn.current;return o=wi(e,o),pi(e,i),n=Fh(t,e,n,r,o,i),r=zh(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(mt&&r&&Eh(e),e.flags|=1,hn(t,e,n,i),e.child)}function vp(t,e,n,r,i){if(bn(n)){var o=!0;Vl(e)}else o=!1;if(pi(e,i),e.stateNode===null)xl(t,e),Bx(e,n,r),jd(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=bn(n)?Rs:cn.current,d=wi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&fp(e,a,r,d),$r=!1;var y=e.memoizedState;a.state=y,Hl(e,r,a,i),u=e.memoizedState,c!==r||y!==u||vn.current||$r?(typeof f=="function"&&(wd(e,n,f,r),u=e.memoizedState),(c=$r||hp(e,n,c,r,y,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,wx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Hn(e.type,c),a.props=d,g=e.pendingProps,y=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Fn(u):(u=bn(n)?Rs:cn.current,u=wi(e,u));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==g||y!==u)&&fp(e,a,r,u),$r=!1,y=e.memoizedState,a.state=y,Hl(e,r,a,i);var b=e.memoizedState;c!==g||y!==b||vn.current||$r?(typeof N=="function"&&(wd(e,n,N,r),b=e.memoizedState),(d=$r||hp(e,n,d,r,y,b,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return kd(t,e,n,r,o,i)}function kd(t,e,n,r,i,o){Gx(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&sp(e,n,!1),_r(t,e,o);r=e.stateNode,Aw.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ni(e,t.child,null,o),e.child=Ni(e,null,c,o)):hn(t,e,c,o),e.memoizedState=r.state,i&&sp(e,n,!0),e.child}function Wx(t){var e=t.stateNode;e.pendingContext?rp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rp(t,e.context,!1),Dh(t,e.containerInfo)}function bp(t,e,n,r,i){return ji(),Ch(i),e.flags|=256,hn(t,e,n,r),e.child}var Ed={dehydrated:null,treeContext:null,retryLane:0};function _d(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yx(t,e,n){var r=e.pendingProps,i=yt.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),st(yt,i&1),t===null)return vd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Ac(a,r,0,null),t=Ts(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=_d(n),e.memoizedState=Ed,t):Bh(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return Iw(t,e,a,r,c,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ns(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=ns(c,o):(o=Ts(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?_d(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Ed,r}return o=t.child,t=o.sibling,r=ns(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bh(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ua(t,e,n,r){return r!==null&&Ch(r),Ni(e,t.child,null,n),t=Bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Iw(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=ku(Error(de(422))),Ua(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Ac({mode:"visible",children:r.children},i,0,null),o=Ts(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ni(e,t.child,null,a),e.child.memoizedState=_d(a),e.memoizedState=Ed,o);if(!(e.mode&1))return Ua(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(de(419)),r=ku(o,r,void 0),Ua(t,e,a,r)}if(c=(a&t.childLanes)!==0,yn||c){if(r=Bt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Er(t,i),er(r,t,i,-1))}return Wh(),r=ku(Error(de(421))),Ua(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Cn=Jr(i.nextSibling),Tn=e,mt=!0,Wn=null,t!==null&&(Dn[Ln++]=xr,Dn[Ln++]=yr,Dn[Ln++]=Ps,xr=t.id,yr=t.overflow,Ps=e),e=Bh(e,r.children),e.flags|=4096,e)}function wp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bd(t.return,e,n)}function Eu(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Kx(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(hn(t,e,r.children,n),r=yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wp(t,n,e);else if(t.tag===19)wp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(yt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ql(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Eu(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ql(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Eu(e,!0,n,null,o);break;case"together":Eu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ls|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rw(t,e,n){switch(e.tag){case 3:Wx(e),ji();break;case 5:jx(e);break;case 1:bn(e.type)&&Vl(e);break;case 4:Dh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;st(Ul,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(st(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?Yx(t,e,n):(st(yt,yt.current&1),t=_r(t,e,n),t!==null?t.sibling:null);st(yt,yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(yt,yt.current),r)break;return null;case 22:case 23:return e.lanes=0,Qx(t,e,n)}return _r(t,e,n)}var Xx,Cd,Jx,Zx;Xx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cd=function(){};Jx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ss(lr.current);var o=null;switch(n){case"input":i=Ku(t,i),r=Ku(t,r),o=[];break;case"select":i=bt({},i,{value:void 0}),r=bt({},r,{value:void 0}),o=[];break;case"textarea":i=Zu(t,i),r=Zu(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fl)}td(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Do.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Do.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&lt("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Zx=function(t,e,n,r){n!==r&&(e.flags|=4)};function so(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pw(t,e,n){var r=e.pendingProps;switch(_h(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return bn(e.type)&&zl(),tn(e),null;case 3:return r=e.stateNode,Si(),ut(vn),ut(cn),Mh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&(Md(Wn),Wn=null))),Cd(t,e),tn(e),null;case 5:Lh(e);var i=Ss(Qo.current);if(n=e.type,t!==null&&e.stateNode!=null)Jx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return tn(e),null}if(t=Ss(lr.current),$a(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[or]=e,r[qo]=o,t=(e.mode&1)!==0,n){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<go.length;i++)lt(go[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":Am(r,o),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},lt("invalid",r);break;case"textarea":Rm(r,o),lt("invalid",r)}td(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Va(r.textContent,c,t),i=["children",""+c]):Do.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&lt("scroll",r)}switch(n){case"input":Ra(r),Im(r,o,!0);break;case"textarea":Ra(r),Pm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_g(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[or]=e,t[qo]=r,Xx(t,e,!1,!1),e.stateNode=t;e:{switch(a=nd(n,r),n){case"dialog":lt("cancel",t),lt("close",t),i=r;break;case"iframe":case"object":case"embed":lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<go.length;i++)lt(go[i],t);i=r;break;case"source":lt("error",t),i=r;break;case"img":case"image":case"link":lt("error",t),lt("load",t),i=r;break;case"details":lt("toggle",t),i=r;break;case"input":Am(t,r),i=Ku(t,r),lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=bt({},r,{value:void 0}),lt("invalid",t);break;case"textarea":Rm(t,r),i=Zu(t,r),lt("invalid",t);break;default:i=r}td(n,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?Ag(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Cg(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Lo(t,u):typeof u=="number"&&Lo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Do.hasOwnProperty(o)?u!=null&&o==="onScroll"&&lt("scroll",t):u!=null&&hh(t,o,u,a))}switch(n){case"input":Ra(t),Im(t,r,!1);break;case"textarea":Ra(t),Pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+is(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?di(t,!!r.multiple,o,!1):r.defaultValue!=null&&di(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)Zx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=Ss(Qo.current),Ss(lr.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(o=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return tn(e),null;case 13:if(ut(yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&Cn!==null&&e.mode&1&&!(e.flags&128))xx(),ji(),e.flags|=98560,o=!1;else if(o=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(de(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(de(317));o[or]=e}else ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),o=!1}else Wn!==null&&(Md(Wn),Wn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?Ft===0&&(Ft=3):Wh())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return Si(),Cd(t,e),t===null&&Bo(e.stateNode.containerInfo),tn(e),null;case 10:return Ih(e.type._context),tn(e),null;case 17:return bn(e.type)&&zl(),tn(e),null;case 19:if(ut(yt),o=e.memoizedState,o===null)return tn(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)so(o,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ql(t),a!==null){for(e.flags|=128,so(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(yt,yt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Et()>Ei&&(e.flags|=128,r=!0,so(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ql(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),so(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!mt)return tn(e),null}else 2*Et()-o.renderingStartTime>Ei&&n!==1073741824&&(e.flags|=128,r=!0,so(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Et(),e.sibling=null,n=yt.current,st(yt,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return Gh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function Dw(t,e){switch(_h(e),e.tag){case 1:return bn(e.type)&&zl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(),ut(vn),ut(cn),Mh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(ut(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(yt),null;case 4:return Si(),null;case 10:return Ih(e.type._context),null;case 22:case 23:return Gh(),null;case 24:return null;default:return null}}var qa=!1,on=!1,Lw=typeof WeakSet=="function"?WeakSet:Set,ge=null;function ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(t,e,r)}else n.current=null}function Td(t,e,n){try{n()}catch(r){jt(t,e,r)}}var jp=!1;function Mw(t,e){if(hd=Ll,t=sx(),kh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,g=t,y=null;t:for(;;){for(var N;g!==n||i!==0&&g.nodeType!==3||(c=a+i),g!==o||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(N=g.firstChild)!==null;)y=g,g=N;for(;;){if(g===t)break t;if(y===n&&++d===i&&(c=a),y===o&&++f===r&&(u=a),(N=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=N}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(fd={focusedElem:t,selectionRange:n},Ll=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var C=b.memoizedProps,P=b.memoizedState,_=e.stateNode,j=_.getSnapshotBeforeUpdate(e.elementType===e.type?C:Hn(e.type,C),P);_.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(I){jt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return b=jp,jp=!1,b}function So(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Td(e,n,o)}i=i.next}while(i!==r)}}function Cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ad(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ey(t){var e=t.alternate;e!==null&&(t.alternate=null,ey(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[qo],delete e[gd],delete e[yw],delete e[vw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ty(t){return t.tag===5||t.tag===3||t.tag===4}function Np(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ty(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fl));else if(r!==4&&(t=t.child,t!==null))for(Id(t,e,n),t=t.sibling;t!==null;)Id(t,e,n),t=t.sibling}function Rd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rd(t,e,n),t=t.sibling;t!==null;)Rd(t,e,n),t=t.sibling}var qt=null,Qn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)ny(t,e,n),n=n.sibling}function ny(t,e,n){if(ar&&typeof ar.onCommitFiberUnmount=="function")try{ar.onCommitFiberUnmount(bc,n)}catch{}switch(n.tag){case 5:on||ci(n,e);case 6:var r=qt,i=Qn;qt=null,Lr(t,e,n),qt=r,Qn=i,qt!==null&&(Qn?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Qn?(t=qt,n=n.stateNode,t.nodeType===8?vu(t.parentNode,n):t.nodeType===1&&vu(t,n),zo(t)):vu(qt,n.stateNode));break;case 4:r=qt,i=Qn,qt=n.stateNode.containerInfo,Qn=!0,Lr(t,e,n),qt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Td(n,e,a),i=i.next}while(i!==r)}Lr(t,e,n);break;case 1:if(!on&&(ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){jt(n,e,c)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,Lr(t,e,n),on=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function Sp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lw),e.forEach(function(r){var i=Hw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:qt=c.stateNode,Qn=!1;break e;case 3:qt=c.stateNode.containerInfo,Qn=!0;break e;case 4:qt=c.stateNode.containerInfo,Qn=!0;break e}c=c.return}if(qt===null)throw Error(de(160));ny(o,a,i),qt=null,Qn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){jt(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ry(e,t),e=e.sibling}function ry(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),rr(t),r&4){try{So(3,t,t.return),Cc(3,t)}catch(C){jt(t,t.return,C)}try{So(5,t,t.return)}catch(C){jt(t,t.return,C)}}break;case 1:qn(e,t),rr(t),r&512&&n!==null&&ci(n,n.return);break;case 5:if(qn(e,t),rr(t),r&512&&n!==null&&ci(n,n.return),t.flags&32){var i=t.stateNode;try{Lo(i,"")}catch(C){jt(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&kg(i,o),nd(c,a);var d=nd(c,o);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?Ag(i,g):f==="dangerouslySetInnerHTML"?Cg(i,g):f==="children"?Lo(i,g):hh(i,f,g,d)}switch(c){case"input":Xu(i,o);break;case"textarea":Eg(i,o);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var N=o.value;N!=null?di(i,!!o.multiple,N,!1):y!==!!o.multiple&&(o.defaultValue!=null?di(i,!!o.multiple,o.defaultValue,!0):di(i,!!o.multiple,o.multiple?[]:"",!1))}i[qo]=o}catch(C){jt(t,t.return,C)}}break;case 6:if(qn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(de(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(C){jt(t,t.return,C)}}break;case 3:if(qn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zo(e.containerInfo)}catch(C){jt(t,t.return,C)}break;case 4:qn(e,t),rr(t);break;case 13:qn(e,t),rr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Hh=Et())),r&4&&Sp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(on=(d=on)||f,qn(e,t),on=d):qn(e,t),rr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(ge=t,f=t.child;f!==null;){for(g=ge=f;ge!==null;){switch(y=ge,N=y.child,y.tag){case 0:case 11:case 14:case 15:So(4,y,y.return);break;case 1:ci(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(C){jt(r,n,C)}}break;case 5:ci(y,y.return);break;case 22:if(y.memoizedState!==null){Ep(g);continue}}N!==null?(N.return=y,ge=N):Ep(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Tg("display",a))}catch(C){jt(t,t.return,C)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){jt(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:qn(e,t),rr(t),r&4&&Sp(t);break;case 21:break;default:qn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ty(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lo(i,""),r.flags&=-33);var o=Np(t);Rd(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Np(t);Id(t,c,a);break;default:throw Error(de(161))}}catch(u){jt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ow(t,e,n){ge=t,sy(t)}function sy(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||qa;if(!a){var c=i.alternate,u=c!==null&&c.memoizedState!==null||on;c=qa;var d=on;if(qa=a,(on=u)&&!d)for(ge=i;ge!==null;)a=ge,u=a.child,a.tag===22&&a.memoizedState!==null?_p(i):u!==null?(u.return=a,ge=u):_p(i);for(;o!==null;)ge=o,sy(o),o=o.sibling;ge=i,qa=c,on=d}kp(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ge=o):kp(t)}}function kp(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||Cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cp(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cp(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&zo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}on||e.flags&512&&Ad(e)}catch(y){jt(e,e.return,y)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Ep(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function _p(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cc(4,e)}catch(u){jt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){jt(e,i,u)}}var o=e.return;try{Ad(e)}catch(u){jt(e,o,u)}break;case 5:var a=e.return;try{Ad(e)}catch(u){jt(e,a,u)}}}catch(u){jt(e,e.return,u)}if(e===t){ge=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ge=c;break}ge=e.return}}var Fw=Math.ceil,Yl=Ar.ReactCurrentDispatcher,Uh=Ar.ReactCurrentOwner,On=Ar.ReactCurrentBatchConfig,Ue=0,Bt=null,It=null,Wt=0,_n=0,ui=fs(0),Ft=0,Ko=null,Ls=0,Tc=0,qh=0,ko=null,xn=null,Hh=0,Ei=1/0,pr=null,Kl=!1,Pd=null,es=null,Ha=!1,Qr=null,Xl=0,Eo=0,Dd=null,yl=-1,vl=0;function fn(){return Ue&6?Et():yl!==-1?yl:yl=Et()}function ts(t){return t.mode&1?Ue&2&&Wt!==0?Wt&-Wt:ww.transition!==null?(vl===0&&(vl=Bg()),vl):(t=Xe,t!==0||(t=window.event,t=t===void 0?16:Yg(t.type)),t):1}function er(t,e,n,r){if(50<Eo)throw Eo=0,Dd=null,Error(de(185));oa(t,n,r),(!(Ue&2)||t!==Bt)&&(t===Bt&&(!(Ue&2)&&(Tc|=n),Ft===4&&qr(t,Wt)),wn(t,r),n===1&&Ue===0&&!(e.mode&1)&&(Ei=Et()+500,kc&&ms()))}function wn(t,e){var n=t.callbackNode;wb(t,e);var r=Dl(t,t===Bt?Wt:0);if(r===0)n!==null&&Mm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mm(n),e===1)t.tag===0?bw(Cp.bind(null,t)):mx(Cp.bind(null,t)),gw(function(){!(Ue&6)&&ms()}),n=null;else{switch(Ug(r)){case 1:n=xh;break;case 4:n=Vg;break;case 16:n=Pl;break;case 536870912:n=$g;break;default:n=Pl}n=hy(n,iy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iy(t,e){if(yl=-1,vl=0,Ue&6)throw Error(de(327));var n=t.callbackNode;if(gi()&&t.callbackNode!==n)return null;var r=Dl(t,t===Bt?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jl(t,r);else{e=r;var i=Ue;Ue|=2;var o=ay();(Bt!==t||Wt!==e)&&(pr=null,Ei=Et()+500,Cs(t,e));do try{$w();break}catch(c){oy(t,c)}while(1);Ah(),Yl.current=o,Ue=i,It!==null?e=0:(Bt=null,Wt=0,e=Ft)}if(e!==0){if(e===2&&(i=ad(t),i!==0&&(r=i,e=Ld(t,i))),e===1)throw n=Ko,Cs(t,0),qr(t,r),wn(t,Et()),n;if(e===6)qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!zw(i)&&(e=Jl(t,r),e===2&&(o=ad(t),o!==0&&(r=o,e=Ld(t,o))),e===1))throw n=Ko,Cs(t,0),qr(t,r),wn(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:bs(t,xn,pr);break;case 3:if(qr(t,r),(r&130023424)===r&&(e=Hh+500-Et(),10<e)){if(Dl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pd(bs.bind(null,t,xn,pr),e);break}bs(t,xn,pr);break;case 4:if(qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Zn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fw(r/1960))-r,10<r){t.timeoutHandle=pd(bs.bind(null,t,xn,pr),r);break}bs(t,xn,pr);break;case 5:bs(t,xn,pr);break;default:throw Error(de(329))}}}return wn(t,Et()),t.callbackNode===n?iy.bind(null,t):null}function Ld(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=Jl(t,e),t!==2&&(e=xn,xn=n,e!==null&&Md(e)),t}function Md(t){xn===null?xn=t:xn.push.apply(xn,t)}function zw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!tr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qr(t,e){for(e&=~qh,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Cp(t){if(Ue&6)throw Error(de(327));gi();var e=Dl(t,0);if(!(e&1))return wn(t,Et()),null;var n=Jl(t,e);if(t.tag!==0&&n===2){var r=ad(t);r!==0&&(e=r,n=Ld(t,r))}if(n===1)throw n=Ko,Cs(t,0),qr(t,e),wn(t,Et()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,xn,pr),wn(t,Et()),null}function Qh(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(Ei=Et()+500,kc&&ms())}}function Ms(t){Qr!==null&&Qr.tag===0&&!(Ue&6)&&gi();var e=Ue;Ue|=1;var n=On.transition,r=Xe;try{if(On.transition=null,Xe=1,t)return t()}finally{Xe=r,On.transition=n,Ue=e,!(Ue&6)&&ms()}}function Gh(){_n=ui.current,ut(ui)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pw(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch(_h(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zl();break;case 3:Si(),ut(vn),ut(cn),Mh();break;case 5:Lh(r);break;case 4:Si();break;case 13:ut(yt);break;case 19:ut(yt);break;case 10:Ih(r.type._context);break;case 22:case 23:Gh()}n=n.return}if(Bt=t,It=t=ns(t.current,null),Wt=_n=e,Ft=0,Ko=null,qh=Tc=Ls=0,xn=ko=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Ns=null}return t}function oy(t,e){do{var n=It;try{if(Ah(),pl.current=Wl,Gl){for(var r=vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gl=!1}if(Ds=0,Vt=Mt=vt=null,No=!1,Go=0,Uh.current=null,n===null||n.return===null){Ft=1,Ko=e,It=null;break}e:{var o=t,a=n.return,c=n,u=e;if(e=Wt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=pp(a);if(N!==null){N.flags&=-257,gp(N,a,c,o,e),N.mode&1&&mp(o,d,e),e=N,u=d;var b=e.updateQueue;if(b===null){var C=new Set;C.add(u),e.updateQueue=C}else b.add(u);break e}else{if(!(e&1)){mp(o,d,e),Wh();break e}u=Error(de(426))}}else if(mt&&c.mode&1){var P=pp(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),gp(P,a,c,o,e),Ch(ki(u,c));break e}}o=u=ki(u,c),Ft!==4&&(Ft=2),ko===null?ko=[o]:ko.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=Ux(o,u,e);lp(o,_);break e;case 1:c=u;var j=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof j.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(es===null||!es.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=qx(o,c,e);lp(o,I);break e}}o=o.return}while(o!==null)}cy(n)}catch(D){e=D,It===n&&n!==null&&(It=n=n.return);continue}break}while(1)}function ay(){var t=Yl.current;return Yl.current=Wl,t===null?Wl:t}function Wh(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Bt===null||!(Ls&268435455)&&!(Tc&268435455)||qr(Bt,Wt)}function Jl(t,e){var n=Ue;Ue|=2;var r=ay();(Bt!==t||Wt!==e)&&(pr=null,Cs(t,e));do try{Vw();break}catch(i){oy(t,i)}while(1);if(Ah(),Ue=n,Yl.current=r,It!==null)throw Error(de(261));return Bt=null,Wt=0,Ft}function Vw(){for(;It!==null;)ly(It)}function $w(){for(;It!==null&&!hb();)ly(It)}function ly(t){var e=dy(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?cy(t):It=e,Uh.current=null}function cy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Dw(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,It=null;return}}else if(n=Pw(n,e,_n),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);Ft===0&&(Ft=5)}function bs(t,e,n){var r=Xe,i=On.transition;try{On.transition=null,Xe=1,Bw(t,e,n,r)}finally{On.transition=i,Xe=r}return null}function Bw(t,e,n,r){do gi();while(Qr!==null);if(Ue&6)throw Error(de(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(jb(t,o),t===Bt&&(It=Bt=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,hy(Pl,function(){return gi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=On.transition,On.transition=null;var a=Xe;Xe=1;var c=Ue;Ue|=4,Uh.current=null,Mw(t,n),ry(n,t),lw(fd),Ll=!!hd,fd=hd=null,t.current=n,Ow(n),fb(),Ue=c,Xe=a,On.transition=o}else t.current=n;if(Ha&&(Ha=!1,Qr=t,Xl=i),o=t.pendingLanes,o===0&&(es=null),gb(n.stateNode),wn(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,t=Pd,Pd=null,t;return Xl&1&&t.tag!==0&&gi(),o=t.pendingLanes,o&1?t===Dd?Eo++:(Eo=0,Dd=t):Eo=0,ms(),null}function gi(){if(Qr!==null){var t=Ug(Xl),e=On.transition,n=Xe;try{if(On.transition=null,Xe=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Xl=0,Ue&6)throw Error(de(331));var i=Ue;for(Ue|=4,ge=t.current;ge!==null;){var o=ge,a=o.child;if(ge.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(ge=d;ge!==null;){var f=ge;switch(f.tag){case 0:case 11:case 15:So(8,f,o)}var g=f.child;if(g!==null)g.return=f,ge=g;else for(;ge!==null;){f=ge;var y=f.sibling,N=f.return;if(ey(f),f===d){ge=null;break}if(y!==null){y.return=N,ge=y;break}ge=N}}}var b=o.alternate;if(b!==null){var C=b.child;if(C!==null){b.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}ge=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ge=a;else e:for(;ge!==null;){if(o=ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:So(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,ge=_;break e}ge=o.return}}var j=t.current;for(ge=j;ge!==null;){a=ge;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ge=S;else e:for(a=j;ge!==null;){if(c=ge,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Cc(9,c)}}catch(D){jt(c,c.return,D)}if(c===a){ge=null;break e}var I=c.sibling;if(I!==null){I.return=c.return,ge=I;break e}ge=c.return}}if(Ue=i,ms(),ar&&typeof ar.onPostCommitFiberRoot=="function")try{ar.onPostCommitFiberRoot(bc,t)}catch{}r=!0}return r}finally{Xe=n,On.transition=e}}return!1}function Tp(t,e,n){e=ki(n,e),e=Ux(t,e,1),t=Zr(t,e,1),e=fn(),t!==null&&(oa(t,1,e),wn(t,e))}function jt(t,e,n){if(t.tag===3)Tp(t,t,n);else for(;e!==null;){if(e.tag===3){Tp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(es===null||!es.has(r))){t=ki(n,t),t=qx(e,t,1),e=Zr(e,t,1),t=fn(),e!==null&&(oa(e,1,t),wn(e,t));break}}e=e.return}}function Uw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=fn(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Wt&n)===n&&(Ft===4||Ft===3&&(Wt&130023424)===Wt&&500>Et()-Hh?Cs(t,0):qh|=n),wn(t,e)}function uy(t,e){e===0&&(t.mode&1?(e=La,La<<=1,!(La&130023424)&&(La=4194304)):e=1);var n=fn();t=Er(t,e),t!==null&&(oa(t,e,n),wn(t,n))}function qw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uy(t,n)}function Hw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),uy(t,n)}var dy;dy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yn=!1,Rw(t,e,n);yn=!!(t.flags&131072)}else yn=!1,mt&&e.flags&1048576&&px(e,Bl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var i=wi(e,cn.current);pi(e,n),i=Fh(null,e,r,t,i,n);var o=zh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(o=!0,Vl(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ph(e),i.updater=_c,e.stateNode=i,i._reactInternals=e,jd(e,r,t,n),e=kd(null,e,r,!0,o,n)):(e.tag=0,mt&&o&&Eh(e),hn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Gw(r),t=Hn(r,t),i){case 0:e=Sd(null,e,r,t,n);break e;case 1:e=vp(null,e,r,t,n);break e;case 11:e=xp(null,e,r,t,n);break e;case 14:e=yp(null,e,r,Hn(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),Sd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),vp(t,e,r,i,n);case 3:e:{if(Wx(e),t===null)throw Error(de(387));r=e.pendingProps,o=e.memoizedState,i=o.element,wx(t,e),Hl(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ki(Error(de(423)),e),e=bp(t,e,r,n,i);break e}else if(r!==i){i=ki(Error(de(424)),e),e=bp(t,e,r,n,i);break e}else for(Cn=Jr(e.stateNode.containerInfo.firstChild),Tn=e,mt=!0,Wn=null,n=vx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===i){e=_r(t,e,n);break e}hn(t,e,r,n)}e=e.child}return e;case 5:return jx(e),t===null&&vd(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,md(r,i)?a=null:o!==null&&md(r,o)&&(e.flags|=32),Gx(t,e),hn(t,e,a,n),e.child;case 6:return t===null&&vd(e),null;case 13:return Yx(t,e,n);case 4:return Dh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ni(e,null,r,n):hn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),xp(t,e,r,i,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,st(Ul,r._currentValue),r._currentValue=a,o!==null)if(tr(o.value,a)){if(o.children===i.children&&!vn.current){e=_r(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=vr(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),bd(o.return,n,e),c.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(de(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),bd(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}hn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pi(e,n),i=Fn(i),r=r(i),e.flags|=1,hn(t,e,r,n),e.child;case 14:return r=e.type,i=Hn(r,e.pendingProps),i=Hn(r.type,i),yp(t,e,r,i,n);case 15:return Hx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hn(r,i),xl(t,e),e.tag=1,bn(r)?(t=!0,Vl(e)):t=!1,pi(e,n),Bx(e,r,i),jd(e,r,i,n),kd(null,e,r,!0,t,n);case 19:return Kx(t,e,n);case 22:return Qx(t,e,n)}throw Error(de(156,e.tag))};function hy(t,e){return zg(t,e)}function Qw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new Qw(t,e,n,r)}function Yh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gw(t){if(typeof t=="function")return Yh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mh)return 11;if(t===ph)return 14}return 2}function ns(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bl(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")Yh(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ei:return Ts(n.children,i,o,e);case fh:a=8,i|=8;break;case Qu:return t=Mn(12,n,e,i|2),t.elementType=Qu,t.lanes=o,t;case Gu:return t=Mn(13,n,e,i),t.elementType=Gu,t.lanes=o,t;case Wu:return t=Mn(19,n,e,i),t.elementType=Wu,t.lanes=o,t;case jg:return Ac(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bg:a=10;break e;case wg:a=9;break e;case mh:a=11;break e;case ph:a=14;break e;case Vr:a=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Mn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ts(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=jg,t.lanes=n,t.stateNode={isHidden:!1},t}function _u(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Cu(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ww(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lu(0),this.expirationTimes=lu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kh(t,e,n,r,i,o,a,c,u){return t=new Ww(t,e,n,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Mn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ph(o),t}function Yw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fy(t){if(!t)return os;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(bn(n))return fx(t,n,e)}return e}function my(t,e,n,r,i,o,a,c,u){return t=Kh(n,r,!0,t,i,o,a,c,u),t.context=fy(null),n=t.current,r=fn(),i=ts(n),o=vr(r,i),o.callback=e??null,Zr(n,o,i),t.current.lanes=i,oa(t,i,r),wn(t,r),t}function Ic(t,e,n,r){var i=e.current,o=fn(),a=ts(i);return n=fy(n),e.context===null?e.context=n:e.pendingContext=n,e=vr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zr(i,e,a),t!==null&&(er(t,i,a,o),ml(t,i,a)),a}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ap(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xh(t,e){Ap(t,e),(t=t.alternate)&&Ap(t,e)}function Kw(){return null}var py=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jh(t){this._internalRoot=t}Rc.prototype.render=Jh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));Ic(t,e,null,null)};Rc.prototype.unmount=Jh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){Ic(null,t,null,null)}),e[kr]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ur.length&&e!==0&&e<Ur[n].priority;n++);Ur.splice(n,0,t),n===0&&Wg(t)}};function Zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ip(){}function Xw(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Zl(a);o.call(d)}}var a=my(e,r,t,0,null,!1,!1,"",Ip);return t._reactRootContainer=a,t[kr]=a.current,Bo(t.nodeType===8?t.parentNode:t),Ms(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Zl(u);c.call(d)}}var u=Kh(t,0,!1,null,null,!1,!1,"",Ip);return t._reactRootContainer=u,t[kr]=u.current,Bo(t.nodeType===8?t.parentNode:t),Ms(function(){Ic(e,u,n,r)}),u}function Dc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var c=i;i=function(){var u=Zl(a);c.call(u)}}Ic(e,a,t,i)}else a=Xw(n,e,t,i,r);return Zl(a)}qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=po(e.pendingLanes);n!==0&&(yh(e,n|1),wn(e,Et()),!(Ue&6)&&(Ei=Et()+500,ms()))}break;case 13:Ms(function(){var r=Er(t,1);if(r!==null){var i=fn();er(r,t,1,i)}}),Xh(t,1)}};vh=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var n=fn();er(e,t,134217728,n)}Xh(t,134217728)}};Hg=function(t){if(t.tag===13){var e=ts(t),n=Er(t,e);if(n!==null){var r=fn();er(n,t,e,r)}Xh(t,e)}};Qg=function(){return Xe};Gg=function(t,e){var n=Xe;try{return Xe=t,e()}finally{Xe=n}};sd=function(t,e,n){switch(e){case"input":if(Xu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Sc(r);if(!i)throw Error(de(90));Sg(r),Xu(r,i)}}}break;case"textarea":Eg(t,n);break;case"select":e=n.value,e!=null&&di(t,!!n.multiple,e,!1)}};Pg=Qh;Dg=Ms;var Jw={usingClientEntryPoint:!1,Events:[la,si,Sc,Ig,Rg,Qh]},io={findFiberByHostInstance:js,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zw={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Og(t),t===null?null:t.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||Kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qa.isDisabled&&Qa.supportsFiber)try{bc=Qa.inject(Zw),ar=Qa}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zh(e))throw Error(de(200));return Yw(t,e,null,n)};In.createRoot=function(t,e){if(!Zh(t))throw Error(de(299));var n=!1,r="",i=py;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kh(t,1,!1,null,null,n,!1,r,i),t[kr]=e.current,Bo(t.nodeType===8?t.parentNode:t),new Jh(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=Og(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return Ms(t)};In.hydrate=function(t,e,n){if(!Pc(e))throw Error(de(200));return Dc(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!Zh(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=py;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=my(e,null,t,1,n??null,i,!1,o,a),t[kr]=e.current,Bo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rc(e)};In.render=function(t,e,n){if(!Pc(e))throw Error(de(200));return Dc(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Pc(t))throw Error(de(40));return t._reactRootContainer?(Ms(function(){Dc(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};In.unstable_batchedUpdates=Qh;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pc(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Dc(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function gy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gy)}catch(t){console.error(t)}}gy(),gg.exports=In;var e2=gg.exports,Rp=e2;qu.createRoot=Rp.createRoot,qu.hydrateRoot=Rp.hydrateRoot;const t2="modulepreload",n2=function(t){return"/"+t},Pp={},ef=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=n2(o),o in Pp)return;Pp[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const g=i[f];if(g.href===o&&(!a||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":t2,a||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),a)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};var Dp="popstate";function r2(t={}){function e(r,i){let{pathname:o,search:a,hash:c}=r.location;return Od("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xo(i)}return i2(e,n,null,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s2(){return Math.random().toString(36).substring(2,10)}function Lp(t,e){return{usr:t.state,key:t.key,idx:e}}function Od(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Oi(e):e,state:n,key:e&&e.key||r||s2()}}function Xo({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function i2(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c="POP",u=null,d=f();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function f(){return(a.state||{idx:null}).idx}function g(){c="POP";let P=f(),_=P==null?null:P-d;d=P,u&&u({action:c,location:C.location,delta:_})}function y(P,_){c="PUSH";let j=Od(C.location,P,_);n&&n(j,P),d=f()+1;let S=Lp(j,d),I=C.createHref(j);try{a.pushState(S,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(I)}o&&u&&u({action:c,location:C.location,delta:1})}function N(P,_){c="REPLACE";let j=Od(C.location,P,_);n&&n(j,P),d=f();let S=Lp(j,d),I=C.createHref(j);a.replaceState(S,"",I),o&&u&&u({action:c,location:C.location,delta:0})}function b(P){return o2(P)}let C={get action(){return c},get location(){return t(i,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Dp,g),u=P,()=>{i.removeEventListener(Dp,g),u=null}},createHref(P){return e(i,P)},createURL:b,encodeLocation(P){let _=b(P);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:N,go(P){return a.go(P)}};return C}function o2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xo(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function xy(t,e,n="/"){return a2(t,e,n,!1)}function a2(t,e,n,r){let i=typeof e=="string"?Oi(e):e,o=Cr(i.pathname||"/",n);if(o==null)return null;let a=yy(t);l2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=v2(o);c=x2(a[u],d,r)}return c}function yy(t,e=[],n=[],r=""){let i=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(gt(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let d=br([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),yy(o.children,e,f,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:p2(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let u of vy(o.path))i(o,a,u)}),e}function vy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=vy(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function l2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:g2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var c2=/^:[\w-]+$/,u2=3,d2=2,h2=1,f2=10,m2=-2,Mp=t=>t==="*";function p2(t,e){let n=t.split("/"),r=n.length;return n.some(Mp)&&(r+=m2),e&&(r+=d2),n.filter(i=>!Mp(i)).reduce((i,o)=>i+(c2.test(o)?u2:o===""?h2:f2),r)}function g2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function x2(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=o==="/"?e:e.slice(o.length)||"/",g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),y=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=ec({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:br([o,g.pathname]),pathnameBase:N2(br([o,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(o=br([o,g.pathnameBase]))}return a}function ec(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=y2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,{paramName:f,isOptional:g},y)=>{if(f==="*"){let b=c[y]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const N=c[y];return g&&!N?d[f]=void 0:d[f]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function y2(t,e=!1,n=!0){Vn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function v2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Cr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function b2(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Oi(t):t;return{pathname:n?n.startsWith("/")?n:w2(n,e):e,search:S2(r),hash:k2(i)}}function w2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tu(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tf(t){let e=j2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function nf(t,e,n,r=!1){let i;typeof t=="string"?i=Oi(t):(i={...t},gt(!i.pathname||!i.pathname.includes("?"),Tu("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),Tu("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),Tu("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;i.pathname=y.join("/")}c=g>=0?e[g]:"/"}let u=b2(i,c),d=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}var br=t=>t.join("/").replace(/\/\/+/g,"/"),N2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function E2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var by=["POST","PUT","PATCH","DELETE"];new Set(by);var _2=["GET",...by];new Set(_2);var Fi=h.createContext(null);Fi.displayName="DataRouter";var Lc=h.createContext(null);Lc.displayName="DataRouterState";h.createContext(!1);var wy=h.createContext({isTransitioning:!1});wy.displayName="ViewTransition";var C2=h.createContext(new Map);C2.displayName="Fetchers";var T2=h.createContext(null);T2.displayName="Await";var nr=h.createContext(null);nr.displayName="Navigation";var ua=h.createContext(null);ua.displayName="Location";var $n=h.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var rf=h.createContext(null);rf.displayName="RouteError";function A2(t,{relative:e}={}){gt(zi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=h.useContext(nr),{hash:i,pathname:o,search:a}=da(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:br([n,o])),r.createHref({pathname:c,search:a,hash:i})}function zi(){return h.useContext(ua)!=null}function Ct(){return gt(zi(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(ua).location}var jy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ny(t){h.useContext(nr).static||h.useLayoutEffect(t)}function Ge(){let{isDataRoute:t}=h.useContext($n);return t?Q2():I2()}function I2(){gt(zi(),"useNavigate() may be used only in the context of a <Router> component.");let t=h.useContext(Fi),{basename:e,navigator:n}=h.useContext(nr),{matches:r}=h.useContext($n),{pathname:i}=Ct(),o=JSON.stringify(tf(r)),a=h.useRef(!1);return Ny(()=>{a.current=!0}),h.useCallback((u,d={})=>{if(Vn(a.current,jy),!a.current)return;if(typeof u=="number"){n.go(u);return}let f=nf(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:br([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,o,i,t])}var R2=h.createContext(null);function P2(t){let e=h.useContext($n).outlet;return e&&h.createElement(R2.Provider,{value:t},e)}function D2(){let{matches:t}=h.useContext($n),e=t[t.length-1];return e?e.params:{}}function da(t,{relative:e}={}){let{matches:n}=h.useContext($n),{pathname:r}=Ct(),i=JSON.stringify(tf(n));return h.useMemo(()=>nf(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function L2(t,e){return Sy(t,e)}function Sy(t,e,n,r){var _;gt(zi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(nr),{matches:o}=h.useContext($n),a=o[o.length-1],c=a?a.params:{},u=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let j=f&&f.path||"";ky(u,!f||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let g=Ct(),y;if(e){let j=typeof e=="string"?Oi(e):e;gt(d==="/"||((_=j.pathname)==null?void 0:_.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${j.pathname}" was given in the \`location\` prop.`),y=j}else y=g;let N=y.pathname||"/",b=N;if(d!=="/"){let j=d.replace(/^\//,"").split("/");b="/"+N.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=xy(t,{pathname:b});Vn(f||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Vn(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=V2(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:br([d,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:br([d,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return e&&P?h.createElement(ua.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},P):P}function M2(){let t=H2(),e=E2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=h.createElement(h.Fragment,null,h.createElement("p",null,"💿 Hey developer 👋"),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:o},"ErrorBoundary")," or"," ",h.createElement("code",{style:o},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},e),n?h.createElement("pre",{style:i},n):null,a)}var O2=h.createElement(M2,null),F2=class extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?h.createElement($n.Provider,{value:this.props.routeContext},h.createElement(rf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z2({routeContext:t,match:e,children:n}){let r=h.useContext(Fi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),h.createElement($n.Provider,{value:t},n)}function V2(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);gt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:g}=n,y=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,d,f)=>{let g,y=!1,N=null,b=null;n&&(g=o&&d.route.id?o[d.route.id]:void 0,N=d.route.errorElement||O2,a&&(c<0&&f===0?(ky("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===f&&(y=!0,b=d.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,f+1)),P=()=>{let _;return g?_=N:y?_=b:d.route.Component?_=h.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,h.createElement(z2,{match:d,routeContext:{outlet:u,matches:C,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?h.createElement(F2,{location:n.location,revalidation:n.revalidation,component:N,error:g,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}function sf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $2(t){let e=h.useContext(Fi);return gt(e,sf(t)),e}function B2(t){let e=h.useContext(Lc);return gt(e,sf(t)),e}function U2(t){let e=h.useContext($n);return gt(e,sf(t)),e}function of(t){let e=U2(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function q2(){return of("useRouteId")}function H2(){var r;let t=h.useContext(rf),e=B2("useRouteError"),n=of("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Q2(){let{router:t}=$2("useNavigate"),e=of("useNavigate"),n=h.useRef(!1);return Ny(()=>{n.current=!0}),h.useCallback(async(i,o={})=>{Vn(n.current,jy),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var Op={};function ky(t,e,n){!e&&!Op[t]&&(Op[t]=!0,Vn(!1,n))}h.memo(G2);function G2({routes:t,future:e,state:n}){return Sy(t,void 0,n,e)}function W2({to:t,replace:e,state:n,relative:r}){gt(zi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=h.useContext(nr);Vn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=h.useContext($n),{pathname:a}=Ct(),c=Ge(),u=nf(t,tf(o),a,r==="path"),d=JSON.stringify(u);return h.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:r})},[c,d,r,e,n]),null}function Y2(t){return P2(t.context)}function Ke(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){gt(!zi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);typeof n=="string"&&(n=Oi(n));let{pathname:u="/",search:d="",hash:f="",state:g=null,key:y="default"}=n,N=h.useMemo(()=>{let b=Cr(u,a);return b==null?null:{location:{pathname:b,search:d,hash:f,state:g,key:y},navigationType:r}},[a,u,d,f,g,y,r]);return Vn(N!=null,`<Router basename="${a}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:h.createElement(nr.Provider,{value:c},h.createElement(ua.Provider,{children:e,value:N}))}function X2({children:t,location:e}){return L2(Fd(t),e)}function Fd(t,e=[]){let n=[];return h.Children.forEach(t,(r,i)=>{if(!h.isValidElement(r))return;let o=[...e,i];if(r.type===h.Fragment){n.push.apply(n,Fd(r.props.children,o));return}gt(r.type===Ke,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Fd(r.props.children,o)),n.push(a)}),n}var wl="get",jl="application/x-www-form-urlencoded";function Mc(t){return t!=null&&typeof t.tagName=="string"}function J2(t){return Mc(t)&&t.tagName.toLowerCase()==="button"}function Z2(t){return Mc(t)&&t.tagName.toLowerCase()==="form"}function e5(t){return Mc(t)&&t.tagName.toLowerCase()==="input"}function t5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n5(t,e){return t.button===0&&(!e||e==="_self")&&!t5(t)}function zd(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function r5(t,e){let n=zd(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}var Ga=null;function s5(){if(Ga===null)try{new FormData(document.createElement("form"),0),Ga=!1}catch{Ga=!0}return Ga}var i5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Au(t){return t!=null&&!i5.has(t)?(Vn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jl}"`),null):t}function o5(t,e){let n,r,i,o,a;if(Z2(t)){let c=t.getAttribute("action");r=c?Cr(c,e):null,n=t.getAttribute("method")||wl,i=Au(t.getAttribute("enctype"))||jl,o=new FormData(t)}else if(J2(t)||e5(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Cr(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||wl,i=Au(t.getAttribute("formenctype"))||Au(c.getAttribute("enctype"))||jl,o=new FormData(c,t),!s5()){let{name:d,type:f,value:g}=t;if(f==="image"){let y=d?`${d}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else d&&o.append(d,g)}}else{if(Mc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wl,r=null,i=jl,a=t}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function af(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function a5(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Cr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function l5(t,e){if(t.id in e)return e[t.id];try{let n=await ef(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c5(t){return t!=null&&typeof t.page=="string"}function u5(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function d5(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let a=await l5(o,n);return a.links?a.links():[]}return[]}));return p5(r.flat(1).filter(u5).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fp(t,e,n,r,i,o){let a=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,c=(u,d)=>{var f;return n[d].pathname!==u.pathname||((f=n[d].route.path)==null?void 0:f.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,d)=>a(u,d)||c(u,d)):o==="data"?e.filter((u,d)=>{var g;let f=r.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(a(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let y=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function h5(t,e,{includeHydrateFallback:n}={}){return f5(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function f5(t){return[...new Set(t)]}function m5(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function p5(t,e){let n=new Set,r=new Set(e);return t.reduce((i,o)=>{if(e&&!c5(o)&&o.as==="script"&&o.href&&r.has(o.href))return i;let c=JSON.stringify(m5(o));return n.has(c)||(n.add(c),i.push({key:c,link:o})),i},[])}function Ey(){let t=h.useContext(Fi);return af(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function g5(){let t=h.useContext(Lc);return af(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var lf=h.createContext(void 0);lf.displayName="FrameworkContext";function _y(){let t=h.useContext(lf);return af(t,"You must render this element inside a <HydratedRouter> element"),t}function x5(t,e){let n=h.useContext(lf),[r,i]=h.useState(!1),[o,a]=h.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:f,onTouchStart:g}=e,y=h.useRef(null);h.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let C=_=>{_.forEach(j=>{a(j.isIntersecting)})},P=new IntersectionObserver(C,{threshold:.5});return y.current&&P.observe(y.current),()=>{P.disconnect()}}},[t]),h.useEffect(()=>{if(r){let C=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(C)}}},[r]);let N=()=>{i(!0)},b=()=>{i(!1),a(!1)};return n?t!=="intent"?[o,y,{}]:[o,y,{onFocus:oo(c,N),onBlur:oo(u,b),onMouseEnter:oo(d,N),onMouseLeave:oo(f,b),onTouchStart:oo(g,N)}]:[!1,y,{}]}function oo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function y5({page:t,...e}){let{router:n}=Ey(),r=h.useMemo(()=>xy(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?h.createElement(b5,{page:t,matches:r,...e}):null}function v5(t){let{manifest:e,routeModules:n}=_y(),[r,i]=h.useState([]);return h.useEffect(()=>{let o=!1;return d5(t,e,n).then(a=>{o||i(a)}),()=>{o=!0}},[t,e,n]),r}function b5({page:t,matches:e,...n}){let r=Ct(),{manifest:i,routeModules:o}=_y(),{basename:a}=Ey(),{loaderData:c,matches:u}=g5(),d=h.useMemo(()=>Fp(t,e,u,i,r,"data"),[t,e,u,i,r]),f=h.useMemo(()=>Fp(t,e,u,i,r,"assets"),[t,e,u,i,r]),g=h.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,C=!1;if(e.forEach(_=>{var S;let j=i.routes[_.route.id];!j||!j.hasLoader||(!d.some(I=>I.route.id===_.route.id)&&_.route.id in c&&((S=o[_.route.id])!=null&&S.shouldRevalidate)||j.hasClientLoader?C=!0:b.add(_.route.id))}),b.size===0)return[];let P=a5(t,a,"data");return C&&b.size>0&&P.searchParams.set("_routes",e.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[P.pathname+P.search]},[a,c,r,i,d,e,t,o]),y=h.useMemo(()=>h5(f,i),[f,i]),N=v5(f);return h.createElement(h.Fragment,null,g.map(b=>h.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),y.map(b=>h.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),N.map(({key:b,link:C})=>h.createElement("link",{key:b,...C})))}function w5(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Cy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cy&&(window.__reactRouterVersion="7.7.1")}catch{}function j5({basename:t,children:e,window:n}){let r=h.useRef();r.current==null&&(r.current=r2({window:n,v5Compat:!0}));let i=r.current,[o,a]=h.useState({action:i.action,location:i.location}),c=h.useCallback(u=>{h.startTransition(()=>a(u))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(K2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var Ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ay=h.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:g,...y},N){let{basename:b}=h.useContext(nr),C=typeof d=="string"&&Ty.test(d),P,_=!1;if(typeof d=="string"&&C&&(P=d,Cy))try{let x=new URL(window.location.href),w=d.startsWith("//")?new URL(x.protocol+d):new URL(d),A=Cr(w.pathname,b);w.origin===x.origin&&A!=null?d=A+w.search+w.hash:_=!0}catch{Vn(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=A2(d,{relative:i}),[S,I,D]=x5(r,y),M=E5(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:g});function k(x){e&&e(x),x.defaultPrevented||M(x)}let m=h.createElement("a",{...y,...D,href:P||j,onClick:_||o?e:k,ref:w5(N,I),target:u,"data-discover":!C&&n==="render"?"true":void 0});return S&&!C?h.createElement(h.Fragment,null,m,h.createElement(y5,{page:j})):m});Ay.displayName="Link";var N5=h.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:c,children:u,...d},f){let g=da(a,{relative:d.relative}),y=Ct(),N=h.useContext(Lc),{navigator:b,basename:C}=h.useContext(nr),P=N!=null&&I5(g)&&c===!0,_=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,j=y.pathname,S=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(j=j.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&C&&(S=Cr(S,C)||S);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=j===_||!i&&j.startsWith(_)&&j.charAt(I)==="/",M=S!=null&&(S===_||!i&&S.startsWith(_)&&S.charAt(_.length)==="/"),k={isActive:D,isPending:M,isTransitioning:P},m=D?e:void 0,x;typeof r=="function"?x=r(k):x=[r,D?"active":null,M?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let w=typeof o=="function"?o(k):o;return h.createElement(Ay,{...d,"aria-current":m,className:x,ref:f,style:w,to:a,viewTransition:c},typeof u=="function"?u(k):u)});N5.displayName="NavLink";var S5=h.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:a=wl,action:c,onSubmit:u,relative:d,preventScrollReset:f,viewTransition:g,...y},N)=>{let b=T5(),C=A5(c,{relative:d}),P=a.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&Ty.test(c),j=S=>{if(u&&u(S),S.defaultPrevented)return;S.preventDefault();let I=S.nativeEvent.submitter,D=(I==null?void 0:I.getAttribute("formmethod"))||a;b(I||S.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:o,relative:d,preventScrollReset:f,viewTransition:g})};return h.createElement("form",{ref:N,method:P,action:C,onSubmit:r?u:j,...y,"data-discover":!_&&t==="render"?"true":void 0})});S5.displayName="Form";function k5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Iy(t){let e=h.useContext(Fi);return gt(e,k5(t)),e}function E5(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a}={}){let c=Ge(),u=Ct(),d=da(t,{relative:o});return h.useCallback(f=>{if(n5(f,e)){f.preventDefault();let g=n!==void 0?n:Xo(u)===Xo(d);c(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,d,n,r,e,t,i,o,a])}function Ry(t){Vn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=h.useRef(zd(t)),n=h.useRef(!1),r=Ct(),i=h.useMemo(()=>r5(r.search,n.current?null:e.current),[r.search]),o=Ge(),a=h.useCallback((c,u)=>{const d=zd(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,o("?"+d,u)},[o,i]);return[i,a]}var _5=0,C5=()=>`__${String(++_5)}__`;function T5(){let{router:t}=Iy("useSubmit"),{basename:e}=h.useContext(nr),n=q2();return h.useCallback(async(r,i={})=>{let{action:o,method:a,encType:c,formData:u,body:d}=o5(r,e);if(i.navigate===!1){let f=i.fetcherKey||C5();await t.fetch(f,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:d,formMethod:i.method||a,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function A5(t,{relative:e}={}){let{basename:n}=h.useContext(nr),r=h.useContext($n);gt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...da(t||".",{relative:e})},a=Ct();if(t==null){o.search=a.search;let c=new URLSearchParams(o.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let f=c.toString();o.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:br([n,o.pathname])),Xo(o)}function I5(t,{relative:e}={}){let n=h.useContext(wy);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Iy("useViewTransitionState"),i=da(t,{relative:e});if(!n.isTransitioning)return!1;let o=Cr(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Cr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ec(i.pathname,a)!=null||ec(i.pathname,o)!=null}function R5({size:t=22,spinning:e=!1}){return s.jsx("div",{style:{width:t,height:t},className:"grid place-items-center",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:`${e?"animate-[spin_0.8s_ease-out]":"motion-safe:animate-[spin_9s_linear_infinite]"} group-active:motion-safe:animate-[spin_1.2s_linear_infinite]`,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:[s.jsx("path",{d:"M50,50 L50,5 A45,45 0 0,1 86.97,25.98 Z",fill:"#6366F1"}),s.jsx("path",{d:"M50,50 L86.97,25.98 A45,45 0 0,1 86.97,74.02 Z",fill:"#22C55E"}),s.jsx("path",{d:"M50,50 L86.97,74.02 A45,45 0 0,1 50,95 Z",fill:"#F59E0B"}),s.jsx("path",{d:"M50,50 L50,95 A45,45 0 0,1 13.03,74.02 Z",fill:"#EF4444"}),s.jsx("path",{d:"M50,50 L13.03,74.02 A45,45 0 0,1 13.03,25.98 Z",fill:"#3B82F6"}),s.jsx("path",{d:"M50,50 L13.03,25.98 A45,45 0 0,1 50,5 Z",fill:"#8B5CF6"}),s.jsx("circle",{cx:"50",cy:"50",r:"9",fill:"#111827",stroke:"white",strokeWidth:"2"})]})})}function P5(){const t=Ge(),{pathname:e}=Ct(),n=h.useRef({}),r=h.useRef({}),[i,o]=h.useState(!1),a=h.useRef(null);h.useEffect(()=>{const S=a.current;if(!S)return;const I=D=>{D.preventDefault();const M=.1;S.scrollTop+=D.deltaY*M};return S.addEventListener("wheel",I,{passive:!1}),()=>{S.removeEventListener("wheel",I)}},[]);const c=S=>{if(navigator.vibrate)switch(S){case"light":navigator.vibrate(20);break;case"medium":navigator.vibrate(35);break;case"heavy":navigator.vibrate(50);break;case"double":navigator.vibrate([30,50,30]);break;case"success":navigator.vibrate([20,50,20,50,20]);break;default:navigator.vibrate(25)}};h.useCallback(()=>{var S;if(["/","/play","/swipe","/profile"].includes(e)){const I=((S=a.current)==null?void 0:S.scrollTop)||0,D=window.scrollY||window.pageYOffset||0,M=I>0?I:D;console.log(`Saving scroll for ${e}: main=${I}, window=${D}, saved=${M}`),n.current[e]=M}},[e]),h.useEffect(()=>{let S=null;const I=()=>{S&&cancelAnimationFrame(S),S=requestAnimationFrame(()=>{var M;if(["/","/play","/swipe","/profile"].includes(e)){const k=((M=a.current)==null?void 0:M.scrollTop)||0,m=window.scrollY||window.pageYOffset||0,x=k>0?k:m;n.current[e]=x,console.log(`Scroll position updated for ${e}: ${x}`)}})};window.addEventListener("scroll",I,{passive:!0});const D=a.current;return D&&D.addEventListener("scroll",I,{passive:!0}),()=>{S&&cancelAnimationFrame(S),window.removeEventListener("scroll",I),D&&D.removeEventListener("scroll",I)}},[e]),h.useEffect(()=>{if(a.current&&a.current.classList.add("navigating"),["/profile/","/quiz/","/practice/","/play/classic","/settings","/about"].some(D=>e.startsWith(D)))window.scrollTo(0,0),a.current&&(a.current.scrollTop=0),setTimeout(()=>{a.current&&a.current.classList.remove("navigating")},20);else{const D=n.current[e];if(console.log(`Attempting to restore scroll for ${e}: ${D}`),D!=null&&D>0){const M=(k=0)=>{k>=5||(a.current?(a.current.scrollTop=D,setTimeout(()=>{var x;const m=((x=a.current)==null?void 0:x.scrollTop)||0;Math.abs(m-D)>10?(window.scrollTo(0,D),setTimeout(()=>{const w=window.scrollY||window.pageYOffset||0;console.log(`Restore attempt ${k+1}: main=${m}, window=${w}, target=${D}`),Math.abs(w-D)>10&&Math.abs(m-D)>10&&M(k+1)},20)):console.log(`Successfully restored scroll to ${m}`)},20)):window.scrollTo(0,D))};M(0),setTimeout(()=>{a.current&&a.current.classList.remove("navigating")},20)}else window.scrollTo(0,0),a.current&&(a.current.scrollTop=0),setTimeout(()=>{a.current&&a.current.classList.remove("navigating")},20)}},[e]);const[u,d]=h.useState(!1),[f,g]=h.useState({open:!1,go:null}),[y,N]=h.useState(!1);h.useEffect(()=>{const S=()=>{N(document.body.classList.contains("hide-bottom-nav"))};S();const I=new MutationObserver(S);return I.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>I.disconnect()},[]),h.useEffect(()=>{const S=new MutationObserver(()=>{d(document.body.classList.contains("modal-open"))});return S.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>S.disconnect()},[]);const C=u||y||[/^\/quiz\//,/^\/practice\//,/^\/profile\//,/^\/play\/classic/].some(S=>S.test(e)),P=S=>S==="/"?e==="/":e.startsWith(S),_=h.useCallback(()=>{console.log("Scrolling to top"),window.scrollTo({top:0,behavior:"smooth"}),a.current&&a.current.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0},[]),j=({path:S,icon:I,label:D,emoji:M})=>{const k=P(S),[m,x]=h.useState(!1),w=h.useCallback(()=>{var te;const A=Date.now();if(k){const ne=r.current[S]||0;console.log(`Active tab clicked. Time since last tap: ${A-ne}ms`),A-ne<500?(console.log("Double tap detected!"),_(),c("double"),r.current[S]=0):r.current[S]=A;return}if(["/","/play","/swipe","/profile"].includes(e)){const ne=((te=a.current)==null?void 0:te.scrollTop)||0,K=window.scrollY||window.pageYOffset||0,U=ne>0?ne:K;console.log(`Manually saving scroll before navigation from ${e}: ${U}`),n.current[e]=U}const E=r.current[S]||0;if(A-E<500){console.log("Double tap on inactive tab - navigating and scrolling to top"),n.current[S]=0,S==="/play"?(o(!0),c("double"),setTimeout(()=>{t(`/play?view=modes&reset=${Date.now()}`),o(!1),setTimeout(_,100)},200)):(c("double"),t(S),setTimeout(_,100)),r.current[S]=0;return}r.current[S]=A,x(!0),setTimeout(()=>x(!1),600);const T=()=>{if(S==="/play"){o(!0),c("heavy"),setTimeout(()=>{t(`/play?view=modes&reset=${Date.now()}`),o(!1)},200);return}c("medium"),t(S)};if(localStorage.getItem("qp_in_question")==="true"){g({open:!0,go:T});return}T()},[k,S,e,t,_,c]);return s.jsxs("button",{type:"button",onClick:w,className:`group relative flex h-14 w-20 flex-col items-center justify-center rounded-xl transition-all
          ${k?"scale-110":"scale-100 hover:scale-105"}
          ${m?"animate-bounce":""}`,"aria-current":k?"page":void 0,children:[k&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"absolute -top-2 h-1.5 w-10 rounded-full bg-gradient-to-r from-transparent via-white to-transparent opacity-60"}),s.jsx("div",{className:"absolute inset-0 rounded-xl bg-white/10 blur-xl"})]}),s.jsx("div",{className:`leading-none text-2xl transition-transform ${k?"scale-125":""} ${S==="/play"&&i?"animate-spin":""}`,children:M||I}),s.jsx("span",{className:`mt-1 text-[10px] font-medium transition-all ${k?"text-white":"text-base-muted/80"}`,children:D})]})};return s.jsxs("div",{className:"min-h-screen bg-base-bg text-base-text",children:[s.jsx("style",{children:`
        .hide-bottom-nav nav[role="navigation"] {
         display: none !important;
        }
        main.navigating {
          visibility: hidden;
        }
        main {
          scroll-behavior: auto !important;
        }
      `}),s.jsx("main",{ref:a,className:"mx-auto w-full max-w-none px-1 sm:px-3 md:px-4 overscroll-y-contain",style:{height:C||document.body.classList.contains("hide-bottom-nav")?"100dvh":"calc(100dvh - (5.5rem + env(safe-area-inset-bottom)))",paddingTop:"calc(env(safe-area-inset-top) + 12px)",paddingBottom:C||document.body.classList.contains("hide-bottom-nav")?0:void 0,overflowY:"auto"},children:s.jsx(Y2,{})}),f.open&&s.jsxs("div",{className:"fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center px-6",style:{animation:"fadeIn 0.2s ease-out"},children:[s.jsxs("div",{className:"w-full max-w-sm rounded-3xl bg-gradient-to-b from-base-card to-base-card/90 border border-base-border p-6 text-center shadow-2xl",style:{animation:"slideUp 0.3s ease-out"},children:[s.jsx("div",{className:"text-5xl mb-4",style:{animation:"bounce 0.6s ease-out"},children:"😟"}),s.jsx("div",{className:"text-xl font-bold mb-2 bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent",children:"Leave the game?"}),s.jsx("p",{className:"text-base-muted mb-6 text-sm",children:"You'll lose your current progress!"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{c("medium"),g({open:!1,go:null})},className:"flex-1 py-3 rounded-2xl border-2 border-green-500/30 bg-green-500/10 hover:bg-green-500/20 transition-all font-semibold text-green-400",children:"Keep Playing! 🎮"}),s.jsx("button",{onClick:()=>{c("heavy");const S=f.go;g({open:!1,go:null}),S==null||S()},className:"flex-1 py-3 rounded-2xl bg-gradient-to-r from-red-500/80 to-orange-500/80 text-white font-semibold hover:from-red-500 hover:to-orange-500 transition-all",children:"Leave 👋"})]})]}),s.jsx("style",{children:`
            @keyframes fadeIn {
              from { opacity: 0; }
              to { opacity: 1; }
            }
            @keyframes slideUp {
              from { transform: translateY(20px); opacity: 0; }
              to { transform: translateY(0); opacity: 1; }
            }
          `})]}),!C&&s.jsxs("nav",{role:"navigation","aria-label":"Bottom navigation",className:"fixed inset-x-0 bottom-0 z-50",children:[s.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-[#0B0F1A] to-[#0B0F1A]/95 backdrop-blur-lg",style:{height:"calc(5.5rem + env(safe-area-inset-bottom))"},"aria-hidden":!0}),s.jsx("div",{className:"relative mx-auto max-w-md px-4 pb-[calc(env(safe-area-inset-bottom)+0.5rem)] pt-2",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-purple-500/20 via-blue-500/20 to-green-500/20 blur-2xl"}),s.jsxs("div",{className:"relative flex h-[72px] items-center justify-around rounded-3xl border border-white/10 bg-gradient-to-b from-base-card/95 to-base-card/80 shadow-2xl backdrop-blur-xl",children:[s.jsx(j,{path:"/",emoji:"🏠",label:"Home"}),s.jsx(j,{path:"/play",icon:s.jsx(R5,{size:26,spinning:i}),label:"Play"}),s.jsx(j,{path:"/swipe",emoji:"📚",label:"Swipe"}),s.jsx(j,{path:"/profile",emoji:"👤",label:"Profile"})]})]})})]})]})}function tc(){return tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tc.apply(null,arguments)}function D5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function L5(t){h.useEffect(t,[])}var M5=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function Rt(t,e){var n=e===void 0?{}:e,r=n.volume,i=r===void 0?1:r,o=n.playbackRate,a=o===void 0?1:o,c=n.soundEnabled,u=c===void 0?!0:c,d=n.interrupt,f=d===void 0?!1:d,g=n.onload,y=D5(n,M5),N=dn.useRef(null),b=dn.useRef(!1),C=dn.useState(null),P=C[0],_=C[1],j=dn.useState(null),S=j[0],I=j[1],D=function(){typeof g=="function"&&g.call(this),b.current&&_(this.duration()*1e3),I(this)};L5(function(){return ef(()=>import("./howler-cd86869a.js").then(w=>w.h),[]).then(function(w){if(!b.current){var A;N.current=(A=w.Howl)!==null&&A!==void 0?A:w.default.Howl,b.current=!0,new N.current(tc({src:Array.isArray(t)?t:[t],volume:i,rate:a,onload:D},y))}}),function(){b.current=!1}}),dn.useEffect(function(){N.current&&S&&I(new N.current(tc({src:Array.isArray(t)?t:[t],volume:i,onload:D},y)))},[JSON.stringify(t)]),dn.useEffect(function(){S&&(S.volume(i),y.sprite||S.rate(a))},[S,i,a]);var M=dn.useCallback(function(w){typeof w>"u"&&(w={}),!(!S||!u&&!w.forceSoundEnabled)&&(f&&S.stop(),w.playbackRate&&S.rate(w.playbackRate),S.play(w.id))},[S,u,f]),k=dn.useCallback(function(w){S&&S.stop(w)},[S]),m=dn.useCallback(function(w){S&&S.pause(w)},[S]),x=[M,{sound:S,stop:k,pause:m,duration:P}];return x}class O5{constructor(){console.log("UserService initialized")}getUserData(e){try{if(!e)return console.log("No phone provided to getUserData"),null;const r=JSON.parse(localStorage.getItem("users")||"{}")[e]||{},i=JSON.parse(localStorage.getItem(`user_profile_${e}`)||"{}"),o={...r,phone:e,username:i.name||r.username||"",email:i.email||"",city:i.city||"",state:i.state||"",country:i.country||""};return console.log("getUserData merged result:",o),o}catch(n){return console.error("Error in getUserData:",n),null}}getUserDataByIdentifier(e){try{const n=this.getUserData(e);if(n)return n;const r=JSON.parse(localStorage.getItem("users")||"{}");for(let i in r)if(r[i].username===e)return this.getUserData(i);return null}catch(n){return console.error("Error in getUserDataByIdentifier:",n),null}}userExists(e){try{return JSON.parse(localStorage.getItem("users")||"{}").hasOwnProperty(e)}catch(n){return console.error("Error checking if user exists:",n),!1}}createUser(e,n){try{console.log("Creating user:",e,n);const r=JSON.parse(localStorage.getItem("users")||"{}");return r[e]={username:n.username,password:n.password||"123456",avatar:n.avatar,gender:n.gender,ageGroup:n.ageGroup,phone:e,createdAt:new Date().toISOString()},localStorage.setItem("users",JSON.stringify(r)),this.setCurrentUser(e),console.log("User created successfully"),!0}catch(r){return console.error("Error creating user:",r),!1}}setCurrentUser(e){try{const n=this.getUserData(e);if(!n)return!1;const r={phone:e,username:n.username,avatar:n.avatar,gender:n.gender,ageGroup:n.ageGroup};localStorage.setItem("currentUser",JSON.stringify(r));const i=JSON.parse(localStorage.getItem("qp_player")||"{}");return i.name=n.username,localStorage.setItem("qp_player",JSON.stringify(i)),console.log("Current user set:",r),!0}catch(n){return console.error("Error setting current user:",n),!1}}updateUserProfile(e,n){try{if(console.log("Updating profile for:",e,n),n.name){const c=JSON.parse(localStorage.getItem("users")||"{}");if(c[e]){c[e].username=n.name;const u=c[e].password;c[e].password=u,localStorage.setItem("users",JSON.stringify(c))}}const r=`user_profile_${e}`,o={...JSON.parse(localStorage.getItem(r)||"{}"),...n};localStorage.setItem(r,JSON.stringify(o));const a=JSON.parse(localStorage.getItem("currentUser")||"{}");if(a.phone===e){a.username=n.name||a.username,localStorage.setItem("currentUser",JSON.stringify(a));const c=JSON.parse(localStorage.getItem("qp_player")||"{}");c.name=n.name||c.name,localStorage.setItem("qp_player",JSON.stringify(c))}return console.log("Profile updated successfully"),!0}catch(r){return console.error("Error updating profile:",r),!1}}getCurrentUser(){try{const e=JSON.parse(localStorage.getItem("currentUser")||"{}");return e.phone?this.getUserData(e.phone):null}catch(e){return console.error("Error getting current user:",e),null}}signOut(){try{return localStorage.removeItem("currentUser"),localStorage.removeItem("rememberCredentials"),sessionStorage.clear(),console.log("User signed out"),!0}catch(e){return console.error("Error signing out:",e),!1}}}const Ot=new O5;window.userService=Ot;class F5{constructor(){this.STORAGE_KEYS={COINS:"qp_coins",XP:"qp_xp",LEVEL:"qp_level",OWNED_CHARACTERS:"owned_characters",SOUND:"play_sound_on",GAME_STATS:"game_stats_",DAILY_PROGRESS:"daily_progress_",QUEST_DATA:"quest_data_",STREAK_DATA:"streak_data_",GAME_HISTORY:"game_history_",QUIZ_RESULTS:"quiz_current_results"}}getCoins(){return this.safeGet(this.STORAGE_KEYS.COINS,0)}setCoins(e){return this.safeSet(this.STORAGE_KEYS.COINS,e),e}addCoins(e,n=""){const i=this.getCoins()+e;this.setCoins(i);const o=Ot.getCurrentUser();return o!=null&&o.phone&&(this.logCoinTransaction(o.phone,e,n),this.updateDailyCoins(o.phone,e)),i}spendCoins(e,n=""){const r=this.getCoins();if(r<e)return!1;const i=r-e;this.setCoins(i);const o=Ot.getCurrentUser();return o!=null&&o.phone&&this.logCoinTransaction(o.phone,-e,n),!0}getXP(){return this.safeGet(this.STORAGE_KEYS.XP,0)}setXP(e){return this.safeSet(this.STORAGE_KEYS.XP,e),e}addXP(e){const r=this.getXP()+e;this.setXP(r),this.checkAndUpdateLevel(r);const i=Ot.getCurrentUser();return i!=null&&i.phone&&this.updateDailyXP(i.phone,e),r}getLevel(){return this.safeGet(this.STORAGE_KEYS.LEVEL,1)}setLevel(e){return this.safeSet(this.STORAGE_KEYS.LEVEL,e),e}checkAndUpdateLevel(e=null){const n=e||this.getXP(),r=this.getLevel();let i=1,o=0;for(;o<=n;)i++,o=100*i*(i-1);if(i--,i>r){this.setLevel(i);const a=50*(i-r);return this.addCoins(a,`Level up to ${i}!`),!0}return!1}initializeUserData(e){if(!e)return;const n=this.getUserStats(e);if(n)return n;const r={stats:{totalQuizzes:0,totalPractice:0,totalCorrect:0,totalWrong:0,winStreak:0,bestStreak:0,highScore:0,gamesPlayed:0},quests:{daily:[{id:"quiz_3",type:"quiz",target:3,current:0,reward:60,completed:!1},{id:"practice_15",type:"practice",target:15,current:0,reward:100,completed:!1},{id:"win_5",type:"win_streak",target:5,current:0,reward:150,completed:!1},{id:"speed_run",type:"speed_run",target:1,current:0,reward:80,completed:!1}]},streak:{current:0,lastPlayedDate:null,longestStreak:0}};return this.safeSet(this.STORAGE_KEYS.GAME_STATS+e,r.stats),this.safeSet(this.STORAGE_KEYS.QUEST_DATA+e,r.quests),this.safeSet(this.STORAGE_KEYS.STREAK_DATA+e,r.streak),this.resetDailyProgress(e),r}getUserStats(e){return e?this.safeGet(this.STORAGE_KEYS.GAME_STATS+e,null):null}updateUserStats(e,n){if(!e)return null;const i={...this.getUserStats(e)||{},...n};return this.safeSet(this.STORAGE_KEYS.GAME_STATS+e,i),i}getDailyProgress(e){if(!e)return null;const n=this.safeGet(this.STORAGE_KEYS.DAILY_PROGRESS+e,null),r=new Date().toDateString();return!n||n.date!==r?this.resetDailyProgress(e):n}resetDailyProgress(e){if(!e)return null;const n={date:new Date().toDateString(),quizzesPlayed:0,practiceCompleted:0,coinsEarned:0,xpEarned:0,questsCompleted:[]};return this.safeSet(this.STORAGE_KEYS.DAILY_PROGRESS+e,n),this.resetDailyQuests(e),n}updateDailyCoins(e,n){if(!e)return;const r=this.getDailyProgress(e);r&&(r.coinsEarned+=n,this.safeSet(this.STORAGE_KEYS.DAILY_PROGRESS+e,r))}updateDailyXP(e,n){if(!e)return;const r=this.getDailyProgress(e);r&&(r.xpEarned+=n,this.safeSet(this.STORAGE_KEYS.DAILY_PROGRESS+e,r))}getQuestData(e){return e?this.safeGet(this.STORAGE_KEYS.QUEST_DATA+e,null):null}resetDailyQuests(e){if(!e)return null;const n={daily:[{id:"quiz_3",type:"quiz",target:3,current:0,reward:60,completed:!1},{id:"practice_15",type:"practice",target:15,current:0,reward:100,completed:!1},{id:"win_5",type:"win_streak",target:5,current:0,reward:150,completed:!1},{id:"speed_run",type:"speed_run",target:1,current:0,reward:80,completed:!1}]};return this.safeSet(this.STORAGE_KEYS.QUEST_DATA+e,n),n}updateQuestProgress(e,n,r=1){if(!e)return null;const i=this.getQuestData(e);if(!(i!=null&&i.daily))return null;let o=0;const a={...i,daily:i.daily.map(c=>{if(c.type===n&&!c.completed){const u=Math.min(c.current+r,c.target),d=u>=c.target;return d&&!c.completed&&(o+=c.reward,this.addCoins(c.reward,`Quest completed: ${c.id}`)),{...c,current:u,completed:d}}return c})};return this.safeSet(this.STORAGE_KEYS.QUEST_DATA+e,a),{updatedQuests:a,coinsEarned:o}}getStreakData(e){return e?this.safeGet(this.STORAGE_KEYS.STREAK_DATA+e,{current:0,lastPlayedDate:null,longestStreak:0}):null}updateStreak(e){if(!e)return null;const n=this.getStreakData(e),r=new Date().toDateString(),i=new Date(Date.now()-864e5).toDateString();return n.lastPlayedDate===r||(n.lastPlayedDate===i?n.current++:n.current=1,n.lastPlayedDate=r,n.longestStreak=Math.max(n.current,n.longestStreak),this.safeSet(this.STORAGE_KEYS.STREAK_DATA+e,n),n.current%7===0&&this.addCoins(100,"7-day streak bonus!")),n}recordQuizSession(e,n){const{score:r,totalQuestions:i,category:o,difficulty:a="medium",mode:c="classic"}=n,f=r*5+(r===i?20:0),g=r*10;if(this.addCoins(f,`Quiz: ${r}/${i}`),this.addXP(g),e){const y=this.getUserStats(e)||this.initializeUserData(e).stats;y.totalQuizzes++,y.totalCorrect+=r,y.totalWrong+=i-r,y.gamesPlayed++,r>=i*.7?(y.winStreak++,y.bestStreak=Math.max(y.winStreak,y.bestStreak)):y.winStreak=0,y.highScore=Math.max(y.highScore,r),this.updateUserStats(e,y);const N=this.getDailyProgress(e);N.quizzesPlayed++,this.safeSet(this.STORAGE_KEYS.DAILY_PROGRESS+e,N),this.updateQuestProgress(e,"quiz",1),y.winStreak>=5&&this.updateQuestProgress(e,"win_streak",y.winStreak),this.updateStreak(e),this.addToHistory(e,{type:"quiz",mode:c,category:o,score:r,totalQuestions:i,difficulty:a,coinsEarned:f,xpEarned:g,timestamp:new Date().toISOString()})}return{coinsEarned:f,xpEarned:g,newTotal:this.getCoins(),newXP:this.getXP(),newLevel:this.getLevel()}}recordPracticeSession(e,n){const{questionsCompleted:r,correctAnswers:i,category:o="general"}=n,a=r*2,c=r*5;if(this.addCoins(a,`Practice: ${r} questions`),this.addXP(c),e){const u=this.getUserStats(e)||this.initializeUserData(e).stats;u.totalPractice+=r,u.totalCorrect+=i,u.totalWrong+=r-i,this.updateUserStats(e,u);const d=this.getDailyProgress(e);d.practiceCompleted+=r,this.safeSet(this.STORAGE_KEYS.DAILY_PROGRESS+e,d),this.updateQuestProgress(e,"practice",r),this.updateStreak(e),this.addToHistory(e,{type:"practice",category:o,questionsCompleted:r,correctAnswers:i,coinsEarned:a,xpEarned:c,timestamp:new Date().toISOString()})}return{coinsEarned:a,xpEarned:c,newTotal:this.getCoins(),newXP:this.getXP()}}getGameHistory(e){return e?this.safeGet(this.STORAGE_KEYS.GAME_HISTORY+e,[]):[]}addToHistory(e,n){if(!e)return;const r=this.getGameHistory(e);r.unshift(n),r.length>50&&r.pop(),this.safeSet(this.STORAGE_KEYS.GAME_HISTORY+e,r)}getTodaySummary(e){var i;const n=e||((i=Ot.getCurrentUser())==null?void 0:i.phone),r={totalCoins:this.getCoins(),totalXP:this.getXP(),level:this.getLevel(),xpProgress:this.getXP()%100,xpNeeded:100,todayCoins:0,todayXP:0,streak:0,questProgress:0,activeQuests:0};if(n){const o=this.getDailyProgress(n),a=this.getStreakData(n),c=this.getQuestData(n),u=this.getUserStats(n);if(o&&(r.todayCoins=o.coinsEarned,r.todayXP=o.xpEarned),a&&(r.streak=a.current),c!=null&&c.daily){const d=c.daily.filter(f=>f.completed).length;r.questProgress=Math.round(d/c.daily.length*100),r.activeQuests=c.daily.filter(f=>!f.completed).length}u&&(r.rank=23,r.winStreak=u.winStreak)}return r}logCoinTransaction(e,n,r){if(!e)return;const i="coin_transactions_"+e,o=this.safeGet(i,[]);o.push({amount:n,reason:r,timestamp:new Date().toISOString(),balance:this.getCoins()}),o.length>100&&o.shift(),this.safeSet(i,o)}storeCurrentResults(e){return this.safeSet(this.STORAGE_KEYS.QUIZ_RESULTS,{...e,timestamp:Date.now(),expiresAt:Date.now()+30*60*1e3}),!0}getCurrentResults(){const e=this.safeGet(this.STORAGE_KEYS.QUIZ_RESULTS,null);return e?e.expiresAt&&e.expiresAt<Date.now()?(this.clearCurrentResults(),null):e:null}clearCurrentResults(){localStorage.removeItem(this.STORAGE_KEYS.QUIZ_RESULTS)}safeGet(e,n=null){try{const r=localStorage.getItem(e);return r?JSON.parse(r):n}catch{return n}}safeSet(e,n){try{return localStorage.setItem(e,JSON.stringify(n)),!0}catch{return!1}}clearAllData(){Object.values(this.STORAGE_KEYS).forEach(e=>{typeof e=="string"&&!e.includes("_")&&localStorage.removeItem(e)})}clearUserData(e){if(!e)return;[this.STORAGE_KEYS.GAME_STATS+e,this.STORAGE_KEYS.DAILY_PROGRESS+e,this.STORAGE_KEYS.QUEST_DATA+e,this.STORAGE_KEYS.STREAK_DATA+e,this.STORAGE_KEYS.GAME_HISTORY+e,"coin_transactions_"+e].forEach(r=>localStorage.removeItem(r))}}const xe=new F5;var Py={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(C1,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,c={},u=0,d={};function f(m){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var w=D(x);w.chunkSize=parseInt(w.chunkSize),x.step||x.chunk||(w.chunkSize=null),this._handle=new C(w),(this._handle.streamer=this)._config=w}).call(this,m),this.parseChunk=function(x,w){var A=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<A){let T=this._config.newline;T||(E=this._config.quoteChar||'"',T=this._handle.guessLineEndings(x,E)),x=[...x.split(T).slice(A)].join(T)}this.isFirstChunk&&k(this._config.beforeFirstChunk)&&(E=this._config.beforeFirstChunk(x))!==void 0&&(x=E),this.isFirstChunk=!1,this._halted=!1;var A=this._partialLine+x,E=(this._partialLine="",this._handle.parse(A,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(x=E.meta.cursor,A=(this._finished||(this._partialLine=A.substring(x-this._baseIndex),this._baseIndex=x),E&&E.data&&(this._rowCount+=E.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:E,workerId:d.WORKER_ID,finished:A});else if(k(this._config.chunk)&&!w){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=E=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!A||!k(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),A||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(x){k(this._config.error)?this._config.error(x):a&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:x,finished:!1})}}function g(m){var x;(m=m||{}).chunkSize||(m.chunkSize=d.RemoteChunkSize),f.call(this,m),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),o||(x.onload=M(this._chunkLoaded,this),x.onerror=M(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var w,A=this._config.downloadRequestHeaders;for(w in A)x.setRequestHeader(w,A[w])}var E;this._config.chunkSize&&(E=this._start+this._config.chunkSize-1,x.setRequestHeader("Range","bytes="+this._start+"-"+E));try{x.send(this._config.downloadRequestBody)}catch(T){this._chunkError(T.message)}o&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize||x.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(x),this.parseChunk(x.responseText)))},this._chunkError=function(w){w=x.statusText||w,this._sendError(new Error(w))}}function y(m){(m=m||{}).chunkSize||(m.chunkSize=d.LocalChunkSize),f.call(this,m);var x,w,A=typeof FileReader<"u";this.stream=function(E){this._input=E,w=E.slice||E.webkitSlice||E.mozSlice,A?((x=new FileReader).onload=M(this._chunkLoaded,this),x.onerror=M(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var E=this._input,T=(this._config.chunkSize&&(T=Math.min(this._start+this._config.chunkSize,this._input.size),E=w.call(E,this._start,T)),x.readAsText(E,this._config.encoding));A||this._chunkLoaded({target:{result:T}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(x.error)}}function N(m){var x;f.call(this,m=m||{}),this.stream=function(w){return x=w,this._nextChunk()},this._nextChunk=function(){var w,A;if(!this._finished)return w=this._config.chunkSize,x=w?(A=x.substring(0,w),x.substring(w)):(A=x,""),this._finished=!x,this.parseChunk(A)}}function b(m){f.call(this,m=m||{});var x=[],w=!0,A=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):w=!0},this._streamData=M(function(E){try{x.push(typeof E=="string"?E:E.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(T){this._streamError(T)}},this),this._streamError=M(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=M(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=M(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C(m){var x,w,A,E,T=Math.pow(2,53),X=-T,te=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,U=0,F=0,B=!1,$=!1,L=[],z={data:[],errors:[],meta:{}};function Q(Y){return m.skipEmptyLines==="greedy"?Y.join("").trim()==="":Y.length===1&&Y[0].length===0}function Z(){if(z&&A&&(oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),A=!1),m.skipEmptyLines&&(z.data=z.data.filter(function(J){return!Q(J)})),H()){let J=function(ee,re){k(m.transformHeader)&&(ee=m.transformHeader(ee,re)),L.push(ee)};if(z)if(Array.isArray(z.data[0])){for(var Y=0;H()&&Y<z.data.length;Y++)z.data[Y].forEach(J);z.data.splice(0,1)}else z.data.forEach(J)}function q(J,ee){for(var re=m.header?{}:[],ie=0;ie<J.length;ie++){var G=ie,O=J[ie],O=((le,ue)=>(pe=>(m.dynamicTypingFunction&&m.dynamicTyping[pe]===void 0&&(m.dynamicTyping[pe]=m.dynamicTypingFunction(pe)),(m.dynamicTyping[pe]||m.dynamicTyping)===!0))(le)?ue==="true"||ue==="TRUE"||ue!=="false"&&ue!=="FALSE"&&((pe=>{if(te.test(pe)&&(pe=parseFloat(pe),X<pe&&pe<T))return 1})(ue)?parseFloat(ue):ne.test(ue)?new Date(ue):ue===""?null:ue):ue)(G=m.header?ie>=L.length?"__parsed_extra":L[ie]:G,O=m.transform?m.transform(O,G):O);G==="__parsed_extra"?(re[G]=re[G]||[],re[G].push(O)):re[G]=O}return m.header&&(ie>L.length?oe("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+ie,F+ee):ie<L.length&&oe("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+ie,F+ee)),re}var ae;z&&(m.header||m.dynamicTyping||m.transform)&&(ae=1,!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(q),ae=z.data.length):z.data=q(z.data,0),m.header&&z.meta&&(z.meta.fields=L),F+=ae)}function H(){return m.header&&L.length===0}function oe(Y,q,ae,J){Y={type:Y,code:q,message:ae},J!==void 0&&(Y.row=J),z.errors.push(Y)}k(m.step)&&(E=m.step,m.step=function(Y){z=Y,H()?Z():(Z(),z.data.length!==0&&(U+=Y.data.length,m.preview&&U>m.preview?w.abort():(z.data=z.data[0],E(z,K))))}),this.parse=function(Y,q,ae){var J=m.quoteChar||'"',J=(m.newline||(m.newline=this.guessLineEndings(Y,J)),A=!1,m.delimiter?k(m.delimiter)&&(m.delimiter=m.delimiter(Y),z.meta.delimiter=m.delimiter):((J=((ee,re,ie,G,O)=>{var le,ue,pe,we;O=O||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var Re=0;Re<O.length;Re++){for(var Ae,Tt=O[Re],$e=0,nt=0,Me=0,_e=(pe=void 0,new _({comments:G,delimiter:Tt,newline:re,preview:10}).parse(ee)),qe=0;qe<_e.data.length;qe++)ie&&Q(_e.data[qe])?Me++:(Ae=_e.data[qe].length,nt+=Ae,pe===void 0?pe=Ae:0<Ae&&($e+=Math.abs(Ae-pe),pe=Ae));0<_e.data.length&&(nt/=_e.data.length-Me),(ue===void 0||$e<=ue)&&(we===void 0||we<nt)&&1.99<nt&&(ue=$e,le=Tt,we=nt)}return{successful:!!(m.delimiter=le),bestDelimiter:le}})(Y,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess)).successful?m.delimiter=J.bestDelimiter:(A=!0,m.delimiter=d.DefaultDelimiter),z.meta.delimiter=m.delimiter),D(m));return m.preview&&m.header&&J.preview++,x=Y,w=new _(J),z=w.parse(x,q,ae),Z(),B?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,w.abort(),x=k(m.chunk)?"":x.substring(w.getCharIndex())},this.resume=function(){K.streamer._halted?(B=!1,K.streamer.parseChunk(x,!0)):setTimeout(K.resume,3)},this.aborted=function(){return $},this.abort=function(){$=!0,w.abort(),z.meta.aborted=!0,k(m.complete)&&m.complete(z),x=""},this.guessLineEndings=function(ee,J){ee=ee.substring(0,1048576);var J=new RegExp(P(J)+"([^]*?)"+P(J),"gm"),ae=(ee=ee.replace(J,"")).split("\r"),J=ee.split(`
`),ee=1<J.length&&J[0].length<ae[0].length;if(ae.length===1||ee)return`
`;for(var re=0,ie=0;ie<ae.length;ie++)ae[ie][0]===`
`&&re++;return re>=ae.length/2?`\r
`:"\r"}}function P(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(m){var x=(m=m||{}).delimiter,w=m.newline,A=m.comments,E=m.step,T=m.preview,X=m.fastMode,te=null,ne=!1,K=m.quoteChar==null?'"':m.quoteChar,U=K;if(m.escapeChar!==void 0&&(U=m.escapeChar),(typeof x!="string"||-1<d.BAD_DELIMITERS.indexOf(x))&&(x=","),A===x)throw new Error("Comment character same as delimiter");A===!0?A="#":(typeof A!="string"||-1<d.BAD_DELIMITERS.indexOf(A))&&(A=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var F=0,B=!1;this.parse=function($,L,z){if(typeof $!="string")throw new Error("Input must be a string");var Q=$.length,Z=x.length,H=w.length,oe=A.length,Y=k(E),q=[],ae=[],J=[],ee=F=0;if(!$)return $e();if(X||X!==!1&&$.indexOf(K)===-1){for(var re=$.split(w),ie=0;ie<re.length;ie++){if(J=re[ie],F+=J.length,ie!==re.length-1)F+=w.length;else if(z)return $e();if(!A||J.substring(0,oe)!==A){if(Y){if(q=[],we(J.split(x)),nt(),B)return $e()}else we(J.split(x));if(T&&T<=ie)return q=q.slice(0,T),$e(!0)}}return $e()}for(var G=$.indexOf(x,F),O=$.indexOf(w,F),le=new RegExp(P(U)+P(K),"g"),ue=$.indexOf(K,F);;)if($[F]===K)for(ue=F,F++;;){if((ue=$.indexOf(K,ue+1))===-1)return z||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:q.length,index:F}),Ae();if(ue===Q-1)return Ae($.substring(F,ue).replace(le,K));if(K===U&&$[ue+1]===U)ue++;else if(K===U||ue===0||$[ue-1]!==U){G!==-1&&G<ue+1&&(G=$.indexOf(x,ue+1));var pe=Re((O=O!==-1&&O<ue+1?$.indexOf(w,ue+1):O)===-1?G:Math.min(G,O));if($.substr(ue+1+pe,Z)===x){J.push($.substring(F,ue).replace(le,K)),$[F=ue+1+pe+Z]!==K&&(ue=$.indexOf(K,F)),G=$.indexOf(x,F),O=$.indexOf(w,F);break}if(pe=Re(O),$.substring(ue+1+pe,ue+1+pe+H)===w){if(J.push($.substring(F,ue).replace(le,K)),Tt(ue+1+pe+H),G=$.indexOf(x,F),ue=$.indexOf(K,F),Y&&(nt(),B))return $e();if(T&&q.length>=T)return $e(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:q.length,index:F}),ue++}}else if(A&&J.length===0&&$.substring(F,F+oe)===A){if(O===-1)return $e();F=O+H,O=$.indexOf(w,F),G=$.indexOf(x,F)}else if(G!==-1&&(G<O||O===-1))J.push($.substring(F,G)),F=G+Z,G=$.indexOf(x,F);else{if(O===-1)break;if(J.push($.substring(F,O)),Tt(O+H),Y&&(nt(),B))return $e();if(T&&q.length>=T)return $e(!0)}return Ae();function we(Me){q.push(Me),ee=F}function Re(Me){var _e=0;return _e=Me!==-1&&(Me=$.substring(ue+1,Me))&&Me.trim()===""?Me.length:_e}function Ae(Me){return z||(Me===void 0&&(Me=$.substring(F)),J.push(Me),F=Q,we(J),Y&&nt()),$e()}function Tt(Me){F=Me,we(J),J=[],O=$.indexOf(w,F)}function $e(Me){if(m.header&&!L&&q.length&&!ne){var _e=q[0],qe=Object.create(null),St=new Set(_e);let Ye=!1;for(let rt=0;rt<_e.length;rt++){let dt=_e[rt];if(qe[dt=k(m.transformHeader)?m.transformHeader(dt,rt):dt]){let Dt,Je=qe[dt];for(;Dt=dt+"_"+Je,Je++,St.has(Dt););St.add(Dt),_e[rt]=Dt,qe[dt]++,Ye=!0,(te=te===null?{}:te)[Dt]=dt}else qe[dt]=1,_e[rt]=dt;St.add(dt)}Ye&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:q,errors:ae,meta:{delimiter:x,linebreak:w,aborted:B,truncated:!!Me,cursor:ee+(L||0),renamedHeaders:te}}}function nt(){E($e()),q=[],ae=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return F}}function j(m){var x=m.data,w=c[x.workerId],A=!1;if(x.error)w.userError(x.error,x.file);else if(x.results&&x.results.data){var E={abort:function(){A=!0,S(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(k(w.userStep)){for(var T=0;T<x.results.data.length&&(w.userStep({data:x.results.data[T],errors:x.results.errors,meta:x.results.meta},E),!A);T++);delete x.results}else k(w.userChunk)&&(w.userChunk(x.results,E,x.file),delete x.results)}x.finished&&!A&&S(x.workerId,x.results)}function S(m,x){var w=c[m];k(w.userComplete)&&w.userComplete(x),w.terminate(),delete c[m]}function I(){throw new Error("Not implemented.")}function D(m){if(typeof m!="object"||m===null)return m;var x,w=Array.isArray(m)?[]:{};for(x in m)w[x]=D(m[x]);return w}function M(m,x){return function(){m.apply(x,arguments)}}function k(m){return typeof m=="function"}return d.parse=function(m,x){var w=(x=x||{}).dynamicTyping||!1;if(k(w)&&(x.dynamicTypingFunction=w,w={}),x.dynamicTyping=w,x.transform=!!k(x.transform)&&x.transform,!x.worker||!d.WORKERS_SUPPORTED)return w=null,d.NODE_STREAM_INPUT,typeof m=="string"?(m=(A=>A.charCodeAt(0)!==65279?A:A.slice(1))(m),w=new(x.download?g:N)(x)):m.readable===!0&&k(m.read)&&k(m.on)?w=new b(x):(r.File&&m instanceof File||m instanceof Object)&&(w=new y(x)),w.stream(m);(w=(()=>{var A;return!!d.WORKERS_SUPPORTED&&(A=(()=>{var E=r.URL||r.webkitURL||null,T=n.toString();return d.BLOB_URL||(d.BLOB_URL=E.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",T,")();"],{type:"text/javascript"})))})(),(A=new r.Worker(A)).onmessage=j,A.id=u++,c[A.id]=A)})()).userStep=x.step,w.userChunk=x.chunk,w.userComplete=x.complete,w.userError=x.error,x.step=k(x.step),x.chunk=k(x.chunk),x.complete=k(x.complete),x.error=k(x.error),delete x.worker,w.postMessage({input:m,config:x,workerId:w.id})},d.unparse=function(m,x){var w=!1,A=!0,E=",",T=`\r
`,X='"',te=X+X,ne=!1,K=null,U=!1,F=((()=>{if(typeof x=="object"){if(typeof x.delimiter!="string"||d.BAD_DELIMITERS.filter(function(L){return x.delimiter.indexOf(L)!==-1}).length||(E=x.delimiter),typeof x.quotes!="boolean"&&typeof x.quotes!="function"&&!Array.isArray(x.quotes)||(w=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(ne=x.skipEmptyLines),typeof x.newline=="string"&&(T=x.newline),typeof x.quoteChar=="string"&&(X=x.quoteChar),typeof x.header=="boolean"&&(A=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");K=x.columns}x.escapeChar!==void 0&&(te=x.escapeChar+X),x.escapeFormulae instanceof RegExp?U=x.escapeFormulae:typeof x.escapeFormulae=="boolean"&&x.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(P(X),"g"));if(typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(m)){if(!m.length||Array.isArray(m[0]))return B(null,m,ne);if(typeof m[0]=="object")return B(K||Object.keys(m[0]),m,ne)}else if(typeof m=="object")return typeof m.data=="string"&&(m.data=JSON.parse(m.data)),Array.isArray(m.data)&&(m.fields||(m.fields=m.meta&&m.meta.fields||K),m.fields||(m.fields=Array.isArray(m.data[0])?m.fields:typeof m.data[0]=="object"?Object.keys(m.data[0]):[]),Array.isArray(m.data[0])||typeof m.data[0]=="object"||(m.data=[m.data])),B(m.fields||[],m.data||[],ne);throw new Error("Unable to serialize unrecognized input");function B(L,z,Q){var Z="",H=(typeof L=="string"&&(L=JSON.parse(L)),typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(L)&&0<L.length),oe=!Array.isArray(z[0]);if(H&&A){for(var Y=0;Y<L.length;Y++)0<Y&&(Z+=E),Z+=$(L[Y],Y);0<z.length&&(Z+=T)}for(var q=0;q<z.length;q++){var ae=(H?L:z[q]).length,J=!1,ee=H?Object.keys(z[q]).length===0:z[q].length===0;if(Q&&!H&&(J=Q==="greedy"?z[q].join("").trim()==="":z[q].length===1&&z[q][0].length===0),Q==="greedy"&&H){for(var re=[],ie=0;ie<ae;ie++){var G=oe?L[ie]:ie;re.push(z[q][G])}J=re.join("").trim()===""}if(!J){for(var O=0;O<ae;O++){0<O&&!ee&&(Z+=E);var le=H&&oe?L[O]:O;Z+=$(z[q][le],O)}q<z.length-1&&(!Q||0<ae&&!ee)&&(Z+=T)}}return Z}function $(L,z){var Q,Z;return L==null?"":L.constructor===Date?JSON.stringify(L).slice(1,25):(Z=!1,U&&typeof L=="string"&&U.test(L)&&(L="'"+L,Z=!0),Q=L.toString().replace(F,te),(Z=Z||w===!0||typeof w=="function"&&w(L,z)||Array.isArray(w)&&w[z]||((H,oe)=>{for(var Y=0;Y<oe.length;Y++)if(-1<H.indexOf(oe[Y]))return!0;return!1})(Q,d.BAD_DELIMITERS)||-1<Q.indexOf(E)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?X+Q+X:Q)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!o&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=_,d.ParserHandle=C,d.NetworkStreamer=g,d.FileStreamer=y,d.StringStreamer=N,d.ReadableStreamStreamer=b,r.jQuery&&((i=r.jQuery).fn.parse=function(m){var x=m.config||{},w=[];return this.each(function(T){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var X=0;X<this.files.length;X++)w.push({file:this.files[X],inputElem:this,instanceConfig:i.extend({},x)})}),A(),this;function A(){if(w.length===0)k(m.complete)&&m.complete();else{var T,X,te,ne,K=w[0];if(k(m.before)){var U=m.before(K.file,K.inputElem);if(typeof U=="object"){if(U.action==="abort")return T="AbortError",X=K.file,te=K.inputElem,ne=U.reason,void(k(m.error)&&m.error({name:T},X,te,ne));if(U.action==="skip")return void E();typeof U.config=="object"&&(K.instanceConfig=i.extend(K.instanceConfig,U.config))}else if(U==="skip")return void E()}var F=K.instanceConfig.complete;K.instanceConfig.complete=function(B){k(F)&&F(B,K.file,K.inputElem),E()},d.parse(K.file,K.instanceConfig)}}function E(){w.splice(0,1),A()}}),a&&(r.onmessage=function(m){m=m.data,d.WORKER_ID===void 0&&m&&(d.WORKER_ID=m.workerId),typeof m.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(m.input,m.config),finished:!0}):(r.File&&m.input instanceof File||m.input instanceof Object)&&(m=d.parse(m.input,m.config))&&r.postMessage({workerId:d.WORKER_ID,results:m,finished:!0})}),(g.prototype=Object.create(f.prototype)).constructor=g,(y.prototype=Object.create(f.prototype)).constructor=y,(N.prototype=Object.create(N.prototype)).constructor=N,(b.prototype=Object.create(f.prototype)).constructor=b,d})})(Py);var z5=Py.exports;const Us=sg(z5);function as({startRect:t,targetRef:e,count:n=12,onDone:r}){return h.useEffect(()=>{const i=e==null?void 0:e.current;if(!t||!i){r==null||r();return}const o=i.getBoundingClientRect(),a=document.createElement("div");a.style.position="fixed",a.style.inset="0",a.style.pointerEvents="none",a.style.zIndex="9999",document.body.appendChild(a);const c=o.left+o.width/2,u=o.top+o.height/2,d=t.left+t.width/2,f=t.top+t.height/2,g=200;let y=0;function N(b){const C=document.createElement("div");C.textContent="🪙",Object.assign(C.style,{position:"fixed",left:"0px",top:"0px",zIndex:"10000",pointerEvents:"none",fontSize:"22px",opacity:"1",willChange:"transform, opacity",transform:"translate(0px, 0px)"});const P=d,_=f,j=c,S=u;C.style.transform=`translate(${P}px, ${_}px) scale(1)`,a.appendChild(C),C.getBoundingClientRect(),C.style.transition=`transform ${g}ms cubic-bezier(.2,.8,.2,1), opacity ${g}ms linear`,requestAnimationFrame(()=>{C.style.transform=`translate(${j}px, ${S}px) scale(.6)`,C.style.opacity="0.1"}),setTimeout(()=>{C.remove(),y+=1,y===n&&(a.remove(),r==null||r())},g+50)}for(let b=0;b<n;b++)setTimeout(()=>N(),b*60);return()=>{try{a.remove()}catch{}}},[t,e,n,r]),null}const rn={XP_PER_CORRECT:10,XP_PER_LEVEL:100,MAX_LEVEL:100,COINS_PER_CORRECT:5,MAX_ENERGY:5,ENERGY_REGEN_TIME:36e5,ENERGY_COST:{quiz:1,practice:0,daily:0},COMBO_MULTIPLIERS:{2:{multiplier:1.2,text:"Nice!"},3:{multiplier:1.5,text:"Great!"},5:{multiplier:2,text:"On Fire!"},10:{multiplier:3,text:"Legendary!"}},AVATARS:[{id:"wizard",emoji:"🧙",name:"Knowledge Wizard",unlockLevel:1,bgColor:"from-purple-500 to-indigo-500"},{id:"knight",emoji:"⚔️",name:"Quiz Knight",unlockLevel:1,bgColor:"from-blue-500 to-cyan-500"},{id:"explorer",emoji:"🗺️",name:"Fact Explorer",unlockLevel:5,bgColor:"from-green-500 to-emerald-500"},{id:"scientist",emoji:"🔬",name:"Science Master",unlockLevel:10,bgColor:"from-orange-500 to-red-500"},{id:"artist",emoji:"🎨",name:"Creative Mind",unlockLevel:15,bgColor:"from-pink-500 to-rose-500"}],STORAGE_KEYS:{PLAYER:"qp_player",GAME_STATE:"qp_game_state",ENERGY:"qp_energy",CURRENT_COMBO:"qp_combo"}},zp=t=>Math.floor(t/rn.XP_PER_LEVEL)+1,V5=t=>{const e=t%rn.XP_PER_LEVEL;return{current:e,required:rn.XP_PER_LEVEL,percentage:e/rn.XP_PER_LEVEL*100}};function $5({player:t,size:e="normal",showLevel:n=!0,showName:r=!0}){const i=rn.AVATARS.find(a=>a.id===t.avatar)||rn.AVATARS[0],o={small:"w-10 h-10 text-xl",normal:"w-14 h-14 text-2xl",large:"w-20 h-20 text-4xl"};return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`${o[e]} rounded-full bg-gradient-to-br ${i.bgColor} flex items-center justify-center shadow-lg`,children:s.jsx("span",{children:i.emoji})}),n&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-yellow-500 text-black text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center border-2 border-base-bg",children:t.level})]}),r&&s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm",children:(()=>{const a=JSON.parse(localStorage.getItem("currentUser")||"{}");return a.username?a.username.split(" ")[0]:t.name})()}),s.jsx("div",{className:"text-xs text-base-muted",children:i.name})]})]})}function B5({current:t,required:e,level:n,animate:r=!0}){const[i,o]=h.useState(0),a=t/e*100;return h.useEffect(()=>{if(r){const c=setTimeout(()=>{o(a)},100);return()=>clearTimeout(c)}else o(a)},[a,r]),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("span",{className:"text-xs font-medium",children:["Level ",n]}),s.jsxs("span",{className:"text-xs text-base-muted",children:[t,"/",e," XP"]})]}),s.jsx("div",{className:"h-2 bg-black/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-700 ease-out relative",style:{width:`${i}%`},children:s.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]})}const Dy=[{name:"GK",slug:"general-knowledge",questions:50,icon:"🧠",color:"#FF6B6B",gradient:"from-red-500 to-pink-500"},{name:"Science",slug:"science",questions:45,icon:"🧪",color:"#4ECDC4",gradient:"from-cyan-500 to-teal-500"},{name:"Fun Facts",slug:"fun-facts",questions:30,icon:"🎉",color:"#FFD93D",gradient:"from-yellow-400 to-orange-500"},{name:"History",slug:"history",questions:42,icon:"🏺",color:"#A8E6CF",gradient:"from-green-400 to-emerald-500"},{name:"AI & Tech",slug:"artificial-intelligence",questions:28,icon:"🤖",color:"#C7B8FF",gradient:"from-purple-400 to-indigo-500"},{name:"More",slug:"more",questions:0,icon:"✨",color:"#FF8CC3",gradient:"from-pink-400 to-rose-500"}],Ly=[{name:"Geography",slug:"geography",questions:38,icon:"🗺️",color:"#FACC15",gradient:"from-yellow-400 to-amber-500"},{name:"Computer",slug:"computer",questions:34,icon:"💻",color:"#3B82F6",gradient:"from-blue-400 to-blue-600"},{name:"Aptitude",slug:"aptitude",questions:36,icon:"📐",color:"#EC4899",gradient:"from-pink-500 to-rose-500"},{name:"Iconic Figures",slug:"iconic-figures",questions:26,icon:"🌟",color:"#8B5CF6",gradient:"from-purple-500 to-violet-600"}],My=[...Dy.filter(t=>t.slug!=="more"),...Ly];function U5(){const t=Ge(),[e,n]=h.useState(!1),[r,i]=h.useState([]);h.useEffect(()=>{const a=[...Array(6)].map((c,u)=>({id:u,left:Math.random()*100,delay:Math.random()*2,duration:2+Math.random()*2}));i(a)},[]);const o=()=>{t("/play/classic",{state:{from:"home"}})};return s.jsxs("div",{className:"relative overflow-hidden rounded-3xl pt-12 pb-12 px-6 mb-4 transform transition-all hover:scale-[1.01] active:scale-[0.99]",style:{background:"linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 50%, #45B7D1 100%)",boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[s.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-10px) rotate(5deg); }
        }
        
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        
        @keyframes sparkle {
          0% { transform: translateY(0) scale(0); opacity: 0; }
          50% { transform: translateY(-50px) scale(1); opacity: 1; }
          100% { transform: translateY(-100px) scale(0); opacity: 0; }
        }
        
        @keyframes pulse-glow {
          0%, 100% { box-shadow: 0 0 10px rgba(255,255,255,0.5); }
          50% { box-shadow: 0 0 20px rgba(255,255,255,0.8); }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          25% { transform: translateY(-5px); }
          75% { transform: translateY(2px); }
        }
      `}),r.map(a=>s.jsx("div",{className:"absolute text-lg pointer-events-none",style:{left:`${a.left}%`,bottom:"0",animation:`sparkle ${a.duration}s ease-out infinite`,animationDelay:`${a.delay}s`},children:"✨"},a.id)),s.jsx("div",{className:"absolute -top-1 -right-2 text-7xl opacity-15",style:{animation:"spin-slow 20s linear infinite",transform:e?"scale(1.1)":"scale(1)",transition:"transform 0.3s"},children:"🎡"}),s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"relative w-14 h-14 flex-shrink-0",style:{animation:e?"bounce 1s ease-in-out infinite":"float 3s ease-in-out infinite"},children:s.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 100 100",className:"absolute inset-0",style:{animation:"spin-slow 4s linear infinite"},children:[[{color:"#FF6B6B",icon:"🧠"},{color:"#4ECDC4",icon:"🎉"},{color:"#45B7D1",icon:"🧪"},{color:"#FFD700",icon:"🏺"},{color:"#9370DB",icon:"🗺️"},{color:"#FF9800",icon:"🤖"}].map((a,c)=>{const d=c*60,f=d+60,g=0,y=Math.PI*d/180,N=Math.PI*f/180,b=50+45*Math.cos(y),C=50-45*Math.sin(y),P=50+45*Math.cos(N),_=50-45*Math.sin(N);return s.jsx("g",{children:s.jsx("path",{d:`M50,50 L${b},${C} A45,45 0 ${g} 0 ${P},${_} Z`,fill:a.color,stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5"})},c)}),s.jsx("circle",{cx:"50",cy:"50",r:"12",fill:"white"}),s.jsx("text",{x:"50",y:"55",textAnchor:"middle",className:"text-xs font-bold fill-gray-800",children:"🪙"})]})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-white drop-shadow-md whitespace-nowrap",children:"Spin & Win!"}),s.jsx("p",{className:"text-sm text-white/90",children:"Win amazing prizes!"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -top-2 -left-2 text-sm opacity-70",style:{animation:"float 3s ease-in-out infinite"},children:"🪙"}),s.jsx("div",{className:"absolute -top-2 -right-2 text-sm opacity-70",style:{animation:"float 3s ease-in-out infinite 0.5s"},children:"⭐"}),s.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 text-sm opacity-70",style:{animation:"float 3s ease-in-out infinite 1s"},children:"💎"}),s.jsxs("button",{className:"relative bg-white text-gray-900 rounded-full font-bold shadow-lg hover:shadow-xl transition-all px-5 py-2.5 flex items-center gap-2",style:{animation:"pulse-glow 2s ease-in-out infinite"},onClick:a=>{a.stopPropagation(),o()},children:[s.jsx("span",{className:"text-sm font-black",children:"PLAY"}),s.jsx("span",{className:"text-base",children:"🎯"})]})]})]})]})}function q5({actions:t}){return s.jsx("div",{className:"grid grid-cols-4 gap-3 mb-8",children:t.map((e,n)=>s.jsxs("button",{onClick:e.action,className:`${e.color} aspect-square rounded-2xl flex flex-col items-center justify-center gap-1 transform transition-all hover:scale-105`,children:[s.jsx("div",{className:"text-2xl",children:e.icon}),s.jsx("div",{className:"text-[10px] font-medium text-white",children:e.label})]},n))})}function H5({categories:t,onCategorySelect:e}){return s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Choose Your Adventure"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.map(n=>s.jsxs("button",{onClick:()=>e(n),className:`bg-gradient-to-br ${n.gradient} aspect-square rounded-2xl p-4 flex flex-col items-center justify-center gap-2 transform transition-all hover:scale-105 hover:shadow-lg relative`,children:[s.jsx("div",{className:"text-3xl",children:n.icon}),s.jsx("div",{className:"text-xs font-bold text-white text-center",children:n.name}),n.questions>0&&s.jsxs("div",{className:"text-[10px] bg-white/20 px-2 py-0.5 rounded-full",children:[n.questions," Qs"]})]},n.name))})]})}function Q5({onClick:t,isPulsing:e}){return s.jsxs("button",{onClick:t,className:`w-full rounded-2xl p-5 flex justify-between items-center transition-all ${e?"bg-green-500/20 border-2 border-green-500 animate-pulse":"bg-white/5 border border-base-border hover:bg-white/10"}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-teal-500 rounded-xl grid place-items-center text-2xl",children:"📚"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:"Practice Mode"}),s.jsx("div",{className:"text-xs text-base-muted",children:"No timer • No energy cost • Learn at your pace"})]})]}),s.jsx("div",{className:"text-xl",children:"→"})]})}function G5({coinPillRef:t}){const[e,n]=h.useState("idle"),[r,i]=h.useState([]),[o,a]=h.useState(0),[c,u]=h.useState([]),[d,f]=h.useState(0),[g,y]=h.useState(""),[N,b]=h.useState(null),[C,P]=h.useState(null),[_,j]=h.useState(!1),[S,I]=h.useState(!1),[D,M]=h.useState(!1),[k,m]=h.useState(null),[x,w]=h.useState(0),A=h.useRef(null),E=h.useRef(null),[T]=Rt("/sounds/correct.mp3",{volume:.6}),[X]=Rt("/sounds/wrong.mp3",{volume:.6}),[te]=Rt("/sounds/win.mp3",{volume:.7,duration:1e3}),[ne]=Rt("/sounds/coin.mp3",{volume:.75}),K=3,U=10,F=2,B=50;h.useEffect(()=>{$()},[]),h.useEffect(()=>{if(e==="complete"){const ee=()=>{const ie=new Date,G=new Date(ie);G.setDate(G.getDate()+1),G.setHours(0,0,0,0);const O=G-ie,le=Math.floor(O/(1e3*60*60)),ue=Math.floor(O%(1e3*60*60)/(1e3*60)),pe=Math.floor(O%(1e3*60)/1e3),we=le.toString().padStart(2,"0"),Re=ue.toString().padStart(2,"0"),Ae=pe.toString().padStart(2,"0");y(`${we}:${Re}:${Ae}`)};ee();const re=setInterval(ee,1e3);return()=>clearInterval(re)}},[e]);const $=async()=>{try{const re=await(await fetch("/data/quiz_questions_bank.csv")).text(),{data:ie}=Us.parse(re,{header:!0,skipEmptyLines:!0}),G=ie.filter(O=>O.question&&O.option1&&O.option2&&O.option3&&O.option4).map((O,le)=>{var ue;return{id:le,question:O.question,options:[O.option1,O.option2,O.option3,O.option4],correct:["A","B","C","D"].indexOf((ue=O.answer)==null?void 0:ue.toUpperCase())}}).filter(O=>O.correct>=0).sort(()=>Math.random()-.5).slice(0,K);i(G)}catch{i([{id:1,question:"What is the capital of France?",options:["London","Paris","Berlin","Madrid"],correct:1},{id:2,question:"What is 2 + 2?",options:["3","4","5","6"],correct:1},{id:3,question:"What color is the sky?",options:["Red","Green","Blue","Yellow"],correct:2}])}},L=()=>{n("playing"),a(0),u(new Array(K).fill(null)),f(0),j(!1),w(0)},z=ee=>{const re=[...c];re[o]=ee,u(re);const ie=ee===r[o].correct;I(ie),j(!0),ie?(T&&T(),M(!0),setTimeout(()=>M(!1),500)):X&&X();const G=re.filter(O=>O!==null).length;setTimeout(()=>{j(!1),G===K?(n("celebrating"),te&&te(),setTimeout(()=>{Z(re)},2e3)):Q(re)},600)},Q=ee=>{for(let re=o+1;re<K;re++)if(ee[re]===null){a(re);return}for(let re=0;re<o;re++)if(ee[re]===null){a(re);return}},Z=ee=>{const re=ee.reduce((O,le,ue)=>O+(le===r[ue].correct?1:0),0);f(re);const G=re===K?re*U*F:re*U;w(G),n("complete"),setTimeout(()=>{if(G>0&&A.current&&(t!=null&&t.current)){const O=A.current.getBoundingClientRect();m({startRect:O,count:Math.min(G/5,10),amount:G}),ne&&ne()}},500)},H=()=>{$(),n("idle"),a(0),u([]),f(0),j(!1),w(0)},oe=ee=>{P(null),b(ee.targetTouches[0].clientX)},Y=ee=>{P(ee.targetTouches[0].clientX)},q=()=>{if(!N||!C)return;const ee=N-C,re=ee>B,ie=ee<-B;if(re){const G=(o+1)%K;a(G)}else if(ie){const G=(o-1+K)%K;a(G)}},ae=({parentRef:ee})=>{var le;if(!D)return null;const re=(le=ee==null?void 0:ee.current)==null?void 0:le.getBoundingClientRect(),ie=re?re.top:100,G=re?re.left:0,O=re?re.width:window.innerWidth;return s.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(12)].map((ue,pe)=>s.jsx("div",{className:"absolute",style:{left:`${G+Math.random()*O}px`,top:`${ie}px`,animation:`confettiFall ${2+Math.random()*1}s ease-out forwards`,animationDelay:`${Math.random()*.3}s`,fontSize:"24px",opacity:.9},children:["🎉","✨","🌟","⭐","🎊"][Math.floor(Math.random()*5)]},`${Date.now()}-${pe}`))})};if(e==="celebrating")return s.jsxs("div",{className:"relative rounded-2xl bg-gradient-to-br from-purple-600/20 to-blue-600/20 backdrop-blur border border-white/10 p-8 mb-4 text-center",children:[s.jsx("div",{className:"animate-bounce-slow",children:s.jsx("span",{className:"text-5xl",children:"🎉"})}),s.jsx("h2",{className:"text-2xl font-bold mt-4 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Congratulations!"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You've completed today's challenge"})]});if(e==="complete"){const ee=Math.round(d/K*100),re=d===K;return s.jsxs(s.Fragment,{children:[k&&s.jsx(as,{startRect:k.startRect,targetRef:t,count:k.count,onDone:()=>{if(!k.processed){k.processed=!0;const ie=Ot.getCurrentUser();ie!=null&&ie.phone?(xe.addCoins(k.amount,"Daily Challenge"),xe.updateQuestProgress(ie.phone,"daily_challenge",1)):xe.addCoins(k.amount,"Daily Challenge"),window.dispatchEvent(new Event("coinsUpdated"))}m(null)}}),s.jsxs("div",{className:"relative rounded-2xl bg-gradient-to-br from-purple-600/10 to-blue-600/10 backdrop-blur border border-white/10 p-4 mb-4",children:[s.jsxs("div",{ref:A,className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-yellow-400/20 to-orange-400/20 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:re?"🏆":d>=2?"🥈":"🥉"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-400",children:"Challenge Complete!"}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Come back in ",g]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-green-400",children:[ee,"%"]}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Accuracy"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:["+",x]}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Coins"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-orange-400 whitespace-nowrap",children:"🔥2"}),s.jsx("div",{className:"text-[10px] text-gray-500",children:"Streak"})]})]})]}),s.jsx("button",{onClick:H,className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-[10px] text-gray-600 hover:text-gray-400",children:"[Test: Replay]"})]})]})}if(e==="idle")return s.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-violet-500/30 to-blue-500/15 backdrop-blur border border-white/10 p-8 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Daily Challenge"}),s.jsxs("p",{className:"text-xs text-gray-400",children:[K," questions • Up to ",K*U*F," coins"]})]}),s.jsx("button",{onClick:L,className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center cursor-pointer hover:scale-110 active:scale-95 transition-transform",children:s.jsx("span",{className:"text-white",children:"▶"})})]})});const J=r[o];return s.jsxs(s.Fragment,{children:[s.jsx(ae,{parentRef:E}),s.jsxs("div",{ref:E,className:"relative rounded-2xl bg-gradient-to-br from-gray-800/30 to-gray-900/30 backdrop-blur border border-white/10 p-4 mb-4",onTouchStart:oe,onTouchMove:Y,onTouchEnd:q,children:[s.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(K)].map((ee,re)=>{var ie;return s.jsx("div",{className:`h-1 flex-1 rounded-full transition-all ${c[re]!==null?c[re]===((ie=r[re])==null?void 0:ie.correct)?"bg-green-500":"bg-red-500":re===o?"bg-blue-500":"bg-gray-700"}`},re)})}),s.jsx("h3",{className:"text-base font-medium mb-4",children:J.question}),s.jsx("div",{className:"grid gap-2",children:J.options.map((ee,re)=>{const ie=c[o]===re,G=c[o]!==null,O=re===J.correct,le=_&&(ie||O);return s.jsx("button",{onClick:()=>!G&&z(re),disabled:G,className:`
                  relative p-3 rounded-xl text-left text-sm font-medium transition-all
                  ${le&&O?"bg-green-500/30 border border-green-500 animate-pulse-once":le&&ie&&!O?"bg-red-500/30 border border-red-500 animate-shake":ie&&!_?"bg-blue-500/20 border border-blue-500":G?"bg-white/5 border border-transparent opacity-50":"bg-white/5 border border-white/10 hover:border-white/20 hover:bg-white/10 active:scale-[0.98]"}
                `,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"opacity-50",children:String.fromCharCode(65+re)}),s.jsx("span",{children:ee})]}),le&&O&&s.jsx("span",{className:"text-green-400 animate-fade-in",children:"✓"}),le&&ie&&!O&&s.jsx("span",{className:"text-red-400 animate-fade-in",children:"✗"})]})},re)})}),s.jsx("style",{jsx:!0,children:`
          @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
          }
          
          @keyframes pulse-once {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; transform: scale(1.02); }
          }
          
          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
          }
          
          @keyframes fade-in {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
          }
          
          @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
          }
          
        @keyframes confettiFall {
        0% { 
            transform: translateY(0) translateX(0) rotate(0deg) scale(1);
            opacity: 0.9;
        }
        10% {
            opacity: 1;
        }
        25% {
            transform: translateY(25vh) translateX(10px) rotate(180deg) scale(1.1);
        }
        50% {
            transform: translateY(50vh) translateX(-10px) rotate(360deg) scale(1);
        }
        75% {
            transform: translateY(75vh) translateX(5px) rotate(540deg) scale(0.9);
            opacity: 0.8;
        }
        100% { 
            transform: translateY(100vh) translateX(0) rotate(720deg) scale(0.8);
            opacity: 0;
        }
        }
                
          .animate-shimmer {
            animation: shimmer 3s infinite;
          }
          
          .animate-pulse-once {
            animation: pulse-once 0.6s ease-out;
          }
          
          .animate-shake {
            animation: shake 0.4s ease-out;
          }
          
          .animate-fade-in {
            animation: fade-in 0.3s ease-out;
          }
          
          .animate-bounce-slow {
            animation: bounce-slow 1s ease-in-out infinite;
          }
          
          .animate-confetti {
            animation: confetti 2s ease-in forwards;
          }
        `})]})]})}function W5({show:t,onClose:e,player:n,changeAvatar:r,GAME_CONSTANTS:i}){return t?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:o=>{o.target===o.currentTarget&&e()},children:s.jsxs("div",{className:"bg-base-card rounded-3xl p-6 w-full max-w-md border border-base-border max-h-[80vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Choose Your Avatar"}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-base-border grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.AVATARS.map(o=>{const a=!n.unlockedAvatars||!n.unlockedAvatars.includes(o.id),c=n.avatar===o.id;return s.jsxs("button",{onClick:()=>{a||(r(o.id),e())},className:`p-4 rounded-2xl border-2 transition-all ${c?"border-brand-blue bg-brand-blue/20":a?"border-gray-600 bg-gray-800/50 opacity-50":"border-base-border bg-white/5 hover:bg-white/10"}`,disabled:a,children:[s.jsx("div",{className:`text-4xl mb-2 ${a?"grayscale":""}`,children:o.emoji}),s.jsx("div",{className:"text-sm font-medium",children:o.name}),a&&s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Unlock at Level ",o.unlockLevel]}),c&&s.jsx("div",{className:"text-xs text-brand-blue mt-1",children:"Current"})]},o.id)})})]})}):null}function Y5({show:t,onClose:e,categories:n,onCategorySelect:r}){return t?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:s.jsxs("div",{className:"bg-base-card rounded-3xl p-6 w-full max-w-md border border-base-border",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"More categories"}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-base-border grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:n.map(i=>s.jsxs("button",{onClick:()=>{e(),r(i)},className:`bg-gradient-to-br ${i.gradient} p-4 rounded-2xl flex flex-col items-center gap-2 hover:scale-105 transition-transform relative`,children:[s.jsx("div",{className:"text-3xl",children:i.icon}),s.jsx("div",{className:"text-sm font-bold text-white",children:i.name}),s.jsxs("div",{className:"text-xs text-white/80",children:[i.questions," questions"]})]},i.name))})]})}):null}function K5({show:t,onClose:e,coins:n,onNavigateToPlay:r}){return t?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:s.jsxs("div",{className:"bg-base-card rounded-3xl p-6 w-full max-w-md border border-base-border relative overflow-hidden",onClick:i=>i.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"magic-gradient h-full"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"coin-3d text-5xl",style:{animation:"coinRotate 2s linear infinite, glow 2s ease-in-out infinite"},children:"🪙"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"Your Treasure"}),s.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[xe.getCoins()," Coins"]})]})]}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-base-border grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-base-muted mb-3",children:"Ways to Earn"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),"Complete Quizzes"]}),s.jsx("div",{className:"text-xs text-base-muted mt-1",children:"+5 coins per correct answer"})]}),s.jsx("div",{className:"text-green-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎯"}),"Daily Challenge"]}),s.jsx("div",{className:"text-xs text-base-muted mt-1",children:"Complete daily for bonus"})]}),s.jsx("div",{className:"text-blue-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎰"}),"Spin & Play"]}),s.jsx("div",{className:"text-xs text-base-muted mt-1",children:"Test your luck!"})]}),s.jsx("div",{className:"text-purple-400 font-bold",children:"+50"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🏆"}),"Achievements"]}),s.jsx("div",{className:"text-xs text-base-muted mt-1",children:"Unlock special rewards"})]}),s.jsx("div",{className:"text-orange-400 font-bold",children:"+???"})]})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs text-base-muted mb-2",children:[s.jsx("span",{children:"Next reward"}),s.jsxs("span",{children:[100-n%100," coins to go"]})]}),s.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all",style:{width:`${n%100}%`}})})]}),s.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold hover:scale-[1.02] transition-transform shadow-lg",style:{boxShadow:"0 10px 30px rgba(251, 191, 36, 0.3)"},children:"Start Earning Now! 🚀"})]})]})}):null}function X5({show:t,onClose:e,selectedCategory:n,difficulty:r,setDifficulty:i,count:o,setCount:a,timer:c,setTimer:u,onStart:d}){return!t||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:f=>{f.target===f.currentTarget&&e()},children:s.jsxs("div",{className:"bg-base-card rounded-3xl p-6 w-full max-w-md border border-base-border",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Quiz Mode"}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-base-border grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsx("div",{className:"mb-4 p-3 rounded-xl bg-blue-500/10 border border-blue-500/30",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:n.icon}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:["Category: ",n.name]}),s.jsxs("div",{className:"text-xs text-base-muted",children:[n.questions," questions available"]})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["easy","medium","hard"].map(f=>s.jsx("button",{onClick:()=>i(f),className:`py-2 rounded-xl border ${r===f?"bg-brand-blue/30 border-brand-blue":"bg-white/5 border-base-border"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Questions"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,20,30].map(f=>s.jsx("button",{onClick:()=>a(f),className:`py-2 rounded-xl border ${o===f?"bg-brand-blue/30 border-brand-blue":"bg-white/5 border-base-border"}`,children:f},f))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Timer (seconds per question)"}),s.jsx("input",{type:"number",value:c,onChange:f=>u(Number(f.target.value)||45),min:10,max:120,className:"w-full px-4 py-2 rounded-xl bg-white/5 border border-base-border"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl border border-base-border bg-white/5",children:"Cancel"}),s.jsx("button",{onClick:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-brand-blue to-brand-purple text-white font-medium",children:"Start Quiz"})]})]})})}function J5({show:t,onClose:e,allCategories:n,category:r,setCategory:i,difficulty:o,setDifficulty:a,count:c,setCount:u,onStart:d}){return t?s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:f=>{f.target===f.currentTarget&&e()},children:s.jsxs("div",{className:"bg-base-card rounded-3xl p-6 w-full max-w-md border border-base-border max-h-[90vh] overflow-y-auto",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Practice Mode"}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-base-border grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Category"}),s.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-[200px] overflow-y-auto",children:n.map(f=>s.jsxs("button",{onClick:()=>i(f.slug),className:`p-3 rounded-xl border flex flex-col items-center gap-1 ${r===f.slug?"bg-brand-blue/30 border-brand-blue":"bg-white/5 border-base-border"}`,children:[s.jsx("div",{className:"text-xl",children:f.icon}),s.jsx("div",{className:"text-[10px] text-center",children:f.name})]},f.slug))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Difficulty"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["easy","medium","hard"].map(f=>s.jsx("button",{onClick:()=>a(f),className:`py-2 rounded-xl border ${o===f?"bg-brand-blue/30 border-brand-blue":"bg-white/5 border-base-border"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"text-sm text-base-muted mb-2 block",children:"Questions"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,20,30].map(f=>s.jsx("button",{onClick:()=>u(f),className:`py-2 rounded-xl border ${c===f?"bg-brand-blue/30 border-brand-blue":"bg-white/5 border-base-border"}`,children:f},f))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:e,className:"flex-1 py-3 rounded-xl border border-base-border bg-white/5",children:"Cancel"}),s.jsx("button",{onClick:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-brand-blue to-brand-purple text-white font-medium",children:"Start Practice"})]})]})}):null}function Z5({player:t,onContinue:e}){const[n,r]=h.useState(()=>sessionStorage.getItem("justSignedUp")==="true"?(sessionStorage.removeItem("justSignedUp"),!1):sessionStorage.getItem("welcomeShown")!=="true"),[i,o]=h.useState(!1),[a,c]=h.useState(!1),[u,d]=h.useState(""),[f,g]=h.useState(""),[y,N]=h.useState("Champion"),[b,C]=h.useState(1),[P,_]=h.useState(0),[j,S]=h.useState(0),I=()=>{try{const m=new Audio("/sounds/welcome.mp3");m.volume=.6,m.play()}catch{console.log("Welcome sound not available")}},D=()=>{navigator.vibrate&&navigator.vibrate([100,50,100])};h.useEffect(()=>{if((()=>{const T=JSON.parse(localStorage.getItem("currentUser")||"{}");let X="Champion",te=1,ne=0,K=0;if(T.phone){const F=JSON.parse(localStorage.getItem(`user_profile_${T.phone}`)||"{}"),$=JSON.parse(localStorage.getItem("users")||"{}")[T.phone]||{};F.name?X=F.name.split(" ")[0]:$.username?X=$.username.split(" ")[0]:T.username&&(X=T.username.split(" ")[0]),X&&X!=="Champion"&&(X=X.charAt(0).toUpperCase()+X.slice(1).toLowerCase())}else T.username&&(X=T.username.split(" ")[0]);const U=JSON.parse(localStorage.getItem("qp_player")||"{}");te=(t==null?void 0:t.level)||U.level||1,ne=xe.getCoins(),K=(t==null?void 0:t.currentStreak)||U.currentStreak||0,X!=="Champion"&&X!==U.name&&(U.name=X,localStorage.setItem("qp_player",JSON.stringify(U))),N(X),C(te),_(ne),S(K)})(),!n){e();return}sessionStorage.setItem("welcomeShown","true"),document.body.classList.add("hide-bottom-nav"),I(),D();const x=["🦉","🐧","🦝","🦜","🦕","🐙","🦊","🐸","🦁","🐨"];g(x[Math.floor(Math.random()*x.length)]);const w=setInterval(()=>{c(T=>!T)},2e3),A=["🎯 New challenges await!","🏆 Ready to be a champion?","🌟 Your brain adventure starts now!","🎨 Time for fun learning!","🎪 The quiz circus is open!","🚀 Blast off to knowledge!","🎭 Let's play and learn!","🌈 Rainbow of questions ahead!"];d(A[Math.floor(Math.random()*A.length)]);const E=setInterval(()=>{d(A[Math.floor(Math.random()*A.length)])},3e3);return()=>{document.body.classList.remove("hide-bottom-nav"),clearInterval(w),clearInterval(E)}},[n,e,t]);const M=()=>{try{const m=new Audio("/sounds/tap.mp3");m.volume=.5,m.play()}catch{console.log("Click sound not available")}navigator.vibrate&&navigator.vibrate(20),o(!0),document.body.classList.remove("hide-bottom-nav"),setTimeout(()=>{r(!1),e()},400)};if(!n)return null;const k=()=>{const m=new Date().getHours();return m<12?"Good morning":m<17?"Good afternoon":"Good evening"};return s.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center transition-all duration-500
      ${i?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[s.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #fda085 75%, #f5a375 90%, #e08060 100%)"}}),s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[[{top:"10%",left:"15%",size:"24px",delay:"0s"},{top:"20%",left:"75%",size:"20px",delay:"0.5s"},{top:"15%",left:"45%",size:"28px",delay:"1s"},{top:"30%",left:"85%",size:"22px",delay:"1.5s"},{top:"8%",left:"60%",size:"26px",delay:"2s"}].map((m,x)=>s.jsx("div",{className:"absolute animate-twinkle",style:{top:m.top,left:m.left,fontSize:m.size,animationDelay:m.delay},children:"⭐"},`star-${x}`)),s.jsxs("div",{className:"absolute top-10 left-0 w-full",children:[s.jsx("div",{className:"cloud cloud1",children:"☁️"}),s.jsx("div",{className:"cloud cloud2",children:"☁️"})]})]}),s.jsxs("div",{className:"relative z-10 text-center px-6 w-full max-w-sm mx-auto",children:[s.jsx("div",{className:`text-8xl mb-4 transition-transform duration-500 ${a?"scale-110 rotate-6":"scale-100 rotate-0"}`,children:f}),s.jsxs("div",{className:"relative rounded-3xl px-6 py-4 mb-6 shadow-xl overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100"}),s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-gradient-to-br from-purple-100 to-pink-100 rotate-45"}),s.jsxs("div",{className:"relative",children:[s.jsxs("h1",{className:"text-3xl font-bold text-purple-800",children:["Hello, ",y,"! 👋"]}),s.jsx("p",{className:"text-sm text-purple-600 mt-1",children:k()})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[s.jsxs("div",{className:"relative rounded-2xl p-3 transform hover:scale-105 transition-transform overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-200 via-yellow-100 to-orange-100"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-3xl mb-1",children:"⭐"}),s.jsx("div",{className:"text-2xl font-bold text-orange-800",children:b}),s.jsx("div",{className:"text-xs text-orange-600",children:"Level"})]})]}),s.jsxs("div",{className:"relative rounded-2xl p-3 transform hover:scale-105 transition-transform overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-200 via-cyan-100 to-teal-100"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🪙"}),s.jsx("div",{className:"text-2xl font-bold text-teal-800",children:P}),s.jsx("div",{className:"text-xs text-teal-600",children:"Coins"})]})]}),s.jsxs("div",{className:"relative rounded-2xl p-3 transform hover:scale-105 transition-transform overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-200 via-red-100 to-pink-100"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🔥"}),s.jsx("div",{className:"text-2xl font-bold text-orange-800",children:j}),s.jsx("div",{className:"text-xs text-orange-600",children:"Streak"})]})]})]}),s.jsx("div",{className:"h-4"}),s.jsx("div",{className:"text-white/90 font-medium animate-fade-slide mb-6",children:u}),s.jsxs("button",{onClick:M,className:"group relative w-full",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400 to-blue-500 rounded-full blur-lg opacity-75 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:`relative bg-gradient-to-r from-green-400 to-blue-500 text-white py-5 px-8 rounded-full font-bold text-xl shadow-2xl 
            transform transition-all duration-300 hover:scale-105 active:scale-95 flex items-center justify-center gap-3`,children:[s.jsx("span",{children:"Let's Learn!"}),s.jsx("span",{className:"text-2xl animate-bounce",children:"🚀"})]})]})]}),s.jsx("style",{jsx:!0,children:`
        @keyframes twinkle {
          0%, 100% { 
            opacity: 0.3; 
            transform: scale(1);
          }
          50% { 
            opacity: 1; 
            transform: scale(1.2);
          }
        }
        
        @keyframes float-right {
          from { transform: translateX(-100px); }
          to { transform: translateX(calc(100vw + 100px)); }
        }
        
        @keyframes fade-slide {
          0%, 100% { opacity: 0.8; transform: translateY(0); }
          50% { opacity: 1; transform: translateY(-3px); }
        }
        
        .animate-twinkle {
          color: rgba(255, 255, 255, 0.9);
          animation: twinkle 3s ease-in-out infinite;
        }
        
        .cloud {
          position: absolute;
          font-size: 60px;
          opacity: 0.3;
          animation: float-right 20s linear infinite;
        }
        
        .cloud1 {
          top: 10%;
          animation-duration: 25s;
        }
        
        .cloud2 {
          top: 5%;
          animation-duration: 30s;
          animation-delay: 10s;
        }
        
        .animate-fade-slide {
          animation: fade-slide 3s ease-in-out infinite;
        }
        
        .hide-bottom-nav .bottom-nav {
          display: none !important;
        }
      `})]})}function Vp(){const[t,e]=h.useState(()=>{const Q=sessionStorage.getItem("justSignedUp"),Z=sessionStorage.getItem("justSignedIn");return Q==="true"||Z==="true"?(sessionStorage.removeItem("justSignedUp"),sessionStorage.removeItem("justSignedIn"),sessionStorage.setItem("welcomeShown","true"),!1):sessionStorage.getItem("welcomeShown")!=="true"}),n=Ge(),r=Ir(),{player:i,levelProgress:o,useEnergy:a,changeAvatar:c}=r,[,u]=h.useState({});Rt("/sounds/correct.mp3",{volume:.6}),Rt("/sounds/wrong.mp3",{volume:.6}),Rt("/sounds/coin.mp3",{volume:.75});const[d]=Rt("/sounds/levelup.mp3",{volume:.8}),f=h.useRef(i.level),g=h.useRef(null);h.useEffect(()=>{const Q=()=>{};return window.addEventListener("focus",Q),()=>window.removeEventListener("focus",Q)},[]),h.useEffect(()=>{i.level>f.current&&(d==null||d(),f.current=i.level)},[i.level,d]),h.useEffect(()=>{const Q=()=>{u({})};return window.addEventListener("storage",Q),window.addEventListener("coinsUpdated",Q),()=>{window.removeEventListener("storage",Q),window.removeEventListener("coinsUpdated",Q)}},[]);const[y,N]=h.useState(!1),[b,C]=h.useState(null),[P,_]=h.useState(!1),[j,S]=h.useState("medium"),[I,D]=h.useState(10),[M,k]=h.useState(45),[m,x]=h.useState(!1),[w,A]=h.useState(!1),[E,T]=h.useState(!1),[X,te]=h.useState("general-knowledge"),[ne,K]=h.useState("medium"),[U,F]=h.useState(10);h.useEffect(()=>{const Q=sessionStorage.getItem("homeScrollPosition");Q&&window.scrollTo(0,parseInt(Q));const Z=()=>{sessionStorage.setItem("homeScrollPosition",window.scrollY.toString())};return window.addEventListener("scroll",Z),()=>window.removeEventListener("scroll",Z)},[]);const B=Q=>{if(Q.slug==="more"){N(!0);return}C(Q),_(!0)},$=()=>{console.log("Starting quiz with energy:",i.energy),console.log("Category:",b.slug),n(`/quiz/${b.slug}`,{state:{mode:"quiz",difficulty:j,count:I,timer:{type:"per_q",seconds:M},source:"adventure"}}),_(!1)},L=()=>{console.log("Starting practice, category:",X),n(`/quiz/${X}`,{state:{mode:"practice",difficulty:ne,count:U,timer:{type:"off",seconds:0}}}),T(!1)},z=[{icon:"🎯",label:"Quests",color:"bg-gradient-to-br from-orange-500 to-pink-500",action:()=>{sessionStorage.setItem("questsFromHome","true"),n("/profile/quests")}},{icon:"🔥",label:"Streak",color:"bg-gradient-to-br from-red-500 to-orange-500",action:()=>n("/profile/streaks")},{icon:"🏆",label:"Achieve",color:"bg-gradient-to-br from-blue-500 to-purple-500",action:()=>n("/profile/achievements")},{icon:"🎁",label:"Rewards",color:"bg-gradient-to-br from-green-500 to-teal-500",action:()=>n("/profile/rewards")}];return s.jsxs(s.Fragment,{children:[t&&s.jsx(Z5,{player:i,onContinue:()=>e(!1)}),s.jsxs("div",{className:"min-h-screen bg-base-bg text-base-text",children:[s.jsx("div",{className:"fixed inset-0 -z-10 pointer-events-none",style:{background:"linear-gradient(to bottom, #0B0F1A, #111827)"}}),s.jsxs("div",{className:"relative z-10 px-4 pt-10 pb-24",children:[s.jsx("style",{jsx:!0,children:`
          @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-5px) rotate(-2deg); }
            50% { transform: translateY(0) rotate(0deg); }
            75% { transform: translateY(-3px) rotate(2deg); }
          }
          
          @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
          }
          
          @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
          }
          
          @keyframes coinRotate {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
          }
          
          @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
            50% { box-shadow: 0 0 40px rgba(251, 191, 36, 0.8); }
          }
          
          .flip-card {
            perspective: 1000px;
          }
          
          .flip-card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
          }
          
          .flip-card-inner.flipped {
            transform: rotateY(180deg);
          }
          
          .flip-card-front, .flip-card-back {
            backface-visibility: hidden;
          }
          
          .flip-card-back {
            transform: rotateY(180deg);
          }
          
          .coin-3d {
            animation: coinRotate 2s linear infinite;
            transform-style: preserve-3d;
          }
          
          .magic-gradient {
            background: linear-gradient(45deg, #FFD700, #FFA500, #FF6B6B, #FF1493, #9370DB, #4169E1, #00CED1, #FFD700);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
          }
          
          @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
          }
        `}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"cursor-pointer hover:scale-105 transition-transform",onClick:()=>A(!0),children:s.jsx($5,{player:i,size:"small",showLevel:!0,showName:!0})}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{ref:g,onClick:()=>x(!0),className:"px-3 py-1.5 rounded-xl bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border border-yellow-500/30 flex items-center gap-2 hover:from-yellow-500/20 hover:to-orange-500/20 transition",children:[s.jsx("span",{className:"text-lg",children:"🪙"}),s.jsx("span",{className:"font-bold",children:xe.getCoins()})]})})]}),s.jsx(B5,{current:o.current,required:o.required,level:i.level,animate:!0})]}),s.jsx(U5,{}),s.jsx(q5,{actions:z}),s.jsx(G5,{coinPillRef:g}),s.jsx(H5,{categories:Dy,onCategorySelect:B}),s.jsx(Q5,{onClick:()=>T(!0),isPulsing:i.energy<10}),s.jsxs("div",{onClick:()=>n("/surprise"),className:"mt-6 relative overflow-hidden rounded-3xl bg-gradient-to-br from-purple-500/20 via-pink-500/20 to-yellow-500/20 backdrop-blur border border-white/10 p-12 mb-4 cursor-pointer hover:scale-[1.02] transition-all group",children:[s.jsxs("div",{className:"absolute inset-0 opacity-30",children:[s.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),s.jsx("div",{className:"absolute top-8 right-8 w-3 h-3 bg-pink-400 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),s.jsx("div",{className:"absolute bottom-6 left-12 w-2 h-2 bg-purple-400 rounded-full animate-pulse",style:{animationDelay:"1s"}}),s.jsx("div",{className:"absolute bottom-4 right-6 w-2 h-2 bg-blue-400 rounded-full animate-pulse",style:{animationDelay:"1.5s"}})]}),s.jsxs("div",{className:"relative flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-1 bg-gradient-to-r from-purple-400 via-pink-400 to-yellow-400 bg-clip-text text-transparent",children:"✨ Surprise Zone"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Mystery Box • Avatar Room • Fun Facts"})]}),s.jsx("div",{className:"text-4xl group-hover:rotate-12 transition-transform",children:"🎁"})]})]}),s.jsx(W5,{show:w,onClose:()=>A(!1),player:i,changeAvatar:c,GAME_CONSTANTS:rn}),s.jsx(X5,{show:P,onClose:()=>_(!1),selectedCategory:b,difficulty:j,setDifficulty:S,count:I,setCount:D,timer:M,setTimer:k,onStart:$}),s.jsx(J5,{show:E,onClose:()=>T(!1),allCategories:My,category:X,setCategory:te,difficulty:ne,setDifficulty:K,count:U,setCount:F,onStart:L}),s.jsx(Y5,{show:y,onClose:()=>N(!1),categories:Ly,onCategorySelect:B}),s.jsx(K5,{show:m,onClose:()=>x(!1),coins:i.coins,onNavigateToPlay:()=>{x(!1),n("/play")}})]})]})]})}const Wa={OWNED_CHARACTERS:"owned_characters",SOUND:"play_sound_on"},Ya={get:(t,e=null)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}},set:(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}}};function Oc(){const[t,e]=h.useState(()=>xe.getCoins()),[n,r]=h.useState(()=>xe.getXP()),[i,o]=h.useState(()=>xe.getLevel()),[a,c]=h.useState(()=>Ya.get(Wa.OWNED_CHARACTERS,[])),[u,d]=h.useState(()=>Ya.get(Wa.SOUND,!0));h.useEffect(()=>{const I=Ot.getCurrentUser();I!=null&&I.phone&&xe.initializeUserData(I.phone)},[]);const f=h.useCallback(I=>{const D=xe.addCoins(I,"Game reward");return e(D),D},[]),g=h.useCallback(I=>{const D=xe.addXP(I);r(D);const M=xe.getLevel();return M>i&&o(M),D},[i]),y=h.useCallback((I,D="Purchase")=>{if(xe.spendCoins(I,D)){const M=xe.getCoins();return e(M),!0}return!1},[]),N=h.useCallback(I=>{c(D=>{const M=[...new Set([...D,I])];return Ya.set(Wa.OWNED_CHARACTERS,M),M})},[]),b=h.useCallback(()=>xe.checkAndUpdateLevel(),[]);h.useEffect(()=>{Ya.set(Wa.SOUND,u)},[u]);const C=h.useCallback((I,D,M,k,m)=>{const x=Ot.getCurrentUser(),w=xe.recordQuizSession(x==null?void 0:x.phone,{score:I,totalQuestions:D,category:M,difficulty:k,mode:m});return e(w.newTotal),r(w.newXP),o(w.newLevel),w},[]),P=h.useCallback((I,D,M)=>{const k=Ot.getCurrentUser(),m=xe.recordPracticeSession(k==null?void 0:k.phone,{questionsCompleted:I,correctAnswers:D,category:M});return e(m.newTotal),r(m.newXP),m},[]),_=h.useCallback(()=>{const I=Ot.getCurrentUser();return I!=null&&I.phone?xe.getUserStats(I.phone):null},[]),j=h.useCallback(()=>{const I=Ot.getCurrentUser();return I!=null&&I.phone?xe.getQuestData(I.phone):null},[]),S=h.useCallback(()=>{const I=Ot.getCurrentUser();return xe.getTodaySummary(I==null?void 0:I.phone)},[]);return{coins:t,xp:n,level:i,ownedCharacters:a,soundOn:u,addCoins:f,addXp:g,spendCoins:y,unlockCharacter:N,setSoundOn:d,checkLevelUp:b,recordQuizComplete:C,recordPracticeComplete:P,getUserStats:_,getQuestData:j,getTodaySummary:S,nextLevelThreshold:100*i*(i-1),xpProgress:n/Math.max(1,100*i*(i-1))}}const ej=[{name:"General Knowledge",questions:50,icon:"🧠",color:"#7C3AED"},{name:"Artificial Intelligence",questions:28,icon:"🤖",color:"#10B981"},{name:"Fun facts",questions:30,icon:"🎉",color:"#EF4444"},{name:"Science",questions:45,icon:"🧪",color:"#F59E0B"},{name:"History",questions:42,icon:"🏺",color:"#2563EB"},{name:"Geography",questions:38,icon:"🗺️",color:"#FACC15"}],Gn=ej.slice(0,6),ks=360/Gn.length,tj={"general-knowledge":"TINA","artificial-intelligence":"ALBERT","fun-facts":"BONZO",science:"POP",history:"TITO",geography:"HECTOR"},Mr={FULL_TURNS:6,DURATION:2800,OVERSHOOT:12,SETTLE_DURATION:350},Gr=(t,e=.7)=>{try{const n=new Audio(t);return n.volume=e,n.play().catch(()=>{})}catch{}},Fc=t=>{navigator.vibrate&&navigator.vibrate(t)},Wr=t=>t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),$p=t=>(t%360+360)%360;function nj({run:t,coins:e,xp:n,level:r,ownedCharacters:i,onSpin:o,onBack:a,spinning:c,angle:u,transition:d,result:f,showCallout:g,glowColor:y,soundOn:N,setSoundOn:b,showSparkle:C,pulseIdx:P,nextProgressIdx:_,pendingProgressIdx:j,coinBurstTick:S,lastAnswerWasCorrect:I,coinPillRef:D,wheelRef:M}){const k=100*r*(r-1),[m,x]=h.useState(!1),[w,A]=h.useState(xe.getCoins());return h.useEffect(()=>{const E=()=>A(xe.getCoins());window.addEventListener("coinsUpdated",E),window.addEventListener("storage",E);const T=setInterval(E,1e3);return()=>{window.removeEventListener("coinsUpdated",E),window.removeEventListener("storage",E),clearInterval(T)}},[]),h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]),h.useEffect(()=>{if(j==null)return;x(!1);const E=setTimeout(()=>x(!0),30);return()=>clearTimeout(E)},[j]),s.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 text-white overflow-hidden",children:[s.jsx("style",{children:`
        @keyframes float {
          0%, 100% { 
            transform: translateY(0) scale(1);
          }
          50% { 
            transform: translateY(-10px) scale(1.02);
          }
        }
        
        @keyframes pulse-glow {
          0%, 100% { 
            opacity: 0.5;
          }
          50% { 
            opacity: 1;
          }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        
        @keyframes progress-fill {
          0% { 
            width: 0%;
            background-position: -200% center;
          }
          50% {
            background-position: 0% center;
          }
          100% { 
            width: 100%;
            background-position: 200% center;
          }
        }
        
        @keyframes star-bounce {
          0%, 100% { transform: scale(1) rotate(0deg); }
          50% { transform: scale(1.2) rotate(180deg); }
        }
      `}),s.jsxs("div",{className:"h-full flex flex-col mx-auto max-w-md px-5 pt-[calc(env(safe-area-inset-top)+2rem)]",children:[s.jsxs("header",{className:"flex items-center justify-between mb-4 mt-6",children:[s.jsx("button",{onClick:a,className:"h-12 w-12 rounded-2xl bg-white/10 backdrop-blur-xl border border-white/20 grid place-items-center hover:bg-white/20 transition-all",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"px-4 py-2 rounded-2xl bg-white/10 backdrop-blur-xl border border-white/20",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs text-white/70",children:["Lvl ",r]}),s.jsx("div",{className:"w-16 h-1.5 bg-white/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-purple-400 rounded-full transition-all duration-500",style:{width:`${Math.min(n/k,1)*100}%`}})})]})}),s.jsxs("button",{ref:D,className:"px-4 py-2 rounded-2xl bg-gradient-to-r from-yellow-500/20 to-orange-500/20 backdrop-blur-xl border border-yellow-500/30 flex items-center gap-2 hover:scale-105 transition-transform",children:[s.jsx("span",{className:"text-lg",children:"🪙"}),s.jsx("span",{className:"font-bold text-yellow-300",children:w})]})]}),s.jsx("button",{onClick:()=>b(!N),className:"h-12 w-12 rounded-2xl bg-white/10 backdrop-blur-xl border border-white/20 grid place-items-center hover:bg-white/20 transition-all",children:s.jsx("span",{className:"text-xl",children:N?"🔊":"🔇"})})]}),i.length>0&&s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs("div",{className:"inline-flex gap-3 px-5 py-3 bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10",children:[s.jsx("span",{className:"text-xs text-white/50 self-center",children:"Unlocked:"}),i.map(E=>{const T=Gn.find(X=>Wr(X.name)===E);return s.jsx("div",{className:"relative group",children:s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-white/20 to-white/10 flex items-center justify-center border border-white/20 group-hover:scale-110 transition-transform",children:s.jsx("span",{className:"text-lg",children:T==null?void 0:T.icon})})},E)})]})}),s.jsx("div",{className:"flex justify-center gap-3 mb-6",children:[0,1,2].map(E=>{const T=!!t.progress[E],X=E===j;return s.jsxs("div",{className:"relative flex items-center",children:[E<2&&s.jsx("div",{className:"absolute left-full w-3 h-0.5 bg-white/20 top-1/2 z-0"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:`
                    w-12 h-12 rounded-full flex items-center justify-center
                    transition-all duration-700 transform
                    ${T?"bg-gradient-to-br from-green-400 to-emerald-500 scale-110":"bg-white/10 backdrop-blur border border-white/20"}
                    ${X?"animate-pulse scale-125":""}
                  `,children:T?s.jsx("span",{className:"text-xl",style:{animation:X?"star-bounce 1s ease-in-out":"none"},children:"⭐"}):s.jsx("span",{className:"text-white/40 font-bold text-sm",children:E+1})}),X&&s.jsx("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"shimmer 1s ease-out"}})}),C===E&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute -top-1 -right-1 text-yellow-400 animate-ping",children:"✨"}),s.jsx("div",{className:"absolute -bottom-1 -left-1 text-yellow-400 animate-ping",style:{animationDelay:"0.2s"},children:"✨"})]})]})]},E)})}),s.jsx("section",{className:"flex-1 flex items-center justify-center pb-12",children:s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{className:"absolute inset-0",style:{animation:"pulse-glow 4s ease-in-out infinite"},children:s.jsx("div",{className:"absolute inset-6 bg-gradient-to-br from-purple-500/10 to-blue-500/10 rounded-full blur-3xl"})}),s.jsxs("div",{ref:M,className:"relative w-full aspect-square",style:{animation:c?"none":"float 6s ease-in-out infinite"},children:[s.jsx("div",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 w-3/4 h-8 bg-black/20 rounded-full blur-xl"}),y&&s.jsx("div",{className:"pointer-events-none absolute -inset-4 rounded-full animate-pulse",style:{boxShadow:`0 0 60px 20px ${y}40`,background:`radial-gradient(circle, ${y}20, transparent 70%)`}}),s.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/30 shadow-2xl overflow-hidden bg-gradient-to-br from-gray-800 to-gray-900",style:{transform:`rotate(${u}deg)`,transition:d,boxShadow:"inset 0 0 40px rgba(0,0,0,0.5), 0 20px 40px rgba(0,0,0,0.3)"},children:s.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",className:"block",children:Gn.map((E,T)=>{const X=T*ks,te=X+ks,ne=ks>180?1:0,K=Math.PI*X/180,U=Math.PI*te/180,F=50+48*Math.cos(K),B=50-48*Math.sin(K),$=50+48*Math.cos(U),L=50-48*Math.sin(U),z=X+ks/2,Q=30,Z=50+Q*Math.cos(z*Math.PI/180),H=50-Q*Math.sin(z*Math.PI/180);return s.jsxs("g",{children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:`grad${T}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:E.color,stopOpacity:"0.9"}),s.jsx("stop",{offset:"100%",stopColor:E.color,stopOpacity:"0.7"})]})}),s.jsx("path",{d:`M50,50 L${F},${B} A48,48 0 ${ne} 0 ${$},${L} Z`,fill:`url(#grad${T})`,stroke:"rgba(255,255,255,0.2)",strokeWidth:"0.5"}),s.jsx("text",{x:Z,y:H,fill:"white",fontSize:"20",dominantBaseline:"middle",textAnchor:"middle",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:E.icon})]},T)})})}),s.jsxs("button",{onClick:o,disabled:c,className:"absolute z-10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 group",children:[s.jsx("div",{className:`
                  w-20 h-20 rounded-full 
                  bg-gradient-to-br from-white to-gray-100
                  shadow-2xl flex items-center justify-center
                  transition-all duration-300
                  ${c?"scale-90 opacity-80":"hover:scale-110 active:scale-95 hover:shadow-3xl"}
                `,children:s.jsx("span",{className:"font-black text-gray-800 text-sm",children:"SPIN"})}),!c&&s.jsx("div",{className:"absolute inset-0 rounded-full bg-white/30 animate-ping"})]}),g&&f&&s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -top-20 z-30",children:s.jsx("div",{className:"px-5 py-2 rounded-2xl bg-white/95 backdrop-blur-xl shadow-2xl animate-bounce",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:f.cat.icon}),s.jsx("span",{className:"font-bold text-gray-800",children:f.cat.name})]})})})]})]})}),s.jsx("div",{className:"text-center pb-12",children:s.jsx("p",{className:"text-white/30 text-xs",children:"Tap SPIN to begin your adventure"})})]})]})}var Nl={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,o,a,c;return c=1.70158,a=0,o=i,t===0?e:(t/=r)===1?e+i:(a||(a=r*.3),o<Math.abs(i)?(o=i,c=a/4):c=a/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,o,a,c;return c=1.70158,a=0,o=i,t===0?e:(t/=r)===1?e+i:(a||(a=r*.3),o<Math.abs(i)?(o=i,c=a/4):c=a/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin((t*r-c)*(2*Math.PI)/a)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,o,a,c;return c=1.70158,a=0,o=i,t===0?e:(t/=r/2)===2?e+i:(a||(a=r*(.3*1.5)),o<Math.abs(i)?(o=i,c=a/4):c=a/(2*Math.PI)*Math.asin(i/o),t<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/a))+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*r-c)*(2*Math.PI)/a)*.5+i+e)},easeInBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),o*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),o*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var o=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?o/2*(t*t*(((i*=1.525)+1)*t-i))+e:o/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,o;return o=Nl.easeOutBounce(r-t,0,i,r),i-o+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,o;return t<r/2?(o=Nl.easeInBounce(t*2,0,i,r),o*.5+e):(o=Nl.easeOutBounce(t*2-r,0,i,r),o*.5+i*.5+e)}},rj=Nl;function sj(t){return t*Math.PI/180}function En(t,e){return t+Math.random()*(e-t)}function ij(t,e){return Math.floor(t+Math.random()*(e-t+1))}var _o;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(_o||(_o={}));var Br;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Br||(Br={}));const oj=1e3/60;class aj{constructor(e,n,r,i){this.getOptions=n;const{colors:o,initialVelocityX:a,initialVelocityY:c}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=En(5,20),this.h=En(5,20),this.radius=En(5,10),this.vx=typeof a=="number"?En(-a,a):En(a.min,a.max),this.vy=typeof c=="number"?En(-c,0):En(c.min,c.max),this.shape=ij(0,2),this.angle=sj(En(0,360)),this.angularSpin=En(-.2,.2),this.color=o[Math.floor(Math.random()*o.length)],this.rotateY=En(0,1),this.rotationDirection=En(0,1)?Br.Positive:Br.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:o,drawShape:a}=this.getOptions(),c=e/oj;this.x+=this.vx*c,this.y+=this.vy*c,this.vy+=n*c,this.vx+=r*c,this.vx*=i**c,this.vy*=i**c,this.rotateY>=1&&this.rotationDirection===Br.Positive?this.rotationDirection=Br.Negative:this.rotateY<=-1&&this.rotationDirection===Br.Negative&&(this.rotationDirection=Br.Positive);const u=.1*this.rotationDirection*c;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=o,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case _o.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case _o.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case _o.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class lj{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=En(this.x,this.w+this.x),o=En(this.y,this.h+this.y);return new aj(this.context,this.getOptions,i,o)},this.animate=i=>{const{canvas:o,context:a,particlesGenerated:c,lastNumberOfPieces:u}=this,{run:d,recycle:f,numberOfPieces:g,debug:y,tweenFunction:N,tweenDuration:b}=this.getOptions();if(!d)return!1;const C=this.particles.length,P=f?C:c;if(P<g){u!==g&&(this.tweenProgress=0,this.tweenFrom=P,this.lastNumberOfPieces=g),this.tweenProgress=Math.min(b,Math.max(0,this.tweenProgress+i));const _=N(this.tweenProgress,this.tweenFrom,g,b),j=Math.round(_-P);for(let S=0;S<j;S++)this.particles.push(this.getParticle());this.particlesGenerated+=j}y&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${C}`,o.width-10,o.height-20));for(let _=this.particles.length-1;_>=0;_--){const j=this.particles[_];j.update(i),(j.y>o.height||j.y<-100||j.x>o.width+100||j.x<-100)&&(f&&P<=g?this.particles[_]=this.getParticle():this.removeParticleAt(_))}return C>0||P<g},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const cf={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:rj.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class cj{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const o={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...o,...cf,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:o,onConfettiComplete:a,frameRate:c},canvas:u,context:d}=this,f=Math.min(i-this.lastFrameTime,50);if(c&&f<1e3/c){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(c?f%c:0),o&&(d.fillStyle="white",d.clearRect(0,0,u.width,u.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new lj(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,o;const n=(i=this._options)==null?void 0:i.run,r=(o=this._options)==null?void 0:o.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const uj=dn.createRef();class uf extends dn.Component{constructor(e){super(e),this.canvas=dn.createRef(),this.canvas=e.canvasRef||uj}componentDidMount(){if(this.canvas.current){const e=Iu(this.props)[0];this.confetti=new cj(this.canvas.current,e)}}componentDidUpdate(){const e=Iu(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Iu(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return s.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}uf.defaultProps={...cf};uf.displayName="ReactConfetti";function Iu(t){const e={},n={},r={},i=[...Object.keys(cf),"confettiSource","drawShape","onConfettiComplete","frameRate"],o=["canvasRef"];for(const a in t){const c=t[a];i.includes(a)?e[a]=c:o.includes(a)?o[a]=c:r[a]=c}return[e,r,n]}const Oy=dn.forwardRef((t,e)=>s.jsx(uf,{canvasRef:e,...t}));function Bp({question:t,category:e,onAnswer:n,run:r,timeLeft:i,usedLifelines:o,onUseLifeline:a,eliminatedOptions:c,audienceData:u,onBack:d,timeUp:f,onTimeUpBackToWheel:g,soundOn:y}){const[N,b]=h.useState(null),[C,P]=h.useState(!1),[_,j]=h.useState(!1),S=h.useRef(null),I=h.useRef(null),[D,M]=h.useState(null);h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]),h.useEffect(()=>{if(!C||!S.current)return;const x=S.current.getBoundingClientRect();M({x:x.left,y:x.top-300,w:x.width,h:8})},[C]);const k=x=>{if(C)return;b(x),P(!0);const w=x===t.correctIndex;Fc(w?[50,30,50]:[200]),y&&Gr(w?"/sounds/correct.mp3":"/sounds/wrong.mp3",.7),setTimeout(()=>{n(w,null)},1500)},m=N===t.correctIndex;return s.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-900 to-black text-white overflow-hidden",children:s.jsxs("div",{ref:I,className:"relative h-full overflow-y-auto px-5 pt-16 pb-[calc(env(safe-area-inset-bottom)+5.25rem)]",children:[s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:()=>j(!0),className:"h-10 w-10 rounded-full border border-base-border grid place-items-center bg-white/5 hover:bg-white/10 transition",children:"←"})}),s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:`text-4xl font-black mb-2 ${i<=10?"text-red-400 animate-pulse":"text-white"}`,children:i}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${i<=10?"bg-red-400":"bg-blue-400"}`,style:{width:`${i/30*100}%`}})})]}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-2xl",style:{backgroundColor:e.color},children:e.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-bold",children:e.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Question ",r.qIndex+1,"/3"]})]})]}),s.jsx("h2",{ref:S,className:"text-xl font-semibold mb-6 leading-relaxed",children:t.prompt}),s.jsx("div",{className:"space-y-3 mb-6",children:t.options.map((x,w)=>{const A=c.includes(w),E=N===w,T=w===t.correctIndex;let X="bg-white/10 border-white/20",te="opacity-100";return A?te="opacity-30":C&&E?X=T?"bg-green-500/30 border-green-400":"bg-red-500/30 border-red-400":C&&T?X="bg-green-500/30 border-green-400":E&&(X="bg-white/20 border-white/40"),s.jsx("button",{onClick:()=>k(w),disabled:C||A,className:`w-full p-4 rounded-xl border-2 text-left transition-all duration-300 ${X} ${te} ${!C&&!A?"hover:bg-white/15 active:scale-98":""}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center font-bold text-sm",children:String.fromCharCode(65+w)}),s.jsx("span",{className:"font-medium flex-1",children:x}),u&&s.jsxs("span",{className:"text-xs text-base-muted",children:[Math.round(u[w]),"%"]})]})},w)})}),!C&&s.jsxs("div",{className:"flex gap-4 mb-8",children:[s.jsx("button",{onClick:()=>a("fifty"),disabled:o.fifty,className:`flex-1 p-4 rounded-2xl border-2 font-bold transition-all ${o.fifty?"bg-gray-700 border-gray-600 text-gray-400":"bg-purple-600 border-purple-400 text-white hover:bg-purple-500 active:scale-95"}`,children:"50:50"}),s.jsx("button",{onClick:()=>a("audience"),disabled:o.audience,className:`flex-1 p-4 rounded-2xl border-2 font-bold transition-all ${o.audience?"bg-gray-700 border-gray-600 text-gray-400":"bg-blue-600 border-blue-400 text-white hover:bg-blue-500 active:scale-95"}`,children:"👥 Ask"})]}),C&&s.jsxs("div",{className:"relative text-center",children:[m&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:s.jsx(Oy,{recycle:!1,numberOfPieces:120,gravity:.9,tweenDuration:1800,confettiSource:D||{x:0,y:0,w:typeof window<"u"?window.innerWidth:320,h:1}})}),s.jsx("button",{onClick:()=>n(m,null,!0),className:"relative z-10 bg-white text-black font-black py-4 px-8 rounded-2xl text-lg hover:bg-gray-100 transition-all active:scale-95",children:"Continue"})]}),f&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-base-card border border-base-border p-5 text-center",children:[s.jsx("div",{className:"text-lg font-bold mb-2",children:"Time's up"}),s.jsx("p",{className:"text-base-muted mb-5",children:"You ran out of time."}),s.jsx("button",{onClick:g,className:"mx-auto w-48 py-3 rounded-xl bg-brand-blue text-white font-semibold hover:bg-brand-blue/90 transition",children:"Back to Wheel"})]})}),_&&s.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center px-6",children:s.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-base-card border border-base-border p-5 text-center",children:[s.jsx("div",{className:"text-lg font-bold mb-2",children:"Want to quit?"}),s.jsx("p",{className:"text-base-muted mb-5",children:"You'll lose this question's progress."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 rounded-xl border border-base-border bg-white/5 hover:bg-white/10 transition",children:"No"}),s.jsx("button",{onClick:d,className:"flex-1 py-3 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-500 transition",children:"Yes"})]})]})})]})})}function Up({category:t,onComplete:e,isBonus:n=!1,soundOn:r=!0}){const[i,o]=h.useState(!1);return h.useEffect(()=>{document.body.classList.add("hide-bottom-nav"),o(!0),r&&Gr("/sounds/flush.mp3",.8),Fc([50]);const a=setTimeout(e,2e3);return()=>{clearTimeout(a),document.body.classList.remove("hide-bottom-nav")}},[e,r]),n?s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 flex flex-col items-center justify-center text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((a,c)=>s.jsx("div",{className:"absolute w-2 h-2 bg-white/10 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`}},c))}),s.jsxs("div",{className:`relative z-10 text-center transform transition-all duration-700 ${i?"scale-100 opacity-100":"scale-50 opacity-0"}`,children:[s.jsx("h2",{className:"text-4xl font-black mb-8 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Bonus Round!"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-yellow-400/30 to-orange-400/30 rounded-full relative backdrop-blur-xl border-2 border-yellow-400/50",children:s.jsx("span",{className:"absolute top-1/2 left-1/2 text-6xl animate-pulse",style:{transform:"translate(-46%, -50%)"},children:"⭐"})}),s.jsx("div",{className:"absolute inset-0 rounded-full bg-yellow-400/20 animate-ping"})]}),s.jsx("p",{className:"mt-6 text-lg text-white/80",children:"Get ready for a special challenge!"})]})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 text-white flex items-center justify-center relative overflow-hidden",children:[s.jsx("style",{children:`
        @keyframes float-up {
          0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 1; }
          100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        @keyframes category-bounce {
          0% { transform: scale(0) rotate(-180deg); }
          50% { transform: scale(1.1) rotate(90deg); }
          70% { transform: scale(0.95) rotate(-20deg); }
          100% { transform: scale(1) rotate(0deg); }
        }
      `}),s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(8)].map((a,c)=>s.jsx("div",{className:"absolute w-4 h-4 rounded-full",style:{backgroundColor:`${t.color}40`,left:`${10+c*12}%`,animation:`float-up ${8+c*2}s linear infinite`,animationDelay:`${c*.5}s`}},c))}),s.jsxs("div",{className:"relative",style:{animation:i?"category-bounce 0.8s ease-out":"none"},children:[s.jsx("div",{className:"absolute -inset-20 rounded-full blur-3xl",style:{backgroundColor:`${t.color}20`}}),s.jsxs("div",{className:"relative w-96 h-96 rounded-full flex items-center justify-center shadow-2xl",style:{background:`linear-gradient(135deg, ${t.color}dd, ${t.color}99)`,boxShadow:`0 20px 60px ${t.color}40, inset 0 0 60px rgba(255,255,255,0.1)`},children:[s.jsx("div",{className:"absolute inset-4 rounded-full border-2 border-white/10"}),s.jsx("div",{className:"absolute inset-8 rounded-full border border-white/5"}),s.jsxs("div",{className:"relative z-10 text-center",children:[s.jsx("div",{className:"text-3xl font-black mb-4 text-white drop-shadow-lg",children:t.name}),s.jsx("div",{className:"w-24 h-24 bg-white/20 backdrop-blur rounded-2xl grid place-items-center mx-auto transform hover:scale-110 transition-transform",children:s.jsx("span",{className:"text-5xl filter drop-shadow-lg",children:t.icon})})]})]})]}),s.jsxs("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 flex gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/30"}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60 animate-pulse"}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-white/30"})]})]})}function dj({onDone:t}){const[e,n]=h.useState([!1,!1,!1,!1]);return h.useEffect(()=>{const r=[setTimeout(()=>n([!0,!1,!1,!1]),100),setTimeout(()=>n([!0,!0,!1,!1]),300),setTimeout(()=>n([!0,!0,!0,!1]),500),setTimeout(()=>n([!0,!0,!0,!0]),700),setTimeout(t,2500)];return()=>r.forEach(clearTimeout)},[t]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-600 via-green-600 to-teal-600 flex items-center justify-center text-white relative overflow-hidden",children:[s.jsx("style",{children:`
        @keyframes confetti-fall {
          0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes star-pop {
          0% { transform: scale(0) rotate(0deg); }
          50% { transform: scale(1.3) rotate(180deg); }
          100% { transform: scale(1) rotate(360deg); }
        }
        
        @keyframes text-wave {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
      `}),s.jsx("div",{className:"absolute inset-0",children:[...Array(30)].map((r,i)=>s.jsx("div",{className:"absolute text-4xl",style:{left:`${Math.random()*100}%`,animation:`confetti-fall ${3+Math.random()*2}s linear infinite`,animationDelay:`${Math.random()*2}s`},children:["🎉","🎊","✨","⭐","🌟"][Math.floor(Math.random()*5)]},i))}),s.jsxs("div",{className:"relative z-10 text-center",children:[s.jsx("div",{className:"flex justify-center gap-6 mb-8",children:[0,1,2].map(r=>s.jsx("div",{className:`transform transition-all duration-500 ${e[r]?"scale-100 opacity-100":"scale-0 opacity-0"}`,style:{animation:e[r]?"star-pop 0.6s ease-out":"none"},children:s.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-2xl flex items-center justify-center",children:s.jsx("span",{className:"text-4xl",children:"⭐"})})},r))}),s.jsxs("div",{className:`transform transition-all duration-700 ${e[3]?"scale-100 opacity-100":"scale-0 opacity-0"}`,children:[s.jsxs("h2",{className:"text-4xl font-black mb-2",children:[s.jsx("span",{style:{animation:"text-wave 1s ease-in-out infinite"},children:"Perfect"})," ",s.jsx("span",{style:{animation:"text-wave 1s ease-in-out 0.1s infinite"},children:"Streak!"})]}),s.jsx("p",{className:"text-xl opacity-90",children:"3 correct in a row!"}),s.jsxs("div",{className:"mt-6 flex justify-center gap-4 text-3xl",children:[s.jsx("span",{className:"animate-bounce",style:{animationDelay:"0s"},children:"🎯"}),s.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.1s"},children:"💯"}),s.jsx("span",{className:"animate-bounce",style:{animationDelay:"0.2s"},children:"🔥"})]})]})]})]})}function hj({onSelect:t}){const[e,n]=h.useState(null);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 text-white",children:[s.jsx("style",{children:`
        @keyframes character-float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
        
        @keyframes shimmer {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
      `}),s.jsxs("div",{className:"mx-auto max-w-md px-5 pt-16 pb-8",children:[s.jsxs("header",{className:"text-center mb-10",children:[s.jsxs("div",{className:"relative inline-block mb-6",children:[s.jsx("div",{className:"absolute inset-0 bg-yellow-400/30 rounded-full blur-2xl animate-pulse"}),s.jsx("div",{className:"relative text-6xl animate-bounce",children:"🏆"})]}),s.jsx("h1",{className:"text-3xl font-black mb-3 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Perfect Round!"}),s.jsx("p",{className:"text-lg text-white/80",children:"Choose your reward character"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Gn.map((r,i)=>{const o=tj[Wr(r.name)],a=e===i;return s.jsxs("button",{onClick:()=>{Fc([20]),Gr("/sounds/select.mp3",.5),t(Wr(r.name))},onMouseEnter:()=>n(i),onMouseLeave:()=>n(null),className:`
                  relative p-6 rounded-2xl backdrop-blur-xl
                  bg-white/10 border border-white/20
                  transform transition-all duration-300
                  hover:scale-105 hover:bg-white/15 active:scale-95
                  ${a?"shadow-2xl":"shadow-lg"}
                `,style:{animation:a?"character-float 2s ease-in-out infinite":"none",boxShadow:a?`0 10px 40px ${r.color}40`:""},children:[a&&s.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-30",style:{background:"linear-gradient(105deg, transparent 40%, white 50%, transparent 60%)",animation:"shimmer 1s ease-out"}}),s.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${r.color}40, ${r.color}20)`},children:s.jsx("span",{className:"text-3xl",children:r.icon})}),s.jsx("div",{className:"font-bold text-base mb-1",children:o}),s.jsx("div",{className:"text-xs text-white/60",children:r.name}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:"text-xs",children:"🔓"})})]},Wr(r.name))})}),s.jsx("p",{className:"text-center text-xs text-white/40 mt-6",children:"Tap to unlock and play bonus round!"})]})]})}function fj({stats:t,onPlayAgain:e,onExit:n,soundOn:r=!0}){const[i,o]=h.useState([!1,!1,!1,!1]),a=t||{correctAnswers:0,totalQuestions:3,coinsEarned:0,xpEarned:0,perfectRound:!1,characterUnlocked:null,bonusCorrect:!1},c=Math.round(a.correctAnswers/a.totalQuestions*100),u=a.perfectRound;return h.useEffect(()=>{document.body.classList.add("hide-bottom-nav"),r&&Gr(u?"/sounds/win.mp3":"/sounds/complete.mp3",.7);const d=[setTimeout(()=>o([!0,!1,!1,!1]),200),setTimeout(()=>o([!0,!0,!1,!1]),500),setTimeout(()=>o([!0,!0,!0,!1]),800),setTimeout(()=>o([!0,!0,!0,!0]),1100)];return()=>{d.forEach(clearTimeout),document.body.classList.remove("hide-bottom-nav")}},[r,u]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 text-white relative overflow-hidden",children:[s.jsx("style",{children:`
        @keyframes float-in {
          0% { transform: translateY(50px); opacity: 0; }
          100% { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes star-rain {
          0% { transform: translateY(-70vh) rotate(0deg); }
          100% { transform: translateY(100vh) rotate(360deg); }
        }
        
        @keyframes pulse-glow {
          0%, 100% { transform: scale(1); opacity: 0.5; }
          50% { transform: scale(1.1); opacity: 1; }
        }
      `}),u&&s.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((d,f)=>s.jsx("div",{className:"absolute text-2xl",style:{left:`${Math.random()*100}%`,animation:`star-rain ${5+Math.random()*3}s linear infinite`,animationDelay:`${Math.random()*3}s`},children:["⭐","✨","🌟"][Math.floor(Math.random()*3)]},f))}),s.jsxs("div",{className:"relative z-10 max-w-md mx-auto px-5 pt-16 pb-8",children:[s.jsxs("div",{className:`text-center mb-8 transform transition-all duration-700 ${i[0]?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[s.jsx("div",{className:"text-6xl mb-4",children:u?"🏆":c>=66?"⭐":"✅"}),s.jsx("h1",{className:"text-3xl font-black mb-2 bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:u?"Perfect Game!":c>=66?"Great Job!":"Good Try!"}),s.jsx("p",{className:"text-lg text-white/70",children:"Round Complete"})]}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 transform transition-all duration-700 ${i[1]?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-white/60",children:"Score"}),s.jsxs("span",{className:"text-2xl font-bold",children:[a.correctAnswers,"/",a.totalQuestions]})]}),s.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-1000",style:{width:`${i[1]?c:0}%`}})}),s.jsxs("div",{className:"text-right text-sm text-white/60 mt-2",children:[c,"% Accuracy"]})]}),s.jsxs("div",{className:`bg-white/10 backdrop-blur-xl rounded-2xl p-6 border border-white/20 transform transition-all duration-700 ${i[2]?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[s.jsx("div",{className:"text-white/60 mb-4",children:"Rewards Earned"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🪙"}),s.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["+",a.coinsEarned]}),s.jsx("div",{className:"text-xs text-white/60",children:"Coins"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl mb-2",children:"⚡"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:["+",a.xpEarned]}),s.jsx("div",{className:"text-xs text-white/60",children:"XP"})]})]})]}),a.characterUnlocked&&s.jsx("div",{className:`bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-xl rounded-2xl p-6 border border-purple-400/30 transform transition-all duration-700 ${i[2]?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:a.characterUnlocked.icon}),s.jsx("div",{className:"text-lg font-bold text-purple-300",children:"Character Unlocked!"}),s.jsx("div",{className:"text-sm text-white/60",children:a.characterUnlocked.name})]})})]}),s.jsxs("div",{className:`space-y-3 transform transition-all duration-700 ${i[3]?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[s.jsx("button",{onClick:e,className:"w-full py-3 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold text-lg shadow-xl hover:scale-105 active:scale-95 transition-transform -mt-4",children:"Play Again"}),s.jsx("button",{onClick:n,className:"w-full py-3 rounded-2xl bg-white/10 backdrop-blur border border-white/20 text-white font-bold text-lg hover:bg-white/20 active:scale-95 transition-all",children:"Back to Games"})]})]})]})}function mj(){const t=Ge(),e=Ct(),n=()=>{var ye;const me=((ye=e.state)==null?void 0:ye.from)==="home";t(me?"/":"/play")},{coins:r,xp:i,level:o,ownedCharacters:a,soundOn:c,unlockCharacter:u,setSoundOn:d}=Oc(),[f,g]=h.useState("wheel"),[y,N]=h.useState({qIndex:0,progress:[!1,!1,!1],lifelines:{fifty:!1,audience:!1}}),[b,C]=h.useState([]),[P,_]=h.useState(null),[j,S]=h.useState(null),[I,D]=h.useState(30),[M,k]=h.useState([]),[m,x]=h.useState(null),[w,A]=h.useState(null),[E,T]=h.useState(!1),[X,te]=h.useState(0),[ne,K]=h.useState(!1),[U,F]=h.useState(0),[B,$]=h.useState("none"),[L,z]=h.useState(!1),[Q,Z]=h.useState(null),[H,oe]=h.useState(null),[Y,q]=h.useState(!1),[ae,J]=h.useState(null),[ee,re]=h.useState(-1),[ie,G]=h.useState(0),[O,le]=h.useState(null),[ue,pe]=h.useState(null),[we,Re]=h.useState(!1),[Ae,Tt]=h.useState(null),[$e,nt]=h.useState(-1),[Me,_e]=h.useState([!1,!1,!1]),[qe,St]=h.useState(!1),[Ye,rt]=h.useState(!1),[dt,Dt]=h.useState(null),Je=h.useRef(null),ht=h.useRef(null),xt=h.useRef(null),Xt=h.useRef(null),un=h.useRef(null),Nn=h.useMemo(()=>{var me;return((me=window.matchMedia)==null?void 0:me.call(window,"(prefers-reduced-motion: reduce)").matches)||!1},[]);h.useEffect(()=>(Rr(),he(),window.history.pushState({mode:"classic"},"",window.location.href),()=>je()),[]),h.useEffect(()=>{const me=ye=>{var Ie;ye.preventDefault();const Ee=((Ie=e.state)==null?void 0:Ie.from)==="home";t(Ee?"/":"/play")};return window.addEventListener("popstate",me),()=>window.removeEventListener("popstate",me)},[t,e]),h.useEffect(()=>(f==="question"&&I>0&&!Ye?xt.current=setTimeout(()=>{D(me=>{const ye=me-1;return ye===10&&c&&Gr("/sounds/tick.mp3",.8),ye})},1e3):f==="question"&&I===0&&T(!0),()=>{xt.current&&clearTimeout(xt.current)}),[f,I,c,Ye]),h.useEffect(()=>{if(f!=="wheel"||O==null)return;re(O),c&&Gr("/sounds/progress.mp3",.6),nt(O);const me=setTimeout(()=>nt(-1),900),ye=setTimeout(()=>re(-1),900),Ee=setTimeout(()=>{Ae&&(Ae==="streakFlash"?g("streakFlash"):Ae==="characterPicker"?g("characterPicker"):Ae==="summary"?g("summary"):De(),Tt(null)),le(null)},1800);return()=>{clearTimeout(me),clearTimeout(ye),clearTimeout(Ee)}},[f,O,Ae,c]),h.useEffect(()=>{f!=="wheel"||!qe||(G(me=>me+1),St(!1))},[f,qe]),h.useEffect(()=>{if(f!=="wheel"||ue==null)return;const ye=setTimeout(()=>{le(ue),pe(null)},we?1800:0);return()=>clearTimeout(ye)},[f,ue,we]);const Rr=async()=>{try{const ye=await(await fetch("/data/quiz_questions_bank.csv")).text(),{data:Ee}=Us.parse(ye,{header:!0,skipEmptyLines:!0,transformHeader:Fe=>Fe.trim().toLowerCase()}),Ie=Ee.map((Fe,Lt)=>{var dr;const kt=[Fe.option1,Fe.option2,Fe.option3,Fe.option4].map(Pn=>(Pn||"").trim()).filter(Boolean);if(kt.length<4)return null;let Bn={a:0,b:1,c:2,d:3}[(dr=Fe.answer)==null?void 0:dr.toLowerCase()];return Bn===void 0&&(Bn=kt.findIndex(Pn=>Pn.toLowerCase()===(Fe.answer||"").toLowerCase())),Bn===-1&&(Bn=0),{id:Fe.id||`q_${Lt}`,prompt:(Fe.question||"").trim(),options:kt,correctIndex:Bn,category:(Fe.category||Fe.subject||"general knowledge").trim(),difficulty:(Fe.difficulty||"medium").toLowerCase(),explanation:(Fe.explanation||"").trim()}}).filter(Boolean);C(Ie)}catch(me){console.error("Failed to load questions:",me),C([])}},he=()=>{const me=new Audio("/sounds/spin.mp3");me.loop=!0,me.volume=.6,Xt.current=me},je=()=>{if(xt.current&&clearTimeout(xt.current),un.current&&(clearTimeout(un.current),un.current=null),Xt.current){try{Xt.current.pause()}catch{}Xt.current=null}},Oe=()=>{N({qIndex:0,progress:[!1,!1,!1],lifelines:{fifty:!1,audience:!1}}),_e([!1,!1,!1]),_(null),S(null),A(null),k([]),x(null),T(!1),G(0),te(0),K(!1),oe(null)},De=()=>{n(),Oe()},We=()=>{if(c&&Xt.current){try{Xt.current.currentTime=0,Xt.current.play()}catch{}un.current&&clearTimeout(un.current),un.current=setTimeout(()=>{Le()},2e3)}},Le=()=>{if(un.current&&(clearTimeout(un.current),un.current=null),Xt.current)try{Xt.current.pause(),Xt.current.currentTime=0}catch{}},Ze=()=>{if(L)return;Z(null),q(!1),J(null),z(!0),We();const me=Math.floor(Math.random()*Gn.length),ye=Gn[me],Ee=$p(U),Ie=me*ks+ks/2,Fe=(Math.random()-.5)*(ks*.3),Lt=360-Ie+Fe;let kt=$p(Lt-Ee);const Sn=Mr.FULL_TURNS*360+kt,Bn=U+Sn+Mr.OVERSHOOT;$(`transform ${Nn?1e3:Mr.DURATION}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`),F(Bn),Fc([20,50,20]),setTimeout(()=>{$(`transform ${Nn?200:Mr.SETTLE_DURATION}ms cubic-bezier(0.68, -0.55, 0.265, 1.55)`),F(dr=>dr-Mr.OVERSHOOT)},Nn?1e3:Mr.DURATION),setTimeout(()=>{Le(),z(!1),Z({cat:ye,index:me}),S(ye),J(ye.color),q(!0),setTimeout(()=>{q(!1),g("interstitial")},1500),setTimeout(()=>J(null),1e3)},(Nn?1e3:Mr.DURATION)+(Nn?200:Mr.SETTLE_DURATION)+100)},He=()=>{const me=b.filter(Ee=>{const Ie=Ee.category.toLowerCase(),Fe=j.name.toLowerCase();return Ie.includes(Fe)||Fe.includes(Ie)});let ye;me.length>0?ye=me[Math.floor(Math.random()*me.length)]:ye=b[Math.floor(Math.random()*b.length)],ye?(_(ye),D(30),k([]),x(null),T(!1),rt(!1),g("question")):g("wheel")},et=(me,ye,Ee=!1)=>{if(!Ee){rt(!0);return}const Ie=y.qIndex,Fe=[...y.progress];Fe[Ie]=!0;const Lt=[...Me];if(Lt[Ie]=!!me,_e(Lt),N(kt=>({...kt,progress:Fe,qIndex:kt.qIndex+1})),me&&(te(kt=>kt+5),setTimeout(()=>{var Sn;const kt=(Sn=ht.current)==null?void 0:Sn.getBoundingClientRect();kt?Dt({startRect:kt,targetRef:Je,count:5,amount:5}):(xe.addCoins(5,"Classic Mode - Correct Answer"),xe.addXP(1),window.dispatchEvent(new Event("coinsUpdated")),Gr("/sounds/coin.mp3",.7))},100)),pe(Ie),Re(!!me),Ie===2)if(Lt.every(Boolean))Tt("streakFlash");else{const Sn={correctAnswers:Lt.filter(Boolean).length,totalQuestions:3,coinsEarned:X,xpEarned:Lt.filter(Boolean).length,perfectRound:!1,characterUnlocked:null,bonusCorrect:!1};oe(Sn),Tt("summary")}else Tt(null);g("wheel")},Ne=me=>{if(!(y.lifelines[me]||!P)){if(N(ye=>({...ye,lifelines:{...ye.lifelines,[me]:!0}})),me==="fifty"){const Ee=P.options.map((Ie,Fe)=>Fe).filter(Ie=>Ie!==P.correctIndex).slice(0,2);k(Ee)}else if(me==="audience"){const ye=40+Math.random()*25;let Ee=100-ye;const Ie=[0,0,0,0];Ie[P.correctIndex]=Math.round(ye);const Fe=[0,1,2,3].filter(Lt=>Lt!==P.correctIndex);Fe.forEach((Lt,kt)=>{if(kt===Fe.length-1)Ie[Lt]=Ee;else{const Sn=Math.floor(Math.random()*Ee);Ie[Lt]=Sn,Ee-=Sn}}),x(Ie)}}},ve=me=>{A(me),g("bonusInterstitial")},ke=me=>{K(me),me&&w&&(u(w),te(Ee=>Ee+10));const ye={correctAnswers:Me.filter(Boolean).length+(me?1:0),totalQuestions:4,coinsEarned:X+(me?10:0),xpEarned:Me.filter(Boolean).length+(me?2:0),perfectRound:Me.every(Boolean),characterUnlocked:w?Gn.find(Ee=>Wr(Ee.name)===w):null,bonusCorrect:me};oe(ye),g("summary")},ot=()=>{g("wheel")};switch(f){case"wheel":return s.jsxs(s.Fragment,{children:[dt&&s.jsx(as,{startRect:dt.startRect,targetRef:dt.targetRef,count:dt.count,onDone:()=>{xe.addCoins(dt.amount,"Classic Mode - Correct Answer"),xe.addXP(1),window.dispatchEvent(new Event("coinsUpdated")),Gr("/sounds/coin.mp3",.7),Dt(null)}}),s.jsx(nj,{run:y,coins:r,xp:i,level:o,ownedCharacters:a,onSpin:Ze,onBack:n,spinning:L,angle:U,transition:B,result:Q,showCallout:Y,glowColor:ae,soundOn:c,setSoundOn:d,showSparkle:ee,pulseIdx:$e,coinBurstTick:ie,pendingProgressIdx:O,lastAnswerWasCorrect:we,nextProgressIdx:ue,coinPillRef:Je,wheelRef:ht})]});case"interstitial":return s.jsx(Up,{category:j,onComplete:He,soundOn:c});case"streakFlash":return s.jsx(dj,{onDone:()=>g("characterPicker")});case"question":return s.jsx(Bp,{question:P,category:j,onAnswer:et,run:y,timeLeft:I,usedLifelines:y.lifelines,onUseLifeline:Ne,eliminatedOptions:M,audienceData:m,onBack:ot,timeUp:E,onTimeUpBackToWheel:()=>{T(!1),g("wheel")},soundOn:c});case"characterPicker":return s.jsx(hj,{onSelect:ve});case"bonusInterstitial":return s.jsx(Up,{category:Gn.find(me=>Wr(me.name)===w),onComplete:()=>g("bonusQuestion"),isBonus:!0,soundOn:c});case"bonusQuestion":if(!P){const me=Gn.find(ye=>Wr(ye.name)===w);if(me&&b.length>0){const ye=b.filter(Ie=>{const Fe=Ie.category.toLowerCase(),Lt=me.name.toLowerCase();return Fe.includes(Lt)||Lt.includes(Fe)}),Ee=ye.length>0?ye[Math.floor(Math.random()*ye.length)]:b[Math.floor(Math.random()*b.length)];_(Ee),D(30)}return s.jsx("div",{className:"min-h-screen bg-base-bg text-base-text flex items-center justify-center",children:s.jsx("div",{className:"text-lg",children:"Loading bonus question..."})})}return s.jsx(Bp,{question:P,category:Gn.find(me=>Wr(me.name)===w)||Gn[0],onAnswer:ke,run:{...y,lifelines:{fifty:!0,audience:!0}},timeLeft:I,usedLifelines:{fifty:!0,audience:!0},onUseLifeline:()=>{},eliminatedOptions:[],audienceData:null,onBack:n,soundOn:c});case"summary":return s.jsx(fj,{stats:H,onPlayAgain:()=>{Oe(),g("wheel")},onExit:n,soundOn:c});default:return s.jsx("div",{className:"min-h-screen bg-base-bg text-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-4",children:"Unknown State"}),s.jsx("button",{onClick:()=>g("wheel"),className:"px-6 py-3 bg-blue-600 rounded-lg",children:"Back to Wheel"})]})})}}function pj({lives:t,maxLives:e=3}){const[n,r]=h.useState(null),[i,o]=h.useState(t);return h.useEffect(()=>{t<i?(r(i-1),setTimeout(()=>r(null),600)):t>i&&(r(t-1),setTimeout(()=>r(null),1e3)),o(t)},[t,i]),s.jsxs("div",{className:"relative",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes heartBeat {
          0%, 100% { transform: scale(1); }
          25% { transform: scale(1.1); }
          50% { transform: scale(0.95); }
          75% { transform: scale(1.05); }
        }
        
        @keyframes heartLost {
          0% { 
            transform: scale(1) rotate(0deg);
            opacity: 1;
          }
          100% { 
            transform: scale(0) rotate(-180deg);
            opacity: 0;
          }
        }
        
        @keyframes heartGained {
          0% { 
            transform: scale(0) rotate(180deg);
            opacity: 0;
          }
          50% {
            transform: scale(1.3) rotate(90deg);
            opacity: 1;
          }
          100% { 
            transform: scale(1) rotate(0deg);
            opacity: 1;
          }
        }
        
        @keyframes glow {
          0%, 100% { 
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
          }
          50% { 
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
          }
        }
        
        .heart-beat {
          animation: heartBeat 1.5s ease-in-out infinite;
        }
        
        .heart-lost {
          animation: heartLost 0.6s ease-out forwards;
        }
        
        .heart-gained {
          animation: heartGained 1s ease-out;
        }
        
        .heart-glow {
          animation: glow 2s ease-in-out infinite;
        }
      `}),s.jsxs("div",{className:"flex items-center gap-3 px-5 py-1.5 bg-gradient-to-r from-red-500/20 to-pink-500/20 rounded-full backdrop-blur-md border border-white/10 shadow-xl",children:[s.jsx("div",{className:"flex items-center gap-1.5",children:[...Array(e)].map((a,c)=>s.jsx("div",{className:`relative transition-all duration-300 ${c<t?"scale-100":"scale-75"}`,children:s.jsxs("div",{className:"relative",children:[c<t?s.jsxs("div",{className:`relative ${c===n&&t>i?"heart-gained":""}`,children:[s.jsx("span",{className:`text-3xl drop-shadow-lg ${c===t-1?"heart-beat":""}`,children:"❤️"}),c===t-1&&t===1&&s.jsx("div",{className:"absolute inset-0 rounded-full heart-glow"})]}):s.jsx("div",{className:`relative ${c===n&&t<i?"heart-lost":""}`,children:s.jsx("span",{className:"text-3xl opacity-20 grayscale",children:"💔"})}),c===n&&t>i&&s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[s.jsx("div",{className:"absolute w-10 h-10 bg-green-400 rounded-full animate-ping opacity-30"}),s.jsx("span",{className:"absolute text-sm font-bold text-green-400 animate-bounce",children:"+1"})]})]})},c))}),s.jsx("div",{className:"pr-1",children:s.jsxs("div",{className:`text-sm font-bold ${t===1?"text-red-400 animate-pulse":t===e?"text-green-400":"text-white"}`,children:[t,"/",e]})})]}),t===1&&s.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 whitespace-nowrap",children:s.jsx("div",{className:"px-3 py-1 bg-red-500/20 border border-red-500/50 rounded-full backdrop-blur-sm",children:s.jsx("span",{className:"text-xs font-medium text-red-400 animate-pulse",children:"Last life! Be careful! ⚠️"})})})]})}function gj({question:t,onAnswer:e,lives:n,questionCount:r,correctStreak:i,totalScore:o,currentDifficulty:a,timeLeft:c,showFeedback:u,lastAnswerCorrect:d,checkpoint:f,onBack:g,soundOn:y,setSoundOn:N}){const[b,C]=h.useState(null),[P,_]=h.useState(!1),[j,S]=h.useState(!1),I={EASY:{emoji:"🌱",color:"from-emerald-400 to-green-500",accentGradient:"from-emerald-500/20 to-green-600/20",label:"Sprout",motivationalText:"Great start! Keep growing! 🌱"},MEDIUM:{emoji:"🌻",color:"from-yellow-400 to-amber-500",accentGradient:"from-yellow-500/20 to-amber-600/20",label:"Blooming",motivationalText:"You're blooming beautifully! 🌻"},HARD:{emoji:"🔥",color:"from-orange-400 to-red-500",accentGradient:"from-orange-500/20 to-red-600/20",label:"On Fire",motivationalText:"You're on fire! Keep it up! 🔥"},EXPERT:{emoji:"⚡",color:"from-purple-400 to-indigo-500",accentGradient:"from-purple-500/20 to-indigo-600/20",label:"Lightning",motivationalText:"Lightning fast thinking! ⚡"},LEGENDARY:{emoji:"👑",color:"from-pink-400 to-purple-600",accentGradient:"from-pink-500/20 to-purple-600/20",label:"Legendary",motivationalText:"Legendary performance! 👑"}},D=I[a];h.useEffect(()=>{i>0&&i%5===0&&u&&d&&(_(!0),setTimeout(()=>_(!1),3e3))},[i,u,d]),h.useEffect(()=>{u&&d&&(S(!0),setTimeout(()=>S(!1),1e3))},[u,d]);const M=k=>{u||(C(k),e(k))};return h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black text-white relative overflow-hidden",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        @keyframes slideInTop {
          from { transform: translateY(-100px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes scorePopup {
          0% { transform: scale(1); }
          50% { transform: scale(1.3); }
          100% { transform: scale(1); }
        }
        
        @keyframes correctAnswer {
          0% { transform: scale(1) rotate(0deg); }
          50% { transform: scale(1.1) rotate(5deg); }
          100% { transform: scale(1) rotate(0deg); }
        }
        
        @keyframes wrongAnswer {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
        
        @keyframes streakFlame {
          0%, 100% { 
            transform: scale(1) translateY(0);
            filter: brightness(1);
          }
          50% { 
            transform: scale(1.2) translateY(-5px);
            filter: brightness(1.3);
          }
        }

        @keyframes coinFloat {
          0% { 
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% { 
            transform: translateY(-50px) rotate(360deg);
            opacity: 0;
          }
        }
        
        .float-animation {
          animation: float 4s ease-in-out infinite;
        }
        
        .slide-in {
          animation: slideInTop 0.5s ease-out;
        }
        
        .score-pulse {
          animation: scorePopup 0.5s ease-out;
        }
        
        .correct-bounce {
          animation: correctAnswer 0.6s ease-out;
        }
        
        .wrong-shake {
          animation: wrongAnswer 0.4s ease-out;
        }
        
        .streak-flame {
          animation: streakFlame 2s ease-in-out infinite;
        }

        .coin-animation {
          animation: coinFloat 1s ease-out forwards;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.08);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .progress-ring {
          transform: rotate(-90deg);
          transform-origin: center;
        }
      `}),s.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[s.jsx("div",{className:"absolute top-20 left-10 text-[100px] opacity-10 float-animation",children:D.emoji}),s.jsx("div",{className:"absolute top-40 right-20 text-[80px] opacity-10 float-animation",style:{animationDelay:"1s"},children:"⭐"}),s.jsx("div",{className:"absolute bottom-40 left-20 text-[90px] opacity-10 float-animation",style:{animationDelay:"2s"},children:"🎯"}),s.jsx("div",{className:"absolute bottom-20 right-10 text-[70px] opacity-10 float-animation",style:{animationDelay:"3s"},children:"🏆"})]}),s.jsxs("div",{className:"relative z-10 px-4 pt-[calc(env(safe-area-inset-top)+2rem)]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8 slide-in",children:[s.jsx("button",{onClick:g,className:"w-12 h-12 glass-card rounded-2xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:"◀️"})}),s.jsx(pj,{lives:n}),s.jsx("button",{onClick:()=>N(!y),className:"w-12 h-12 glass-card rounded-2xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:y?"🔊":"🔇"})})]}),s.jsx("div",{className:`glass-card rounded-3xl p-2 shadow-xl mb-2 mt-12 slide-in bg-gradient-to-r ${D.accentGradient}`,style:{animationDelay:"0.1s"},children:s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`text-3xl font-black bg-gradient-to-r ${D.color} bg-clip-text text-transparent ${j?"score-pulse":""}`,children:o}),s.jsx("div",{className:"text-xs text-white/60 font-medium mt-1",children:"Points"}),u&&d&&s.jsx("div",{className:"absolute -top-2 left-1/2 -translate-x-1/2",children:s.jsxs("span",{className:"text-green-400 font-bold text-sm coin-animation",children:["+",I[a]?a==="EASY"?10:a==="MEDIUM"?20:a==="HARD"?30:a==="EXPERT"?50:100:10]})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-black text-white",children:r}),s.jsx("div",{className:"text-xs text-white/60 font-medium mt-1",children:"Questions"})]}),s.jsxs("div",{className:"text-center relative",children:[s.jsx("div",{className:`text-3xl font-black text-orange-400 ${i>0?"streak-flame":""}`,children:i}),s.jsx("div",{className:"text-xs text-white/60 font-medium mt-1",children:"Streak 🔥"})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-1 slide-in",style:{animationDelay:"0.2s"},children:[s.jsx("div",{className:`px-4 py-3 rounded-full bg-gradient-to-r ${D.color} text-white shadow-lg`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:D.emoji}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-sm",children:D.label}),s.jsxs("div",{className:"text-[10px] opacity-90",children:["Level ",r+1]})]})]})}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"w-20 h-20 glass-card rounded-full shadow-xl flex items-center justify-center",children:[s.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[s.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"6",className:"progress-ring"}),s.jsx("circle",{cx:"40",cy:"40",r:"35",fill:"none",stroke:c<=5?"#ef4444":c<=10?"#f59e0b":"#10b981",strokeWidth:"6",strokeDasharray:`${c/30*220} 220`,strokeLinecap:"round",className:"progress-ring transition-all duration-1000"})]}),s.jsx("div",{className:"relative z-10",children:s.jsx("span",{className:`text-2xl font-black ${c<=5?"text-red-400 animate-pulse":c<=10?"text-amber-400":"text-white"}`,children:c})})]})})]})]}),s.jsxs("div",{className:"px-4 slide-in",style:{animationDelay:"0.3s"},children:[s.jsxs("div",{className:"glass-card rounded-3xl shadow-xl p-6 mb-6 border border-white/10",children:[s.jsx("div",{className:"text-center mb-2",children:s.jsxs("span",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:["Question ",r+1]})}),s.jsx("h2",{className:"text-xl font-bold text-center text-white leading-relaxed",children:t.prompt})]}),s.jsx("div",{className:"space-y-3",children:t.options.map((k,m)=>{const x=["A","B","C","D"],w=["from-blue-400 to-blue-500","from-green-400 to-green-500","from-yellow-400 to-yellow-500","from-purple-400 to-purple-500"];let A="glass-card border border-white/10",E="";return u&&(m===t.correctIndex?(A="bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-2 border-green-400",E="correct-bounce"):b===m&&!d&&(A="bg-gradient-to-r from-red-500/20 to-pink-500/20 border-2 border-red-400",E="wrong-shake")),s.jsx("button",{onClick:()=>M(m),disabled:u,className:`w-full p-4 rounded-2xl shadow-lg transition-all ${A} ${E} 
                  ${u?"":"hover:scale-[1.02] active:scale-[0.98] hover:bg-white/10"} slide-in`,style:{animationDelay:`${.4+m*.05}s`},children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${w[m]} 
                    text-white font-bold text-xl flex items-center justify-center shadow-md`,children:x[m]}),s.jsx("span",{className:"flex-1 text-left font-medium text-white",children:k}),u&&m===t.correctIndex&&s.jsx("span",{className:"text-2xl",children:"✅"}),u&&b===m&&!d&&s.jsx("span",{className:"text-2xl",children:"❌"})]})},m)})}),u&&s.jsx("div",{className:"mt-6 text-center slide-in",children:s.jsx("p",{className:"text-sm font-medium text-white/70",children:d?D.motivationalText:"No worries! Keep trying! 💪"})}),f>0&&s.jsx("div",{className:"mt-4 flex justify-center slide-in",style:{animationDelay:"0.6s"},children:s.jsx("div",{className:"glass-card rounded-full px-4 py-2 shadow-lg border border-white/10",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🏁"}),s.jsxs("span",{className:"text-sm font-bold text-white/80",children:["Checkpoint: Question ",f]})]})})})]}),P&&s.jsx("div",{className:"fixed inset-0 pointer-events-none flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-8 py-6 rounded-3xl shadow-2xl animate-bounce",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-5xl mb-3",children:"🎉"}),s.jsx("div",{className:"text-2xl font-black mb-2",children:"AMAZING STREAK!"}),s.jsx("div",{className:"text-lg",children:"You earned a life back! ❤️"})]})})})]})}function xj({score:t,questionsAnswered:e,highScore:n,checkpoint:r,onRestart:i,onContinue:o,onBack:a}){const c=t>n,[u,d]=h.useState(!1),[f,g]=h.useState(0),[y,N]=h.useState(!1),b=h.useRef(null);h.useEffect(()=>{const S=t/60;let I=0;const D=setInterval(()=>{I+=S,I>=t?(g(t),clearInterval(D),c&&(d(!0),setTimeout(()=>d(!1),5e3))):g(Math.floor(I))},2e3/60);return setTimeout(()=>N(!0),2200),()=>clearInterval(D)},[t,c]),h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]);const P=(()=>e>=100?{emoji:"👑",title:"LEGENDARY!",subtitle:"You're a true Quiz Legend!",color:"from-purple-400 to-pink-500",stars:5}:e>=50?{emoji:"🏆",title:"CHAMPION!",subtitle:"Outstanding performance!",color:"from-yellow-400 to-amber-500",stars:5}:e>=30?{emoji:"💎",title:"EXPERT!",subtitle:"You're getting really good!",color:"from-blue-400 to-cyan-500",stars:4}:e>=20?{emoji:"⭐",title:"STAR PLAYER!",subtitle:"Keep up the great work!",color:"from-green-400 to-emerald-500",stars:3}:e>=10?{emoji:"🎯",title:"NICE TRY!",subtitle:"You're improving fast!",color:"from-orange-400 to-red-500",stars:2}:{emoji:"🌟",title:"GOOD START!",subtitle:"Every expert was once a beginner!",color:"from-indigo-400 to-purple-500",stars:1})();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-black text-white relative overflow-hidden",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes slideUp {
          from { transform: translateY(100px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-20px); }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-30px) rotate(10deg); }
        }
        
        @keyframes sparkle {
          0%, 100% { opacity: 0; transform: scale(0); }
          50% { opacity: 1; transform: scale(1); }
        }
        
        @keyframes confettiFall {
          0% { 
            transform: translateY(-100vh) rotate(0deg); 
            opacity: 1; 
          }
          100% { 
            transform: translateY(100vh) rotate(720deg); 
            opacity: 0; 
          }
        }
        
        @keyframes glow {
          0%, 100% { 
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
          }
          50% { 
            text-shadow: 0 0 40px rgba(255, 255, 255, 0.8);
          }
        }
        
        @keyframes starPop {
          0% { transform: scale(0) rotate(0deg); }
          50% { transform: scale(1.2) rotate(180deg); }
          100% { transform: scale(1) rotate(360deg); }
        }
        
        .slide-up {
          animation: slideUp 0.6s ease-out forwards;
        }
        
        .fade-in {
          animation: fadeIn 0.8s ease-out forwards;
        }
        
        .bounce-animation {
          animation: bounce 2s ease-in-out infinite;
        }
        
        .float-animation {
          animation: float 3s ease-in-out infinite;
        }
        
        .sparkle-animation {
          animation: sparkle 1.5s ease-in-out infinite;
        }
        
        .confetti-fall {
          animation: confettiFall 3s linear infinite;
        }
        
        .glow-text {
          animation: glow 2s ease-in-out infinite;
        }
        
        .star-pop {
          animation: starPop 0.6s ease-out;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.08);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);
        }
      `}),s.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[s.jsx("div",{className:"absolute top-20 left-10 text-[150px] opacity-5 float-animation",children:"🏆"}),s.jsx("div",{className:"absolute bottom-20 right-10 text-[120px] opacity-5 float-animation",style:{animationDelay:"1s"},children:"⭐"}),s.jsx("div",{className:"absolute top-40 right-20 text-[100px] opacity-5 float-animation",style:{animationDelay:"2s"},children:"🎯"})]}),u&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:[...Array(40)].map((_,j)=>s.jsx("div",{className:"absolute confetti-fall",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`},children:s.jsx("span",{className:"text-3xl",children:["🎉","⭐","🎊","✨","🎈","💫","🌟"][Math.floor(Math.random()*7)]})},j))}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6 text-center",children:[s.jsxs("div",{className:"mb-8 slide-up",children:[s.jsx("h1",{className:"text-6xl font-black mb-4 bg-gradient-to-r from-red-400 to-pink-500 bg-clip-text text-transparent",children:"GAME OVER"}),c&&s.jsx("div",{className:"fade-in",style:{animationDelay:"1s"},children:s.jsx("div",{className:"inline-block px-6 py-3 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold shadow-2xl glow-text",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-3xl",children:"🏆"}),s.jsx("span",{className:"text-xl",children:"NEW HIGH SCORE!"}),s.jsx("span",{className:"text-3xl",children:"🏆"})]})})})]}),y&&s.jsx("div",{className:"mb-8 slide-up",style:{animationDelay:"0.3s"},children:s.jsxs("div",{className:`glass-card rounded-3xl p-6 bg-gradient-to-r ${P.color} bg-opacity-20 border-2 border-white/20 shadow-2xl`,children:[s.jsx("div",{className:"text-6xl mb-3 bounce-animation",children:P.emoji}),s.jsx("h2",{className:"text-3xl font-black mb-2",children:P.title}),s.jsx("p",{className:"text-white/80 mb-4",children:P.subtitle}),s.jsx("div",{className:"flex justify-center gap-1",children:[...Array(5)].map((_,j)=>s.jsx("span",{className:`text-2xl ${j<P.stars?"star-pop":""}`,style:{animationDelay:`${2.5+j*.1}s`},children:j<P.stars?"⭐":"☆"},j))})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 w-full max-w-md",children:[s.jsxs("div",{className:"glass-card rounded-2xl p-6 shadow-xl slide-up",style:{animationDelay:"0.4s"},children:[s.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),s.jsx("div",{ref:b,className:`text-4xl font-black ${c?"text-yellow-400":"text-white"}`,children:f}),s.jsx("div",{className:"text-sm text-white/60 font-medium",children:"Points Earned"}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:s.jsxs("div",{className:"text-xs text-white/50",children:[e," questions"]})})]}),s.jsxs("div",{className:"glass-card rounded-2xl p-6 shadow-xl slide-up",style:{animationDelay:"0.5s"},children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{className:"text-4xl font-black text-white",children:e}),s.jsx("div",{className:"text-sm text-white/60 font-medium",children:"Questions"}),s.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:s.jsxs("div",{className:"text-xs text-white/50",children:["Best: ",Math.max(n,t)]})})]})]}),s.jsx("div",{className:"glass-card rounded-2xl px-6 py-4 mb-8 w-full max-w-md slide-up",style:{animationDelay:"0.6s"},children:s.jsx("p",{className:"text-white/80 font-medium",children:e>=50?"Incredible performance! You're a quiz master! 🌟":e>=20?"Great job! You're getting stronger! 💪":"Keep practicing! Every attempt makes you better! 🚀"})}),s.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[r>0&&o&&s.jsx("button",{onClick:o,className:"w-full py-4 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transition-all hover:scale-[1.02] active:scale-[0.98] slide-up",style:{animationDelay:"0.7s"},children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🏁"}),s.jsxs("span",{children:["Continue from Question ",r]})]})}),s.jsx("button",{onClick:i,className:"w-full py-4 bg-gradient-to-r from-blue-400 to-indigo-500 text-white rounded-2xl font-bold text-lg shadow-xl hover:shadow-2xl transition-all hover:scale-[1.02] active:scale-[0.98] slide-up",style:{animationDelay:"0.8s"},children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🎮"}),s.jsx("span",{children:"Play Again"})]})}),s.jsx("button",{onClick:a,className:"w-full py-4 glass-card text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98] hover:bg-white/10 slide-up",style:{animationDelay:"0.9s"},children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🏠"}),s.jsx("span",{children:"Back to Games"})]})})]})]})]})}const qp={EASY:{min:0,max:9,timer:30,points:10},MEDIUM:{min:10,max:24,timer:25,points:20},HARD:{min:25,max:49,timer:20,points:30},EXPERT:{min:50,max:99,timer:15,points:50},LEGENDARY:{min:100,max:1/0,timer:10,points:100}};function yj({onBack:t,isFromQuest:e}){const{coins:n,xp:r,level:i,soundOn:o,setSoundOn:a}=Oc(),[c,u]=h.useState("playing"),[d,f]=h.useState(3),[g,y]=h.useState(0),[N,b]=h.useState(0),[C,P]=h.useState(0),[_,j]=h.useState("EASY"),[S,I]=h.useState([]),[D,M]=h.useState(null),[k,m]=h.useState(30),[x,w]=h.useState(!1),[A,E]=h.useState(!1),[T,X]=h.useState(0),[te,ne]=h.useState(!1),K=h.useRef(null),U=h.useRef(new Set);h.useEffect(()=>(B(),oe(),window.history.pushState({mode:"survival"},"",window.location.href),()=>{K.current&&clearTimeout(K.current)}),[]),h.useEffect(()=>(c==="playing"&&D&&k>0&&!x&&(K.current=setTimeout(()=>{m(O=>O<=1?(Z(),0):(O===6&&o&&ie("/sounds/tick.mp3",.8),O-1))},1e3)),()=>{K.current&&clearTimeout(K.current)}),[c,D,k,x,o]),h.useEffect(()=>{const O=F(g);O!==_&&(j(O),o&&ie("/sounds/levelup.mp3",.6))},[g,_,o]),h.useEffect(()=>{g>0&&g%10===0&&(H(),X(g),o&&ie("/sounds/checkpoint.mp3",.7))},[g,o]),h.useEffect(()=>{const O=le=>{le.preventDefault(),ne(!0),window.history.pushState({mode:"survival"},"",window.location.href)};return window.addEventListener("popstate",O),()=>{window.removeEventListener("popstate",O)}},[]);const F=O=>O>=100?"LEGENDARY":O>=50?"EXPERT":O>=25?"HARD":O>=10?"MEDIUM":"EASY",B=async()=>{try{const le=await(await fetch("/data/quiz_questions_bank.csv")).text(),{data:ue}=Us.parse(le,{header:!0,skipEmptyLines:!0,transformHeader:we=>we.trim().toLowerCase()}),pe=ue.map((we,Re)=>{var nt;const Ae=[we.option1,we.option2,we.option3,we.option4].map(Me=>(Me||"").trim()).filter(Boolean);if(Ae.length<4)return null;let $e={a:0,b:1,c:2,d:3}[(nt=we.answer)==null?void 0:nt.toLowerCase()];return $e===void 0&&($e=Ae.findIndex(Me=>Me.toLowerCase()===(we.answer||"").toLowerCase())),$e===-1&&($e=0),{id:we.id||`q_${Re}`,prompt:(we.question||"").trim(),options:Ae,correctIndex:$e,category:(we.category||we.subject||"general").trim(),difficulty:(we.difficulty||"medium").toLowerCase()}}).filter(Boolean);I(pe),$(pe)}catch(O){console.error("Failed to load questions:",O)}},$=(O=S)=>{const le=O.filter(Re=>!U.current.has(Re.id));le.length===0&&(U.current.clear(),le.push(...O));const ue=_.toLowerCase();let pe=le.filter(Re=>Re.difficulty===ue||Re.difficulty==="medium");pe.length===0&&(pe=le);const we=pe[Math.floor(Math.random()*pe.length)];we&&(U.current.add(we.id),M(we),m(qp[_].timer),w(!1))},L=O=>{if(x)return;const le=O===D.correctIndex;E(le),w(!0),le?z():Q(),setTimeout(()=>{(d>0||le)&&(y(ue=>ue+1),$())},1500)},z=()=>{const O=qp[_].points;P(le=>le+O),b(le=>{const ue=le+1;if(e){const pe=JSON.parse(localStorage.getItem("questProgress")||"{}");pe.winStreak=Math.max(pe.winStreak||0,ue),pe.date=`${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}`,localStorage.setItem("questProgress",JSON.stringify(pe)),ue>=5&&console.log("Win streak quest completed!")}return ue%5===0&&d<3&&(f(pe=>Math.min(pe+1,3)),o&&ie("/sounds/lifeup.mp3",.8)),ue}),xe.addCoins(Math.floor(O/10),"Survival Mode - Correct Answer"),xe.addXP(1),o&&ie("/sounds/correct.mp3",.7)},Q=()=>{b(0),f(O=>{const le=O-1;return le<=0&&(u("gameOver"),q()),le}),o&&ie("/sounds/wrong.mp3",.7),G([200])},Z=()=>{Q()},H=()=>{const O={questionCount:g,totalScore:C,lives:d,correctStreak:N,timestamp:Date.now()};localStorage.setItem("survival_checkpoint",JSON.stringify(O))},oe=()=>{const O=localStorage.getItem("survival_checkpoint");if(O)try{const le=JSON.parse(O);Date.now()-le.timestamp<864e5?(y(le.questionCount),P(le.totalScore),f(le.lives),b(le.correctStreak),X(le.questionCount)):localStorage.removeItem("survival_checkpoint")}catch(le){console.error("Failed to load checkpoint:",le)}},Y=()=>{localStorage.removeItem("survival_checkpoint"),X(0)},q=()=>{const O=parseInt(localStorage.getItem("survival_highscore")||"0");C>O&&(localStorage.setItem("survival_highscore",C.toString()),localStorage.setItem("survival_highquestions",g.toString()))},ae=()=>{u("playing"),f(3),y(0),b(0),P(0),j("EASY"),U.current.clear(),Y(),$()},J=()=>{u("playing"),$()},ee=()=>{ne(!0)},re=()=>{if(e){const O=JSON.parse(localStorage.getItem("questProgress")||"{}");O.winStreak=Math.max(O.winStreak||0,N),O.date=`${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}`,localStorage.setItem("questProgress",JSON.stringify(O)),window.location.href="/profile/quests"}else window.history.go(-1),t()},ie=(O,le=.5)=>{try{const ue=new Audio(O);ue.volume=le,ue.play()}catch{}},G=O=>{navigator.vibrate&&navigator.vibrate(O)};return h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]),c==="gameOver"?s.jsxs(s.Fragment,{children:[s.jsx(xj,{score:C,questionsAnswered:g,highScore:parseInt(localStorage.getItem("survival_highscore")||"0"),checkpoint:T,onRestart:ae,onContinue:T>0?J:null,onBack:ee}),te&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 px-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-6 max-w-sm w-full shadow-2xl slide-in border border-white/10",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-3",children:"🚪"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave the game?"}),s.jsx("p",{className:"text-white/70",children:"Your progress saves at checkpoints!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>ne(!1),className:"flex-1 py-3 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Keep Playing"}),s.jsx("button",{onClick:re,className:"flex-1 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Exit"})]})]})})]}):D?s.jsxs(s.Fragment,{children:[s.jsx(gj,{question:D,onAnswer:L,lives:d,questionCount:g,correctStreak:N,totalScore:C,currentDifficulty:_,timeLeft:k,showFeedback:x,lastAnswerCorrect:A,checkpoint:T,onBack:ee,soundOn:o,setSoundOn:a}),te&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 px-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-6 max-w-sm w-full shadow-2xl slide-in border border-white/10",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-3",children:"🚪"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave the game?"}),s.jsx("p",{className:"text-white/70",children:"Your progress saves at checkpoints!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>ne(!1),className:"flex-1 py-3 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Keep Playing"}),s.jsx("button",{onClick:re,className:"flex-1 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Exit"})]})]})})]}):s.jsx("div",{className:"min-h-screen bg-base-bg text-white flex items-center justify-center",children:s.jsx("div",{className:"text-xl",children:"Loading questions..."})})}const Es=[{id:1,name:"Sandy Beach",emoji:"🏖️",theme:{background:"from-yellow-300 via-orange-300 to-blue-400",accent:"from-yellow-400 to-orange-400",cardBg:"from-amber-500/20 to-yellow-500/20",unlockGradient:"from-yellow-400 to-amber-500"},difficulty:"EASY",difficultyRange:{min:0,max:9},questionDifficulty:["easy"],requiredCorrect:2,timeLimit:300,rewards:{perCorrectAnswer:10,gemChance:.3,gemBonus:5,speedBonus:3,perfectBonus:50,treasurePiece:"🧩",completionCoins:30},description:"Start your adventure on the sunny shores! Easy questions to warm up.",unlockRequirement:null,visualElements:{bgEmojis:["🌊","🐚","🦀","⛱️","🌺"],diggingEmoji:"⛏️",foundEmojis:["💎","🪙","✨"]}},{id:2,name:"Jungle Cave",emoji:"🌴",theme:{background:"from-green-400 via-emerald-500 to-teal-600",accent:"from-green-500 to-emerald-600",cardBg:"from-green-500/20 to-emerald-500/20",unlockGradient:"from-green-400 to-emerald-500"},difficulty:"EASY-MEDIUM",difficultyRange:{min:10,max:24},questionDifficulty:["easy","medium"],requiredCorrect:2,timeLimit:300,rewards:{perCorrectAnswer:15,gemChance:.35,gemBonus:7,speedBonus:5,perfectBonus:75,treasurePiece:"🗝️",completionCoins:50},description:"Explore the mysterious jungle caves! Watch out for tricky vines!",unlockRequirement:{island:1,treasurePiece:!0},visualElements:{bgEmojis:["🌿","🦜","🐒","🦋","🌺"],diggingEmoji:"⛏️",foundEmojis:["💎","🪙","🌟"]}},{id:3,name:"Crystal Mountain",emoji:"⛰️",theme:{background:"from-purple-400 via-pink-400 to-indigo-500",accent:"from-purple-500 to-pink-500",cardBg:"from-purple-500/20 to-pink-500/20",unlockGradient:"from-purple-400 to-pink-500"},difficulty:"MEDIUM",difficultyRange:{min:25,max:49},questionDifficulty:["medium"],requiredCorrect:2,timeLimit:300,rewards:{perCorrectAnswer:20,gemChance:.4,gemBonus:10,speedBonus:7,perfectBonus:100,treasurePiece:"💎",completionCoins:75},description:"Climb the sparkling crystal peaks! Medium challenges await!",unlockRequirement:{island:2,treasurePiece:!0},visualElements:{bgEmojis:["✨","🔮","⭐","🌟","💫"],diggingEmoji:"⚒️",foundEmojis:["💎","🪙","🌈"]}},{id:4,name:"Pirate Ship",emoji:"🏴‍☠️",theme:{background:"from-slate-600 via-blue-600 to-cyan-500",accent:"from-slate-700 to-blue-700",cardBg:"from-slate-500/20 to-blue-500/20",unlockGradient:"from-slate-500 to-blue-600"},difficulty:"MEDIUM-HARD",difficultyRange:{min:50,max:99},questionDifficulty:["medium","hard"],requiredCorrect:2,timeLimit:300,rewards:{perCorrectAnswer:30,gemChance:.45,gemBonus:15,speedBonus:10,perfectBonus:150,treasurePiece:"🗺️",completionCoins:100},description:"Ahoy matey! Navigate the pirate ship's challenging puzzles!",unlockRequirement:{island:3,treasurePiece:!0},visualElements:{bgEmojis:["⚓","🦜","💀","🌊","⛵"],diggingEmoji:"🗡️",foundEmojis:["💎","🪙","👑"]}},{id:5,name:"Volcano Peak",emoji:"🌋",theme:{background:"from-red-500 via-orange-500 to-yellow-500",accent:"from-red-600 to-orange-600",cardBg:"from-red-500/20 to-orange-500/20",unlockGradient:"from-red-500 to-orange-500"},difficulty:"HARD",difficultyRange:{min:100,max:1/0},questionDifficulty:["hard"],requiredCorrect:2,timeLimit:300,rewards:{perCorrectAnswer:50,gemChance:.5,gemBonus:25,speedBonus:15,perfectBonus:200,treasurePiece:"👑",completionCoins:150},description:"The ultimate challenge! Can you conquer the volcano?",unlockRequirement:{island:4,treasurePiece:!0},visualElements:{bgEmojis:["🔥","🌋","💥","⚡","🔴"],diggingEmoji:"⛏️",foundEmojis:["💎","🪙","🏆"]}}],ct={SHOVELS_PER_ISLAND:3,QUESTIONS_PER_ISLAND:3,SPEED_BONUS_THRESHOLD:5,MIN_CORRECT_FOR_TREASURE:2,FINAL_TREASURE_REWARD:200,FINAL_TREASURE_TITLE:"Treasure Master",DIGGING_ANIMATION_DURATION:1500,REWARD_DISPLAY_DURATION:2e3,TRANSITION_DURATION:500,STORAGE_KEYS:{PROGRESS:"treasureHunt_progress",STATS:"treasureHunt_stats",UNLOCKED_ISLANDS:"treasureHunt_unlocked",COMPLETED_ISLANDS:"treasureHunt_completed",TREASURE_PIECES:"treasureHunt_pieces"},SOUNDS:{DIG:"/sounds/dig.mp3",TREASURE_FOUND:"/sounds/treasure.mp3",GEM_FOUND:"/sounds/gem.mp3",WRONG:"/sounds/wrong.mp3",ISLAND_COMPLETE:"/sounds/islandcomplete.mp3",ISLAND_UNLOCK:"/sounds/unlock.mp3",FINAL_TREASURE:"/sounds/victory.mp3",TICK:"/sounds/tick.mp3",SHOVEL_BREAK:"/sounds/break.mp3"}},mr=t=>Es.find(e=>e.id===t),vj=(t,e)=>{const n=mr(t);if(!n.unlockRequirement)return!0;const r=e[n.unlockRequirement.island];return r&&r.treasurePiece},bj=(t,e)=>{const n={0:["Keep trying! You'll get it! 💪","Don't give up! Adventure awaits! 🌟","Practice makes perfect! 🎯"],1:["Good effort! Almost there! 🌈","Nice try! Keep going! ⭐","You're learning fast! 🚀"],2:["Awesome! You found treasure! 🏆","Great job, explorer! 🎉","You're amazing! ✨"],3:["PERFECT! You're a champion! 👑","INCREDIBLE! Master explorer! 🌟","LEGENDARY performance! 🏆"]},r=n[t]||n[0];return r[Math.floor(Math.random()*r.length)]},wj=t=>Es.map(e=>{var n;return{id:e.id,piece:e.rewards.treasurePiece,collected:((n=t[e.id])==null?void 0:n.treasurePiece)||!1}});function jj({islands:t,islandProgress:e,onSelectIsland:n,onBack:r,soundOn:i,setSoundOn:o,totalStats:a}){const[c,u]=h.useState(!1),d=wj(e),f=d.filter(y=>y.collected).length,g=Math.round(f/t.length*100);return h.useEffect(()=>(document.body.style.position="fixed",document.body.style.overflow="hidden",document.body.style.width="100%",document.body.style.height="100%",()=>{document.body.style.position="",document.body.style.overflow="",document.body.style.width="",document.body.style.height=""}),[]),s.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-sky-400 via-blue-500 to-blue-600 overflow-hidden flex flex-col",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes float {
          0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
          33% { transform: translateY(-15px) translateX(5px) rotate(3deg); }
          66% { transform: translateY(5px) translateX(-5px) rotate(-3deg); }
        }
        
        @keyframes cloudDrift {
          0% { transform: translateX(-100px); opacity: 0.3; }
          50% { opacity: 0.7; }
          100% { transform: translateX(calc(100vw + 100px)); opacity: 0.3; }
        }
        
        @keyframes sparkle {
          0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
          50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }
        
        @keyframes pulse {
          0%, 100% { transform: scale(1); filter: brightness(1); }
          50% { transform: scale(1.05); filter: brightness(1.2); }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-20px); }
        }
        
        .float-animation {
          animation: float 4s ease-in-out infinite;
        }
        
        .cloud-drift {
          animation: cloudDrift 20s linear infinite;
        }
        
        .sparkle-animation {
          animation: sparkle 2s ease-in-out infinite;
        }
        
        .pulse-animation {
          animation: pulse 2s ease-in-out infinite;
        }
        
        .bounce-animation {
          animation: bounce 2s ease-in-out infinite;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
      `}),s.jsxs("div",{className:"absolute inset-0",children:[s.jsx("div",{className:"absolute top-10 cloud-drift",style:{animationDelay:"0s"},children:s.jsx("div",{className:"text-6xl opacity-40",children:"☁️"})}),s.jsx("div",{className:"absolute top-12 cloud-drift",style:{animationDelay:"7s",animationDuration:"25s"},children:s.jsx("div",{className:"text-5xl opacity-40",children:"☁️"})}),s.jsx("div",{className:"absolute top-10 right-12",children:s.jsx("div",{className:"text-6xl pulse-animation opacity-80",children:"☀️"})}),s.jsx("div",{className:"absolute top-16 left-20 float-animation opacity-60",children:s.jsx("div",{className:"text-2xl",children:"🦜"})})]}),s.jsxs("div",{className:"relative z-20 px-4 pt-[calc(env(safe-area-inset-top)+3rem)]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("button",{onClick:r,className:"w-11 h-11 glass-card rounded-2xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:"⬅"})}),s.jsx("div",{className:"glass-card rounded-2xl px-3 py-2 shadow-lg",children:s.jsxs("div",{className:"text-white font-bold text-center",children:[s.jsx("div",{className:"text-[10px] opacity-90",children:"TREASURE HUNT"}),s.jsx("div",{className:"text-sm",children:"🏝️ Island Explorer 🏝️"})]})}),s.jsx("button",{onClick:()=>o(!i),className:"w-11 h-11 glass-card rounded-2xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:i?"🔊":"🔇"})})]}),s.jsxs("div",{className:"glass-card rounded-2xl p-3 shadow-xl mt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white font-bold text-sm",children:"Adventure Progress"}),s.jsxs("span",{className:"text-white font-bold text-sm",children:[g,"%"]})]}),s.jsx("div",{className:"w-full h-2.5 bg-white/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-amber-500 transition-all duration-1000",style:{width:`${g}%`}})}),s.jsx("button",{onClick:()=>u(!0),className:"mt-2.5 w-full py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-sm hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{children:"🏆"}),s.jsxs("span",{children:["Treasure Pieces: ",f,"/5"]}),s.jsx("span",{children:"🏆"})]})})]})]}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-4 py-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.slice(0,4).map(y=>{const N=e[y.id],b=N==null?void 0:N.unlocked,C=N==null?void 0:N.treasurePiece,P=N==null?void 0:N.perfectScore;return s.jsxs("button",{onClick:()=>n(y.id),disabled:!b,className:`relative aspect-square rounded-2xl transition-all ${b?"hover:scale-105 active:scale-95 shadow-xl":"opacity-50 grayscale"}`,children:[s.jsx("div",{className:`absolute inset-0 rounded-2xl bg-gradient-to-br ${b?y.theme.background:"from-gray-400 to-gray-500"}`,children:b&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-1 right-1 text-lg sparkle-animation",children:"✨"}),s.jsx("div",{className:"absolute bottom-1 left-1 text-sm sparkle-animation",style:{animationDelay:"1s"},children:"⭐"})]})}),!b&&s.jsx("div",{className:"absolute inset-0 rounded-2xl bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:"🔒"})}),s.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center p-3",children:[s.jsx("div",{className:"absolute top-1 left-1 w-7 h-7 bg-white/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:y.id})}),P&&s.jsx("div",{className:"absolute top-1 right-1 text-lg",children:"💯"}),s.jsx("div",{className:`text-5xl mb-1 ${b?"bounce-animation":""}`,children:b?y.emoji:"❓"}),s.jsx("div",{className:"text-white font-bold text-sm text-center mb-1",children:y.name}),s.jsx("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${b?"bg-white/30":"bg-black/30"} text-white`,children:y.difficulty}),C&&s.jsx("div",{className:"absolute bottom-1 text-2xl pulse-animation",children:y.rewards.treasurePiece}),(N==null?void 0:N.attempts)>0&&s.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-white/90 text-gray-800 rounded-full px-2 py-0.5 text-[10px] font-bold flex items-center gap-1",children:[s.jsxs("span",{children:[N.bestScore,"/3"]}),s.jsx("span",{children:"⭐"})]})]})]},y.id)})}),s.jsx("div",{className:"flex justify-center mt-3",children:t.slice(4,5).map(y=>{const N=e[y.id],b=N==null?void 0:N.unlocked,C=N==null?void 0:N.treasurePiece,P=N==null?void 0:N.perfectScore;return s.jsxs("button",{onClick:()=>n(y.id),disabled:!b,className:`relative w-[calc(50%-6px)] aspect-square rounded-2xl transition-all ${b?"hover:scale-105 active:scale-95 shadow-xl":"opacity-50 grayscale"}`,children:[s.jsxs("div",{className:`absolute inset-0 rounded-2xl bg-gradient-to-br ${b?y.theme.background:"from-gray-400 to-gray-500"}`,children:[b&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-1 right-1 text-lg sparkle-animation",children:"✨"}),s.jsx("div",{className:"absolute bottom-1 left-1 text-sm sparkle-animation",style:{animationDelay:"1s"},children:"⭐"})]}),!b&&s.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-t from-yellow-400/20 to-transparent animate-pulse"})]}),!b&&s.jsx("div",{className:"absolute inset-0 rounded-2xl bg-black/30 flex items-center justify-center",children:s.jsx("div",{className:"text-4xl",children:"🔒"})}),s.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center p-3",children:[s.jsx("div",{className:"absolute top-1 left-1 w-7 h-7 bg-white/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:y.id})}),P&&s.jsx("div",{className:"absolute top-1 right-1 text-lg",children:"💯"}),s.jsx("div",{className:`text-5xl mb-1 ${b?"bounce-animation":""}`,children:b?y.emoji:"👑"}),s.jsx("div",{className:"text-white font-bold text-sm text-center mb-1",children:y.name}),s.jsx("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${b?"bg-white/30":"bg-black/30"} text-white`,children:y.difficulty}),C&&s.jsx("div",{className:"absolute bottom-1 text-2xl pulse-animation",children:y.rewards.treasurePiece}),(N==null?void 0:N.attempts)>0&&s.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-white/90 text-gray-800 rounded-full px-2 py-0.5 text-[10px] font-bold flex items-center gap-1",children:[s.jsxs("span",{children:[N.bestScore,"/3"]}),s.jsx("span",{children:"⭐"})]})]})]},y.id)})})]})}),s.jsx("div",{className:"relative z-20 px-4 pb-[calc(env(safe-area-inset-bottom)+3rem)]",children:s.jsx("div",{className:"bg-gradient-to-r from-indigo-500/30 to-purple-500/30 backdrop-blur-lg rounded-2xl shadow-xl border border-white/20",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-2xl mb-0.5 filter drop-shadow-lg",children:"💰"}),s.jsx("div",{className:"text-yellow-300 font-black text-lg",children:a.totalCoinsEarned}),s.jsx("div",{className:"text-white/80 text-[10px] font-medium",children:"Total Coins"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-2xl mb-0.5 filter drop-shadow-lg",children:"💎"}),s.jsx("div",{className:"text-cyan-300 font-black text-lg",children:a.totalGemsFound}),s.jsx("div",{className:"text-white/80 text-[10px] font-medium",children:"Gems Found"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-2xl mb-0.5 filter drop-shadow-lg",children:"📝"}),s.jsxs("div",{className:"text-green-300 font-black text-lg",children:[a.totalCorrectAnswers,"/",a.totalQuestionsAnswered]}),s.jsx("div",{className:"text-white/80 text-[10px] font-medium",children:"Correct"})]})]})})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 px-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-3xl p-6 max-w-sm w-full shadow-2xl",children:[s.jsx("h3",{className:"text-2xl font-bold text-white text-center mb-6",children:"🏆 Treasure Collection 🏆"}),s.jsx("div",{className:"flex justify-center gap-4 mb-6",children:d.map((y,N)=>s.jsx("div",{className:`text-5xl ${y.collected?"":"opacity-30 grayscale"}`,children:y.collected?y.piece:"❓"},y.id))}),s.jsx("div",{className:"text-center text-white mb-6",children:f===5?s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-bold mb-2",children:"🎉 COMPLETE! 🎉"}),s.jsx("p",{className:"text-sm opacity-90",children:"You're a true Treasure Master!"})]}):s.jsx("p",{className:"text-sm opacity-90",children:"Collect all 5 pieces to unlock the final treasure!"})}),s.jsx("button",{onClick:()=>u(!1),className:"w-full py-3 bg-white/20 backdrop-blur rounded-2xl text-white font-bold hover:bg-white/30 transition-colors",children:"Close"})]})})]})}function Nj({island:t,progress:e,onStart:n,onClose:r,soundOn:i}){const[o,a]=h.useState(!1);h.useEffect(()=>{a(!0)},[]),h.useEffect(()=>{const y=N=>{r()};return window.history.pushState({islandDetail:!0},"",window.location.pathname),window.addEventListener("popstate",y),()=>window.removeEventListener("popstate",y)},[r]);const c=(e==null?void 0:e.attempts)>0,u=e==null?void 0:e.treasurePiece;e==null||e.perfectScore;const d=(e==null?void 0:e.bestScore)||0,f=()=>{if(i){const y=new Audio("/sounds/start.mp3");y.volume=.5,y.play().catch(()=>{})}n()},g=y=>{const N=Math.floor(y/60),b=y%60;return`${N}:${b.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes slideUp {
          from { transform: translateY(100px) scale(0.9); opacity: 0; }
          to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
        
        .slide-up {
          animation: slideUp 0.5s ease-out forwards;
        }
        
        .pulse-animation {
          animation: pulse 2s ease-in-out infinite;
        }
      `}),s.jsxs("div",{className:`relative w-full max-w-sm bg-gradient-to-br ${t.theme.background} rounded-2xl shadow-2xl ${o?"slide-up":""}`,children:[s.jsx("div",{className:"relative p-4 pb-2",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-2 pulse-animation",children:t.emoji}),s.jsx("h2",{className:"text-2xl font-black text-white",children:t.name}),s.jsx("div",{className:"inline-block px-3 py-1 bg-white/20 backdrop-blur rounded-full mt-2",children:s.jsxs("span",{className:"text-white font-bold text-sm",children:["Level ",t.id," • ",t.difficulty]})})]})}),s.jsxs("div",{className:"px-4 py-3 space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-black/10 backdrop-blur rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-white/70 text-xs mb-1",children:"Time"}),s.jsx("div",{className:"text-white font-bold",children:g(t.timeLimit)})]}),s.jsxs("div",{className:"bg-black/10 backdrop-blur rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-white/70 text-xs mb-1",children:"Questions"}),s.jsx("div",{className:"text-white font-bold",children:ct.QUESTIONS_PER_ISLAND})]})]}),s.jsxs("div",{className:"bg-black/10 backdrop-blur rounded-xl p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:t.rewards.treasurePiece}),s.jsx("span",{className:"text-white font-medium",children:"To Win"})]}),s.jsxs("span",{className:"text-white font-bold",children:[t.requiredCorrect,"/3 Correct"]})]}),s.jsxs("div",{className:"bg-black/10 backdrop-blur rounded-xl p-3",children:[s.jsx("div",{className:"text-white font-bold text-sm mb-2",children:"Rewards"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xl",children:"💰"}),s.jsx("div",{className:"text-white/70 text-xs",children:t.rewards.perCorrectAnswer})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl",children:"💎"}),s.jsxs("div",{className:"text-white/70 text-xs",children:[Math.round(t.rewards.gemChance*100),"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl",children:"⚡"}),s.jsxs("div",{className:"text-white/70 text-xs",children:["+",t.rewards.speedBonus]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl",children:"🏆"}),s.jsxs("div",{className:"text-white/70 text-xs",children:["+",t.rewards.perfectBonus]})]})]})]}),c&&s.jsx("div",{className:"bg-black/10 backdrop-blur rounded-xl p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((y,N)=>s.jsx("span",{className:"text-lg",children:N<d?"⭐":"☆"},N))}),s.jsxs("div",{className:"text-white text-sm",children:[s.jsxs("span",{className:"font-bold",children:[d,"/3"]})," • ",e.attempts," tries"]}),u&&s.jsx("div",{className:"text-2xl",children:t.rewards.treasurePiece})]})})]}),s.jsxs("div",{className:"p-4 pt-2 space-y-2",children:[s.jsx("button",{onClick:f,className:"w-full py-3 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-xl font-black text-base shadow-lg hover:shadow-xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🏴‍☠️"}),s.jsx("span",{children:c?"Play Again":"Start Adventure"}),s.jsx("span",{className:"text-xl",children:"🏴‍☠️"})]})}),s.jsx("button",{onClick:r,className:"w-full py-2 bg-white/20 backdrop-blur text-white rounded-xl font-bold text-sm hover:bg-white/30 transition-colors",children:"Back to Map"})]})]})]})}function Sj({shovelsRemaining:t,showBreak:e=!1}){const[n,r]=h.useState(!1),[i,o]=h.useState(t),a=3;return h.useEffect(()=>{t<i&&(r(!0),setTimeout(()=>r(!1),1e3)),o(t)},[t,i]),s.jsxs("div",{className:"inline-block",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes shovelBreak {
          0% { 
            transform: rotate(0deg) scale(1); 
            opacity: 1; 
          }
          25% { 
            transform: rotate(-15deg) scale(1.1); 
          }
          50% { 
            transform: rotate(45deg) scale(0.9); 
            opacity: 0.8;
          }
          75% {
            transform: rotate(90deg) scale(0.7);
            opacity: 0.5;
          }
          100% { 
            transform: rotate(135deg) scale(0.5); 
            opacity: 0;
          }
        }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          10% { transform: translateX(-2px) rotate(-2deg); }
          20% { transform: translateX(2px) rotate(2deg); }
          30% { transform: translateX(-2px) rotate(-2deg); }
          40% { transform: translateX(2px) rotate(2deg); }
          50% { transform: translateX(0) rotate(0deg); }
        }
        
        @keyframes pulse {
          0%, 100% { 
            transform: scale(1); 
            filter: drop-shadow(0 0 0 rgba(251, 191, 36, 0));
          }
          50% { 
            transform: scale(1.05); 
            filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.6));
          }
        }
        
        @keyframes crack {
          0% { 
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
          }
          100% { 
            clip-path: polygon(0 0, 45% 0, 55% 45%, 45% 100%, 0 100%);
          }
        }
        
        @keyframes fall {
          0% { 
            transform: translateY(0) rotate(0deg);
            opacity: 1;
          }
          100% { 
            transform: translateY(30px) rotate(25deg);
            opacity: 0;
          }
        }
        
        .shovel-break {
          animation: shovelBreak 0.8s ease-out forwards;
        }
        
        .shovel-shake {
          animation: shake 0.5s ease-in-out;
        }
        
        .shovel-pulse {
          animation: pulse 2s ease-in-out infinite;
        }
        
        .shovel-crack {
          position: relative;
          animation: crack 0.3s ease-out forwards;
        }
        
        .shovel-fall {
          animation: fall 0.8s ease-out forwards;
        }
        
        .glass-badge {
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }
      `}),s.jsx("div",{className:"glass-badge rounded-xl px-4 py-2 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-800 font-bold text-xs",children:"Shovels:"}),s.jsx("div",{className:"flex gap-2",children:[...Array(a)].map((c,u)=>{const d=u<t,f=n&&u===t;return s.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[s.jsx("div",{className:`
                    text-3xl transition-all duration-300
                    ${d?"shovel-pulse":""}
                    ${f?"shovel-break":""}
                    ${!d&&!f?"opacity-30 grayscale":""}
                  `,children:d||f?"⛏️":"🪦"}),f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:s.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 40 40",children:[s.jsx("path",{d:"M20,10 L18,20 L22,30",stroke:"#ff4444",strokeWidth:"2",fill:"none",opacity:"0.8",className:"shovel-crack"}),s.jsx("path",{d:"M15,15 L20,20 L25,18",stroke:"#ff4444",strokeWidth:"1.5",fill:"none",opacity:"0.6",className:"shovel-crack",style:{animationDelay:"0.1s"}})]})}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[s.jsx("span",{className:"absolute top-0 left-1/2 text-xs shovel-fall",children:"💔"}),s.jsx("span",{className:"absolute top-1/2 left-0 text-xs shovel-fall",style:{animationDelay:"0.2s"},children:"✨"}),s.jsx("span",{className:"absolute top-1/2 right-0 text-xs shovel-fall",style:{animationDelay:"0.3s"},children:"💥"})]})]}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2",children:s.jsx("span",{className:`text-xs font-bold ${d?"text-blue-600":"text-white/30"}`,children:u+1})})]},u)})}),t===0&&s.jsx("span",{className:"text-red-400 text-sm font-bold animate-pulse ml-2",children:"No shovels left!"}),t===1&&s.jsx("span",{className:"text-red-500 text-sm font-bold ml-2",children:"Last chance!"})]})})]})}function kj({island:t,foundGem:e,onComplete:n}){const[r,i]=h.useState("digging"),[o,a]=h.useState(!1),[c,u]=h.useState(!1);return h.useEffect(()=>{(async()=>{await new Promise(f=>setTimeout(f,800)),i("revealing"),a(!0),e&&(await new Promise(f=>setTimeout(f,400)),u(!0)),await new Promise(f=>setTimeout(f,1e3)),i("complete"),await new Promise(f=>setTimeout(f,300)),n()})()},[e,n]),s.jsxs("div",{className:"fixed inset-0 z-40 pointer-events-none flex items-center justify-center",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes dig {
          0%, 100% { 
            transform: rotate(-15deg) translateY(0); 
          }
          25% { 
            transform: rotate(15deg) translateY(-20px); 
          }
          50% { 
            transform: rotate(-15deg) translateY(10px); 
          }
          75% { 
            transform: rotate(15deg) translateY(-10px); 
          }
        }
        
        @keyframes dirtFly {
          0% { 
            transform: translate(0, 0) scale(1);
            opacity: 1;
          }
          100% { 
            transform: translate(var(--fly-x), var(--fly-y)) scale(0.3);
            opacity: 0;
          }
        }
        
        @keyframes treasureReveal {
          0% { 
            transform: translateY(50px) scale(0);
            opacity: 0;
          }
          50% {
            transform: translateY(-10px) scale(1.2);
            opacity: 1;
          }
          100% { 
            transform: translateY(0) scale(1);
            opacity: 1;
          }
        }
        
        @keyframes treasureFloat {
          0%, 100% { 
            transform: translateY(0) rotate(0deg);
          }
          50% { 
            transform: translateY(-10px) rotate(5deg);
          }
        }
        
        @keyframes gemSparkle {
          0% { 
            transform: scale(0) rotate(0deg);
            opacity: 0;
          }
          50% {
            transform: scale(1.3) rotate(180deg);
            opacity: 1;
          }
          100% { 
            transform: scale(1) rotate(360deg);
            opacity: 1;
          }
        }
        
        @keyframes coinSpin {
          0% { 
            transform: rotateY(0deg) scale(1);
          }
          100% { 
            transform: rotateY(360deg) scale(1);
          }
        }
        
        @keyframes starBurst {
          0% { 
            transform: scale(0) rotate(0deg);
            opacity: 1;
          }
          100% { 
            transform: scale(2) rotate(180deg);
            opacity: 0;
          }
        }
        
        @keyframes radiateGlow {
          0%, 100% { 
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
          }
          50% { 
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.9);
          }
        }
        
        .dig-animation {
          animation: dig 0.3s ease-in-out infinite;
        }
        
        .dirt-particle {
          position: absolute;
          animation: dirtFly 0.8s ease-out forwards;
        }
        
        .treasure-reveal {
          animation: treasureReveal 0.8s ease-out forwards;
        }
        
        .treasure-float {
          animation: treasureFloat 2s ease-in-out infinite;
        }
        
        .gem-sparkle {
          animation: gemSparkle 0.6s ease-out forwards;
        }
        
        .coin-spin {
          animation: coinSpin 2s linear infinite;
        }
        
        .star-burst {
          animation: starBurst 1s ease-out forwards;
        }
        
        .glow-effect {
          animation: radiateGlow 1.5s ease-in-out infinite;
        }
      `}),r==="digging"&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-8xl dig-animation",children:t.visualElements.diggingEmoji}),[...Array(8)].map((d,f)=>s.jsx("div",{className:"dirt-particle text-4xl",style:{"--fly-x":`${(Math.random()-.5)*200}px`,"--fly-y":`${-Math.random()*150-50}px`,left:"50%",top:"60%",animationDelay:`${f*.1}s`},children:"🟫"},f)),s.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2",children:s.jsx("div",{className:"text-6xl opacity-50",children:"💨"})})]}),r==="revealing"&&s.jsxs("div",{className:"relative",children:[o&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-32 h-32 rounded-full bg-yellow-400/30 blur-xl glow-effect"})}),s.jsxs("div",{className:"relative flex items-center justify-center",children:[s.jsx("div",{className:"text-7xl treasure-reveal treasure-float",children:"💰"}),s.jsx("div",{className:"absolute text-5xl coin-spin",style:{left:"-30px"},children:"🪙"}),s.jsx("div",{className:"absolute text-5xl coin-spin",style:{right:"-30px",animationDelay:"0.5s"},children:"🪙"}),s.jsx("div",{className:"absolute text-4xl coin-spin",style:{top:"-30px",animationDelay:"1s"},children:"🪙"})]}),[...Array(6)].map((d,f)=>s.jsx("div",{className:"absolute text-3xl star-burst",style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) rotate(${f*60}deg) translateY(-40px)`,animationDelay:`${f*.1}s`},children:"⭐"},f))]}),c&&s.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-6xl gem-sparkle",children:"💎"}),s.jsx("div",{className:"absolute -top-2 -left-2 text-2xl animate-pulse",children:"✨"}),s.jsx("div",{className:"absolute -top-2 -right-2 text-2xl animate-pulse",style:{animationDelay:"0.3s"},children:"✨"}),s.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 text-2xl animate-pulse",style:{animationDelay:"0.6s"},children:"✨"})]}),s.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap",children:s.jsx("span",{className:"text-cyan-300 font-black text-lg drop-shadow-lg",children:"RARE GEM!"})})]}),s.jsx("div",{className:"absolute -bottom-16 left-1/2 -translate-x-1/2 text-center",children:s.jsx("div",{className:"text-white font-black text-2xl drop-shadow-lg",children:e?"AMAZING FIND!":"TREASURE FOUND!"})})]}),r==="complete"&&s.jsx("div",{className:"relative opacity-0 transition-opacity duration-300",children:s.jsx("div",{className:"text-7xl",children:"✅"})})]})}function Ej({island:t,question:e,questionNumber:n,totalQuestions:r,shovelsRemaining:i,timeRemaining:o,coinsEarned:a,gemsFound:c,onAnswer:u,onQuit:d,soundOn:f,setSoundOn:g}){const[y,N]=h.useState(null),[b,C]=h.useState(!1),[P,_]=h.useState(!1),[j,S]=h.useState(!1),[I,D]=h.useState(!1),[M,k]=h.useState(!1),[m,x]=h.useState(!1),w=h.useRef(null);h.useEffect(()=>{N(null),C(!1),_(!1),S(!1),D(!1),x(!1)},[e]),h.useEffect(()=>{const te=ne=>{ne.stopImmediatePropagation(),M||(k(!0),window.history.pushState({questionScreen:!0},"",window.location.pathname))};return window.history.pushState({questionScreen:!0},"",window.location.pathname),window.addEventListener("popstate",te,!0),()=>window.removeEventListener("popstate",te,!0)},[M]);const A=te=>{const ne=Math.floor(te/60),K=te%60;return`${ne}:${K.toString().padStart(2,"0")}`},E=()=>o<=10?"critical":o<=30?"warning":"normal",T=te=>{if(m||b)return;N(te),x(!0);const ne=te===e.correctIndex;_(ne),setTimeout(()=>{if(C(!0),f)if(ne){const K=new Audio("/sounds/dig.mp3");K.volume=.5,K.play().catch(()=>{})}else{const K=new Audio("/sounds/wrong.mp3");K.volume=.5,K.play().catch(()=>{})}ne&&(S(!0),Math.random()<t.rewards.gemChance&&setTimeout(()=>{if(D(!0),f){const U=new Audio("/sounds/gem.mp3");U.volume=.6,U.play().catch(()=>{})}},800)),setTimeout(()=>{u(te)},ne?2e3:1500)},300)},X=E();return s.jsxs("div",{className:`min-h-screen bg-gradient-to-br ${t.theme.background} relative overflow-hidden`,children:[s.jsx("style",{jsx:!0,children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px); }
          75% { transform: translateX(10px); }
        }
        
        @keyframes pulse {
          0%, 100% { transform: scale(1); filter: brightness(1); }
          50% { transform: scale(1.1); filter: brightness(1.2); }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        
        @keyframes slideIn {
          from { transform: translateX(-100%); opacity: 0; }
          to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes correctPulse {
          0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
          50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(34, 197, 94, 0); }
          100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        
        @keyframes wrongShake {
          0%, 100% { transform: translateX(0); }
          10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
          20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes coinFloat {
          0% { transform: translateY(0) rotate(0deg); opacity: 1; }
          100% { transform: translateY(-50px) rotate(360deg); opacity: 0; }
        }
        
        @keyframes gemSparkle {
          0%, 100% { transform: scale(1) rotate(0deg); filter: brightness(1); }
          50% { transform: scale(1.3) rotate(180deg); filter: brightness(1.5); }
        }
        
        @keyframes timePulse {
          0%, 100% { transform: scale(1); color: inherit; }
          50% { transform: scale(1.1); color: #ef4444; }
        }
        
        .shake-animation {
          animation: shake 0.5s ease-in-out;
        }
        
        .pulse-animation {
          animation: pulse 2s ease-in-out infinite;
        }
        
        .float-animation {
          animation: float 3s ease-in-out infinite;
        }
        
        .slide-in {
          animation: slideIn 0.5s ease-out;
        }
        
        .correct-pulse {
          animation: correctPulse 1s ease-out;
        }
        
        .wrong-shake {
          animation: wrongShake 0.5s ease-out;
        }
        
        .coin-float {
          animation: coinFloat 1s ease-out forwards;
        }
        
        .gem-sparkle {
          animation: gemSparkle 1s ease-in-out;
        }
        
        .time-pulse-critical {
          animation: timePulse 1s ease-in-out infinite;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .option-card {
          transition: all 0.3s ease;
          cursor: pointer;
        }
        
        .option-card:not(.disabled):hover {
          transform: translateY(-2px);
          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .option-card.disabled {
          cursor: not-allowed;
          opacity: 0.7;
        }
        
        .progress-bar {
          transition: width 0.3s ease;
        }
      `}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:t.visualElements.bgEmojis.map((te,ne)=>s.jsx("div",{className:"absolute text-7xl opacity-10 float-animation",style:{top:`${20+ne*15}%`,left:`${10+ne*18}%`,animationDelay:`${ne*.5}s`,animationDuration:`${3+ne}s`},children:te},ne))}),s.jsxs("div",{className:"relative z-10 px-3 pt-[calc(env(safe-area-inset-top)+4rem)]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("button",{onClick:()=>k(!0),className:"w-10 h-10 glass-card rounded-xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:"⬅️"})}),s.jsx("div",{className:"glass-card rounded-xl px-3 py-1.5 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-xl",children:t.emoji}),s.jsx("span",{className:"text-gray-800 font-bold text-sm",children:t.name})]})}),s.jsx("button",{onClick:()=>g(!f),className:"w-10 h-10 glass-card rounded-xl shadow-lg flex items-center justify-center hover:scale-105 transition-transform",children:s.jsx("span",{className:"text-xl",children:f?"🔊":"🔇"})})]}),s.jsxs("div",{className:"glass-card rounded-xl p-3 shadow-xl mb-3",children:[s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`text-xl font-black ${X==="critical"?"text-red-600 time-pulse-critical":X==="warning"?"text-orange-600":"text-gray-800"}`,children:A(o)}),s.jsx("div",{className:"text-[10px] text-gray-700 font-medium",children:"Time"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl font-black text-gray-800",children:[n,"/",r]}),s.jsx("div",{className:"text-[10px] text-gray-700 font-medium",children:"Question"})]}),s.jsxs("div",{className:"text-center relative",children:[s.jsx("div",{className:"text-xl font-black text-orange-600",children:a}),s.jsx("div",{className:"text-[10px] text-gray-700 font-medium",children:"Coins"}),b&&P&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsxs("span",{className:"text-orange-600 font-bold text-xs coin-float",children:["+",t.rewards.perCorrectAnswer]})})]}),s.jsxs("div",{className:"text-center relative",children:[s.jsx("div",{className:"text-xl font-black text-blue-600",children:c}),s.jsx("div",{className:"text-[10px] text-gray-700 font-medium",children:"Gems"}),I&&s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx("span",{className:"text-blue-600 text-xl gem-sparkle",children:"💎"})})]})]}),s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"w-full h-1.5 bg-gray-800/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-600 progress-bar",style:{width:`${(n-1)/r*100}%`}})})})]}),s.jsx("div",{className:"flex justify-center mb-3 pt-2",children:s.jsx(Sj,{shovelsRemaining:i,showBreak:b&&!P})})]}),s.jsxs("div",{className:"px-3 pt-8 slide-in",children:[s.jsxs("div",{ref:w,className:`glass-card rounded-2xl shadow-xl p-4 mb-4 ${b&&!P?"wrong-shake":""}`,children:[s.jsx("div",{className:"text-center mb-2",children:s.jsxs("span",{className:"text-xs font-bold text-gray-600 uppercase tracking-wider",children:["Question ",n]})}),s.jsx("h2",{className:"text-lg font-bold text-center text-gray-800 leading-relaxed",children:e.prompt})]}),s.jsx("div",{className:"space-y-2.5",children:e.options.map((te,ne)=>{const K=["A","B","C","D"],U=y===ne,F=ne===e.correctIndex;let B="glass-card option-card",$="border border-gray-800/20";return b&&(F?(B+=" correct-pulse",$="border-2 border-green-500 bg-green-400/20"):U&&!P&&(B+=" wrong-shake",$="border-2 border-red-500 bg-red-400/20"),B+=" disabled"),s.jsx("button",{onClick:()=>T(ne),disabled:m,className:`w-full p-3 rounded-xl shadow-lg ${B} ${$}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-lg bg-gradient-to-br ${ne===0?"from-blue-400 to-blue-500":ne===1?"from-green-400 to-green-500":ne===2?"from-yellow-400 to-yellow-500":"from-purple-400 to-purple-500"} text-white font-bold text-lg flex items-center justify-center shadow-md`,children:K[ne]}),s.jsx("span",{className:"flex-1 text-left font-medium text-gray-800 text-sm",children:te}),b&&F&&s.jsx("span",{className:"text-2xl",children:"✅"}),b&&U&&!P&&s.jsx("span",{className:"text-2xl",children:"❌"})]})},ne)})}),b&&s.jsx("div",{className:"mt-3 text-center slide-in",children:s.jsx("p",{className:"text-base font-bold text-gray-800",children:P?`Great job! Let's dig for treasure! ${t.visualElements.diggingEmoji}`:"Oops! Your shovel broke! Try the next question! 💪"})})]}),j&&s.jsx(kj,{island:t,foundGem:I,onComplete:()=>S(!1)}),M&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 px-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-6 max-w-sm w-full shadow-2xl slide-in border border-white/10",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-3",children:"🗺️"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave the Island?"}),s.jsx("p",{className:"text-white/70",children:"Your progress won't be saved!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Keep Playing"}),s.jsx("button",{onClick:d,className:"flex-1 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Leave Island"})]})]})})]})}function _j({island:t,session:e,earnedTreasure:n,onRetry:r,onContinue:i,soundOn:o}){const[a,c]=h.useState(0),[u,d]=h.useState(!1),[f,g]=h.useState(!1),y=e.correctAnswers===ct.QUESTIONS_PER_ISLAND,N=bj(e.correctAnswers,t.id);return h.useEffect(()=>{const b=e.coinsEarned,C=2e3,P=30,_=b/P;let j=0;const S=setInterval(()=>{j+=_,j>=b?(c(b),clearInterval(S),n&&setTimeout(()=>d(!0),500),setTimeout(()=>g(!0),n?1500:500)):c(Math.floor(j))},C/P);return()=>clearInterval(S)},[e.coinsEarned,n]),s.jsxs("div",{className:`fixed inset-0 bg-gradient-to-br ${t.theme.background} overflow-hidden flex flex-col`,children:[s.jsx("style",{jsx:!0,children:`
        @keyframes slideUp {
          from { transform: translateY(100px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-20px); }
        }
        
        @keyframes treasureShine {
          0% { transform: scale(0) rotate(0deg); opacity: 0; }
          50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
          100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
        
        @keyframes starPop {
          0% { transform: scale(0) rotate(0deg); }
          50% { transform: scale(1.3) rotate(180deg); }
          100% { transform: scale(1) rotate(360deg); }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-15px) rotate(5deg); }
        }
        
        @keyframes confetti {
          0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }
        
        .slide-up {
          animation: slideUp 0.6s ease-out forwards;
        }
        
        .bounce-animation {
          animation: bounce 2s ease-in-out infinite;
        }
        
        .treasure-shine {
          animation: treasureShine 1s ease-out forwards;
        }
        
        .star-pop {
          animation: starPop 0.5s ease-out forwards;
        }
        
        .float-animation {
          animation: float 3s ease-in-out infinite;
        }
        
        .confetti-fall {
          animation: confetti 3s linear infinite;
        }
        
        .pulse-animation {
          animation: pulse 2s ease-in-out infinite;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
      `}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:y&&[...Array(10)].map((b,C)=>s.jsx("div",{className:"absolute confetti-fall",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,fontSize:`${20+Math.random()*20}px`},children:["🎉","⭐","🎊","✨"][Math.floor(Math.random()*4)]},C))}),s.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center px-4 py-4",children:[s.jsxs("div",{className:"mb-3 text-center slide-up",children:[s.jsx("h1",{className:"text-2xl font-black text-white mb-2",children:n?"TREASURE FOUND!":"ISLAND COMPLETE!"}),s.jsx("div",{className:"text-5xl bounce-animation",children:n?t.rewards.treasurePiece:"🏝️"})]}),s.jsxs("div",{className:"glass-card rounded-2xl p-3 max-w-md w-full mb-2 slide-up",style:{animationDelay:"0.2s",background:"rgba(46, 46, 32, 0.25)"},children:[s.jsxs("div",{className:"text-center mb-2",children:[s.jsxs("div",{className:"text-3xl font-black text-white mb-1",children:[e.correctAnswers,"/",ct.QUESTIONS_PER_ISLAND]}),s.jsx("div",{className:"text-white/80 font-medium",children:"Questions Correct"})]}),f&&s.jsx("div",{className:"flex justify-center gap-2 mb-2",children:[...Array(3)].map((b,C)=>s.jsx("div",{className:`text-3xl ${C<e.correctAnswers?"star-pop":""}`,style:{animationDelay:`${C*.2}s`},children:C<e.correctAnswers?"⭐":"☆"},C))}),u&&n&&s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("div",{className:"text-5xl treasure-shine mb-1",children:t.rewards.treasurePiece}),s.jsx("div",{className:"text-white font-bold text-lg",children:"Treasure Piece Earned!"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[s.jsxs("div",{className:"glass-card rounded-2xl p-4 text-center",children:[s.jsx("div",{className:"text-4xl mb-1",children:"🪙"}),s.jsx("div",{className:"text-3xl font-black text-yellow-300",children:a}),s.jsx("div",{className:"text-white/70 text-sm",children:"Coins Earned"})]}),s.jsxs("div",{className:"glass-card rounded-2xl p-4 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💎"}),s.jsx("div",{className:"text-3xl font-black text-cyan-300",children:e.gemsFound}),s.jsx("div",{className:"text-white/70 text-sm",children:"Gems Found"})]})]}),s.jsx("div",{className:"text-center p-4 bg-white/10 rounded-1xl",children:s.jsx("p",{className:"text-white font-medium text-lg",children:N})}),y&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx("div",{className:"inline-block px-6 py-3 bg-gradient-to-r from-yellow-400 to-amber-500 rounded-full",children:s.jsx("span",{className:"text-white font-black text-lg",children:"💯 PERFECT SCORE! 💯"})})})]}),s.jsxs("div",{className:"space-y-3 w-full max-w-md slide-up",style:{animationDelay:"0.4s"},children:[!n&&s.jsx("button",{onClick:r,className:"w-full py-4 bg-gradient-to-r from-orange-400 to-red-500 text-white rounded-2xl font-black text-lg shadow-xl hover:shadow-2xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🔄"}),s.jsx("span",{children:"Try Again"})]})}),s.jsx("button",{onClick:i,className:"w-full py-3 bg-gradient-to-r from-white to-gray-100 text-gray-800 rounded-2xl font-black text-lg shadow-xl hover:shadow-2xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🗺️"}),s.jsx("span",{children:"Back to Map"})]})})]})]})]})}function Cj({totalStats:t,onContinue:e,soundOn:n}){const[r,i]=h.useState(!1),[o,a]=h.useState(!1),[c,u]=h.useState(!1),[d,f]=h.useState(!1),[g,y]=h.useState(!1);return h.useEffect(()=>{(async()=>{await new Promise(b=>setTimeout(b,500)),i(!0),await new Promise(b=>setTimeout(b,1e3)),a(!0),y(!0),await new Promise(b=>setTimeout(b,800)),u(!0),await new Promise(b=>setTimeout(b,1e3)),f(!0)})()},[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-600 to-yellow-500 relative overflow-hidden",children:[s.jsx("style",{jsx:!0,children:`
        @keyframes chestAppear {
          0% { transform: scale(0) rotate(0deg); opacity: 0; }
          50% { transform: scale(1.2) rotate(10deg); opacity: 1; }
          100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        @keyframes chestOpen {
          0% { transform: rotateX(0deg); }
          100% { transform: rotateX(-25deg); }
        }
        
        @keyframes treasureGlow {
          0%, 100% { 
            filter: brightness(1) drop-shadow(0 0 30px rgba(255, 215, 0, 0.8)); 
          }
          50% { 
            filter: brightness(1.5) drop-shadow(0 0 50px rgba(255, 215, 0, 1)); 
          }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        
        @keyframes coinRain {
          0% { 
            transform: translateY(-100vh) rotate(0deg); 
            opacity: 1; 
          }
          100% { 
            transform: translateY(100vh) rotate(720deg); 
            opacity: 0; 
          }
        }
        
        @keyframes firework {
          0% { 
            transform: scale(0) rotate(0deg); 
            opacity: 1; 
          }
          50% {
            transform: scale(1) rotate(180deg);
            opacity: 1;
          }
          100% { 
            transform: scale(1.5) rotate(360deg); 
            opacity: 0; 
          }
        }
        
        @keyframes titleShine {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-30px); }
        }
        
        @keyframes sparkle {
          0%, 100% { opacity: 0; transform: scale(0); }
          50% { opacity: 1; transform: scale(1); }
        }
        
        .chest-appear {
          animation: chestAppear 1s ease-out forwards;
        }
        
        .chest-open {
          animation: chestOpen 0.8s ease-out forwards;
          transform-origin: bottom center;
        }
        
        .treasure-glow {
          animation: treasureGlow 2s ease-in-out infinite;
        }
        
        .float-animation {
          animation: float 3s ease-in-out infinite;
        }
        
        .coin-rain {
          animation: coinRain 3s linear infinite;
        }
        
        .firework {
          animation: firework 1.5s ease-out forwards;
        }
        
        .title-shine {
          background: linear-gradient(90deg, 
            #fbbf24, 
            #fff, 
            #fbbf24
          );
          background-size: 200% 100%;
          animation: titleShine 3s linear infinite;
          -webkit-background-clip: text;
          background-clip: text;
        }
        
        .bounce-animation {
          animation: bounce 2s ease-in-out infinite;
        }
        
        .sparkle-animation {
          animation: sparkle 1.5s ease-in-out infinite;
        }
        
        .glass-card {
          background: rgba(255, 255, 255, 0.2);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.3);
        }
      `}),g&&s.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(15)].map((N,b)=>s.jsx("div",{className:"absolute firework",style:{left:`${20+Math.random()*60}%`,top:`${20+Math.random()*60}%`,animationDelay:`${Math.random()*2}s`,fontSize:`${40+Math.random()*40}px`},children:["✨","⭐","💫","🌟"][Math.floor(Math.random()*4)]},b))}),s.jsx("div",{className:"fixed inset-0 pointer-events-none",children:[...Array(20)].map((N,b)=>s.jsx("div",{className:"absolute coin-rain",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`,fontSize:`${20+Math.random()*20}px`},children:["🪙","💰","💎"][Math.floor(Math.random()*3)]},b))}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-6xl font-black text-white mb-4",children:"LEGENDARY!"}),s.jsx("div",{className:"text-8xl bounce-animation",children:"👑"})]}),r&&s.jsxs("div",{className:`relative mb-8 ${r?"chest-appear":""}`,children:[s.jsx("div",{className:`text-[150px] ${o?"chest-open":""}`,children:"📦"}),o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Es.map((N,b)=>s.jsx("div",{className:"absolute text-6xl float-animation treasure-glow",style:{transform:`rotate(${b*72}deg) translateY(-100px)`,animationDelay:`${b*.2}s`},children:N.rewards.treasurePiece},N.id))})]}),c&&s.jsxs("div",{className:"glass-card rounded-3xl p-6 max-w-md w-full mb-6",children:[s.jsx("h2",{className:"text-2xl font-black text-white text-center mb-6",children:"🏆 FINAL TREASURE UNLOCKED! 🏆"}),s.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-amber-500 rounded-2xl p-4 mb-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-5xl mb-2",children:"💰"}),s.jsx("div",{className:"text-4xl font-black text-white",children:ct.FINAL_TREASURE_REWARD}),s.jsx("div",{className:"text-white/90 font-medium",children:"Bonus Coins!"})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"glass-card rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🏝️"}),s.jsx("div",{className:"text-2xl font-black text-white",children:"5/5"}),s.jsx("div",{className:"text-white/70 text-xs",children:"Islands"})]}),s.jsxs("div",{className:"glass-card rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"🧩"}),s.jsx("div",{className:"text-2xl font-black text-white",children:"5/5"}),s.jsx("div",{className:"text-white/70 text-xs",children:"Treasures"})]}),s.jsxs("div",{className:"glass-card rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"💰"}),s.jsx("div",{className:"text-2xl font-black text-yellow-300",children:t.totalCoinsEarned+ct.FINAL_TREASURE_REWARD}),s.jsx("div",{className:"text-white/70 text-xs",children:"Total Coins"})]}),s.jsxs("div",{className:"glass-card rounded-xl p-3 text-center",children:[s.jsx("div",{className:"text-3xl mb-1",children:"💎"}),s.jsx("div",{className:"text-2xl font-black text-cyan-300",children:t.totalGemsFound}),s.jsx("div",{className:"text-white/70 text-xs",children:"Total Gems"})]})]}),d&&s.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl",children:[s.jsx("div",{className:"text-3xl mb-2",children:"🏆"}),s.jsx("div",{className:"text-xl font-black text-white title-shine",children:ct.FINAL_TREASURE_TITLE}),s.jsx("div",{className:"text-white/90 text-sm mt-1",children:"New Title Unlocked!"})]})]}),c&&s.jsx("button",{onClick:e,className:"w-full max-w-md py-4 bg-gradient-to-r from-white to-gray-100 text-gray-800 rounded-2xl font-black text-lg shadow-xl hover:shadow-2xl transition-all hover:scale-[1.02] active:scale-[0.98]",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🎉"}),s.jsx("span",{children:"Complete Adventure"}),s.jsx("span",{className:"text-2xl",children:"🎉"})]})}),s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(10)].map((N,b)=>s.jsx("div",{className:"absolute text-2xl sparkle-animation",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`},children:"✨"},b))})]})]})}function Tj({onBack:t}){const{coins:e,xp:n,level:r,soundOn:i,setSoundOn:o}=Oc(),[a,c]=h.useState(!1),[u,d]=h.useState("map"),[f,g]=h.useState(null),[y,N]=h.useState([]),[b,C]=h.useState(()=>{const B=localStorage.getItem(ct.STORAGE_KEYS.PROGRESS);if(B)try{return JSON.parse(B)}catch($){console.error("Failed to load progress:",$)}return Es.reduce(($,L)=>($[L.id]={unlocked:L.id===1,completed:!1,treasurePiece:!1,perfectScore:!1,bestScore:0,attempts:0},$),{})}),[P,_]=h.useState({islandId:null,questions:[],currentQuestionIndex:0,shovelsRemaining:ct.SHOVELS_PER_ISLAND,correctAnswers:0,wrongAnswers:0,timeRemaining:300,gemsFound:0,coinsEarned:0,questionTimes:[],startTime:null}),[j,S]=h.useState(()=>{const B=localStorage.getItem(ct.STORAGE_KEYS.STATS);if(B)try{return JSON.parse(B)}catch($){console.error("Failed to load stats:",$)}return{totalCoinsEarned:0,totalGemsFound:0,totalTreasurePieces:0,totalQuestionsAnswered:0,totalCorrectAnswers:0,islandsCompleted:0,gameCompleted:!1}}),I=h.useRef(null),D=h.useRef(null);h.useEffect(()=>(M(),window.history.pushState({mode:"treasureHunt"},"",window.location.href),()=>{I.current&&clearInterval(I.current)}),[]),h.useEffect(()=>{localStorage.setItem(ct.STORAGE_KEYS.PROGRESS,JSON.stringify(b))},[b]),h.useEffect(()=>{localStorage.setItem(ct.STORAGE_KEYS.STATS,JSON.stringify(j))},[j]),h.useEffect(()=>(u==="playing"&&P.timeRemaining>0?I.current=setInterval(()=>{_(B=>{const $=B.timeRemaining-1;return $<=0?(A(),{...B,timeRemaining:0}):($===30&&i&&K(ct.SOUNDS.TICK,.6),{...B,timeRemaining:$})})},1e3):I.current&&clearInterval(I.current),()=>{I.current&&clearInterval(I.current)}),[u,P.timeRemaining,i]),h.useEffect(()=>{const B=$=>{$.preventDefault(),u==="map"&&!a?(c(!0),window.history.pushState({mode:"treasureHunt"},"",window.location.href)):u!=="map"&&(d("map"),g(null),window.history.pushState({mode:"treasureHunt"},"",window.location.href))};return window.addEventListener("popstate",B),()=>window.removeEventListener("popstate",B)},[u,a]);const M=async()=>{try{const $=await(await fetch("/data/quiz_questions_bank.csv")).text(),{data:L}=Us.parse($,{header:!0,skipEmptyLines:!0,transformHeader:Q=>Q.trim().toLowerCase()}),z=L.map((Q,Z)=>{var q;const H=[Q.option1,Q.option2,Q.option3,Q.option4].map(ae=>(ae||"").trim()).filter(Boolean);if(H.length<4)return null;let Y={a:0,b:1,c:2,d:3}[(q=Q.answer)==null?void 0:q.toLowerCase()];return Y===void 0&&(Y=H.findIndex(ae=>ae.toLowerCase()===(Q.answer||"").toLowerCase())),Y===-1&&(Y=0),{id:Q.id||`q_${Z}`,prompt:(Q.question||"").trim(),options:H,correctIndex:Y,category:(Q.category||Q.subject||"general").trim(),difficulty:(Q.difficulty||"medium").toLowerCase()}}).filter(Boolean);N(z)}catch(B){console.error("Failed to load questions:",B)}},k=B=>{const $=mr(B);if(!$||y.length===0)return[];let L=y.filter(Q=>$.questionDifficulty.includes(Q.difficulty));return L.length<ct.QUESTIONS_PER_ISLAND&&(L=y),[...L].sort(()=>Math.random()-.5).slice(0,ct.QUESTIONS_PER_ISLAND)},m=B=>{if(!vj(B,b)){i&&K("/sounds/locked.mp3",.5),U([100]);return}g(B),d("island-detail"),i&&K("/sounds/select.mp3",.5)},x=B=>{const $=mr(B),L=k(B);_({islandId:B,questions:L,currentQuestionIndex:0,shovelsRemaining:ct.SHOVELS_PER_ISLAND,correctAnswers:0,wrongAnswers:0,timeRemaining:$.timeLimit,gemsFound:0,coinsEarned:0,questionTimes:[],startTime:Date.now()}),D.current=Date.now(),d("playing"),i&&K("/sounds/start.mp3",.6)},w=B=>{const $=P.questions[P.currentQuestionIndex],L=B===$.correctIndex,z=(Date.now()-D.current)/1e3;_(Q=>{const Z={...Q,questionTimes:[...Q.questionTimes,z]};if(L){const H=mr(Q.islandId);let oe=H.rewards.perCorrectAnswer;z<ct.SPEED_BONUS_THRESHOLD&&(oe+=H.rewards.speedBonus),Math.random()<H.rewards.gemChance&&(oe+=H.rewards.gemBonus,Z.gemsFound=Q.gemsFound+1),Z.correctAnswers=Q.correctAnswers+1,Z.coinsEarned=Q.coinsEarned+oe}else Z.wrongAnswers=Q.wrongAnswers+1,Z.shovelsRemaining=Q.shovelsRemaining-1,U([200]);return Z}),setTimeout(()=>{const Q=P.currentQuestionIndex+1;P.shovelsRemaining===0&&!L||Q>=ct.QUESTIONS_PER_ISLAND?E():(_(Z=>({...Z,currentQuestionIndex:Q})),D.current=Date.now())},L?2e3:1500)},A=()=>{E()},E=()=>{const B=mr(P.islandId),$=P.correctAnswers>=B.requiredCorrect,L=P.correctAnswers===ct.QUESTIONS_PER_ISLAND;let z=P.coinsEarned;L&&(z+=B.rewards.perfectBonus),$&&(z+=B.rewards.completionCoins),C(Z=>{const H={...Z},oe=H[P.islandId];if(oe.completed=!0,oe.attempts+=1,$&&!oe.treasurePiece){oe.treasurePiece=!0;const Y=Es.find(q=>q.id===P.islandId+1);Y&&H[Y.id]&&(H[Y.id].unlocked=!0,i&&setTimeout(()=>K(ct.SOUNDS.ISLAND_UNLOCK,.7),2e3))}return L&&(oe.perfectScore=!0),oe.bestScore=Math.max(oe.bestScore||0,P.correctAnswers),H}),S(Z=>({...Z,totalCoinsEarned:Z.totalCoinsEarned+z,totalGemsFound:Z.totalGemsFound+P.gemsFound,totalTreasurePieces:Z.totalTreasurePieces+($&&!b[P.islandId].treasurePiece?1:0),totalQuestionsAnswered:Z.totalQuestionsAnswered+(P.correctAnswers+P.wrongAnswers),totalCorrectAnswers:Z.totalCorrectAnswers+P.correctAnswers,islandsCompleted:Z.islandsCompleted+(b[P.islandId].completed?0:1)})),xe.addCoins(z,`Treasure Hunt - ${B.name} Island`),xe.addXP(P.correctAnswers),_(Z=>({...Z,coinsEarned:z})),i&&K($?ct.SOUNDS.TREASURE_FOUND:ct.SOUNDS.ISLAND_COMPLETE,.7),Es.every(Z=>{var H;return((H=b[Z.id])==null?void 0:H.treasurePiece)===!0})&&!j.gameCompleted?(S(Z=>({...Z,gameCompleted:!0})),setTimeout(()=>{d("final-treasure"),i&&K(ct.SOUNDS.FINAL_TREASURE,.8)},3e3)):d("reward")},T=()=>{x(P.islandId)},X=()=>{d("map"),g(null)},te=()=>{xe.addCoins(ct.FINAL_TREASURE_REWARD,"Treasure Hunt - Final Treasure"),xe.addXP(10),S(B=>({...B,totalCoinsEarned:B.totalCoinsEarned+ct.FINAL_TREASURE_REWARD})),d("map")},ne=()=>{window.history.go(-1),t()},K=(B,$=.5)=>{try{const L=new Audio(B);L.volume=$,L.play()}catch(L){console.error("Failed to play sound:",L)}},U=B=>{navigator.vibrate&&navigator.vibrate(B)};h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]);let F=null;switch(u){case"map":F=s.jsx(jj,{islands:Es,islandProgress:b,onSelectIsland:m,onBack:()=>c(!0),soundOn:i,setSoundOn:o,totalStats:j});break;case"island-detail":F=s.jsx(Nj,{island:mr(f),progress:b[f],onStart:()=>x(f),onClose:()=>d("map"),soundOn:i});break;case"playing":F=s.jsx(Ej,{island:mr(P.islandId),question:P.questions[P.currentQuestionIndex],questionNumber:P.currentQuestionIndex+1,totalQuestions:ct.QUESTIONS_PER_ISLAND,shovelsRemaining:P.shovelsRemaining,timeRemaining:P.timeRemaining,coinsEarned:P.coinsEarned,gemsFound:P.gemsFound,onAnswer:w,onQuit:()=>d("map"),soundOn:i,setSoundOn:o});break;case"reward":F=s.jsx(_j,{island:mr(P.islandId),session:P,earnedTreasure:P.correctAnswers>=mr(P.islandId).requiredCorrect,onRetry:T,onContinue:X,soundOn:i});break;case"final-treasure":F=s.jsx(Cj,{totalStats:j,onContinue:te,soundOn:i});break;default:F=null}return s.jsxs(s.Fragment,{children:[F,a&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 px-6",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-6 max-w-sm w-full shadow-2xl border border-white/10",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-3",children:"🏝️"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Leave Treasure Hunt?"}),s.jsx("p",{className:"text-white/70",children:"Your island progress is saved!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3 bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Keep Playing"}),s.jsx("button",{onClick:ne,className:"flex-1 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl font-bold shadow-lg hover:shadow-xl transition-all hover:scale-[1.02]",children:"Exit"})]})]})})]})}const Aj=[{name:"General Knowledge",questions:50,icon:"🧠",color:"#7C3AED"},{name:"Artificial Intelligence",questions:28,icon:"🤖",color:"#10B981"},{name:"Fun facts",questions:30,icon:"🎉",color:"#EF4444"},{name:"Science",questions:45,icon:"🧪",color:"#F59E0B"},{name:"History",questions:42,icon:"🏺",color:"#2563EB"},{name:"Geography",questions:38,icon:"🗺️",color:"#FACC15"}],Fy=Aj.slice(0,6),Ru=360/Fy.length;function Ij({onModeSelect:t,onNavigateHome:e}){return s.jsx("div",{className:"fixed inset-0 bg-base-bg text-base-text overflow-hidden mt-12",children:s.jsxs("div",{className:"h-full overflow-y-auto mx-auto max-w-md px-4 pt-[calc(env(safe-area-inset-top)+5rem)] pb-[calc(env(safe-area-inset-bottom)+5.25rem)]",children:[s.jsx("header",{className:"flex items-center mb-8",children:s.jsx("h1",{className:"text-center text-xl font-bold w-full",children:"Choose a quiz mode"})}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("button",{onClick:()=>t("classic"),className:"w-full relative overflow-hidden rounded-3xl bg-gradient-to-r from-blue-400 to-blue-500 p-8 text-left shadow-lg hover:shadow-xl transition-all active:scale-[0.98]",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-30",children:s.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full animate-spin",style:{animationDuration:"20s"},children:[Fy.map((n,r)=>{const i=r*Ru,o=i+Ru,a=Ru>180?1:0,c=Math.PI*i/180,u=Math.PI*o/180,d=50+40*Math.cos(c),f=50-40*Math.sin(c),g=50+40*Math.cos(u),y=50-40*Math.sin(u);return s.jsx("path",{d:`M50,50 L${d},${f} A40,40 0 ${a} 0 ${g},${y} Z`,fill:n.color,stroke:"white",strokeWidth:"0.5"},r)}),s.jsx("circle",{cx:"50",cy:"50",r:"8",fill:"white"})]})}),s.jsx("div",{className:"absolute top-4 left-8 text-3xl opacity-60",children:"🏆"}),s.jsx("div",{className:"absolute top-12 right-16 text-xl opacity-40",children:"⭐"}),s.jsx("div",{className:"absolute bottom-6 left-6 text-2xl opacity-50",children:"🎲"}),s.jsx("div",{className:"absolute bottom-4 right-12 text-3xl opacity-60",children:"🍪"}),s.jsx("div",{className:"absolute top-1/2 left-4 text-lg opacity-40",children:"🥨"}),s.jsx("h2",{className:"text-5xl font-black text-white mb-10 relative z-10",style:{transform:"translateX(-20px)"},children:"CLASSIC"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>t("survival"),className:"aspect-square rounded-3xl bg-gradient-to-br from-yellow-400 to-orange-400 p-4 text-left hover:shadow-xl transition-all active:scale-[0.98] relative overflow-hidden",children:[s.jsx("div",{className:"text-2xl mb-2",children:"💀"}),s.jsx("h4",{className:"text-lg font-black text-white",children:"SURVIVAL"})]}),s.jsxs("button",{onClick:()=>t("treasureHunt"),className:"aspect-square rounded-3xl bg-gradient-to-br from-purple-400 to-green-500 p-4 text-left hover:shadow-xl transition-all active:scale-[0.98] relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 opacity-20",children:[s.jsx("div",{className:"absolute top-2 right-2 text-4xl animate-pulse",children:"🏝️"}),s.jsx("div",{className:"absolute bottom-2 left-2 text-3xl animate-bounce",style:{animationDelay:"0.5s"},children:"⛏️"}),s.jsx("div",{className:"absolute top-1/2 right-4 text-2xl animate-pulse",style:{animationDelay:"1s"},children:"💎"})]}),s.jsx("div",{className:"text-2xl mb-2 relative z-10",children:"🏴‍☠️"}),s.jsx("h4",{className:"text-lg font-black text-white relative z-10",children:"TREASURE HUNT"}),s.jsx("div",{className:"absolute bottom-2 right-2",children:s.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full text-white font-bold",children:"NEW!"})})]}),s.jsxs("button",{disabled:!0,className:"aspect-square rounded-3xl bg-gradient-to-br from-pink-500 to-purple-500 p-4 text-left opacity-60",children:[s.jsx("div",{className:"text-2xl mb-2",children:"⚔️"}),s.jsx("h4",{className:"text-lg font-black text-white",children:"SURVIVAL ARENA"})]}),s.jsxs("button",{disabled:!0,className:"aspect-square rounded-3xl bg-gradient-to-br from-blue-400 to-cyan-400 p-4 text-left opacity-60",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📱"}),s.jsx("h4",{className:"text-lg font-black text-white",children:"TRIVIA VIDEO"})]})]})]})]})})}function Rj(){const[t,e]=h.useState(null),n=Ge(),r=Ct();h.useEffect(()=>{const c=new URLSearchParams(r.search);c.get("mode")==="survival"&&c.get("from")==="quest"&&e("survival")},[r]);const i=c=>{if(c==="classic"){n("/play/classic",{state:{from:"play"}});return}else c==="survival"?e("survival"):c==="treasureHunt"&&e("treasureHunt")},o=()=>{n("/")},a=()=>{e(null)};if(t==="survival"){const u=new URLSearchParams(r.search).get("from")==="quest";return s.jsx(yj,{onBack:a,isFromQuest:u})}return t==="treasureHunt"?s.jsx(Tj,{onBack:a}):s.jsx(Ij,{onModeSelect:i,onNavigateHome:o})}const Pj=({session:t,mode:e,category:n,difficulty:r,timerConfig:i,onComplete:o,onQuit:a})=>{const c=Ge(),[u,d]=h.useState(0),[f,g]=h.useState([]),[y,N]=h.useState([]),[b,C]=h.useState([]),[P,_]=h.useState(!1),[j,S]=h.useState(null),[I,D]=h.useState(Date.now()),[M,k]=h.useState(0),[m,x]=h.useState([]);h.useState(!1),h.useState(!1);const[w,A]=h.useState({}),[E,T]=h.useState({}),[X,te]=h.useState([]);h.useState(!0);const[ne,K]=h.useState([]),[U,F]=h.useState(0),[B,$]=h.useState(0),[L,z]=h.useState(!1),[Q,Z]=h.useState(!1),[H,oe]=h.useState(""),[Y,q]=h.useState(!1),[ae,J]=h.useState(!1),[ee,re]=h.useState(!0),[ie,G]=h.useState(!1),[O,le]=h.useState(0),[ue,pe]=h.useState(0),[we,Re]=h.useState(0),[Ae,Tt]=h.useState(0),[$e,nt]=h.useState(null),[Me,_e]=h.useState(0),qe=h.useRef(null),St=h.useRef(null),Ye=e==="practice",rt=f[u],dt=Ne=>{try{const ve=new Audio(Ne);ve.volume=.6,ve.play()}catch{console.log("Sound not available:",Ne)}},Dt=[{id:1,category:"General Knowledge",difficulty:"medium",prompt:"Which element has the atomic number 1?",options:["Helium","Carbon","Hydrogen","Oxygen"],answerIndex:2,explanation:"Hydrogen is the first element on the periodic table with atomic number 1!"},{id:2,category:"General Knowledge",difficulty:"medium",prompt:"What is the largest ocean on Earth?",options:["Atlantic","Pacific","Indian","Arctic"],answerIndex:1,explanation:"The Pacific Ocean covers about one-third of Earth's surface!"},{id:3,category:"General Knowledge",difficulty:"easy",prompt:"What color do you get when you mix red and yellow?",options:["Purple","Orange","Green","Pink"],answerIndex:1,explanation:"Red and yellow make orange - like a beautiful sunset!"}],Je=t&&t.questions&&Array.isArray(t.questions)&&t.questions.length>0?t.questions:Dt,ht=Je[u]||Je[0]||Dt[0],xt=Je.length;h.useEffect(()=>{const Ne=xe.getCoins();Re(Ne)},[]),h.useEffect(()=>{Je.length>0&&(g(new Array(Je.length).fill(null)),N(new Array(Je.length).fill(!1)),te(new Array(Je.length).fill(!1)),C(new Array(Je.length).fill((i==null?void 0:i.seconds)||45)))},[Je.length,i==null?void 0:i.seconds]);const Xt=()=>{const Ne=new Date;return`${Ne.getFullYear()}-${Ne.getMonth()+1}-${Ne.getDate()}`},un=()=>{Ye&&window.location.search.includes("from=quest")?c("/profile/quests",{state:{questCompleted:!0,questType:"practiceQuestions"}}):a()},Nn=h.useCallback((Ne,ve)=>{if(!ht||Ye&&X[u]||w[u]&&w[u].includes(Ne))return;const ke=[...f];if(ke[u]=f[u]===Ne?null:Ne,g(ke),D(Date.now()),Ye&&!m.includes(u)&&ke[u]!==null){const me=m.length+1;if(k(me),x(ye=>[...ye,u]),window.location.search.includes("from=quest")){let ye={};try{const Ie=localStorage.getItem("questProgress");Ie&&(ye=JSON.parse(Ie))}catch(Ie){console.error("Error reading progress:",Ie)}const Ee=ye.practiceQuestions||0;ye.practiceQuestions=Math.max(Ee,me),ye.date=`${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}`,localStorage.setItem("questProgress",JSON.stringify(ye)),console.log("Saved practice progress:",ye.practiceQuestions),window.dispatchEvent(new CustomEvent("questProgressUpdate",{detail:{practiceQuestions:ye.practiceQuestions}}))}}ke[u]!==null&&(re(!1),clearInterval(St.current));const ot=ke[u]===ht.answerIndex;if(ot){const me=Ae+1;if(Tt(me),F(ye=>ye+1),$(0),Ye){le(Ee=>Ee+1);const ye=2;pe(Ee=>Ee+ye),Re(Ee=>Ee+ye),dt("/sounds/correct.mp3"),setTimeout(()=>dt("/sounds/coin.mp3"),500),J(!0),setTimeout(()=>J(!1),2e3),nt({type:"correct",stars:1,coins:2}),setTimeout(()=>nt(null),2e3)}}else ke[u]!==null&&(Tt(0),F(0),$(me=>me+1),Ye&&dt("/sounds/wrong.mp3"));if(K(me=>[...me.slice(-2),ot]),ke[u]!==null&&y[u]){const me=[...y];me[u]=!1,N(me)}Ye&&ke[u]!==null&&(q(!0),te(me=>{const ye=[...me];return ye[u]=!0,ye})),!Ye&&ke[u]!==null&&(clearTimeout(qe.current),qe.current=setTimeout(()=>{u<xt-1?he():(z(!0),_(!0))},5e3))},[ht,Ye,X,u,f,y,xt,Ae,w,ne,U,M,m]),Rr=()=>{D(Date.now()),u>0&&(clearInterval(St.current),re(!1),d(Ne=>Ne-1),q(!1),Ye&&f[u-1]!==null&&setTimeout(()=>q(!0),100))},he=()=>{if(D(Date.now()),clearInterval(St.current),rt===null){const Ne=[...y];Ne[u]=!0,N(Ne),Tt(0)}re(!1),q(!1),u<xt-1?(d(Ne=>Ne+1),Ye&&f[u+1]!==null?setTimeout(()=>q(!0),100):setTimeout(()=>re(!0),100)):z(!0)},je=()=>{D(Date.now());const Ne=[...y];Ne[u]=!0,N(Ne),Tt(0),he()},Oe=()=>{const Ne=Je.reduce((ve,ke,ot)=>ve+(f[ot]===ke.answerIndex?1:0),0);if(Ye&&window.location.search.includes("from=quest")){const ve=f.filter(ot=>ot!==null).length,ke=JSON.parse(localStorage.getItem("questProgress")||"{}");ke.practiceQuestions=Math.min(ve,15),ke.date=Xt(),localStorage.setItem("questProgress",JSON.stringify(ke)),console.log("Final practice progress saved:",ke.practiceQuestions)}if(Ye)o&&o({questions:Je,answers:f,skipped:y,correct:Ne,total:xt,mode:e,category:n,difficulty:r,earnedStars:O,earnedCoins:ue,finalStreak:Ae});else{const ve=Ne*10;_e(ve),o&&o({questions:Je,answers:f,skipped:y,correct:Ne,total:xt,mode:e,category:n,difficulty:r,earnedStars:0,earnedCoins:ve,finalStreak:Ae})}};h.useEffect(()=>{if(!(P||j!==null||L||!ee||f[u]!==null))return St.current=setInterval(()=>{C(Ne=>{const ve=[...Ne],ke=ve[u];return ke<=1?(clearInterval(St.current),u===xt-1?(Date.now()-I>=5e3&&z(!0),ve):(S(u),ve)):(ve[u]=ke-1,ve)})},1e3),()=>clearInterval(St.current)},[P,j,u,L,xt,ee,f,I]),h.useEffect(()=>{f[u]===null&&!L&&!j?re(!0):re(!1)},[u,f,L,j]);const De=Ne=>{const ve=Math.floor(Ne/60),ke=Ne%60;return`${ve}:${ke.toString().padStart(2,"0")}`},We=(u+1)/Je.length*100,Le=f.filter(Ne=>Ne!==null).length,Ze=y.filter(Boolean).length,He=b[u]||0;Je.reduce((Ne,ve,ke)=>Ne+(f[ke]===ve.answerIndex?1:0),0);const et=Ye&&Y&&rt!==null;return s.jsxs("div",{className:"h-dvh bg-gray-900 text-white flex flex-col overflow-hidden pt-[env(safe-area-inset-top,0px)]",children:[$e&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:s.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-8 py-4 rounded-full text-xl font-bold animate-bounce shadow-2xl",children:["+",$e.coins," Coins!"]})}),ae&&s.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-40 pointer-events-none",children:[...Array(8)].map((Ne,ve)=>s.jsx("div",{className:"absolute text-3xl animate-ping",style:{left:`${-30+Math.random()*60}px`,top:`${-30+Math.random()*60}px`,animationDelay:`${ve*150}ms`,animationDuration:"2s"},children:"🪙"},ve))}),s.jsxs("div",{className:"bg-gray-900 flex-shrink-0 pt-10",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-800 shadow-lg",children:[s.jsxs("button",{onClick:()=>Z(!0),className:"bg-gray-700 hover:bg-gray-600 px-3 py-1.5 rounded-full flex items-center gap-2 transition-colors text-sm",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{className:"font-medium",children:"Back"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center gap-2",children:[Ye&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-yellow-600/20 px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx("span",{className:"text-yellow-400 text-sm",children:"🪙"}),s.jsx("span",{className:"text-yellow-200 font-semibold text-sm",children:we})]}),s.jsxs("div",{className:"bg-orange-600/20 px-2 py-1 rounded-full flex items-center gap-1",children:[s.jsx("span",{className:"text-orange-400 text-sm",children:"🔥"}),s.jsx("span",{className:"text-orange-200 font-semibold text-sm",children:Ae})]})]}),s.jsx("div",{className:`px-2 py-1 rounded-full font-mono font-semibold text-sm ${He<=10?"bg-red-600/20 text-red-400 animate-pulse":He<=30?"bg-yellow-600/20 text-yellow-400":"bg-green-600/20 text-green-400"}`,children:De(He)})]})]}),s.jsxs("div",{className:"px-4 pb-1 bg-gray-900",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["Question ",u+1," of ",xt]}),s.jsxs("span",{className:"text-xs text-gray-400",children:[Math.round(We),"% Complete"]})]}),s.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",style:{width:`${We}%`}})}),s.jsx("div",{className:"flex justify-center gap-1 mt-1",children:Array.from({length:xt}).map((Ne,ve)=>s.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${ve===u?"bg-white scale-125":f[ve]!==null?"bg-green-500":y[ve]?"bg-yellow-500":"bg-gray-600"}`},ve))}),s.jsx("div",{className:"text-center mt-4",children:s.jsx("span",{className:"text-xs text-gray-500",children:ht.category})})]})]}),s.jsx("div",{className:`flex-1 flex flex-col ${et?"overflow-y-auto":"overflow-hidden"}`,children:s.jsxs("div",{className:"px-4 py-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 rounded-3xl p-6 mb-4 shadow-2xl shadow-blue-600/20 border border-blue-400/20",children:[s.jsx("div",{className:"absolute top-2 right-2 w-16 h-16 bg-white/10 rounded-full blur-xl"}),s.jsx("div",{className:"absolute bottom-2 left-2 w-12 h-12 bg-white/5 rounded-full blur-lg"}),s.jsxs("div",{className:"relative text-center",children:[s.jsxs("div",{className:"inline-block bg-white/10 px-3 py-1 rounded-full text-xs font-medium text-blue-100 mb-3",children:["Question ",u+1]}),s.jsx("h2",{className:"text-xl font-bold leading-relaxed text-white tracking-wide",children:ht.prompt}),ht.difficulty&&s.jsx("div",{className:"mt-3 inline-block",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${ht.difficulty==="easy"?"bg-green-500/20 text-green-300":ht.difficulty==="medium"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:ht.difficulty.toUpperCase()})})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-3 mb-4",children:ht.options.map((Ne,ve)=>{const ke=rt===ve,ot=ve===ht.answerIndex,me=Ye&&rt!==null&&Y,ye=w[u]&&w[u].includes(ve);let Ee="p-4 rounded-xl transition-all duration-300 border-2 min-h-[64px] flex items-center ";ye?Ee+="bg-gray-700/30 border-gray-600/30 text-gray-500/50 cursor-not-allowed":(Ee+="cursor-pointer ",me?ke&&ot?Ee+="bg-green-600 border-green-500 text-white shadow-lg shadow-green-600/25":ke&&!ot?Ee+="bg-red-600 border-red-500 text-white shadow-lg shadow-red-600/25":!ke&&ot?Ee+="bg-green-600/20 border-green-500 text-green-300 animate-pulse":Ee+="bg-gray-700 border-gray-600 text-gray-400":ke?Ee+="bg-gray-600 border-gray-500 text-white":Ee+="bg-gray-800 border-gray-700 text-gray-200 hover:bg-gray-750 hover:border-gray-600");const Ie=["🅰️","🅱️","🅲️","🅳️"];return s.jsx("button",{onClick:Fe=>Nn(ve,Fe),disabled:Ye&&X[u],className:Ee,children:s.jsxs("div",{className:"flex items-center gap-2 w-full",children:[s.jsx("div",{className:"text-lg flex-shrink-0 mr-1",children:Ie[ve]}),s.jsx("div",{className:"flex-1 text-left font-semibold text-base leading-relaxed",children:Ne}),E[u]&&E[u][ve]>0&&!ye&&s.jsxs("div",{className:"bg-purple-600/20 px-2 py-1 rounded-full text-xs text-purple-300",children:[E[u][ve],"%"]}),me&&ke&&ot&&!ye&&s.jsx("div",{className:"text-lg animate-bounce",children:"🎉"}),me&&ke&&!ot&&!ye&&s.jsx("div",{className:"text-lg",children:"😔"}),me&&!ke&&ot&&!ye&&s.jsx("div",{className:"text-base animate-pulse",children:"✨"})]})},ve)})}),Ye&&Y&&rt!==null&&s.jsx("div",{className:"bg-gray-800 rounded-xl p-4 mb-4 border border-gray-700",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"text-lg flex-shrink-0",children:rt===ht.answerIndex?"🎊":"💡"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`font-semibold mb-3 text-sm ${rt===ht.answerIndex?"text-green-400":"text-blue-400"}`,children:rt===ht.answerIndex?"Perfect! Well done!":"Good try! Here's why:"}),ht.explanation&&s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:ht.explanation})]})]})}),s.jsx("div",{className:"h-[200px]"})]})}),s.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/95 to-gray-900/80 backdrop-blur-xl"}),s.jsxs("div",{className:"relative p-4 pb-8",children:[s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("button",{onClick:Rr,disabled:u===0,className:`flex-1 bg-white/10 backdrop-blur-md border border-white/20 
                disabled:opacity-30 disabled:cursor-not-allowed
                py-3.5 rounded-2xl font-semibold transition-all transform active:scale-95
                hover:bg-white/15 text-white shadow-xl`,children:"Previous"}),s.jsx("button",{onClick:je,disabled:rt!==null,className:`flex-1 py-3.5 rounded-2xl font-semibold transition-all transform active:scale-95 shadow-xl ${rt!==null?"bg-white/5 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-amber-500 to-yellow-500 text-white hover:from-amber-600 hover:to-yellow-600"}`,children:"Skip"}),s.jsx("button",{onClick:he,className:`flex-1 bg-gradient-to-r from-blue-500 to-indigo-500 
                hover:from-blue-600 hover:to-indigo-600
                py-3.5 rounded-2xl font-semibold transition-all transform active:scale-95
                text-white shadow-xl`,children:u===xt-1?"Finish":"Next"})]}),s.jsxs("button",{onClick:()=>z(!0),className:`w-full bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500
              hover:from-emerald-600 hover:via-green-600 hover:to-teal-600
              py-4 rounded-2xl font-bold text-white transition-all transform active:scale-[0.98]
              shadow-2xl shadow-green-500/25 relative overflow-hidden group`,children:[s.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-700 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),s.jsx("span",{className:"relative",children:"Submit Quiz"})]})]})]}),Q&&s.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 max-w-sm w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🤔"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Leave Quiz?"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Your progress will be lost"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>Z(!1),className:"flex-1 bg-blue-600 hover:bg-blue-700 py-3 rounded-xl font-medium",children:"Stay"}),s.jsx("button",{onClick:un,className:"flex-1 bg-gray-700 hover:bg-gray-600 py-3 rounded-xl font-medium",children:"Leave"})]})]})}),L&&!ie&&s.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 max-w-sm w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🏆"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Ready to finish?"}),s.jsxs("p",{className:"text-gray-400 mb-4",children:[Le," of ",xt," answered • ",Ze," skipped"]}),Ye&&s.jsx("div",{className:"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 p-4 rounded-2xl mb-6 border border-yellow-600/30",children:s.jsxs("div",{className:"flex justify-center gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"⭐"}),s.jsx("div",{className:"text-yellow-400 font-bold",children:O}),s.jsx("div",{className:"text-xs text-gray-400",children:"Stars"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"🪙"}),s.jsx("div",{className:"text-yellow-400 font-bold",children:ue}),s.jsx("div",{className:"text-xs text-gray-400",children:"Coins"})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{z(!1),S(null),D(Date.now())},className:"flex-1 bg-gray-700 hover:bg-gray-600 py-3 rounded-xl font-medium",children:"Back"}),s.jsx("button",{onClick:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),console.log("Submit button clicked"),Oe()},className:"flex-1 bg-green-600 hover:bg-green-700 py-3 rounded-xl font-medium",children:"Submit"})]})]})}),j===u&&!L&&s.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 max-w-sm w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-4xl mb-4 animate-pulse",children:"⏰"}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:"Time's Up!"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Let's move to the next question"}),s.jsx("button",{onClick:()=>{S(null),D(Date.now()),u<Je.length-1?he():z(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 py-3 rounded-xl font-medium",children:u<Je.length-1?"Continue":"See Results"})]})}),H&&s.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-4 py-2 rounded-full font-medium animate-bounce z-50",children:H}),s.jsx("style",{jsx:!0,children:`
        .pt-safe {
            padding-top: env(safe-area-inset-top);
        }
        
        @keyframes fadeInOut {
          0% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
          }
          15% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.05);
          }
          20% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
          }
          80% {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
          }
          100% {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.9);
          }
        }
        
        .animate-fadeInOut {
          animation: fadeInOut 3s ease-out forwards;
        }
      `})]})},ao=[{name:"GK",slug:"general-knowledge",questions:50,icon:"🧠",color:"#FF6B6B",gradient:"from-red-500 to-pink-500"},{name:"Science",slug:"science",questions:45,icon:"🧪",color:"#4ECDC4",gradient:"from-cyan-500 to-teal-500"},{name:"Fun Facts",slug:"fun-facts",questions:30,icon:"🎉",color:"#FFD93D",gradient:"from-yellow-400 to-orange-500"},{name:"History",slug:"history",questions:42,icon:"🏺",color:"#A8E6CF",gradient:"from-green-400 to-emerald-500"},{name:"AI & Tech",slug:"artificial-intelligence",questions:28,icon:"🤖",color:"#C7B8FF",gradient:"from-purple-400 to-indigo-500"},{name:"Geography",slug:"geography",questions:38,icon:"🗺️",color:"#FACC15",gradient:"from-yellow-400 to-amber-500"},{name:"Computer",slug:"computer",questions:34,icon:"💻",color:"#3B82F6",gradient:"from-blue-400 to-blue-600"},{name:"Aptitude",slug:"aptitude",questions:36,icon:"📐",color:"#EC4899",gradient:"from-pink-500 to-rose-500"},{name:"Iconic Figures",slug:"iconic-figures",questions:26,icon:"🌟",color:"#8B5CF6",gradient:"from-purple-500 to-violet-600"}],Dj=()=>s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),Lj=()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Mj=()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Oj=()=>s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Fj=()=>s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),zj=({results:t={correct:8,total:10,category:"general-knowledge",mode:"quiz",elapsedMs:125e3,questions:[],returnPath:null,fromQuest:!1},onRetake:e=()=>{},onReview:n=()=>{},onNavigate:r=(u,d)=>{},isRetake:i=!1,isPractice:o=!1,player:a={level:1,coins:0,combo:0,energy:5},categories:c=[]})=>{const[u,d]=h.useState(xe.getCoins()),f=h.useRef(null),[g,y]=h.useState(null),[N]=Rt("/sounds/coin.mp3",{volume:.75}),[b,C]=h.useState(!1),[P,_]=h.useState(!1),[j,S]=h.useState(0),[I,D]=h.useState(!1),[M,k]=h.useState(!1),m=()=>{if(console.log("QuizResults handleBack:",{fromQuest:t.fromQuest,returnPath:t.returnPath,isPractice:t.isPractice||o}),t.fromQuest){const q=t.isPractice||o?"practiceQuestions":"dailyQuizzes";t.isPractice||o?r("/profile/quests"):r("/profile/quests",{state:{questCompleted:!0,questType:q,increment:1}})}else{const q=t.returnPath||"/";r(q)}},{correct:x,total:w,category:A,categorySlug:E,difficulty:T,mode:X,elapsedMs:te}=t,ne=w?Math.round(x/w*100):0,K=ne===100,U=ne>=80,F=Math.floor(te/1e3),B=w>0?Math.floor(F/w):0,$=o?t.earnedCoins||0:Math.round(x*5*(K?1.5:U?1.2:1)),L=ao.find(q=>q.slug===A)||ao[0],Q=(()=>K?{emoji:"🏆",text:"Perfect!",color:"text-yellow-400"}:ne>=90?{emoji:"🌟",text:"Excellent!",color:"text-purple-400"}:ne>=80?{emoji:"✨",text:"Great job!",color:"text-blue-400"}:ne>=70?{emoji:"👍",text:"Good effort!",color:"text-green-400"}:ne>=60?{emoji:"💪",text:"Keep going!",color:"text-orange-400"}:{emoji:"📚",text:"Keep practicing!",color:"text-gray-400"})();h.useEffect(()=>{const q=xe.getCoins();d(q)},[]),h.useEffect(()=>{t.coinsProcessed||$>0&&f.current&&setTimeout(()=>{f.current.getBoundingClientRect();const q=new Audio("/sounds/coin.mp3");q.volume=.75,q.play().catch(ae=>{if(console.error("Audio play failed:",ae),N)try{N()}catch(J){console.error("Hook play failed:",J)}}),y({startRect:{left:window.innerWidth/2-50,top:window.innerHeight/2,width:100,height:100},count:Math.min($,10),amount:$}),C(!0),t.coinsProcessed=!0},500)},[]),h.useEffect(()=>{document.documentElement.scrollIntoView({behavior:"smooth",block:"start"}),(K||U)&&(_(!0),setTimeout(()=>_(!1),3e3));let q=0;const ae=x/20,J=setInterval(()=>{q+=ae,q>=x?(S(x),clearInterval(J)):S(Math.floor(q))},50);return()=>clearInterval(J)},[x,K,U]);const Z=[{score:7,total:10},{score:6,total:10},{score:8,total:10},{score:9,total:10},{score:x,total:w}],H=()=>{try{const q=localStorage.getItem("qp_recent");if(q)return JSON.parse(q).slice(0,10).map(J=>J.slug||J.cat).filter(J=>J&&J!==t.categorySlug)}catch(q){console.error("Error reading recent categories:",q)}return[]},oe=()=>{const q=E||A,ae=T||"medium",J=H(),ee=(c||ao||[]).filter(G=>G.slug!==q&&!J.slice(0,3).includes(G.slug)),ie=(()=>{if(ee.length===0){const G=(c||ao||[]).filter(O=>O.slug!==q);return G[Math.floor(Math.random()*G.length)]||(c||ao)[0]}return ee[Math.floor(Math.random()*ee.length)]})();if(ne<60)return o?[{icon:"🎯",title:"Try Fewer Questions",desc:"Start with just 5",color:"from-blue-500 to-cyan-500",action:()=>r(`/quiz/${q}`,{state:{mode:"practice",difficulty:"easy",count:5,timer:{type:"off",seconds:0}}})},{icon:ie.icon,title:ie.name,desc:"Fresh start with new topic",color:ie.gradient,action:()=>r(`/quiz/${ie.slug}`,{state:{mode:"practice",difficulty:"easy",count:10,timer:{type:"off",seconds:0}}})},{icon:"📖",title:"Review Mistakes",desc:"Learn from errors",color:"from-purple-500 to-pink-500",action:()=>n()}]:[{icon:"📚",title:"Practice Mode",desc:"No timer, learn at your pace",color:"from-green-500 to-teal-500",action:()=>r(`/quiz/${q}`,{state:{mode:"practice",difficulty:"easy",count:10,timer:{type:"off",seconds:0}}})},{icon:ae!=="easy"?"🎯":"🔄",title:ae!=="easy"?"Easy Mode":"Try Again",desc:ae!=="easy"?"Build confidence":"You can do this!",color:"from-blue-500 to-cyan-500",action:()=>ae!=="easy"?r(`/quiz/${q}`,{state:{mode:"quiz",difficulty:"easy",count:5,timer:{type:"per_q",seconds:60}}}):e()},{icon:ie.icon,title:ie.name,desc:"Try something different",color:ie.gradient,action:()=>r(`/quiz/${ie.slug}`,{state:{mode:"practice",difficulty:"easy",count:10,timer:{type:"off",seconds:0}}})}];if(ne>=80)return ae==="hard"&&ne>=90?[{icon:"⚡",title:"Lightning Round",desc:"20 questions, 10s each",color:"from-yellow-500 to-red-500",action:()=>r(`/quiz/${q}`,{state:{mode:"quiz",difficulty:"hard",count:20,timer:{type:"per_q",seconds:10}}})},{icon:ie.icon,title:`${ie.name} Challenge`,desc:"Hard mode, new topic",color:ie.gradient,action:()=>r(`/quiz/${ie.slug}`,{state:{mode:"quiz",difficulty:"hard",count:15,timer:{type:"per_q",seconds:30}}})},{icon:"🎲",title:"Mixed Categories",desc:"Test all your knowledge",color:"from-purple-500 to-indigo-500",action:()=>r("/quiz/mixed",{state:{mode:"quiz",difficulty:"hard",count:20,timer:{type:"per_q",seconds:30}}})}]:[{icon:ae==="hard"?"🔥":"🎯",title:ae==="hard"?"Perfect Score Challenge":"Hard Mode",desc:ae==="hard"?"Can you get 100%?":"Level up your skills",color:"from-red-500 to-orange-500",action:()=>r(`/quiz/${q}`,{state:{mode:"quiz",difficulty:"hard",count:ae==="hard"?10:20,timer:{type:"per_q",seconds:30}}})},{icon:ie.icon,title:ie.name,desc:"Master new topics",color:ie.gradient,action:()=>r(`/quiz/${ie.slug}`,{state:{mode:"practice",difficulty:"easy",count:10,timer:{type:"off",seconds:0}}})},{icon:"⚡",title:"Speed Challenge",desc:"10 questions, 15s each",color:"from-purple-500 to-pink-500",action:()=>r(`/quiz/${q}`,{state:{mode:"quiz",difficulty:"medium",count:10,timer:{type:"per_q",seconds:15}}})}];{const G=ne<70;return[{icon:G?"📚":"🎯",title:G?"Practice More":"Try Again",desc:G?"Improve accuracy":"Beat your score",color:G?"from-green-500 to-teal-500":"from-blue-500 to-purple-500",action:G?()=>r(`/quiz/${q}`,{state:{mode:"practice",difficulty:ae,count:10,timer:{type:"off",seconds:0}}}):()=>e()},{icon:ie.icon,title:ie.name,desc:"Explore new topics",color:ie.gradient,action:()=>r(`/quiz/${ie.slug}`,{state:{mode:"practice",difficulty:"easy",count:10,timer:{type:"off",seconds:0}}})},{icon:ae==="easy"?"⬆️":"💪",title:ae==="easy"?"Medium Difficulty":"More Questions",desc:ae==="easy"?"Ready for more?":"Test endurance",color:"from-indigo-500 to-purple-500",action:()=>r(`/quiz/${q}`,{state:{mode:"quiz",difficulty:ae==="easy"?"medium":ae,count:ae==="easy"?10:20,timer:{type:"per_q",seconds:45}}})}]}},Y=dn.useMemo(()=>oe(),[ne,o,t.categorySlug,t.difficulty]);return s.jsx("div",{className:"h-screen overflow-y-auto bg-gradient-to-b from-gray-900 via-gray-800 to-black text-white",children:s.jsxs("div",{className:"min-h-full p-4 pt-10",children:[g&&s.jsx(as,{startRect:g.startRect,targetRef:f,count:g.count,onDone:()=>{if(g.amount>0&&!M){console.log("[QuizResults] Updating display with current total"),k(!0);const q=xe.getCoins();d(q)}y(null)}}),s.jsx("style",{children:`
        @keyframes coinRotate {
          from { transform: rotateY(0deg); }
          to { transform: rotateY(360deg); }
        }
      `}),P&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center",children:s.jsx("div",{className:"text-8xl animate-bounce",children:K?"🎉":"⭐"})}),s.jsxs("div",{className:"flex justify-between items-center mb-6 mt-1",children:[s.jsxs("button",{onClick:m,className:"p-2 rounded-xl bg-white/10 backdrop-blur hover:bg-white/20 transition-all flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"px-3 py-1.5 rounded-full bg-white/10 backdrop-blur text-sm font-medium",children:["Level ",a.level]}),s.jsxs("button",{ref:f,onClick:()=>D(!0),className:"px-3 py-1.5 rounded-full bg-yellow-500/20 backdrop-blur text-sm font-medium text-yellow-300 hover:bg-yellow-500/30 transition-all cursor-pointer",children:[u," 🪙"]})]})]}),s.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl border border-white/20 p-8 mb-6",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 via-transparent to-blue-500/10 animate-pulse"}),s.jsxs("div",{className:"relative text-center",children:[s.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur mb-4 ${Q.color}`,children:[s.jsx("span",{className:"text-2xl",children:Q.emoji}),s.jsx("span",{className:"font-semibold",children:Q.text})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"text-7xl font-bold mb-2 bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent",children:[j,"/",w]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-white/60",children:[s.jsx("span",{className:"text-xl",children:L.icon}),s.jsx("span",{children:L.name})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold",children:[ne,"%"]}),s.jsx("div",{className:"text-xs text-white/60",children:"Accuracy"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-3xl font-bold",children:[B,"s"]}),s.jsx("div",{className:"text-xs text-white/60",children:"Avg Speed"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:$>0?`+${$}`:"0"}),s.jsx("div",{className:"text-xs text-white/60",children:"Coins"})]})]})]})]}),s.jsxs("div",{className:"rounded-2xl bg-white/5 backdrop-blur border border-white/10 p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oj,{}),s.jsx("span",{className:"text-sm font-medium",children:"Your Progress"})]}),a.combo>0&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-orange-500/20 text-orange-400 text-xs",children:[s.jsx(Fj,{}),a.combo," streak"]})]}),s.jsx("div",{className:"flex items-end gap-1 h-12 mb-2",children:Z.map((q,ae)=>s.jsx("div",{className:`flex-1 rounded-t transition-all ${ae===Z.length-1?"bg-gradient-to-t from-purple-500 to-purple-400":"bg-white/20"}`,style:{height:`${q.score/q.total*100}%`,minHeight:"4px"}},ae))}),s.jsx("div",{className:"text-xs text-white/40 text-center",children:"Last 5 quizzes"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[s.jsxs("button",{onClick:n,className:"relative overflow-hidden group rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 p-4 transition-all hover:scale-105 active:scale-95",children:[s.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform"}),s.jsxs("div",{className:"relative flex items-center justify-between",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Review"}),s.jsx("div",{className:"text-xs opacity-80",children:"Check answers"})]}),s.jsx(Mj,{})]})]}),s.jsx("button",{onClick:e,className:"relative overflow-hidden group rounded-2xl bg-white/10 backdrop-blur border border-white/20 p-4 transition-all hover:scale-105 active:scale-95 hover:bg-white/15",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-semibold",children:"Try Again"}),s.jsx("div",{className:"text-xs opacity-60",children:"New questions"})]}),s.jsx(Lj,{})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm font-medium text-white/60 px-1",children:"Recommended for you"}),Y.map((q,ae)=>s.jsx("button",{onClick:q.action,className:"w-full group relative overflow-hidden rounded-2xl bg-white/5 backdrop-blur border border-white/10 p-4 transition-all hover:bg-white/10 hover:border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-r ${q.color} opacity-20 group-hover:opacity-30 transition-opacity`,children:s.jsx("span",{className:"text-xl",children:q.icon})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-sm",children:q.title}),s.jsx("div",{className:"text-xs text-white/40",children:q.desc})]})]}),s.jsx(Dj,{})]})},ae))]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:s.jsx("button",{onClick:()=>r("/profile/history",{state:{from:"results",returnToResults:!0}}),className:"w-full text-center text-sm text-white/40 hover:text-white/60 transition-colors",children:"View all history →"})}),I&&s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:q=>{q.target===q.currentTarget&&D(!1)},children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 w-full max-w-md border border-gray-700 relative overflow-hidden",onClick:q=>q.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"h-full bg-gradient-to-br from-yellow-400 to-orange-500"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-5xl",style:{animation:"coinRotate 2s linear infinite"},children:"🪙"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"Your Treasure"}),s.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[u," Coins"]})]})]}),s.jsx("button",{onClick:()=>D(!1),className:"w-8 h-8 rounded-lg bg-white/5 border border-gray-600 grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Ways to Earn"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),"Complete Quizzes"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"+5 coins per correct answer"})]}),s.jsx("div",{className:"text-green-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎯"}),"Daily Challenge"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Complete daily for bonus"})]}),s.jsx("div",{className:"text-blue-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎰"}),"Spin & Play"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test your luck!"})]}),s.jsx("div",{className:"text-purple-400 font-bold",children:"+50"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🏆"}),"Achievements"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Unlock special rewards"})]}),s.jsx("div",{className:"text-orange-400 font-bold",children:"+???"})]})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[s.jsx("span",{children:"Next reward"}),s.jsxs("span",{children:[100-a.coins%100," coins to go"]})]}),s.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all",style:{width:`${a.coins%100}%`}})})]}),s.jsx("button",{onClick:()=>{D(!1),r("/play")},className:"w-full py-3 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold hover:scale-[1.02] transition-transform shadow-lg",children:"Start Earning Now! 🚀"})]})]})})]})})},Vj=({questions:t,answers:e,skipped:n,onBack:r,onRetake:i,fromHistory:o=!1})=>{const a=Ge(),c=()=>{o?a("/profile/history",{replace:!0}):r?r():a(-1)},u=t.reduce((g,y,N)=>g+(e[N]===y.answerIndex?1:0),0),d=(n==null?void 0:n.filter(Boolean).length)||0,f=t.length-u-d;return s.jsxs("div",{className:"mt-2 card rounded-3xl p-5 w-full max-w-none mx-auto pb-24 h-full overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pt-6",children:[s.jsx("button",{className:"px-3 py-1 rounded-xl border border-base-border bg-white/5",onClick:c,children:"← Back"}),s.jsx("h2",{className:"text-lg font-semibold",children:"Review Answers"}),s.jsx("div",{className:"w-16"})," "]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[s.jsxs("div",{className:"rounded-xl bg-green-600/10 border border-green-500/30 p-2 text-center",children:[s.jsx("div",{className:"text-xs text-green-400",children:"Correct"}),s.jsx("div",{className:"text-lg font-bold text-green-400",children:u})]}),s.jsxs("div",{className:"rounded-xl bg-red-600/10 border border-red-500/30 p-2 text-center",children:[s.jsx("div",{className:"text-xs text-red-400",children:"Incorrect"}),s.jsx("div",{className:"text-lg font-bold text-red-400",children:f})]}),s.jsxs("div",{className:"rounded-xl bg-amber-600/10 border border-amber-500/30 p-2 text-center",children:[s.jsx("div",{className:"text-xs text-amber-400",children:"Skipped"}),s.jsx("div",{className:"text-lg font-bold text-amber-400",children:d})]})]}),s.jsx("ol",{className:"space-y-4",children:t.map((g,y)=>{const N=e[y],b=!N&&N!==0,C=N===g.answerIndex;return s.jsxs("li",{className:"rounded-2xl border border-base-border bg-white/5 p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm md:text-base font-medium",children:["Q",y+1,". ",g.prompt]}),g.category&&s.jsxs("div",{className:"text-xs text-base-muted mt-1",children:["Category: ",g.category," • Difficulty: ",g.difficulty||"Medium"]})]}),s.jsx("div",{className:"ml-2",children:b?s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-amber-600/20 text-amber-400",children:"Skipped"}):C?s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-green-600/20 text-green-400",children:"✓ Correct"}):s.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-600/20 text-red-400",children:"✗ Wrong"})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:g.options.map((P,_)=>{const j=N===_,S=_===g.answerIndex;let I="w-full text-left px-3 py-2 rounded-xl border transition-all ";return S?I+="bg-green-600/20 border-green-500/50 text-green-300":j&&!S?I+="bg-red-600/20 border-red-500/50 text-red-300":I+="bg-base-bg/40 border-base-border text-base-muted",s.jsxs("div",{className:I,children:[s.jsxs("span",{className:"font-semibold mr-2",children:[["A","B","C","D"][_],"."]}),P,S&&s.jsx("span",{className:"ml-2 text-green-400",children:"✓"}),j&&!S&&s.jsx("span",{className:"ml-2 text-red-400",children:"✗"})]},_)})}),g.explanation&&s.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-white/5 border border-base-border",children:[s.jsx("div",{className:"text-xs font-semibold text-brand-blue mb-1",children:"Explanation:"}),s.jsx("div",{className:"text-sm text-base-muted",children:g.explanation})]})]},g.id||y)})}),s.jsxs("div",{className:"mt-6 flex gap-2 justify-center sticky bottom-4",children:[s.jsx("button",{className:"px-4 py-2.5 rounded-xl border border-base-border bg-base-card backdrop-blur",onClick:c,children:"Back to Results"}),i&&s.jsx("button",{className:"px-4 py-2.5 rounded-xl bg-gradient-to-r from-brand-blue to-brand-purple text-white font-medium",onClick:i,children:"Retake Quiz"})]})]})},$j="qp_resume",Hp="qp_mistakes",Qp="qp_stats",Gp="qp_lastset",Wp="qp_recent",Yp="qp_review_snapshot",Bj=50,lo=(t="")=>t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),Sl=(t="")=>t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),Uj=(t,e)=>t.slice().sort(()=>Math.random()-.5).slice(0,e),zy=t=>{const e=t.slice();for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},qj=(t,e,n)=>Math.max(e,Math.min(n,t)),co=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}};async function Hj(){const t="/data/quiz_questions_bank.csv",e=await fetch(t);if(!e.ok)throw new Error(`CSV not found at ${t}`);const n=await e.text(),{data:r}=Us.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:o=>String(o).trim().toLowerCase()}),i={a:0,b:1,c:2,d:3};return r.map((o,a)=>{var y;const c=[o.option1,o.option2,o.option3,o.option4].map(N=>(N??"").trim());if(c.some(N=>!N))return null;let u=-1;const d=String(o.answer??"").trim();if(i[d.toLowerCase()]!==void 0)u=i[d.toLowerCase()];else{const N=c.findIndex(b=>b.toLowerCase()===d.toLowerCase());u=N>=0?N:0}const f=String(o.category??o.subject??"General Knowledge").trim(),g=String(o.difficulty??"medium").toLowerCase().trim();return{id:((y=o.id)==null?void 0:y.trim())||`q_${a}`,category:f,difficulty:g,prompt:String(o.question??"").trim(),options:c,answerIndex:u,explanation:String(o.explanation??"").trim()}}).filter(Boolean)}function Qj(t,{categorySlug:e,difficulty:n,count:r}){console.log("=== BUILD SESSION DEBUG ==="),console.log("categorySlug:",e),console.log("difficulty:",n),console.log("count:",r),console.log("Total questions available:",t.length);const o=e==="mixed"?()=>!0:f=>Sl(f.category)===e,a=n?f=>(f.difficulty||"medium")===n:()=>!0,c=t.filter(f=>o(f)&&a(f));if(console.log("Filtered pool size:",c.length),console.log("Sample categories from all questions:",[...new Set(t.slice(0,10).map(f=>`"${f.category}" -> "${Sl(f.category)}"`))]),c.length===0)return console.error("No questions match the filter criteria!"),console.log("Available categories:",[...new Set(t.map(f=>Sl(f.category)))]),{questions:[],poolSize:0};const d=Uj(c,Math.min(r,c.length)).map(f=>{const g=zy([0,1,2,3]),y=g.map(b=>f.options[b]),N=g.indexOf(f.answerIndex);return{...f,options:y,answerIndex:N}});return console.log("Final questions:",d.length),{questions:d,poolSize:c.length}}function Gj(){const t=Ge(),{category:e}=D2(),n=Ct(),{energy:r,useEnergy:i,player:o,updateDailyStreak:a}=Ir(),c=new URLSearchParams(n.search),u=c.get("review")==="1",d=c.get("retake")==="1",f=n.state||{},g=f.mode||"quiz",y=String(f.difficulty||"medium").toLowerCase(),N=f.returnPath||null,b=f.fromQuest||!1,C=qj(Number(f.count||10),1,50),P=f.timer||{type:"per_q",seconds:45};f.resume,f.daily,f.source;const _=d||!!f.retake,j=!!f.fromHistory,S=g==="practice";console.log("Quiz Component - Mode Detection:",{routerState:f,mode:g,isPractice:S,location:n.pathname,state:n.state});const[I,D]=h.useState([]),[M,k]=h.useState(!0),[m,x]=h.useState(""),[w,A]=h.useState({questions:[]}),[E,T]=h.useState("quiz"),[X,te]=h.useState(null),[ne,K]=h.useState(null),[U,F]=h.useState(0);h.useEffect(()=>{let H=!0;return(async()=>{try{const oe=await Hj();if(!H)return;D(oe)}catch(oe){console.error(oe),x("Failed to load questions. Check /public/data/quiz_questions_bank.csv")}finally{k(!1)}})(),()=>{H=!1}},[]),h.useEffect(()=>{var H;if((H=n.state)!=null&&H.returnToResults){const oe=xe.getCurrentResults();oe&&(te(oe),T("results"),k(!1),A({questions:[]}))}},[n.state]),h.useEffect(()=>{var oe;if(M||m||u||(oe=n.state)!=null&&oe.returnToResults||I.length===0)return;console.log("=== SESSION INIT ==="),console.log("Category:",e),console.log("Mode:",g),console.log("Difficulty:",y),console.log("Count:",C);const H=Qj(I,{categorySlug:e,difficulty:y,count:C});if(H.questions.length===0){console.error("No questions found!"),console.log("Looking for category:",e),console.log("Available categories (first 10):",[...new Set(I.map(Y=>Sl(Y.category)))].slice(0,10)),x(`No questions found for "${lo(e)}" with difficulty "${y}"`);return}console.log("Session built with",H.questions.length,"questions"),T("quiz"),te(null),A(H),K(Date.now()),F(0)},[I,e,g,y,C,n.pathname]),h.useEffect(()=>{if(E!=="quiz"||!ne)return;const H=setInterval(()=>{F(Date.now()-ne)},1e3);return()=>clearInterval(H)},[E,ne]);const B=h.useCallback(H=>{if(console.log("Quiz completed - Mode:",g,"isPractice:",S,"Results:",H),console.log("handleQuizComplete called at:",new Date().toISOString()),window._quizCompleting){console.warn("Quiz completion already in progress, ignoring duplicate call");return}if(window._quizCompleting=!0,setTimeout(()=>{window._quizCompleting=!1},1e3),!H||!H.questions){console.error("Invalid results object:",H);return}const oe=H.questions.filter((J,ee)=>H.answers[ee]!==null&&H.answers[ee]!==J.answerIndex).map(J=>J.id);try{const J=co(Hp,[]),ee=Array.from(new Set([...oe,...J]));localStorage.setItem(Hp,JSON.stringify(ee))}catch(J){console.error("Error saving mistakes:",J)}try{const J=co(Qp,{sessions:[]});J.sessions.push({cat:lo(e),mode:S?"practice":"quiz",total:H.total,correct:H.correct,skipped:H.skipped.filter(Boolean).length,ms:U,timestamp:Date.now(),earnedXP:S?0:H.correct*10,earnedCoins:S?0:H.correct*5}),localStorage.setItem(Qp,JSON.stringify(J))}catch(J){console.error("Error saving stats:",J)}const Y={ts:Date.now(),slug:e,categoryLabel:lo(e),mode:S?"practice":"quiz",difficulty:y,total:H.total,timer:S?null:P,ms:U,attempted:H.answers.filter(J=>J!==null).length,correct:H.correct,questions:H.questions,answers:H.answers,skipped:H.skipped,isPractice:S};try{localStorage.setItem(Gp,JSON.stringify(Y)),localStorage.setItem(Yp,JSON.stringify({questions:H.questions,answers:H.answers,skipped:H.skipped}));const J=co(Wp,[]),re=[{id:Y.ts,ts:Y.ts,cat:Y.categoryLabel,slug:e,mode:S?"Practice":"Quiz",total:H.total,correct:H.correct,ms:U,snapshot:Y},...J].slice(0,Bj);localStorage.setItem(Wp,JSON.stringify(re))}catch(J){console.error("Error saving snapshot:",J)}localStorage.removeItem($j);const q=Ot.getCurrentUser();if(q!=null&&q.phone)if(S){const J=xe.recordPracticeSession(q.phone,{questionsCompleted:H.correct,correctAnswers:H.correct,category:e});H.earnedCoins=J.coinsEarned}else{const J=xe.recordQuizSession(q.phone,{score:H.correct,totalQuestions:H.total,category:e,difficulty:y,mode:"quiz"});H.earnedCoins=J.coinsEarned}else H.earnedCoins=0;a(),console.log("Setting review snapshot with:",{returnPath:N||"/",fromQuest:b||!1});const ae={...H,category:lo(e),categorySlug:e,difficulty:y,mode:S?"practice":"quiz",elapsedMs:U,isPractice:S,hasTimer:!S,earnedXP:S?0:H.correct*10,earnedCoins:S?H.earnedCoins||0:H.correct*5,returnPath:N||"/",fromQuest:b||!1};xe.storeCurrentResults(ae),te(ae),T("results")},[e,g,P,U,S,N,b]),$=()=>{const H=new Date;return`${H.getFullYear()}-${H.getMonth()+1}-${H.getDate()}`};h.useCallback(H=>{if(S&&b){const oe=JSON.parse(localStorage.getItem("questProgress")||"{}"),Y=oe.practiceQuestions||0,q=Math.min(Y+H,15);oe.practiceQuestions=q,oe.date=$(),localStorage.setItem("questProgress",JSON.stringify(oe)),console.log("Practice progress updated:",q)}},[S,b]);const L=h.useCallback(()=>{N?t(N,{replace:!0}):j?t("/profile/history",{replace:!0,state:null}):t("/")},[j,t,N]),z=h.useCallback(()=>{console.log("Retake requested - Mode:",g,"isPractice:",S);const H=co(Gp,null);if(!H||H.slug!==e){t(`/quiz/${e}?r=${Date.now()}`,{replace:!0,state:{mode:S?"practice":"quiz",difficulty:y,count:C,timer:S?null:P,retake:!0}});return}const oe=H.questions.map(Y=>{const q=zy([0,1,2,3]);return{...Y,options:q.map(ae=>Y.options[ae]),answerIndex:q.indexOf(Y.answerIndex)}});A({questions:oe,poolSize:oe.length}),K(Date.now()),F(0),T("quiz"),window.scrollTo(0,0)},[e,g,y,C,P,t,S]),Q=h.useCallback((H=null)=>{if(H)te(H);else if(!X){const oe=co(Yp,null);oe&&te({questions:oe.questions||[],answers:oe.answers||[],skipped:oe.skipped||[]})}T("review")},[X]),Z=h.useCallback(()=>{j?t("/profile/history",{replace:!0}):T("results")},[j,t]);return M?s.jsx("div",{className:"fixed inset-0 bg-inherit text-white flex items-center justify-center",children:s.jsx("div",{className:"text-sm text-base-muted",children:"Loading questions…"})}):m?s.jsx("div",{className:"fixed inset-0 bg-inherit text-white flex items-center justify-center",children:s.jsx("div",{className:"text-sm text-red-400",children:m})}):(console.log("Render - Current view:",E,"Session questions:",w.questions.length,"Mode:",g,"isPractice:",S),s.jsx("div",{className:"fixed inset-0 bg-inherit text-white z-0 overflow-hidden max-w-[100vw]",children:s.jsxs("div",{className:"h-full overflow-hidden px-0",children:[E==="quiz"&&w.questions.length>0&&s.jsx("div",{className:"h-full",children:s.jsx(Pj,{session:w,mode:S?"practice":"quiz",category:lo(e),difficulty:y,timerConfig:S?null:P,onComplete:B,onQuit:L,isPractice:S})}),E==="results"&&X&&s.jsx(zj,{results:X,onRetake:z,onReview:()=>Q(X),isRetake:_,isPractice:S,player:o,categories:My,onNavigate:(H,oe)=>{console.log("onNavigate called with:",H,oe),oe!=null&&oe.state?t(H,{state:oe.state,replace:oe.replace||!1}):t(H)}}),E==="review"&&X&&s.jsx(Vj,{questions:X.questions||[],answers:X.answers||[],skipped:X.skipped||[],onBack:Z,onRetake:z,fromHistory:j,isPractice:S})]})}))}const zr=[{label:"General Knowledge",slug:"general-knowledge",color:"#7C3AED",soon:!1},{label:"Current Affairs",slug:"current-affairs",color:"#2563EB",soon:!1},{label:"Fun Facts",slug:"fun-facts",color:"#EF4444",soon:!1},{label:"Science",slug:"science",color:"#10B981",soon:!1},{label:"History",slug:"history",color:"#F59E0B",soon:!0},{label:"Geography",slug:"geography",color:"#FACC15",soon:!0},{label:"Cat 1",slug:"cat-1",color:"#06B6D4",soon:!0},{label:"Cat 2",slug:"cat-2",color:"#D946EF",soon:!0}],ys=360/zr.length,Wj=42,Pu=3e3,Kp=10,Xp=260,Yj="cubic-bezier(.15,.7,.1,1)",Kj="cubic-bezier(.2,.7,.2,1)",Or=5,Xj=5,Jj=(t="")=>String(t).toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");function Zj({muted:t=!1,size:e=18}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24","aria-hidden":"true",children:[s.jsx("path",{d:"M3 9h4l5-4v14l-5-4H3z",fill:"currentColor"}),!t&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:"M16 8c1.5 1.5 1.5 6 0 7.5",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M19 6c3 3 3 10 0 13",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round"})]}),t&&s.jsx("line",{x1:"3",y1:"21",x2:"21",y2:"3",stroke:"#EF4444",strokeWidth:"2.5",strokeLinecap:"round"})]})}function eN({q:t,locked:e,onPick:n,result:r}){if(!t)return null;const i=[t.option1,t.option2,t.option3,t.option4];return s.jsxs("div",{className:"mt-5 rounded-3xl bg-white/5 border border-white/10 p-4",children:[s.jsx("div",{className:"text-sm text-base-muted mb-1",children:"Quick question"}),s.jsx("div",{className:"text-xl font-semibold mb-4",children:t.question}),i.map((o,a)=>{const c=r&&o===t.answer,u=r&&r.pick===o&&o!==t.answer;return s.jsx("button",{disabled:e||!!r,onClick:()=>n(o),className:["w-full text-left px-4 py-2 rounded-xl mb-2 border transition",!r&&!e?"bg-white/5 hover:bg-white/10 border-white/10":"bg-white/5 border-white/10",c?"bg-green-600/20 border-green-400/60 text-green-200":"",u?"bg-red-600/20 border-red-400/60 text-red-200":""].join(" "),children:o},a)}),r&&s.jsxs("div",{className:"mt-3 text-sm",children:[r.correct?s.jsx("span",{className:"text-green-400 font-medium",children:"✅ Correct!"}):s.jsxs("span",{className:"text-red-400 font-medium",children:["❌ Not quite. Answer: ",s.jsx("b",{children:t.answer})]}),t.explanation&&s.jsxs("div",{className:"text-xs text-base-muted mt-1",children:["Tip: ",t.explanation]})]})]})}function tN(){const t=Ge(),[e]=Rt("/sounds/correct.mp3",{volume:.7}),[n]=Rt("/sounds/wrong.mp3",{volume:.7}),[r,i]=h.useState(()=>[{name:"Player 1",color:"#60A5FA",scores:Array(Or).fill(null)},{name:"Player 2",color:"#F472B6",scores:Array(Or).fill(null)}]),[o,a]=h.useState(0),[c,u]=h.useState(1),d=r.reduce((Y,q)=>Y+q.scores.reduce((ae,J)=>ae+(J??0),0),0),[f,g]=h.useState(!0),y=h.useRef(null);h.useEffect(()=>{const Y=new Audio("/sounds/spin.mp3");return Y.loop=!0,Y.volume=.7,y.current=Y,()=>{try{Y.pause(),Y.src=""}catch{}}},[]);const N=()=>{if(f&&y.current)try{y.current.currentTime=0,y.current.play()}catch{}},b=()=>{if(y.current)try{y.current.pause(),y.current.currentTime=0}catch{}},[C,P]=h.useState(0),[_,j]=h.useState("none"),[S,I]=h.useState(!1),[D,M]=h.useState(null),[k,m]=h.useState(null),x=h.useMemo(()=>typeof window<"u"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1,[]),[w,A]=h.useState([]);h.useEffect(()=>{(async()=>{try{const Y=await fetch("/data/quiz_questions_bank.csv").then(ee=>ee.text()),{data:q}=Us.parse(Y,{header:!0,skipEmptyLines:!0,transformHeader:ee=>String(ee).trim().toLowerCase()}),ae={a:0,b:1,c:2,d:3},J=q.map((ee,re)=>{var pe;const ie=(ee.question??"").trim();if(!ie)return null;const G=[ee.option1,ee.option2,ee.option3,ee.option4].map(we=>String(we??"").trim());if(G.some(we=>!we))return null;let O=String(ee.answer??"").trim(),le=ae[O.toLowerCase()];if(le===void 0){const we=G.findIndex(Re=>Re.toLowerCase()===O.toLowerCase());le=we>=0?we:0}const ue=G[le];return{id:((pe=ee.id)==null?void 0:pe.trim())||`ps_${re}`,question:ie,option1:G[0],option2:G[1],option3:G[2],option4:G[3],answer:ue,explanation:String(ee.explanation??"").trim(),catSlug:Jj(ee.category??ee.subject??"general knowledge"),difficulty:String(ee.difficulty??"medium").toLowerCase().trim()}}).filter(Boolean);A(J)}catch{A([])}})()},[]);const[E,T]=h.useState(null),[X,te]=h.useState(null),[ne,K]=h.useState(!1),U=Y=>(Y%360+360)%360,F=Y=>U(Y),B=c>Or;function $(){if(r.length>=4)return;const Y=["#60A5FA","#F472B6","#F59E0B","#34D399","#F87171","#A78BFA"],q=Y[(r.length*2+1)%Y.length];i(ae=>[...ae,{name:`Player ${ae.length+1}`,color:q,scores:Array(Or).fill(null)}])}function L(){r.length<=2||(i(Y=>Y.slice(0,-1)),a(Y=>Math.min(Y,r.length-2)))}function z(Y){i(q=>q.map((ae,J)=>J===o?{...ae,scores:ae.scores.map((ee,re)=>re===c-1?Y:ee)}:ae))}function Q(){if(S||B)return;M(null),m(null),T(null),te(null),I(!0),N();const Y=Math.floor(Math.random()*zr.length),q=zr[Y],ae=ys*.28,J=(Math.random()*2-1)*ae,ee=U(C),re=180,G=Y*ys+ys/2+J;let O=F(G-ee-re);const le=Wj*360+O,ue=C+le+Kp;j(`transform ${x?800:Pu}ms ${Yj}`),P(ue);try{navigator.vibrate&&!x&&navigator.vibrate([10,40,10])}catch{}setTimeout(()=>{j(`transform ${x?160:Xp}ms ${Kj}`),P(pe=>pe-Kp)},x?800:Pu),setTimeout(()=>{if(b(),I(!1),M(Y),m(q.color),q.soon)return;const pe=w.filter(Re=>Re.catSlug===q.slug&&Re.difficulty==="easy"),we=pe.length?pe:w.filter(Re=>Re.catSlug===q.slug);if(we.length){const Re=we[Math.floor(Math.random()*we.length)];T(Re)}else T({question:"No question found for this category yet. Try re-spinning!",option1:"Okay",option2:"Okay",option3:"Okay",option4:"Okay",answer:"Okay",explanation:""})},(x?800:Pu)+(x?160:Xp)+40)}function Z(Y){if(!E||X)return;const q=Y===E.answer;if(te({correct:q,pick:Y}),q){e(),K(!0),setTimeout(()=>K(!1),900);try{navigator.vibrate&&navigator.vibrate([8,16])}catch{}z(Xj)}else{n();try{navigator.vibrate&&navigator.vibrate([4])}catch{}z(0)}}function H(){const Y=(o+1)%r.length,q=Y===0?c+1:c;a(Y),u(q),M(null),m(null),T(null),te(null)}function oe(){const Y=r.map(J=>J.scores.reduce((ee,re)=>ee+(re??0),0)),q=Math.max(...Y),ae=r.filter((J,ee)=>Y[ee]===q).map(J=>J.name).join(", ");alert(`${ae} win${ae.includes(",")?"":"s"} the pot of ${d} coins! 🎉`),t("/play")}return s.jsxs("div",{className:"min-h-screen bg-black text-white",children:[ne&&s.jsx(Oy,{numberOfPieces:120,recycle:!1}),s.jsxs("div",{className:"mx-auto max-w-md px-5 pt-[calc(env(safe-area-inset-top)+1.25rem)] pb-[calc(5.25rem+env(safe-area-inset-bottom))]",children:[s.jsxs("header",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:()=>t("/play"),className:"h-10 w-10 grid place-items-center rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition","aria-label":"Back",children:"←"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Party Spin"}),s.jsx("p",{className:"text-sm text-base-muted",children:"Pass & play • Winner takes the pot"})]}),s.jsx("button",{onClick:()=>g(Y=>!Y),className:"h-10 w-10 grid place-items-center rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition","aria-label":f?"Mute sound":"Unmute sound",title:f?"Sound on":"Sound off",children:s.jsx(Zj,{muted:!f})})]}),s.jsxs("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"text-sm",children:["Round ",s.jsx("b",{children:Math.min(c,Or)}),"/",s.jsx("b",{children:Or})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:$,className:"btn-ghost px-2 py-1 text-sm",children:"+"}),s.jsx("span",{className:"text-sm text-base-muted",children:"Player"}),s.jsx("button",{onClick:L,className:"btn-ghost px-2 py-1 text-sm",children:"−"})]}),s.jsxs("div",{className:"text-sm",children:["Pot: ",s.jsx("b",{className:"text-yellow-300",children:d})," 🪙"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full table-fixed text-sm tracking-tight tabular-nums",children:[s.jsxs("colgroup",{children:[s.jsx("col",{style:{width:"42%"}}),s.jsx("col",{style:{width:"9%"}}),s.jsx("col",{style:{width:"9%"}}),s.jsx("col",{style:{width:"9%"}}),s.jsx("col",{style:{width:"9%"}}),s.jsx("col",{style:{width:"9%"}}),s.jsx("col",{style:{width:"13%"}})]}),s.jsx("thead",{children:s.jsxs("tr",{className:"text-base-muted",children:[s.jsx("th",{className:"text-left font-medium py-1 pr-1",children:"Player"}),Array.from({length:Or}).map((Y,q)=>s.jsxs("th",{className:"font-medium text-center",children:["R",q+1]},q)),s.jsx("th",{className:"font-medium text-right pr-1",children:"Total"})]})}),s.jsx("tbody",{children:r.map((Y,q)=>{const ae=Y.scores.reduce((ee,re)=>ee+(re??0),0),J=q===o;return s.jsxs("tr",{className:J?"bg-white/6":"",children:[s.jsx("td",{className:"py-1 pr-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-block h-3 w-3 rounded-full shrink-0",style:{background:Y.color}}),s.jsx("input",{className:"bg-transparent outline-none font-semibold w-full",value:Y.name,onChange:ee=>i(re=>re.map((ie,G)=>G===q?{...ie,name:ee.target.value}:ie))})]})}),Y.scores.map((ee,re)=>s.jsx("td",{className:"text-center",children:ee===null?"–":ee},re)),s.jsx("td",{className:"text-right pr-1 font-semibold",children:ae})]},q)})})]})})]}),s.jsx("section",{className:"flex flex-col items-center",children:s.jsxs("div",{className:"relative w-[320px] h-[320px] md:w-[380px] md:h-[380px] rounded-full select-none",children:[k&&s.jsx("div",{className:"pointer-events-none absolute -inset-2 rounded-full",style:{boxShadow:`0 0 0 6px ${k}33, 0 0 30px 8px ${k}44`}}),s.jsx("div",{className:"absolute inset-0 rounded-full border border-white/10 shadow-2xl bg-black/20 overflow-hidden will-change-transform",style:{transform:`rotate(${C}deg)`,transition:_},"aria-label":"Category wheel",role:"group",children:s.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",className:"block",children:[zr.map((Y,q)=>{const ae=q*ys,J=ae+ys,ee=ys>180?1:0,re=Math.PI*ae/180,ie=Math.PI*J/180,G=50+50*Math.cos(re),O=50-50*Math.sin(re),le=50+50*Math.cos(ie),ue=50-50*Math.sin(ie),pe=D===q;return s.jsxs("g",{style:{opacity:D==null?.95:pe?1:.78,filter:D!=null&&!pe?"blur(0.6px)":"none"},children:[s.jsx("path",{d:`M50,50 L${G},${O} A50,50 0 ${ee} 0 ${le},${ue} Z`,fill:Y.color,stroke:pe?`${Y.color}AA`:"rgba(255,255,255,0.14)",strokeWidth:pe?"1.2":"0.6"}),s.jsx("text",{x:"50",y:"50",fill:"#ffffff",fontSize:"4",fontWeight:"700",dominantBaseline:"middle",transform:`rotate(${ae+ys/2} 50 50) translate(12 0)`,children:s.jsxs("tspan",{children:[Y.label,Y.soon?" (soon)":""]})})]},Y.slug)}),s.jsx("circle",{cx:"50",cy:"50",r:"9",fill:"rgba(0,0,0,0.55)",stroke:"white",strokeOpacity:"0.25"})]})}),s.jsx("button",{onClick:Q,disabled:S||B,className:["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","h-16 w-16 rounded-full grid place-items-center","bg-white text-black font-extrabold shadow-soft transition active:scale-[0.98]",S||B?"opacity-60 cursor-not-allowed":"hover:bg-gray-200"].join(" "),"aria-label":"Spin the wheel",children:"SPIN"}),s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-3 z-20",children:s.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 4 L20 20 L4 20 Z",fill:"#ffffff"})})}),D!=null&&!S&&s.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-10",children:s.jsxs("div",{className:"px-3 py-1 rounded-full bg-white/10 border border-white/20 text-sm backdrop-blur",children:[s.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full mr-2 align-middle",style:{background:zr[D].color}}),zr[D].label]})})]})}),s.jsx("section",{className:"mt-4",children:B?s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[s.jsx("div",{className:"text-xl font-semibold mb-2",children:"Match Over"}),s.jsxs("p",{className:"text-sm text-base-muted mb-3",children:["Top score takes the pot of ",s.jsx("b",{className:"text-yellow-300",children:d})," coins."]}),s.jsx("button",{className:"btn-primary w-full",onClick:oe,children:"End match"})]}):D!=null&&zr[D].soon?s.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[s.jsx("div",{className:"text-lg font-semibold mb-1",children:zr[D].label}),s.jsx("p",{className:"text-sm text-base-muted mb-3",children:"This category is arriving soon. Spin again!"}),s.jsx("button",{className:"btn-primary",onClick:Q,disabled:S,children:"Re-spin"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm text-center text-base-muted mb-1",children:["Turn: ",s.jsx("span",{style:{color:r[o].color},children:r[o].name})," ","| Round ",c,"/",Or]}),s.jsx(eN,{q:E,locked:S||!E,onPick:Z,result:X}),X&&s.jsx("div",{className:"mt-3 flex justify-center",children:s.jsx("button",{className:"btn-primary",onClick:H,children:"Next turn"})})]})})]}),s.jsx("div",{className:"pointer-events-none fixed inset-x-0 bottom-0 bg-[#0B0F1A]",style:{height:"calc(5.25rem + env(safe-area-inset-bottom))"},"aria-hidden":!0})]})}const nN=({onSelect:t})=>{const e=[{id:"random",emoji:"🎲",title:"Random Mix",color:"from-purple-500 to-pink-500"},{id:"trending",emoji:"📈",title:"Trending Now",color:"from-blue-500 to-cyan-500"},{id:"level",emoji:"📊",title:"Your Level",color:"from-green-500 to-teal-500"},{id:"daily",emoji:"🎯",title:"Daily Challenge",color:"from-orange-500 to-red-500"}];return s.jsxs("div",{className:"fixed inset-0 bg-gray-900 overflow-hidden flex flex-col justify-center items-center px-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-white mb-20",children:"Choose a swipe mode"}),s.jsx("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md h-[55vh]",children:e.map(n=>s.jsxs("button",{onClick:()=>t(n.id,n.title),className:`rounded-3xl bg-gradient-to-br ${n.color} p-6 flex flex-col items-center justify-center gap-3 transform hover:scale-105 transition-all shadow-xl`,children:[s.jsx("span",{className:"text-5xl",children:n.emoji}),s.jsx("span",{className:"text-white font-bold text-lg text-center",children:n.title})]},n.id))})]})},rN=()=>{Ge(),Ir();const[t,e]=h.useState([]),[n,r]=h.useState(0),[i,o]=h.useState({}),[a,c]=h.useState(0),[u,d]=h.useState(5),[f,g]=h.useState(0),[y,N]=h.useState(!0),[b,C]=h.useState(null),[P,_]=h.useState(!0),[j,S]=h.useState(null),[I,D]=h.useState(""),[M,k]=h.useState(!1),[m,x]=h.useState(""),[w,A]=h.useState(!1),[E,T]=h.useState(!1),[X,te]=h.useState(!1),[ne,K]=h.useState(!1),[U,F]=h.useState(!1),[B,$]=h.useState(!1),[L,z]=h.useState(0),[Q,Z]=h.useState(0),[H,oe]=h.useState(-1),[Y,q]=h.useState(-1),[ae,J]=h.useState({}),[ee,re]=h.useState({}),[ie,G]=h.useState(xe.getCoins()),O=h.useRef(null),[le,ue]=h.useState(null),[pe,we]=h.useState(!1),Re=h.useRef(null),Ae=h.useRef(null),[Tt]=Rt("/sounds/correct.mp3",{volume:.6}),[$e]=Rt("/sounds/wrong.mp3",{volume:.6}),[nt]=Rt("/sounds/coin.mp3",{volume:.75}),Me=["🐼","🐱","🐶","🦊","🐰","🐨","🐯","🦁","🐸","🐵"],_e=()=>{e([]),r(0),o({}),c(0),d(5),g(0),N(!0),C(null),k(!1),x(""),A(!1),T(!1),te(!1),K(!1),F(!1),$(!1),z(0),Z(0),oe(-1),q(-1),J({}),re({}),S(null),D(""),St(null),we(!1)};h.useEffect(()=>(_e(),_(!0),()=>{document.body.classList.remove("hide-bottom-nav"),_e(),Ae.current&&clearTimeout(Ae.current)}),[]),h.useEffect(()=>{const he=je=>{!P&&t.length>0&&(je.preventDefault(),T(!0))};return!P&&t.length>0&&window.history.pushState({inQuiz:!0},"",window.location.pathname),window.addEventListener("popstate",he),()=>window.removeEventListener("popstate",he)},[P,t.length]),h.useEffect(()=>{!P&&t.length>0?document.body.classList.add("hide-bottom-nav"):document.body.classList.remove("hide-bottom-nav")},[P,t.length]),h.useEffect(()=>{!P&&t.length>0&&K(!0)},[P,t.length]);const[qe,St]=h.useState(null);h.useEffect(()=>{const he=je=>{var Oe;if(ne&&!X){const De=je.target.closest('button[type="button"]'),We=(Oe=De==null?void 0:De.querySelector(".text-\\[10px\\]"))==null?void 0:Oe.textContent;We&&["Home","Play","Profile","Swipe"].includes(We)&&(je.preventDefault(),je.stopPropagation(),St({Home:"/",Play:"/play",Profile:"/profile",Swipe:"/swipe"}[We]),T(!0))}};return document.addEventListener("click",he,!0),()=>document.removeEventListener("click",he,!0)},[ne,X]),h.useEffect(()=>{const he=Re.current;if(!he)return;let je=!1,Oe=0,De=null;const We=et=>{!P&&t.length>0&&et.preventDefault()},Le=et=>{Oe=et.touches[0].clientY,je=!1},Ze=et=>{!P&&t.length>0&&!E&&!w&&et.preventDefault()},He=et=>{if(je||E||w)return;const Ne=et.changedTouches[0].clientY,ve=Oe-Ne;if(Math.abs(ve)>30){if(je=!0,De&&clearTimeout(De),ve>0&&n<t.length-1){const ke=n+1;r(ke),he.scrollTo({top:ke*window.innerHeight,behavior:"smooth"})}else if(ve<0&&n>0){const ke=n-1;r(ke),he.scrollTo({top:ke*window.innerHeight,behavior:"smooth"})}De=setTimeout(()=>{je=!1},800)}};return he.addEventListener("touchstart",Le,{passive:!1}),he.addEventListener("touchmove",Ze,{passive:!1}),he.addEventListener("touchend",He,{passive:!1}),he.addEventListener("wheel",We,{passive:!1}),()=>{he.removeEventListener("touchstart",Le),he.removeEventListener("touchmove",Ze),he.removeEventListener("touchend",He),he.removeEventListener("wheel",We),De&&clearTimeout(De)}},[n,t.length,P]),h.useEffect(()=>{const he=Re.current;he&&(E||w?(he.style.overflow="hidden",he.style.touchAction="none"):(he.style.overflow="auto",he.style.touchAction="auto"))},[E,w]),h.useEffect(()=>{(E||w)&&Ae.current&&(clearTimeout(Ae.current),Ae.current=null)},[E,w]);const Ye=async he=>{try{const Oe=await(await fetch("/data/quiz_questions_bank.csv")).text(),{data:De}=Us.parse(Oe,{header:!0,skipEmptyLines:!0}),Ze=De.map((He,et)=>{var ke,ot;const Ne=[He.option1,He.option2,He.option3,He.option4].filter(Boolean),ve={A:0,B:1,C:2,D:3};return{id:He.id||`q_${et}`,prompt:He.question,options:Ne,answerIndex:ve[(ke=He.answer)==null?void 0:ke.toUpperCase()]||0,category:He.category||"General Knowledge",difficulty:((ot=He.difficulty)==null?void 0:ot.toLowerCase())||"medium",explanation:He.explanation||"",stats:{views:Math.floor(Math.random()*1e4)+1e3,attempted:Math.floor(Math.random()*5e3)+500,correctRate:Math.floor(Math.random()*40)+30}}}).filter(He=>He.prompt&&He.options.length===4).sort(()=>Math.random()-.5).slice(0,50).map(He=>({...He,mascot:Me[Math.floor(Math.random()*Me.length)]}));e(Ze),N(!1)}catch(je){console.error("Failed to load questions:",je),N(!1)}},rt=he=>he===1||he===3||he===7||he===10||he===15||he===20||he>20&&he%5===0,dt=(he,je)=>{if(i[he]!==void 0)return;const Oe=t.find(Le=>Le.id===he),De=je===Oe.answerIndex,We=t.findIndex(Le=>Le.id===he);if(o(Le=>({...Le,[he]:je})),z(Le=>Le+1),Z(Le=>Le+1),De){Tt(),c(Ze=>Ze+1),g(Ze=>Ze+2),xe.addCoins(2,"Swipe Quiz Correct Answer");const Le=xe.getCoins();if(G(Le),$(!0),setTimeout(()=>{nt(),console.log("Coin pill ref:",O.current),O.current?ue({startRect:{left:window.innerWidth/2-50,top:window.innerHeight/2,width:100,height:100},count:2,amount:2}):console.log("Coin pill ref not available")},300),setTimeout(()=>$(!1),2e3),Dt(),rt(We+1)){const Ze=["Awesome!","Perfect!","Brilliant!","Outstanding!","Incredible!"];x(Ze[Math.floor(Math.random()*Ze.length)]),k(!0),setTimeout(()=>k(!1),2e3)}}else if($e(),c(0),F(!0),setTimeout(()=>F(!1),1500),d(Le=>{const Ze=Math.max(0,Le-1);return Ze===0&&setTimeout(()=>A(!0),500),Ze}),u>1&&rt(We+1)){const Le=["Keep trying!","You got this!","Don't give up!","Stay strong!","Keep going!"];x(Le[Math.floor(Math.random()*Le.length)]),k(!0),setTimeout(()=>k(!1),2e3)}(u>1||De)&&(Ae.current=setTimeout(()=>{Je()},2500))},Dt=()=>{const he=document.createElement("div");he.style.position="fixed",he.style.inset="0",he.style.pointerEvents="none",he.style.zIndex="1000",document.body.appendChild(he);const je=["🎉","✨","⭐","🎊","🌟"];for(let Oe=0;Oe<20;Oe++){const De=document.createElement("div");De.textContent=je[Math.floor(Math.random()*je.length)],De.style.position="fixed",De.style.left=`${Math.random()*100}%`,De.style.top="-50px",De.style.fontSize="24px",De.style.animation=`fall ${2+Math.random()*2}s ease-out`,he.appendChild(De)}setTimeout(()=>he.remove(),4e3)},Je=()=>{if(!(E||w)&&n<t.length-1){const he=n+1,je=document.getElementById(`question-${he}`);je==null||je.scrollIntoView({behavior:"smooth"}),r(he)}},ht=he=>{const je=t.findIndex(Le=>Le.id===he);if(H>=0&&L<5){C(`After ${5-L} attempts`),setTimeout(()=>C(null),2e3);return}const Oe=t[je],We=[0,1,2,3].filter(Le=>Le!==Oe.answerIndex).sort(()=>Math.random()-.5).slice(0,2);J({...ae,[he]:We}),oe(je),z(0)},xt=he=>{const je=t.findIndex(et=>et.id===he);if(Y>=0&&Q<5){C(`After ${5-Q} attempts`),setTimeout(()=>C(null),2e3);return}const De=t[je].answerIndex,We=[0,0,0,0],Le=40+Math.floor(Math.random()*31);We[De]=Le;let Ze=100-Le;const He=[0,1,2,3].filter(et=>et!==De);for(let et=0;et<He.length-1;et++){const Ne=Math.floor(Math.random()*(Ze/2));We[He[et]]=Ne,Ze-=Ne}We[He[He.length-1]]=Ze,re({...ee,[he]:We}),q(je),Z(0)},Xt=(he,je)=>{_e(),S(he),D(je),_(!1),Ye()},un=()=>{St("/swipe"),T(!0)},Nn=()=>{te(!0),T(!1),document.body.classList.remove("hide-bottom-nav")},Rr=()=>{const he=Object.keys(i).filter(je=>{const Oe=t.find(De=>De.id===je);return i[je]===(Oe==null?void 0:Oe.answerIndex)}).length;return h.useEffect(()=>{const je=xe.getCoins();G(je)},[]),h.useEffect(()=>{document.body.classList.add("hide-bottom-nav"),f>0&&O.current&&!pe&&(we(!0),setTimeout(()=>{ue({startRect:{left:window.innerWidth/2-50,top:window.innerHeight/2,width:100,height:100},count:Math.min(f,10),amount:f}),nt()},100));const je=setTimeout(()=>{const Oe=xe.getCoins();G(Oe),_e(),K(!1),te(!1),_(!0),document.body.classList.remove("hide-bottom-nav")},2e3);return()=>{clearTimeout(je),document.body.classList.remove("hide-bottom-nav")}},[f,pe]),s.jsxs("div",{className:"fixed inset-0 bg-gray-900 z-50",children:[le&&s.jsx(as,{startRect:le.startRect,targetRef:O,count:le.count,onDone:()=>{ue(null)}}),s.jsx("div",{className:"fixed top-12 right-4 z-50",children:s.jsxs("div",{ref:O,className:"flex items-center gap-1 bg-yellow-500/20 px-3 py-1.5 rounded-full backdrop-blur",children:[s.jsx("span",{children:"🪙"}),s.jsx("span",{className:"font-bold text-yellow-400",children:ie})]})}),s.jsx("div",{className:"flex items-center justify-center p-4 h-full",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-8 max-w-md w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-5xl mb-4",children:"🎉"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Session Complete!"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-4",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Questions Answered"}),s.jsx("div",{className:"text-2xl font-bold text-white",children:Object.keys(i).length})]}),s.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-4",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Correct Answers"}),s.jsx("div",{className:"text-2xl font-bold text-green-400",children:he})]}),s.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-4",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Coins Earned"}),s.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["🪙 ",f]})]}),s.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-4",children:[s.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Lives Remaining"}),s.jsx("div",{className:"text-2xl font-bold text-red-400",children:Array.from({length:5},(je,Oe)=>s.jsx("span",{className:Oe<u?"":"opacity-30",children:"❤️"},Oe))})]})]})]})})]})};return X?s.jsx(Rr,{}):P?s.jsx(nN,{onSelect:Xt}):y?s.jsx("div",{className:"h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white",children:"Loading questions..."})}):s.jsxs("div",{className:"h-screen bg-gray-900 relative",children:[le&&s.jsx(as,{startRect:le.startRect,targetRef:O,count:le.count,onDone:()=>{const he=xe.getCoins();G(he),ue(null)}}),s.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-gray-900/95 backdrop-blur z-50 border-b border-gray-800 pt-12",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsx("button",{onClick:un,className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-md border border-white/15 rounded-xl text-white text-sm font-medium hover:bg-white/15 transition-all",children:"← Back"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{ref:O,className:"flex items-center gap-1 bg-yellow-500/20 px-3 py-1 rounded-full",children:[s.jsx("span",{children:"🪙"}),s.jsx("span",{className:"font-bold text-yellow-400",children:ie})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-orange-500/20 px-3 py-1 rounded-full",children:[s.jsx("span",{children:"🔥"}),s.jsx("span",{className:"font-bold text-orange-400",children:a})]})]}),s.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(he,je)=>s.jsx("span",{className:`${je<u?"text-red-500":"text-gray-600 opacity-30"} ${U&&je===u-1?"animate-heartLoss":""}`,children:"❤️"},je))})]}),I&&s.jsx("div",{className:"text-center py-1",children:s.jsx("span",{className:"text-xs text-gray-400",children:I})})]}),B&&s.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[100] pointer-events-none",children:s.jsx("div",{className:"bg-yellow-500 text-white px-6 py-3 rounded-full font-bold text-2xl animate-coinFloat",children:"+2 🪙"})}),s.jsx("div",{ref:Re,className:"h-full overflow-y-hidden snap-y snap-mandatory pt-32",style:{scrollBehavior:"smooth",overscrollBehavior:"none",WebkitOverflowScrolling:"touch",touchAction:"none"},children:t.map((he,je)=>s.jsx(sN,{question:he,index:je,answered:i[he.id],onAnswer:Oe=>dt(he.id,Oe),onFiftyFifty:()=>ht(he.id),onAudience:()=>xt(he.id),eliminated:ae[he.id]||[],audiencePercentages:ee[he.id],canUseFiftyFifty:H<0||L>=5,canUseAudience:Y<0||Q>=5},he.id))}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 max-w-sm w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-5xl mb-4",children:"😔"}),s.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"No Lives Left!"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Sorry, you have no lives left to continue swiping."}),s.jsx("button",{onClick:()=>{te(!0),document.body.classList.remove("hide-bottom-nav")},className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 py-3 rounded-xl text-white font-medium",children:"View Results"})]})}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 max-w-sm w-full text-center border border-gray-700",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🤔"}),s.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Leave Swipe Mode?"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Your progress will be saved"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>T(!1),className:"flex-1 bg-blue-600 hover:bg-blue-700 py-3 rounded-xl font-medium text-white",children:"Stay"}),s.jsx("button",{onClick:Nn,className:"flex-1 bg-gray-700 hover:bg-gray-600 py-3 rounded-xl font-medium text-white",children:"Leave"})]})]})}),M&&s.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:s.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 px-8 py-6 rounded-3xl text-white font-bold text-2xl shadow-2xl animate-fadeIn",children:m})}),b&&s.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:s.jsx("div",{className:"bg-gray-800/90 px-6 py-3 rounded-full text-white font-bold animate-fadeIn",children:b})}),s.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fall {
          to { 
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
          }
        }
        
        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
        
        @keyframes heartLoss {
          0% { transform: scale(1); opacity: 1; }
          50% { transform: scale(1.5) rotate(-15deg); opacity: 0.8; }
          100% { transform: scale(0) rotate(-45deg); opacity: 0; }
        }
        
        @keyframes coinFloat {
          0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
          50% { transform: translate(-50%, -70%) scale(1.2); opacity: 1; }
          100% { transform: translate(-50%, -100%) scale(0.8); opacity: 0; }
        }
        
        .animate-heartLoss {
          animation: heartLoss 1.5s ease-out;
        }
        
        .animate-coinFloat {
          animation: coinFloat 2s ease-out;
        }
      `})]})},sN=({question:t,index:e,answered:n,onAnswer:r,onFiftyFifty:i,onAudience:o,eliminated:a,audiencePercentages:c,canUseFiftyFifty:u,canUseAudience:d})=>{const f=g=>{switch(g){case"easy":return"from-green-500 to-green-600";case"hard":return"from-red-500 to-red-600";default:return"from-yellow-500 to-yellow-600"}};return s.jsxs("div",{id:`question-${e}`,className:"h-screen snap-start flex flex-col px-4 pb-4",style:{paddingTop:"150px"},children:[s.jsx("div",{className:"flex justify-center py-2",children:s.jsx("span",{className:"text-8xl",style:{animation:"float 3s ease-in-out infinite"},children:t.mascot})}),s.jsxs("div",{className:"flex-1 flex flex-col justify-start max-w-md mx-auto w-full",children:[s.jsxs("div",{className:`bg-gradient-to-br ${f(t.difficulty)} p-6 rounded-3xl mb-4`,children:[s.jsxs("div",{className:"text-white/80 text-sm mb-2",children:["Question ",e+1]}),s.jsx("h2",{className:"text-2xl font-bold text-white",children:t.prompt})]}),s.jsx("div",{className:"space-y-3 mb-3",children:t.options.map((g,y)=>{const N=n!==void 0,b=n===y,C=y===t.answerIndex,P=a.includes(y);let _="w-full p-4 rounded-2xl font-medium transition-all ";return P?_+="bg-gray-700/30 text-gray-500/50 cursor-not-allowed":N?C?_+="bg-green-500 text-white":b?_+="bg-red-500 text-white":_+="bg-gray-700 text-gray-400":_+="bg-gray-800 text-white hover:bg-gray-700",s.jsx("button",{onClick:()=>!N&&!P&&r(y),disabled:N||P,className:_,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-lg",children:["🅰️","🅱️","🅲️","🅳️"][y]}),s.jsx("span",{className:"flex-1 text-left",children:g}),c&&c[y]>0&&s.jsxs("span",{className:"bg-purple-600/20 px-2 py-1 rounded-full text-xs",children:[c[y],"%"]}),N&&C&&s.jsx("span",{children:"✓"})]})},y)})}),!n&&s.jsxs("div",{className:"flex justify-center gap-3 mb-3",children:[s.jsx("button",{onClick:i,disabled:!u,className:`px-4 py-2 rounded-lg font-medium text-sm ${u?"bg-orange-600 text-white":"bg-gray-700 text-gray-500"}`,children:"⚡ 50:50"}),s.jsx("button",{onClick:o,disabled:!d,className:`px-4 py-2 rounded-lg font-medium text-sm ${d?"bg-purple-600 text-white":"bg-gray-700 text-gray-500"}`,children:"👥 Audience"})]}),s.jsx("div",{className:"text-center mt-3 mb-2",children:s.jsxs("div",{className:"text-gray-500 text-xs",children:[t.stats.views.toLocaleString()," views • ",t.stats.attempted.toLocaleString()," attempted • ",t.stats.correctRate,"% correct"]})}),s.jsx("div",{className:"text-center mt-12 mb-4",children:s.jsx("div",{className:"text-gray-500 text-sm animate-bounce",children:"Swipe up for next"})})]})]})};function iN(){const[t]=Ry(),e=Ge();return Ct(),h.useEffect(()=>{const n=t.get("category"),r=t.get("difficulty"),i=t.get("from")==="quest",o=["general-knowledge","fun-facts","science","history","geography","computer","artificial-intelligence","sports","mixed"],a=["easy","medium","hard"],c=n==="random"?o[Math.floor(Math.random()*o.length)]:n||"mixed",u=r==="random"?a[Math.floor(Math.random()*a.length)]:r||"medium";console.log("QuizPlay - fromQuest:",i),console.log("QuizPlay - returnPath will be:",i?"/quests":"/"),e(`/quiz/${c}`,{replace:!0,state:{mode:"quiz",difficulty:u,count:5,timer:{type:"per_q",seconds:45},fromQuest:i,returnPath:i?"/profile/quests":"/"}})},[t,e]),s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontSize:"20px"},children:"Starting your quiz..."})}function oN(){const[t]=Ry(),e=Ge();return h.useEffect(()=>{const n=t.get("questions")||"15",r=t.get("difficulty")||"easy",i=t.get("category")||"mixed",o=t.get("from")==="quest",a=["general-knowledge","fun-facts","science","history","geography","computer","artificial-intelligence","sports"],c=i==="random"?a[Math.floor(Math.random()*a.length)]:i;console.log("PracticeStart - Launching practice mode:",{category:c,difficulty:r,questions:n,fromQuest:o}),e(`/quiz/${c}`,{replace:!0,state:{mode:"practice",difficulty:r,count:parseInt(n),timer:{type:"off",seconds:0},fromQuest:o,questType:o?"practiceQuestions":null,returnPath:o?"/profile/quests":"/"}})},[t,e]),s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",fontSize:"20px"},children:"Loading practice questions..."})}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Jp=t=>{const e=lN(t);return e.charAt(0).toUpperCase()+e.slice(1)},Vy=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),cN=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=h.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...c},u)=>h.createElement("svg",{ref:u,...uN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Vy("lucide",i),...!o&&!cN(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,f])=>h.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=(t,e)=>{const n=h.forwardRef(({className:r,...i},o)=>h.createElement(dN,{ref:o,iconNode:e,className:Vy(`lucide-${aN(Jp(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Jp(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fN=Vi("chevron-left",hN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],pN=Vi("gift",mN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xN=Vi("lock",gN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vN=Vi("shield",yN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Zp=Vi("sparkles",bN);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],jN=Vi("timer",wN);function NN({show:t,onClose:e,coins:n,onNavigateToPlay:r}){return t?s.jsxs("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:i=>{i.target===i.currentTarget&&e()},children:[s.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 w-full max-w-md border border-gray-700 relative overflow-hidden",onClick:i=>i.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"h-full bg-gradient-to-br from-yellow-400 to-orange-500"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-5xl",style:{animation:"coinRotate 2s linear infinite"},children:"🪙"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"Your Treasure"}),s.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[n," Coins"]})]})]}),s.jsx("button",{onClick:e,className:"w-8 h-8 rounded-lg bg-white/5 border border-gray-600 grid place-items-center hover:bg-white/10 transition",children:"✕"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Ways to Earn"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),"Complete Quizzes"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"+5 coins per correct answer"})]}),s.jsx("div",{className:"text-green-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border border-blue-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎯"}),"Daily Challenge"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Complete daily for bonus"})]}),s.jsx("div",{className:"text-blue-400 font-bold",children:"+5"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🎰"}),"Spin & Play"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Test your luck!"})]}),s.jsx("div",{className:"text-purple-400 font-bold",children:"+50"})]})}),s.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-orange-500/10 to-red-500/10 border border-orange-500/20 hover:scale-[1.02] transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🏆"}),"Achievements"]}),s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Unlock special rewards"})]}),s.jsx("div",{className:"text-orange-400 font-bold",children:"+???"})]})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-2",children:[s.jsx("span",{children:"Next reward"}),s.jsxs("span",{children:[100-n%100," coins to go"]})]}),s.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full transition-all",style:{width:`${n%100}%`}})})]}),s.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold hover:scale-[1.02] transition-transform shadow-lg",children:"Start Earning Now! 🚀"})]})]}),s.jsx("style",{children:`
        @keyframes coinRotate {
          from { transform: rotateY(0deg); }
          to { transform: rotateY(360deg); }
        }
      `})]}):null}function SN(){const t=Ge();h.useEffect(()=>(document.body.classList.add("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[]);const[e]=Rt("/sounds/correct.mp3",{volume:.6}),[n]=Rt("/sounds/coin.mp3",{volume:.7}),[r]=Rt("/sounds/click.mp3",{volume:.5}),[i]=Rt("/sounds/wrong.mp3",{volume:.5}),o=h.useRef(null),a=h.useRef({}),[c,u]=h.useState(!1),[d,f]=h.useState(xe.getCoins()),[g,y]=h.useState(null),[N,b]=h.useState([{id:"bronze",name:"Bronze",opened:!1,reward:null,minCoins:5,maxCoins:15,color:"from-amber-600 to-amber-700",glow:"shadow-amber-500/30",miniGame:"tap",tapsRequired:3,tapsCount:0},{id:"silver",name:"Silver",opened:!1,reward:null,minCoins:20,maxCoins:40,color:"from-gray-400 to-gray-500",glow:"shadow-gray-400/30",miniGame:"swipe",swipePattern:null,swipeComplete:!1},{id:"gold",name:"Gold",opened:!1,reward:null,minCoins:50,maxCoins:100,color:"from-yellow-400 to-yellow-500",glow:"shadow-yellow-400/30",xpChance:.7,miniGame:"hold",holdDuration:2,holdProgress:0,isHolding:!1}]),[C,P]=h.useState(!1),[_,j]=h.useState(0),[S,I]=h.useState(null),[D,M]=h.useState(""),[k,m]=h.useState(null),[x,w]=h.useState(null),[A,E]=h.useState(null);h.useEffect(()=>{T();const L=setInterval(X,1e3);return()=>clearInterval(L)},[]);const T=()=>{const L=[{id:"bronze",name:"Bronze",opened:!1,reward:null,minCoins:5,maxCoins:15,color:"from-amber-600 to-amber-700",glow:"shadow-amber-500/30",miniGame:"tap",tapsRequired:3,tapsCount:0},{id:"silver",name:"Silver",opened:!1,reward:null,minCoins:20,maxCoins:40,color:"from-gray-400 to-gray-500",glow:"shadow-gray-400/30",miniGame:"tap",tapsRequired:3,tapsCount:0},{id:"gold",name:"Gold",opened:!1,reward:null,minCoins:50,maxCoins:100,color:"from-yellow-400 to-yellow-500",glow:"shadow-yellow-400/30",xpChance:.7,miniGame:"tap",tapsRequired:3,tapsCount:0}];b(L),j(0);const z=new Date().toDateString();I(z),xe.safeSet("surprise_zone_data",{date:z,boxes:L,totalEarned:0})},X=()=>{const L=new Date,z=new Date(L);z.setDate(z.getDate()+1),z.setHours(0,0,0,0);const Q=z-L,Z=Math.floor(Q/(1e3*60*60)),H=Math.floor(Q%(1e3*60*60)/(1e3*60)),oe=Math.floor(Q%(1e3*60)/1e3);M(`${Z.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`)};h.useEffect(()=>{const L=setInterval(()=>{const z=xe.getCoins();z!==d&&f(z)},100);return()=>clearInterval(L)},[d]);const te=(L,z)=>{if(C)return;const Q=N.findIndex(H=>H.id===L),Z=N[Q];Z.opened||(w(L),Z.miniGame==="tap"&&z==="tap"?ne(Q):Z.miniGame==="swipe"&&z==="swipe"?K(Q):Z.miniGame==="hold"&&(z==="holdStart"?U(Q):z==="holdEnd"&&F(Q)))},ne=L=>{const z=N[L],Q=z.tapsCount+1;r();const Z=[...N];Z[L]={...z,tapsCount:Q},b(Z),Q>=z.tapsRequired&&setTimeout(()=>B(z.id),300)},K=L=>{const z=N[L];r();const Q=[...N];Q[L]={...z,swipeComplete:!0},b(Q),setTimeout(()=>B(z.id),300)},U=L=>{const z=N[L],Q=[...N];Q[L]={...z,isHolding:!0,holdProgress:0},b(Q);let Z=0;const H=setInterval(()=>{Z+=.05;const oe=[...N],Y=oe[L];Z>=z.holdDuration?(clearInterval(H),oe[L]={...Y,holdProgress:z.holdDuration,isHolding:!1},b(oe),B(z.id)):Y.isHolding?(oe[L]={...Y,holdProgress:Z},b(oe)):clearInterval(H)},50);E(H)},F=L=>{A&&(clearInterval(A),E(null));const z=N[L];if(z.holdProgress<z.holdDuration){i();const Q=[...N];Q[L]={...z,isHolding:!1,holdProgress:0},b(Q)}},B=async L=>{if(C)return;const z=N.findIndex(q=>q.id===L),Q=N[z];if(Q.opened)return;P(!0);const Z=Math.floor(Math.random()*(Q.maxCoins-Q.minCoins+1))+Q.minCoins,oe=Q.xpChance&&Math.random()<Q.xpChance?Math.floor(Math.random()*50)+25:0;if(m({boxId:L,coins:Z,xpBonus:oe}),e(),await new Promise(q=>setTimeout(q,600)),a.current[L]&&o.current){const q=a.current[L].getBoundingClientRect();n(),y({startRect:q,count:Math.min(Z,15),amount:Z,xpBonus:oe})}const Y=[...N];Y[z]={...Q,opened:!0,reward:{coins:Z,xpBonus:oe}},b(Y),j(q=>q+Z),xe.safeSet("surprise_zone_data",{date:S,boxes:Y,totalEarned:_+Z}),setTimeout(()=>{m(null),w(null)},2e3),P(!1)},$=N.every(L=>L.opened);return s.jsxs("div",{className:"min-h-screen bg-black text-white",children:[s.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-gray-900/50 to-black pointer-events-none"}),g&&s.jsx(as,{startRect:g.startRect,targetRef:o,count:g.count,onDone:()=>{xe.addCoins(g.amount,"Lucky Box"),g.xpBonus>0&&xe.addXP(g.xpBonus),f(xe.getCoins()),y(null)}}),k&&s.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none flex items-center justify-center",children:s.jsx("div",{className:"animate-bounce",children:s.jsx("div",{className:"bg-black/90 backdrop-blur-xl rounded-3xl p-6 border border-white/20",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Zp,{className:"w-12 h-12 text-yellow-400 mx-auto mb-3"}),s.jsxs("p",{className:"text-3xl font-bold text-yellow-400",children:["+",k.coins]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"coins"}),k.xpBonus>0&&s.jsxs("p",{className:"text-lg text-blue-400 mt-2",children:["+",k.xpBonus," XP"]})]})})})}),s.jsxs("div",{className:"relative z-10 px-6 pt-14 pb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:()=>t("/"),className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur-xl flex items-center justify-center hover:bg-white/20 transition-all active:scale-95",children:s.jsx(fN,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Daily Surprise"}),s.jsx("h1",{className:"text-2xl font-semibold",children:"Lucky Boxes"})]}),s.jsxs("button",{ref:o,onClick:()=>u(!0),className:"px-3 py-1.5 rounded-full bg-yellow-500/20 backdrop-blur-xl flex items-center gap-2 hover:bg-yellow-500/30 transition-all border border-yellow-500/30",children:[s.jsx("span",{className:"text-lg",children:"🪙"}),s.jsx("span",{className:"font-bold text-yellow-400",children:d})]})]}),s.jsx("div",{className:"mx-auto max-w-sm mb-8",children:s.jsx("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-4 border border-white/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jN,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Next reset in"}),s.jsx("p",{className:"text-lg font-mono font-semibold",children:D||"00:00:00"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-400",children:"Earned today"}),s.jsxs("p",{className:"text-lg font-semibold text-yellow-400",children:[_," coins"]})]})]})})}),!$&&s.jsx("div",{className:"text-center mb-6",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Complete mini-games to unlock rewards!"})})]}),s.jsxs("div",{className:"relative z-10 px-6 pb-8",children:[s.jsx("div",{className:"max-w-sm mx-auto space-y-6",children:N.map((L,z)=>{var Q,Z;return s.jsx("div",{ref:H=>a.current[L.id]=H,className:"relative",style:{animation:`fadeInUp 0.5s ease-out ${z*100}ms both`},children:s.jsxs("button",{onClick:()=>te(L.id,"tap"),onMouseDown:()=>L.miniGame==="hold"&&te(L.id,"holdStart"),onMouseUp:()=>L.miniGame==="hold"&&te(L.id,"holdEnd"),onMouseLeave:()=>L.miniGame==="hold"&&te(L.id,"holdEnd"),onTouchStart:()=>L.miniGame==="hold"&&te(L.id,"holdStart"),onTouchEnd:()=>L.miniGame==="hold"&&te(L.id,"holdEnd"),disabled:L.opened||C,className:`
                  w-full relative overflow-hidden rounded-3xl p-8
                  transition-all duration-500 transform
                  ${L.opened?"bg-white/5 scale-95 opacity-60":`bg-gradient-to-br ${L.color} hover:scale-[1.02] active:scale-[0.98] shadow-2xl ${L.glow}`}
                  ${C&&!L.opened?"animate-pulse":""}
                  ${!L.opened&&L.id==="bronze"&&L.tapsCount===0?"animate-pulse ring-2 ring-yellow-400/50":""}
                  disabled:cursor-not-allowed
                `,children:[!L.opened&&x===L.id&&s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[L.miniGame==="tap"&&s.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:[...Array(L.tapsRequired)].map((H,oe)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${oe<L.tapsCount?"bg-white":"bg-white/30"}`},oe))}),L.miniGame==="hold"&&L.isHolding&&s.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-white/20",children:s.jsx("div",{className:"h-full bg-white transition-all",style:{width:`${L.holdProgress/L.holdDuration*100}%`}})})]}),!L.opened&&s.jsx("div",{className:"absolute inset-0 opacity-10",children:s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`radial-gradient(circle at 20% 50%, white 1px, transparent 1px),
                                       radial-gradient(circle at 80% 80%, white 1px, transparent 1px),
                                       radial-gradient(circle at 40% 80%, white 1px, transparent 1px)`,backgroundSize:"50px 50px"}})}),s.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:`text-sm font-medium ${L.opened?"text-gray-400":"text-white/80"}`,children:[L.name," Box"]}),s.jsx("p",{className:`text-2xl font-bold mt-1 ${L.opened?"text-gray-300":"text-white"}`,children:L.opened?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-yellow-400",children:["+",(Q=L.reward)==null?void 0:Q.coins]}),s.jsx("span",{className:"text-sm",children:"coins"}),((Z=L.reward)==null?void 0:Z.xpBonus)>0&&s.jsxs("span",{className:"text-sm text-blue-400 ml-2",children:["+",L.reward.xpBonus," XP"]})]}):s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("span",{children:[L.minCoins,"-",L.maxCoins]}),s.jsx("span",{className:"text-sm",children:"coins"})]})}),!L.opened&&s.jsxs("p",{className:"text-xs text-white/50 mt-1",children:[L.miniGame==="tap"&&`Tap ${L.tapsRequired} times`,L.miniGame==="hold"&&`Hold for ${L.holdDuration} seconds`]})]}),s.jsx("div",{className:`
                    w-16 h-16 rounded-2xl flex items-center justify-center
                    ${L.opened?"bg-white/10":"bg-white/20 backdrop-blur-xl"}
                    transition-all duration-300
                  `,children:L.opened?s.jsx(Zp,{className:"w-8 h-8 text-yellow-400"}):x===L.id?s.jsx(vN,{className:"w-8 h-8 text-white animate-pulse"}):s.jsx(pN,{className:`w-8 h-8 text-white ${C?"":"animate-pulse"}`})})]})]})},L.id)})}),$&&s.jsxs("div",{className:"mt-12 text-center space-y-4",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 rounded-full bg-white/5 backdrop-blur-xl border border-white/10",children:[s.jsx(xN,{className:"w-4 h-4 text-gray-400"}),s.jsx("p",{className:"text-sm text-gray-400",children:"All boxes opened! Come back tomorrow"})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:["🎉 ",_," coins earned!"]})})]})]}),s.jsx(NN,{show:c,onClose:()=>u(!1),coins:d,onNavigateToPlay:()=>{u(!1),t("/play")}}),s.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function kN(){var N;const t=Ge(),[e,n]=h.useState(""),[r,i]=h.useState(null),{player:o,levelProgress:a}=Ir(),u=(()=>{const b=JSON.parse(localStorage.getItem("currentUser")||"{}");return((b.phone?JSON.parse(localStorage.getItem(`user_profile_${b.phone}`)||"{}"):{}).name||b.username||(o==null?void 0:o.name)||"Player").split(" ")[0]})(),d=()=>{if((r==null?void 0:r.todayCoins)!==void 0)return r.todayCoins;try{const b=JSON.parse(localStorage.getItem("qp_stats")||'{"sessions":[]}'),C=new Date().setHours(0,0,0,0);return b.sessions.filter(_=>new Date(_.timestamp).setHours(0,0,0,0)===C).reduce((_,j)=>_+(j.earnedCoins||0),0)}catch{return 0}},f={name:u,rank:(r==null?void 0:r.rank)||23,streak:(r==null?void 0:r.streak)||(o==null?void 0:o.currentStreak)||0,todayQuizzes:((N=r==null?void 0:r.daily)==null?void 0:N.quizzesPlayed)||3,todayCoins:d()};h.useEffect(()=>{const b=new Date().getHours();b<12?n("Good morning"):b<17?n("Good afternoon"):n("Good evening")},[]),h.useEffect(()=>{const b=()=>{const C=Ot.getCurrentUser();if(C!=null&&C.phone){xe.initializeUserData(C.phone);const P=xe.getTodaySummary(C.phone);i(P)}};return b(),window.addEventListener("focus",b),()=>window.removeEventListener("focus",b)},[]);const g=`
    rounded-3xl p-5 text-left text-white 
    transition-all duration-300 ease-out
    active:scale-[0.97] hover:scale-[1.02]
    shadow-[0_8px_32px_rgba(0,0,0,0.3)]
    hover:shadow-[0_12px_48px_rgba(0,0,0,0.4)]
    relative overflow-hidden
    before:absolute before:inset-0 before:bg-white/5 before:opacity-0 
    hover:before:opacity-100 before:transition-opacity before:duration-300
  `,y=r!=null&&r.xpProgress?r.xpProgress/(r.xpNeeded||100)*100:a.required>0?a.current/a.required*100:0;return s.jsxs("div",{className:"min-h-full bg-[#0B0C10] text-white pt-10 px-3",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{children:s.jsxs("h1",{className:"text-2xl font-bold px-3",children:[e,", ",u," 👋"]})}),s.jsx("button",{onClick:()=>t("/profile/settings"),className:"w-10 h-10 rounded-2xl bg-white/10 border border-white/20 grid place-items-center hover:bg-white/20 transition",children:s.jsx("span",{className:"text-xl",children:"⚙️"})})]}),s.jsxs("div",{className:"rounded-3xl bg-gradient-to-r from-slate-800/50 to-slate-900/50 border border-white/10 p-4 backdrop-blur-sm",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 grid place-items-center text-2xl font-bold",children:u[0].toUpperCase()}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-lg font-semibold",children:u}),s.jsxs("div",{className:"text-white/60 text-sm",children:["Level ",(r==null?void 0:r.level)||o.level||1]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-yellow-400 font-bold text-lg",children:[(r==null?void 0:r.totalCoins)||o.coins||0," 🪙"]}),s.jsxs("div",{className:"text-white/60 text-sm",children:["Rank #",f.rank]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs text-white/60 mb-1",children:[s.jsx("span",{children:"XP Progress"}),s.jsxs("span",{children:[(r==null?void 0:r.xpProgress)||a.current,"/",(r==null?void 0:r.xpNeeded)||a.required]})]}),s.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-purple-500 rounded-full transition-all duration-1000 ease-out",style:{width:`${y}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-2 rounded-xl bg-white/5",children:[s.jsxs("div",{className:"text-orange-400 font-bold text-lg",children:["🔥 ",f.streak]}),s.jsx("div",{className:"text-white/60 text-xs",children:"Day Streak"})]}),s.jsxs("div",{className:"text-center p-2 rounded-xl bg-white/5",children:[s.jsxs("div",{className:"text-green-400 font-bold text-lg",children:["+",f.todayCoins]}),s.jsx("div",{className:"text-white/60 text-xs",children:"Today"})]})]})]})]}),s.jsxs("button",{onClick:()=>t("/profile/leaderboard"),className:`${g} w-full mb-4 bg-gradient-to-br from-[#5AA9FF] via-[#6C63FF] to-[#9C6BFF]`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-8 translate-x-8 animate-pulse"}),s.jsxs("div",{className:"relative flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs opacity-90 mb-1",children:"🏆 Rank & Coins"}),s.jsx("div",{className:"text-3xl font-extrabold tracking-tight mb-2",children:"LEADERBOARD"}),s.jsxs("div",{className:"text-xs opacity-75 flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Weekly reset · Ends in 2d 14h"]})]}),s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm grid place-items-center text-2xl border border-white/30",children:"🏆"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:()=>t("/profile/history"),className:`${g} bg-gradient-to-br from-[#D19A00] to-[#C94B4B] relative`,children:[s.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-white/20 rounded-full"}),s.jsx("div",{className:"text-3xl mb-3",children:"📊"}),s.jsx("div",{className:"text-sm font-bold mb-1",children:"HISTORY"}),s.jsx("div",{className:"text-[11px] opacity-80",children:"Quizzes & Practice"}),s.jsxs("div",{className:"text-[10px] opacity-60 mt-1",children:["+",f.todayQuizzes," today"]})]}),s.jsxs("button",{onClick:()=>t("/profile/rewards"),className:`${g} bg-gradient-to-br from-[#2EB872] to-[#1EA07A] relative`,children:[s.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-bounce"}),s.jsx("div",{className:"text-3xl mb-3",children:"🎁"}),s.jsx("div",{className:"text-sm font-bold mb-1",children:"REWARDS"}),s.jsx("div",{className:"text-[11px] opacity-80",children:"Claim & Redeem"}),s.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"2 available"})]}),s.jsxs("button",{onClick:()=>t("/profile/badges"),className:`${g} bg-gradient-to-br from-[#E65C00] to-[#F9D423] relative`,children:[s.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-purple-600 rounded-full grid place-items-center text-[10px] font-bold animate-pulse",children:"NEW"}),s.jsx("div",{className:"text-3xl mb-3",children:"🏅"}),s.jsx("div",{className:"text-sm font-bold mb-1",children:"BADGES"}),s.jsx("div",{className:"text-[11px] opacity-80",children:"Collectables"}),s.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"4/15 unlocked"})]}),s.jsxs("button",{onClick:()=>t("/profile/achievements"),className:`${g} bg-gradient-to-br from-[#5D26C1] to-[#A17FE0] relative`,children:[s.jsx("div",{className:"text-3xl mb-3",children:"🎯"}),s.jsx("div",{className:"text-sm font-bold mb-1",children:"ACHIEVEMENTS"}),s.jsx("div",{className:"text-[11px] opacity-80",children:"Milestones"}),s.jsx("div",{className:"text-[10px] opacity-60 mt-1",children:"67% complete"})]})]}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("button",{onClick:()=>t("/profile/streaks"),className:`${g} bg-gradient-to-r from-orange-600/80 to-red-600/80 backdrop-blur-sm border border-orange-500/30`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:"🔥"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold",children:"STREAK"}),s.jsxs("div",{className:"text-[11px] opacity-80",children:[f.streak," days strong"]})]})]})}),s.jsx("button",{onClick:()=>t("/profile/quests"),className:`${g} bg-gradient-to-r from-blue-600/80 to-cyan-600/80 backdrop-blur-sm border border-blue-500/30`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-2xl",children:"⚡"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold",children:"QUESTS"}),s.jsxs("div",{className:"text-[11px] opacity-80",children:[(r==null?void 0:r.activeQuests)||2," active goals"]})]})]})})]}),s.jsx("button",{onClick:()=>t("/profile/settings"),className:`${g} w-full bg-gradient-to-r from-slate-700/50 to-slate-800/50 backdrop-blur-sm border border-white/10`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 grid place-items-center text-xl",children:"⚙️"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold",children:"SETTINGS"}),s.jsx("div",{className:"text-[11px] opacity-70",children:"Customize your experience"})]})]}),s.jsx("div",{className:"text-white/40",children:"→"})]})})]}),s.jsx("div",{className:"h-6"})]})}const uo="🪙",Ka={global:[{rank:1,name:"Bryan Wolf",handle:"@bryan",score:43,avatar:"/profile/rank1.png",trend:"+5",streak:12,country:"🇺🇸"},{rank:2,name:"Meghan Jess…",handle:"@meghan",score:40,avatar:"/profile/rank2.png",trend:"+2",streak:8,country:"🇨🇦"},{rank:3,name:"Alex Turner",handle:"@alex",score:38,avatar:"/profile/rank3.png",trend:"±0",streak:15,country:"🇬🇧"},{rank:4,name:"Marsha Fisher",handle:"@marsha",score:36,trend:"-1",streak:5,country:"🇦🇺"},{rank:5,name:"Juanita Cormier",handle:"@juanita",score:35,trend:"+1",streak:3,country:"🇲🇽"},{rank:6,name:"You",handle:"@you",score:34,you:!0,avatar:"/profile/avatar.png",trend:"+3",streak:7,country:"🇮🇳"},{rank:7,name:"Tamara Schmidt",handle:"@tamara",score:33,trend:"-2",streak:2,country:"🇩🇪"},{rank:8,name:"Ricardo Veum",handle:"@ricardo",score:32,trend:"+1",streak:4,country:"🇧🇷"}],friends:[{rank:1,name:"You",handle:"@you",score:34,you:!0,avatar:"/profile/avatar.png",trend:"+2",streak:7,country:"🇮🇳"},{rank:2,name:"Sarah Chen",handle:"@sarah",score:31,trend:"-1",streak:4,country:"🇸🇬",friend:!0},{rank:3,name:"Mike Johnson",handle:"@mike",score:29,trend:"+3",streak:2,country:"🇺🇸",friend:!0},{rank:4,name:"Priya Sharma",handle:"@priya",score:27,trend:"±0",streak:5,country:"🇮🇳",friend:!0},{rank:5,name:"David Kim",handle:"@david",score:25,trend:"+1",streak:3,country:"🇰🇷",friend:!0},{rank:6,name:"Emma Wilson",handle:"@emma",score:23,trend:"-2",streak:1,country:"🇬🇧",friend:!0}],india:[{rank:1,name:"Rohit Sharma",handle:"@rohit",score:45,trend:"+4",streak:10,country:"🇮🇳"},{rank:2,name:"Priya Patel",handle:"@priya",score:42,trend:"+1",streak:8,country:"🇮🇳"},{rank:3,name:"You",handle:"@you",score:34,you:!0,avatar:"/profile/avatar.png",trend:"+3",streak:7,country:"🇮🇳"},{rank:4,name:"Arjun Singh",handle:"@arjun",score:32,trend:"-1",streak:5,country:"🇮🇳"},{rank:5,name:"Kavya Reddy",handle:"@kavya",score:30,trend:"+2",streak:3,country:"🇮🇳"},{rank:6,name:"Vikram Gupta",handle:"@vikram",score:28,trend:"±0",streak:4,country:"🇮🇳"}]},Xa=[{name:"Diamond",min:40,color:"from-cyan-400 to-blue-600",icon:"💎"},{name:"Gold",min:30,color:"from-yellow-400 to-orange-500",icon:"🥇"},{name:"Silver",min:20,color:"from-gray-300 to-gray-500",icon:"🥈"},{name:"Bronze",min:10,color:"from-orange-600 to-red-600",icon:"🥉"}];function EN(){var y,N;const t=Ge(),{player:e}=Ir(),n={global:Ka.global.map(b=>b.you?{...b,name:(e==null?void 0:e.name)||"You",score:(e==null?void 0:e.coins)||0,streak:(e==null?void 0:e.currentStreak)||0}:b),friends:Ka.friends.map(b=>b.you?{...b,name:(e==null?void 0:e.name)||"You",score:(e==null?void 0:e.coins)||0,streak:(e==null?void 0:e.currentStreak)||0}:b),india:Ka.india.map(b=>b.you?{...b,name:(e==null?void 0:e.name)||"You",score:(e==null?void 0:e.coins)||0,streak:(e==null?void 0:e.currentStreak)||0}:b)};console.log("Debug - Player coins:",e==null?void 0:e.coins),console.log("Debug - Friends data:",n.friends[0]);const[r,i]=h.useState({days:2,hours:14,minutes:17}),[o,a]=h.useState("global"),c=n[o]||n.global;console.log("Player coins:",e==null?void 0:e.coins,"Current user score:",(y=c.find(b=>b.you))==null?void 0:y.score);const u=c.find(b=>b.you),d=c.slice(0,3),f=c.slice(3);h.useEffect(()=>{const b=setInterval(()=>{i(C=>C.minutes>0?{...C,minutes:C.minutes-1}:C.hours>0?{...C,hours:C.hours-1,minutes:59}:C.days>0?{...C,days:C.days-1,hours:23,minutes:59}:C)},6e4);return()=>clearInterval(b)},[]);const g=b=>{const C=Math.max(...c.map(_=>_.score)),P=b/C*100;return P>=90?Xa[0]:P>=70?Xa[1]:P>=40?Xa[2]:Xa[3]};return s.jsxs("div",{className:"min-h-screen bg-black text-white pt-12",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsx("button",{onClick:()=>t(-1),className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 text-sm hover:bg-white/10 transition",children:"← Back"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold",children:"🏆 Leaderboard"}),s.jsxs("div",{className:"text-xs text-white/60",children:["Ends in ",r.days,"d ",r.hours,"h ",r.minutes,"m"]})]}),s.jsx("button",{className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 text-sm hover:bg-white/10 transition",children:"📊"})]}),s.jsxs("div",{className:`mb-5 rounded-2xl bg-gradient-to-r ${g(u==null?void 0:u.score).color} p-4 text-center relative overflow-hidden`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -translate-y-10 translate-x-10 animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-white/5 rounded-full translate-y-8 -translate-x-8"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-2xl mb-1",children:g(u==null?void 0:u.score).icon}),s.jsxs("div",{className:"text-sm font-bold text-white",children:[g(u==null?void 0:u.score).name," League"]}),s.jsx("div",{className:"text-xs text-white/80",children:o==="friends"?"Competing with friends!":"You're competing with the best!"})]})]}),s.jsx("div",{className:"flex gap-2 mb-5",children:[{key:"global",label:"🌍 Global",count:"10M+"},{key:"friends",label:"👥 Friends",count:Ka.friends.length},{key:"india",label:"🇮🇳 India",count:"2.5M"}].map(b=>s.jsxs("button",{onClick:()=>a(b.key),className:`flex-1 px-2 py-2 rounded-xl text-xs font-semibold transition-all duration-300 ${o===b.key?"bg-lime-500 text-black shadow-lg scale-105":"border border-white/10 bg-white/5 hover:bg-white/10"}`,children:[s.jsx("div",{children:b.label}),s.jsx("div",{className:`text-[10px] ${o===b.key?"text-black/70":"text-white/60"}`,children:b.count})]},b.key))}),s.jsx("div",{className:"mb-5 rounded-2xl bg-gradient-to-r from-lime-500/20 to-green-500/20 border border-lime-500/30 p-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-lime-500/20 grid place-items-center text-lg",children:"🧑‍💻"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-lime-400 text-sm",children:"Your Position"}),s.jsxs("div",{className:"text-xs text-white/70 flex items-center gap-2",children:[s.jsxs("span",{children:["Rank #",u==null?void 0:u.rank]}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[9px] font-bold ${u!=null&&u.trend.startsWith("+")?"bg-green-500/20 text-green-400":u!=null&&u.trend.startsWith("-")?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:u==null?void 0:u.trend}),s.jsxs("span",{className:"text-white/50 text-[10px]",children:["in ",o==="global"?"Global":o==="friends"?"Friends":"India"]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-lime-400",children:[u==null?void 0:u.score," ",uo]}),s.jsxs("div",{className:"text-xs text-white/60",children:["🔥 ",u==null?void 0:u.streak," streak"]})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-center text-sm font-semibold text-white/80 mb-4",children:"👑 Hall of Fame"}),s.jsxs("div",{className:"bg-gradient-to-b from-white/5 to-white/10 rounded-2xl p-4 border border-white/10 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-4 left-6 text-2xl opacity-40 animate-pulse",children:"🏆"}),s.jsx("div",{className:"absolute top-8 right-8 text-lg opacity-40 animate-bounce",style:{animationDelay:"1s"},children:"✨"}),s.jsx("div",{className:"absolute bottom-6 left-12 text-xl opacity-10 animate-pulse",style:{animationDelay:"2s"},children:"🥇"}),s.jsx("div",{className:"absolute bottom-4 right-6 text-lg opacity-40 animate-bounce",style:{animationDelay:"0.5s"},children:"⭐"}),s.jsxs("div",{className:"flex items-end justify-center gap-8 relative z-10",children:[d[1]&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Ja,{src:d[1].avatar,fallback:d[1].name,size:56}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-7 h-7 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full grid place-items-center text-sm font-bold text-black shadow-lg",children:"2"})]}),s.jsx("div",{className:"text-sm font-semibold mb-1 mt-1",children:Za(d[1].name,8)}),s.jsxs("div",{className:"text-xs text-lime-400 font-bold",children:[d[1].score," ",uo]})]}),d[0]&&s.jsxs("div",{className:"flex flex-col items-center -mb-3",children:[s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Ja,{src:d[0].avatar,fallback:d[0].name,size:72}),s.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:s.jsx(_N,{})}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full grid place-items-center text-base font-bold text-black shadow-lg animate-pulse",children:"1"})]}),s.jsx("div",{className:"text-sm font-bold mb-1 mt-1",children:Za(d[0].name,8)}),s.jsxs("div",{className:"text-sm text-lime-400 font-bold mb-1",children:[d[0].score," ",uo]}),s.jsx("div",{className:"px-2 py-1 bg-yellow-400/20 rounded-full text-[9px] text-yellow-400 font-bold",children:"CHAMPION"})]}),d[2]&&s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative mb-2",children:[s.jsx(Ja,{src:d[2].avatar,fallback:d[2].name,size:56}),s.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-7 h-7 bg-gradient-to-br from-orange-600 to-red-600 rounded-full grid place-items-center text-sm font-bold text-white shadow-lg",children:"3"})]}),s.jsx("div",{className:"text-sm font-semibold mb-1 mt-1",children:Za(d[2].name,8)}),s.jsxs("div",{className:"text-xs text-lime-400 font-bold",children:[d[2].score," ",uo]})]})]})]})]}),f.length>0&&s.jsxs("div",{className:"rounded-3xl bg-white/5 border border-white/10 p-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 px-2",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Rankings"}),s.jsx("div",{className:"text-xs text-white/60",children:"Live updates"})]}),s.jsx("ul",{className:"space-y-1.5",children:f.map((b,C)=>s.jsxs("li",{className:`flex items-center justify-between px-3 py-2.5 rounded-xl transition-all duration-300 ${b.you?"bg-lime-500/90 text-black shadow-lg shadow-lime-500/20 scale-[1.02]":"bg-white/5 hover:bg-white/10"}`,style:{animationDelay:`${C*100}ms`,animation:"fadeInUp 0.6s ease-out forwards"},children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx(CN,{n:b.rank,you:b.you}),s.jsx(Ja,{src:b.avatar,fallback:b.name,size:36}),s.jsxs("div",{className:"flex flex-col leading-tight",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-semibold",children:Za(b.name,12)}),s.jsx("span",{className:"text-xs",children:b.country}),b.friend&&s.jsx("span",{className:"text-[9px] bg-blue-500/20 text-blue-400 px-1 py-0.5 rounded-full",children:"Friend"})]}),s.jsxs("div",{className:`text-xs flex items-center gap-1.5 ${b.you?"text-black/70":"text-white/60"}`,children:[s.jsx("span",{children:b.handle}),s.jsxs("span",{children:["🔥",b.streak]})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold",children:[s.jsx("span",{children:b.score}),s.jsx("span",{className:b.you?"opacity-90":"opacity-80",children:uo})]}),s.jsx("div",{className:`text-xs px-1.5 py-0.5 rounded-full font-bold ${b.trend.startsWith("+")?"bg-green-500/20 text-green-400":b.trend.startsWith("-")?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:b.trend})]})]},`${o}-${b.rank}`))})]}),u&&u.rank>1&&s.jsxs("div",{className:"mb-4 p-3 rounded-2xl bg-gradient-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/30 text-center",children:[s.jsx("div",{className:"text-sm font-semibold mb-2",children:"🚀 Climb Higher!"}),s.jsx("div",{className:"text-xs text-white/70 mb-3",children:o==="friends"&&u.rank===1?"🎉 You're #1 among friends!":`You need ${Math.max(0,(((N=c[u.rank-2])==null?void 0:N.score)||0)-u.score+1)} more coins to reach rank #${u.rank-1}`}),!(o==="friends"&&u.rank===1)&&s.jsx("button",{onClick:()=>t("/play"),className:"px-5 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl text-sm font-bold hover:scale-105 transition-transform",children:"Play Now 🎮"})]}),s.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function Ja({src:t,fallback:e,size:n=56}){const r=TN(e);return s.jsx("div",{className:"grid place-items-center rounded-full bg-white/10 overflow-hidden border-2 border-white/20",style:{width:n,height:n},children:t?s.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-sm font-semibold",children:r})})}function _N(){return s.jsxs("div",{className:"w-7 h-5 bg-gradient-to-t from-yellow-400 to-yellow-300 rounded-b-lg shadow-lg relative",children:[s.jsxs("svg",{viewBox:"0 0 100 40",className:"w-full h-full",children:[s.jsx("path",{d:"M15,35 L15,18 L35,28 L50,10 L65,28 L85,18 L85,35 Z",fill:"url(#crownGradient)"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"crownGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#FCD34D"}),s.jsx("stop",{offset:"100%",stopColor:"#F59E0B"})]})})]}),s.jsx("div",{className:"absolute top-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-red-400 rounded-full animate-pulse"})]})}function CN({n:t,you:e}){return s.jsx("div",{className:`w-7 h-7 grid place-items-center rounded-full text-sm font-bold ${e?"bg-black/10 text-black":"bg-white/10 text-white"}`,children:t})}function Za(t,e=12){return(t==null?void 0:t.length)>e?t.slice(0,e-1)+"…":t}function TN(t=""){var n;const e=t.trim().split(/\s+/);return e.length===1?e[0].slice(0,2).toUpperCase():(e[0][0]+(((n=e[1])==null?void 0:n[0])||"")).toUpperCase()}const AN="qp_recent",IN="qp_review_snapshot",e0=[{id:Date.now()-864e5,type:"quiz",category:"General Knowledge",difficulty:"easy",score:8,total:10,accuracy:80,time:"02:31",ms:151e3,date:"Yesterday",timestamp:Date.now()-864e5,mode:"Quiz"},{id:Date.now()-1728e5,type:"practice",category:"Science",difficulty:"medium",score:12,total:15,accuracy:80,time:"06:02",ms:362e3,date:"2 days ago",timestamp:Date.now()-1728e5,mode:"Practice"},{id:Date.now()-2592e5,type:"quiz",category:"Fun Facts",difficulty:"easy",score:9,total:10,accuracy:90,time:"02:05",ms:125e3,date:"3 days ago",timestamp:Date.now()-2592e5,mode:"Quiz"}];function RN(){const[t,e]=h.useState("quizzes"),[n,r]=h.useState(null),[i,o]=h.useState(!1),[a,c]=h.useState("all"),[u,d]=h.useState("all"),[f,g]=h.useState("date"),[y,N]=h.useState([]),[b,C]=h.useState(!0),P=Ge(),_=Ct(),j=m=>{if(!m)return"00:00";const x=Math.floor(m/1e3),w=Math.floor(x/60),A=x%60;return`${String(w).padStart(2,"0")}:${String(A).padStart(2,"0")}`},S=m=>{if(!m)return"Unknown";const x=new Date(m),A=Math.floor((new Date-x)/(1e3*60*60*24));return A===0?"Today":A===1?"Yesterday":A<7?`${A} days ago`:`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][x.getMonth()]} ${x.getDate()}`};h.useEffect(()=>{let m=!1;C(!0);const x=E=>{try{return JSON.parse(E)}catch{return null}},w=E=>encodeURIComponent(String(E).trim().toLowerCase().replace(/\s+/g,"-")),A=E=>{var L,z,Q,Z;const T=Number(E.ts??E.timestamp??E.id)||Date.now(),X=Number(E.ms)||0,te=Number(E.total)||0,ne=Number(E.correct)||0,U=String(E.mode||"").toLowerCase().includes("practice")?"practice":"quiz",F=((L=E.snapshot)==null?void 0:L.category)||((z=E.snapshot)==null?void 0:z.categoryLabel)||E.cat||E.category||"Unknown",B=((Q=E.snapshot)==null?void 0:Q.categoryParam)||w(F),$=String(((Z=E.snapshot)==null?void 0:Z.difficulty)||E.difficulty||"medium").toLowerCase();return{id:E.id??T,type:U,category:F,categoryParam:B,difficulty:$,score:ne,total:te,accuracy:te?Math.round(ne/te*100):0,time:j(X),ms:X,date:S(T),timestamp:T,snapshot:E.snapshot??null,mode:E.mode||(U==="practice"?"Practice":"Quiz")}};try{const E=localStorage.getItem(AN),T=E?x(E):null,te=(Array.isArray(T)&&T.length?T:e0).map(A).filter(ne=>ne&&ne.timestamp).sort((ne,K)=>K.timestamp-ne.timestamp);m||N(te)}catch(E){console.error("Error loading history:",E),m||N(e0)}finally{m||C(!1)}return()=>{m=!0}},[]);const I=h.useMemo(()=>{const m=new Set(y.map(x=>x.category));return Array.from(m)},[y]),D=h.useMemo(()=>{let m=y.filter(x=>t==="quizzes"?x.type==="quiz":x.type==="practice");return a!=="all"&&(m=m.filter(x=>x.category===a)),u!=="all"&&(m=m.filter(x=>x.difficulty===u)),m.sort((x,w)=>f==="date"?w.timestamp-x.timestamp:f==="score"?w.accuracy-x.accuracy:f==="time"?x.ms-w.ms:0),m},[y,t,a,u,f]),M=h.useMemo(()=>{if(D.length===0)return null;const m=D.reduce((E,T)=>E+T.score,0),x=D.reduce((E,T)=>E+T.total,0),w=x?Math.round(m/x*100):0,A=D.reduce((E,T)=>E+T.ms,0);return{count:D.length,avgAccuracy:w,totalTime:j(A),bestScore:Math.max(...D.map(E=>E.accuracy))}},[D]),k=m=>m>=80?"text-green-400":m>=60?"text-blue-400":m>=40?"text-yellow-400":"text-red-400";return b?s.jsx("div",{className:"min-h-full bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white",children:"Loading history..."})}):s.jsxs("div",{className:"min-h-full bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 pt-12",children:[s.jsx("div",{className:"",children:s.jsxs("div",{className:"px-4 pt-4 pb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("button",{onClick:()=>{var m;if(((m=_.state)==null?void 0:m.from)==="results"){const x=xe.getCurrentResults();x?P(`/quiz/${x.categorySlug}`,{state:{returnToResults:!0}}):P("/profile")}else P("/profile")},className:"px-3 py-1.5 rounded-xl border border-white/20 bg-white/10 text-white text-sm flex items-center gap-1",children:"← Back"}),s.jsx("button",{onClick:()=>o(!i),className:"p-2 rounded-xl border border-white/20 bg-white/10 text-white",children:s.jsx(LN,{})})]}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:"History"}),s.jsx("p",{className:"text-white/70 text-sm",children:"Track your progress"})]})}),s.jsxs("div",{className:"px-4 pb-20",children:[s.jsx("div",{className:`
             sticky top-0 z-[60] isolate
            -mx-4 px-4
            py-4 mb-2
            bg-gray-900/95
            backdrop-blur-md
            border-b border-white/10
        `,children:s.jsx("div",{className:"flex items-center",children:s.jsx("div",{className:"inline-flex p-1 rounded-2xl bg-white/10 border border-white/20",children:[{value:"quizzes",label:"Quizzes",icon:"🎯"},{value:"practice",label:"Practice",icon:"📝"}].map(m=>s.jsxs("button",{onClick:()=>e(m.value),className:`px-12 py-2 text-sm rounded-xl transition-all duration-200 ${t===m.value?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-white/70 hover:text-white"}`,children:[s.jsx("span",{className:"mr-1",children:m.icon}),m.label]},m.value))})})}),M&&s.jsx("div",{className:"mb-4 p-4 rounded-2xl bg-gradient-to-br from-purple-500/20 to-blue-500/20 border border-white/20",children:s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsx(el,{label:"Total",value:M.count}),s.jsx(el,{label:"Avg Score",value:`${M.avgAccuracy}%`,color:k(M.avgAccuracy)}),s.jsx(el,{label:"Best Score",value:`${M.bestScore}%`,color:"text-green-400"}),s.jsx(el,{label:"Total Time",value:M.totalTime})]})}),i&&s.jsx("div",{className:"mb-4 p-4 rounded-2xl bg-white/10 border border-white/20",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Category"}),s.jsxs("select",{value:a,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 rounded-xl bg-black/30 border border-white/20 text-white text-sm",children:[s.jsx("option",{value:"all",children:"All Categories"}),I.map(m=>s.jsx("option",{value:m,children:m},m))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Difficulty"}),s.jsxs("select",{value:u,onChange:m=>d(m.target.value),className:"w-full px-3 py-2 rounded-xl bg-black/30 border border-white/20 text-white text-sm",children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"easy",children:"Easy"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"hard",children:"Hard"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Sort By"}),s.jsxs("select",{value:f,onChange:m=>g(m.target.value),className:"w-full px-3 py-2 rounded-xl bg-black/30 border border-white/20 text-white text-sm",children:[s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"score",children:"Score"}),s.jsx("option",{value:"time",children:"Time"})]})]})]})]})}),D.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-3",children:"📚"}),s.jsxs("p",{className:"text-white/60",children:["No ",t," history yet"]}),s.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Start playing to see your progress here!"})]}):s.jsx("div",{className:"space-y-3",children:D.map((m,x)=>s.jsx(PN,{item:m,index:x,onClick:()=>r(m)},m.id))})]}),n&&s.jsx(DN,{item:n,onClose:()=>r(null)})]})}function el({label:t,value:e,color:n="text-white"}){return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-white/60 mb-1",children:t}),s.jsx("div",{className:`text-lg font-bold ${n}`,children:e})]})}function PN({item:t,index:e,onClick:n}){const r=a=>a>=80?"from-green-500/20 to-green-600/10 border-green-500/30":a>=60?"from-blue-500/20 to-blue-600/10 border-blue-500/30":a>=40?"from-yellow-500/20 to-yellow-600/10 border-yellow-500/30":"from-red-500/20 to-red-600/10 border-red-500/30",o=(a=>{const c=a==null?void 0:a.toLowerCase();return c==="easy"?{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30"}:c==="medium"?{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30"}:c==="hard"?{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-500/30"}:{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-500/30"}})(t.difficulty);return s.jsxs("div",{onClick:n,className:`
        relative rounded-2xl p-4 cursor-pointer
        bg-gradient-to-br ${r(t.accuracy)}
        border transform transition-all duration-300 hover:scale-[1.02]
      `,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-lg",children:t.type==="quiz"?"🎯":"📝"}),s.jsx("h3",{className:"font-semibold text-white",children:t.category})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o.bg} ${o.text} ${o.border} border`,children:t.difficulty}),s.jsx("span",{className:"text-xs text-white/50",children:t.date})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-2xl font-bold ${t.accuracy>=80?"text-green-400":t.accuracy>=60?"text-blue-400":t.accuracy>=40?"text-yellow-400":"text-red-400"}`,children:[t.accuracy,"%"]}),s.jsxs("div",{className:"text-xs text-white/60",children:[t.score,"/",t.total]})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-3 text-white/60",children:[s.jsxs("span",{children:["⏱ ",t.time]}),s.jsx("span",{children:t.mode})]}),s.jsx("span",{className:"text-white/40",children:"Tap to review →"})]})]})}function DN({item:t,onClose:e}){const n=Ge();return h.useEffect(()=>{const r=i=>{i.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e]),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:e,children:s.jsxs("div",{className:"w-full max-w-md bg-gray-900 rounded-3xl p-6 border border-white/20",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Quiz Details"}),s.jsx("button",{onClick:e,className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors text-white",children:"✕"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-2xl bg-white/5 border border-white/10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/60",children:"Category"}),s.jsx("span",{className:"text-white font-medium",children:t.category})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/60",children:"Difficulty"}),s.jsx("span",{className:`${t.difficulty==="easy"?"text-green-400":t.difficulty==="medium"?"text-yellow-400":"text-red-400"} font-medium`,children:t.difficulty})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/60",children:"Score"}),s.jsxs("span",{className:"text-white font-medium",children:[t.score,"/",t.total]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/60",children:"Accuracy"}),s.jsxs("span",{className:`${t.accuracy>=80?"text-green-400":t.accuracy>=60?"text-blue-400":"text-yellow-400"} font-medium`,children:[t.accuracy,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Time"}),s.jsx("span",{className:"text-white font-medium",children:t.time})]})]}),t.snapshot&&s.jsx("button",{onClick:()=>{e(),localStorage.setItem(IN,JSON.stringify(t.snapshot)),n(`/quiz/${t.categoryParam}/start?review=1&attempt=${t.id}`,{state:{reviewFrom:"history",historyPath:"/profile/history"}})},className:"w-full py-3 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-500 text-white font-medium hover:opacity-90 transition-opacity",children:"Review Answers"}),s.jsx("button",{onClick:()=>{var r;e(),n(`/quiz/${t.categoryParam}/start`,{state:{mode:"quiz",retake:!0,difficulty:t.difficulty,count:t.total,timer:((r=t.snapshot)==null?void 0:r.timer)||{type:"per_q",seconds:45},fromHistory:!0}})},className:"w-full py-3 rounded-2xl border border-white/20 text-white font-medium hover:bg-white/10 transition-colors",children:"Retake Quiz"})]})]})})}function LN(){return s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M3 6h18M7 12h10M10 18h4",strokeLinecap:"round",strokeLinejoin:"round"})})}const MN=h.createContext({});function $y(t){const e=h.useRef(null);return e.current===null&&(e.current=t()),e.current}const ON=typeof window<"u",FN=ON?h.useLayoutEffect:h.useEffect,By=h.createContext(null);function zN(t){return typeof t=="object"&&t!==null}function VN(t){return zN(t)&&"offsetHeight"in t}const $N=h.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class BN extends h.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=VN(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UN({children:t,isPresent:e,anchorX:n,root:r}){const i=h.useId(),o=h.useRef(null),a=h.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=h.useContext($N);return h.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:g,right:y}=a.current;if(e||!o.current||!u||!d)return;const N=n==="left"?`left: ${g}`:`right: ${y}`;o.current.dataset.motionPopId=i;const b=document.createElement("style");c&&(b.nonce=c);const C=r??document.head;return C.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${N}px !important;
            top: ${f}px !important;
          }
        `),()=>{C.contains(b)&&C.removeChild(b)}},[e]),s.jsx(BN,{isPresent:e,childRef:o,sizeRef:a,children:h.cloneElement(t,{ref:o})})}const qN=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:c,root:u})=>{const d=$y(HN),f=h.useId();let g=!0,y=h.useMemo(()=>(g=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:N=>{d.set(N,!0);for(const b of d.values())if(!b)return;r&&r()},register:N=>(d.set(N,!1),()=>d.delete(N))}),[n,d,r]);return o&&g&&(y={...y}),h.useMemo(()=>{d.forEach((N,b)=>d.set(b,!1))},[n]),h.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=s.jsx(UN,{isPresent:n,anchorX:c,root:u,children:t})),s.jsx(By.Provider,{value:y,children:t})};function HN(){return new Map}function QN(t=!0){const e=h.useContext(By);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=h.useId();h.useEffect(()=>{if(t)return i(o)},[t]);const a=h.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const tl=t=>t.key||"";function t0(t){const e=[];return h.Children.forEach(t,n=>{h.isValidElement(n)&&e.push(n)}),e}const Du=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[d,f]=QN(a),g=h.useMemo(()=>t0(t),[t]),y=a&&!d?[]:g.map(tl),N=h.useRef(!0),b=h.useRef(g),C=$y(()=>new Map),[P,_]=h.useState(g),[j,S]=h.useState(g);FN(()=>{N.current=!1,b.current=g;for(let M=0;M<j.length;M++){const k=tl(j[M]);y.includes(k)?C.delete(k):C.get(k)!==!0&&C.set(k,!1)}},[j,y.length,y.join("-")]);const I=[];if(g!==P){let M=[...g];for(let k=0;k<j.length;k++){const m=j[k],x=tl(m);y.includes(x)||(M.splice(k,0,m),I.push(m))}return o==="wait"&&I.length&&(M=I),S(t0(M)),_(g),null}const{forceRender:D}=h.useContext(MN);return s.jsx(s.Fragment,{children:j.map(M=>{const k=tl(M),m=a&&!d?!1:g===j||y.includes(k),x=()=>{if(C.has(k))C.set(k,!0);else return;let w=!0;C.forEach(A=>{A||(w=!1)}),w&&(D==null||D(),S(b.current),a&&(f==null||f()),r&&r())};return s.jsx(qN,{isPresent:m,initial:!N.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:u,onExitComplete:m?void 0:x,anchorX:c,children:M},k)})})},GN=()=>{const t=Ge(),[e,n]=h.useState(null);h.useEffect(()=>{if(typeof window<"u"){const G=sessionStorage.getItem("navigationSource");G&&n(G)}},[]);const r=G=>{typeof window<"u"&&(sessionStorage.setItem("navigationSource","/rewards"),window.location.href=G)},i=()=>{t(-1)},o=[{id:1,type:"coins",value:100,icon:"🪙",label:"100 Coins",cost:0},{id:2,type:"life",value:1,icon:"❤️",label:"1 Life",cost:50},{id:3,type:"coins",value:200,icon:"🪙",label:"200 Coins",cost:0},{id:4,type:"wildcard",value:1,icon:"🃏",label:"Wild Card",cost:100},{id:5,type:"coins",value:500,icon:"💰",label:"500 Coins",cost:0,milestone:!0},{id:6,type:"fifty-fifty",value:1,icon:"➗",label:"50:50",cost:150},{id:7,type:"life",value:2,icon:"❤️",label:"2 Lives",cost:100},{id:8,type:"vehicle",value:"bike",icon:"🏍️",label:"Motorcycle",cost:300},{id:9,type:"mystery",value:1,icon:"🎁",label:"Mystery Box",cost:200},{id:10,type:"coins",value:750,icon:"💰",label:"750 Coins",cost:0,milestone:!0},{id:11,type:"life",value:3,icon:"❤️",label:"3 Lives",cost:150},{id:12,type:"wildcard",value:2,icon:"🃏",label:"2x Wild Card",cost:250},{id:13,type:"vehicle",value:"car",icon:"🚗",label:"Car",cost:500},{id:14,type:"fifty-fifty",value:2,icon:"➗",label:"2x 50:50",cost:300},{id:15,type:"coins",value:1e3,icon:"💎",label:"1000 Coins",cost:0,milestone:!0}],a={cycle:{icon:"🚴",name:"Bicycle"},bike:{icon:"🏍️",name:"Motorcycle"},car:{icon:"🚗",name:"Car"}};Ir();const[c,u]=h.useState(4),[d,f]=h.useState(xe.getCoins()),[g,y]=h.useState(4),[N,b]=h.useState(!1),[C,P]=h.useState(!1),[_,j]=h.useState(0),[S,I]=h.useState(0),[D,M]=h.useState("cycle"),[k,m]=h.useState([{type:"vehicle",icon:"🚴",name:"Bicycle",count:1},{type:"wildcard",icon:"🃏",name:"Wild Card",count:2},{type:"fifty-fifty",icon:"➗",name:"50:50 Helper",count:1}]),[x,w]=h.useState([0,1,2,3]),[A,E]=h.useState(!1),[T,X]=h.useState(!1),[te,ne]=h.useState(null),[K,U]=h.useState(null),[F,B]=h.useState(!1),[$,L]=h.useState(null),[z,Q]=h.useState(!1),Z=h.useRef(null),H=h.useRef(null),oe=h.useRef(null);h.useEffect(()=>{Z.current=new Audio("/sounds/reward.mp3"),H.current=new Audio("/sounds/reward_progress.mp3"),[Z,H].forEach(G=>{var O;(O=G.current)==null||O.addEventListener("error",()=>{console.log("Sound file not found")})})},[]);const Y=G=>{try{G.current&&(G.current.currentTime=0,G.current.play().catch(O=>console.log("Audio play failed:",O)))}catch(O){console.log("Sound play error:",O)}},q=(G,O)=>{if(G>c){U(O),X(!0);return}G===c&&J(G,O)},ae=G=>{var le;const O=(le=oe.current)==null?void 0:le.querySelector(`[data-index="${G}"]`);if(O){const ue=O.getBoundingClientRect(),pe=window.pageYOffset||document.documentElement.scrollTop,we=ue.top+pe-window.innerHeight/2+50;window.scrollTo({top:we,behavior:"smooth"})}},J=(G,O)=>{if(!x.includes(G)){if(O.cost>0&&d<O.cost){U(O),X(!0);return}O.cost>0&&(f(le=>le-O.cost),xe.addCoins(-O.cost,`Reward Purchase: ${O.label}`)),Y(Z),E(!0),U(O),w(le=>[...le,G]),setTimeout(()=>{E(!1),O.type==="coins"?(j(O.value),b(!0),setTimeout(()=>{f(le=>le+O.value),xe.addCoins(O.value,`Reward Claimed: ${O.label}`),setTimeout(()=>{b(!1),j(0)},500)},300)):O.type==="life"?(I(O.value),P(!0),setTimeout(()=>{y(le=>le+O.value),setTimeout(()=>{P(!1),I(0)},500)},300)):(L({icon:O.icon,startX:window.innerWidth/2,startY:window.innerHeight/2}),setTimeout(()=>{L(null),Q(!0),ee(O),O.type==="vehicle"&&M(O.value),setTimeout(()=>{Q(!1)},500)},800)),setTimeout(()=>{if(c<o.length-1){const le=c+1;ae(le),setTimeout(()=>{B(!0),Y(H),u(le),setTimeout(()=>{B(!1)},500)},300)}},1200)},1500)}},ee=G=>{m(O=>O.find(ue=>ue.icon===G.icon)?O.map(ue=>ue.icon===G.icon?{...ue,count:ue.count+1}:ue):[...O,{type:G.type,icon:G.icon,name:G.label,count:1}])},re=G=>30+G*100,ie=()=>30+c*100;return s.jsxs("div",{className:"rewards-page",children:[s.jsx("style",{jsx:!0,children:`
        .rewards-page {
          min-height: 100vh;
          background: linear-gradient(180deg, #1a1a2e 0%, #16213e 100%);
          color: white;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
          display: flex;
          flex-direction: column;
        }

        .non-sticky-header {
          padding: 40px 16px 16px 16px;
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 8px 16px;
          background: rgba(255, 255, 255, 0.06);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.1);
          border-radius: 10px;
          color: white;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
        }

        .back-button:hover {
          background: rgba(255, 255, 255, 0.1);
        }

        .sticky-section {
          position: sticky;
          top: 0;
          z-index: 50;
          background: linear-gradient(180deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 100%);
          backdrop-filter: blur(20px);
          padding: 12px;
          border-bottom: 1px solid rgba(255, 255, 255, 0.06);
          box-shadow: 0 2px 20px rgba(0, 0, 0, 0.2);
        }

        .header-wrapper {
          background: rgba(255, 255, 255, 0.03);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 14px;
          padding: 12px;
          margin-bottom: 10px;
        }

        .title-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 8px;
        }

        .title {
          font-size: 22px;
          font-weight: 700;
          margin: 0;
          letter-spacing: -0.3px;
        }

        .subtitle {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.5);
          margin: 0;
        }

        .play-quiz-btn {
          padding: 7px 16px;
          background: #5E5CE6;
          border: none;
          border-radius: 8px;
          color: white;
          font-size: 12px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .play-quiz-btn:hover {
          background: #6E6CF6;
        }

        .balance-row {
          display: flex;
          align-items: center;
          gap: 16px;
        }

        .balance-item {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .balance-label {
          font-size: 10px;
          color: rgba(255, 255, 255, 0.4);
          text-transform: uppercase;
          letter-spacing: 0.8px;
        }

        .balance-value {
          font-size: 20px;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 4px;
          position: relative;
        }

        .balance-value.animating {
          animation: pulse 0.4s ease;
        }

        @keyframes pulse {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.08); }
        }

        .value-change {
          position: absolute;
          top: -14px;
          right: 0;
          font-size: 11px;
          font-weight: 600;
          color: #34C759;
          animation: slideUp 0.8s ease forwards;
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(5px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .stats-cards-container {
          background: rgba(255, 255, 255, 0.03);
          border: 1px solid rgba(255, 255, 255, 0.08);
          border-radius: 14px;
          padding: 10px;
        }

        .info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr;
          gap: 8px;
        }

        .info-card {
          background: rgba(255, 255, 255, 0.04);
          border: 1px solid rgba(255, 255, 255, 0.06);
          border-radius: 10px;
          padding: 8px;
          text-align: center;
        }

        .info-icon {
          font-size: 18px;
          margin-bottom: 2px;
        }

        .info-value {
          font-size: 14px;
          font-weight: 600;
          margin-bottom: 2px;
        }

        .info-label {
          font-size: 9px;
          color: rgba(255, 255, 255, 0.4);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .cards-section {
          grid-column: span 3;
          padding: 12px;
          background: rgba(255, 255, 255, 0.02);
          border-radius: 8px;
        }

        .cards-label {
          font-size: 11px;
          color: rgba(255, 255, 255, 0.5);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 10px;
          text-align: center;
        }

        .card-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
          gap: 10px;
          max-width: 300px;
          margin: 0 auto;
        }

        .card-item {
          position: relative;
          cursor: pointer;
          transition: all 0.2s;
        }

        .card-item:hover {
          transform: translateY(-4px) scale(1.05);
        }

        .large-card {
          width: 100%;
          height: 90px;
          background: linear-gradient(135deg, #ffffff 0%, #f5f5f7 100%);
          border-radius: 10px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 4px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .large-card-icon {
          font-size: 32px;
        }

        .large-card-name {
          font-size: 10px;
          color: #333;
          font-weight: 600;
        }

        .card-count-badge {
          position: absolute;
          bottom: -4px;
          right: -4px;
          background: #5E5CE6;
          color: white;
          min-width: 20px;
          height: 20px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
          font-weight: 700;
          padding: 0 6px;
          box-shadow: 0 2px 6px rgba(94, 92, 230, 0.4);
        }

        .cards-section.animating {
          animation: highlight 0.4s ease;
        }

        @keyframes highlight {
          0%, 100% { 
            background: rgba(255, 255, 255, 0.02);
          }
          50% { 
            background: rgba(94, 92, 230, 0.12);
          }
        }

        .scrollable-journey {
          flex: 1;
          overflow-y: auto;
          padding-bottom: 40px;
        }

        .journey-container {
          position: relative;
          padding: 40px 20px;
          min-height: ${o.length*100+200}px;
        }

        .journey-track {
          position: relative;
          width: 100%;
          height: ${o.length*100+100}px;
        }

        .curvy-road {
          position: absolute;
          left: 50%;
          top: 30px;
          width: 60px;
          height: calc(100% - 60px);
          transform: translateX(-50%);
        }

        .road-svg {
          width: 100%;
          height: 100%;
        }

        .road-path {
          stroke: rgba(255, 255, 255, 0.08);
          stroke-width: 4;
          fill: none;
        }

        .road-progress {
          stroke: #5E5CE6;
          stroke-width: 4;
          fill: none;
          opacity: 0.8;
          transition: stroke-dashoffset 1s ease;
        }

        .rewards-list {
          position: relative;
          z-index: 2;
        }

        .reward-row {
          position: absolute;
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .reward-item {
          display: flex;
          align-items: center;
          gap: 12px;
          position: relative;
        }

        .reward-item.left {
          flex-direction: row-reverse;
          transform: translateX(-60%);
        }

        .reward-item.right {
          transform: translateX(60%);
        }

        .checkpoint {
          width: 64px;
          height: 64px;
          border-radius: 50%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.3s;
          position: relative;
          background: rgba(255, 255, 255, 0.08);
          backdrop-filter: blur(20px);
          border: 2px solid rgba(255, 255, 255, 0.12);
        }

        .checkpoint.current {
          background: #5E5CE6;
          border-color: #5E5CE6;
          animation: checkpointPulse 2s infinite;
          transform: scale(1.1);
        }

        .checkpoint.claimed {
          background: #34C759;
          border-color: #34C759;
        }

        .checkpoint.locked {
          opacity: 0.4;
          background: rgba(0, 0, 0, 0.2);
        }

        @keyframes checkpointPulse {
          0%, 100% {
            box-shadow: 0 0 0 0 rgba(94, 92, 230, 0.6);
          }
          50% {
            box-shadow: 0 0 0 12px rgba(94, 92, 230, 0);
          }
        }

        .checkpoint-icon {
          font-size: 24px;
        }

        .checkpoint-value {
          font-size: 11px;
          font-weight: 600;
          margin-top: 2px;
        }

        .reward-info {
          background: rgba(0, 0, 0, 0.3);
          backdrop-filter: blur(20px);
          padding: 10px 14px;
          border-radius: 12px;
          border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .reward-name {
          font-size: 13px;
          color: white;
          font-weight: 500;
        }

        .step-label {
          font-size: 11px;
          color: rgba(255, 255, 255, 0.5);
          margin-top: 2px;
        }

        .avatar-tracker {
          position: absolute;
          left: 50%;
          transform: translateX(-50%);
          z-index: 10;
          transition: top 1s cubic-bezier(0.4, 0, 0.2, 1);
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 4px;
        }

        .avatar-img {
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: white;
          border: 3px solid #5E5CE6;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .tracker-vehicle {
          font-size: 22px;
          filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .lock-icon {
          position: absolute;
          top: -6px;
          right: -6px;
          background: rgba(0, 0, 0, 0.6);
          border-radius: 50%;
          width: 22px;
          height: 22px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 11px;
        }

        .milestone-badge {
          position: absolute;
          top: -8px;
          left: -8px;
          background: linear-gradient(135deg, #FFD60A, #FFB800);
          color: black;
          padding: 3px 8px;
          border-radius: 8px;
          font-size: 10px;
          font-weight: 700;
        }

        .flying-card {
          position: fixed;
          font-size: 40px;
          z-index: 1000;
          pointer-events: none;
          animation: flyToCards 0.8s ease-out forwards;
        }

        @keyframes flyToCards {
          0% {
            transform: translate(0, 0) scale(1);
            opacity: 1;
          }
          100% {
            transform: translate(calc(50vw - var(--startX)), calc(-50vh + 200px)) scale(0.5);
            opacity: 0;
          }
        }

        .claim-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.7);
          backdrop-filter: blur(10px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 100;
        }

        .modal {
          background: rgba(30, 30, 46, 0.98);
          backdrop-filter: blur(30px);
          padding: 32px;
          border-radius: 20px;
          text-align: center;
          animation: modalSlideUp 0.3s ease;
          border: 1px solid rgba(255, 255, 255, 0.08);
          max-width: 360px;
        }

        @keyframes modalSlideUp {
          from {
            transform: translateY(20px) scale(0.95);
            opacity: 0;
          }
          to {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
        }

        .modal-icon {
          font-size: 64px;
          margin-bottom: 20px;
        }

        .modal-title {
          font-size: 24px;
          font-weight: 700;
          margin-bottom: 8px;
        }

        .modal-subtitle {
          font-size: 15px;
          color: rgba(255, 255, 255, 0.6);
          margin-bottom: 24px;
        }

        .modal-value {
          font-size: 32px;
          font-weight: 700;
          color: #34C759;
        }

        .modal-buttons {
          display: flex;
          gap: 12px;
          justify-content: center;
          margin-top: 24px;
        }

        .modal-btn {
          padding: 12px 24px;
          border-radius: 12px;
          border: none;
          font-size: 15px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
        }

        .modal-btn-primary {
          background: #5E5CE6;
          color: white;
        }

        .modal-btn-secondary {
          background: rgba(255, 255, 255, 0.08);
          color: white;
        }

        .modal-btn:hover {
          transform: scale(1.02);
        }

        .card-detail-name {
          font-size: 18px;
          font-weight: 600;
          margin-top: 12px;
          margin-bottom: 8px;
        }

        .card-detail-desc {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.6);
        }
      `}),s.jsx("div",{className:"non-sticky-header",children:s.jsx("button",{className:"back-button",onClick:i,children:"← Back"})}),s.jsxs("div",{className:"sticky-section",children:[s.jsxs("div",{className:"header-wrapper",children:[s.jsxs("div",{className:"title-row",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"title",children:"Rewards"}),s.jsx("p",{className:"subtitle",children:"Claim amazing prizes"})]}),s.jsx("button",{className:"play-quiz-btn",onClick:()=>r("/play"),children:"Play Quiz"})]}),s.jsx("div",{className:"balance-row",children:s.jsx("div",{className:"balance-item",children:s.jsxs("div",{children:[s.jsx("div",{className:"balance-label",children:"Balance"}),s.jsxs("div",{className:`balance-value ${N?"animating":""}`,children:[d.toLocaleString()," 🪙",N&&s.jsxs("span",{className:"value-change",children:["+",_]})]})]})})})]}),s.jsx("div",{className:"stats-cards-container",children:s.jsxs("div",{className:"info-grid",children:[s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-icon",children:"❤️"}),s.jsxs("div",{className:`info-value ${C?"animating":""}`,children:[g,C&&s.jsxs("span",{className:"value-change",children:["+",S]})]}),s.jsx("div",{className:"info-label",children:"Lives"})]}),s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-icon",children:"⭐"}),s.jsx("div",{className:"info-value",children:"5"}),s.jsx("div",{className:"info-label",children:"Level"})]}),s.jsxs("div",{className:"info-card",children:[s.jsx("div",{className:"info-icon",children:a[D].icon}),s.jsx("div",{className:"info-value",children:a[D].name}),s.jsx("div",{className:"info-label",children:"Vehicle"})]}),s.jsxs("div",{className:`cards-section ${z?"animating":""}`,children:[s.jsx("div",{className:"cards-label",children:"Your Cards"}),s.jsx("div",{className:"card-grid",children:k.map((G,O)=>s.jsxs("div",{className:"card-item",onClick:()=>ne(G),children:[s.jsxs("div",{className:"large-card",children:[s.jsx("div",{className:"large-card-icon",children:G.icon}),s.jsx("div",{className:"large-card-name",children:G.name})]}),G.count>1&&s.jsx("div",{className:"card-count-badge",children:G.count})]},O))})]})]})})]}),s.jsx("div",{className:"scrollable-journey",children:s.jsx("div",{className:"journey-container",ref:oe,children:s.jsxs("div",{className:"journey-track",children:[s.jsx("div",{className:"curvy-road",children:s.jsxs("svg",{className:"road-svg",viewBox:"0 0 60 1500",preserveAspectRatio:"none",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"roadGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#5E5CE6"}),s.jsx("stop",{offset:"100%",stopColor:"#5E5CE6"})]})}),s.jsx("path",{className:"road-path",d:"M 30 0 Q 45 50, 30 100 T 30 200 Q 15 250, 30 300 T 30 400 Q 45 450, 30 500 T 30 600 Q 15 650, 30 700 T 30 800 Q 45 850, 30 900 T 30 1000 Q 15 1050, 30 1100 T 30 1200 Q 45 1250, 30 1300 T 30 1400 L 30 1500"}),s.jsx("path",{className:"road-progress",d:"M 30 0 Q 45 50, 30 100 T 30 200 Q 15 250, 30 300 T 30 400 Q 45 450, 30 500 T 30 600 Q 15 650, 30 700 T 30 800 Q 45 850, 30 900 T 30 1000 Q 15 1050, 30 1100 T 30 1200 Q 45 1250, 30 1300 T 30 1400 L 30 1500",strokeDasharray:"1500",strokeDashoffset:1500-c/(o.length-1)*1500})]})}),s.jsxs("div",{className:"avatar-tracker",style:{top:`${ie()}px`},children:[s.jsx("img",{className:"avatar-img",src:"/profile/avatar.png",alt:"You",onError:G=>{G.target.style.display="none"}}),s.jsx("div",{className:"tracker-vehicle",children:a[D].icon})]}),s.jsx("div",{className:"rewards-list",children:o.map((G,O)=>{const le=O%2===0,ue=O>c,pe=x.includes(O),we=O===c;return s.jsx("div",{className:"reward-row","data-index":O,style:{top:`${re(O)}px`},children:s.jsxs("div",{className:`reward-item ${le?"left":"right"}`,children:[s.jsxs("div",{className:`checkpoint ${we?"current":pe?"claimed":ue?"locked":""}`,onClick:()=>q(O,G),children:[s.jsx("div",{className:"checkpoint-icon",children:G.icon}),s.jsx("div",{className:"checkpoint-value",children:G.label.split(" ")[0]}),G.milestone&&s.jsx("div",{className:"milestone-badge",children:"BONUS"}),ue&&s.jsx("div",{className:"lock-icon",children:"🔒"})]}),s.jsxs("div",{className:"reward-info",children:[s.jsx("div",{className:"reward-name",children:G.label}),s.jsxs("div",{className:"step-label",children:["Step ",O+1]})]})]})},G.id)})})]})})}),$&&s.jsx("div",{className:"flying-card",style:{left:`${$.startX}px`,top:`${$.startY}px`,"--startX":`${$.startX}px`},children:$.icon}),s.jsx(Du,{children:te&&s.jsx("div",{className:"claim-overlay",onClick:()=>ne(null),children:s.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),children:[s.jsx("div",{className:"modal-icon",children:te.icon}),s.jsx("div",{className:"card-detail-name",children:te.name}),s.jsxs("div",{className:"card-detail-desc",children:["You have ",te.count," of these cards"]}),s.jsx("div",{className:"modal-buttons",children:s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:()=>ne(null),children:"Close"})})]})})}),s.jsx(Du,{children:A&&K&&s.jsx("div",{className:"claim-overlay",children:s.jsxs("div",{className:"modal",children:[s.jsx("div",{className:"modal-title",children:"WELL DONE!"}),s.jsx("div",{className:"modal-subtitle",children:"Here's a reward for you."}),s.jsx("div",{className:"modal-icon",children:K.icon}),s.jsxs("div",{className:"modal-value",children:["+",K.value," ",K.type==="coins"?"Coins":K.type==="life"?"Lives":K.label]})]})})}),s.jsx(Du,{children:T&&K&&s.jsx("div",{className:"claim-overlay",onClick:()=>X(!1),children:s.jsxs("div",{className:"modal",onClick:G=>G.stopPropagation(),children:[s.jsx("div",{className:"modal-icon",children:"🪙"}),s.jsx("div",{className:"modal-title",children:"Need More Coins"}),s.jsx("div",{className:"modal-subtitle",children:K.cost>0?`You need ${K.cost-d} more coins`:"Complete previous rewards first"}),s.jsxs("div",{className:"modal-buttons",children:[s.jsx("button",{className:"modal-btn modal-btn-primary",onClick:()=>r("/play"),children:"Play Quiz"}),s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:()=>X(!1),children:"Cancel"})]})]})})})]})},nl=[{id:1,name:"First Win",emoji:"🏆",unlocked:!0,hint:"Win your first quiz",progress:100,color:"#FFD700"},{id:2,name:"On Fire",emoji:"🔥",unlocked:!0,hint:"3-day winning streak",progress:100,color:"#FF6B35"},{id:3,name:"Perfectionist",emoji:"⭐",unlocked:!1,hint:"Score 10/10 in any quiz",progress:75,color:"#9333EA"},{id:4,name:"Early Bird",emoji:"🌅",unlocked:!0,hint:"Play before 9 AM",progress:100,color:"#F59E0B"},{id:5,name:"Scholar",emoji:"🎓",unlocked:!1,hint:"Master 5 categories",progress:40,color:"#3B82F6"},{id:6,name:"Lightning",emoji:"⚡",unlocked:!1,hint:"Complete in under 2 minutes",progress:20,color:"#10B981"},{id:7,name:"Champion",emoji:"👑",unlocked:!1,hint:"Win 50 quizzes",progress:30,color:"#EC4899"},{id:8,name:"Explorer",emoji:"🗺️",unlocked:!1,hint:"Try all categories",progress:60,color:"#06B6D4"},{id:9,name:"Strategist",emoji:"🧠",unlocked:!0,hint:"Use 3 power-ups wisely",progress:100,color:"#8B5CF6"}];function WN(){const[t,e]=h.useState(null),n=nl.filter(i=>i.unlocked).length,r=Math.round(n/nl.length*100);return s.jsxs("div",{className:"badges-screen",children:[s.jsx("style",{jsx:!0,children:`
        .badges-screen {
          min-height: 100vh;
          background: linear-gradient(180deg, #3d4491 0%, #6b63b5 50%, #8679c7 100%);
          color: white;
          padding: 20px;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
        }

        .header {
          margin-bottom: 24px;
          animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          background: rgba(255, 255, 255, 0.15);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 12px;
          color: white;
          font-size: 15px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          margin-bottom: 20px;
          margin-top: 12px;
        }

        .back-button:hover {
          background: rgba(255, 255, 255, 0.25);
          transform: translateX(-2px);
        }

        .title-section {
          text-align: center;
          margin-bottom: 32px;
        }

        .main-title {
          font-size: 36px;
          font-weight: 700;
          margin-bottom: 8px;
          background: linear-gradient(to right, #ffffff, #f0f0f0);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          letter-spacing: -0.5px;
        }

        .subtitle {
          font-size: 16px;
          color: rgba(255, 255, 255, 0.85);
          font-weight: 400;
        }

        .progress-card {
          background: rgba(255, 255, 255, 0.12);
          backdrop-filter: blur(40px);
          border-radius: 20px;
          padding: 20px;
          margin-bottom: 28px;
          border: 1px solid rgba(255, 255, 255, 0.18);
          animation: fadeInScale 0.6s ease-out 0.2s both;
        }

        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .progress-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }

        .progress-label {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.9);
          font-weight: 500;
        }

        .progress-value {
          font-size: 24px;
          font-weight: 700;
          background: linear-gradient(135deg, #FFD700, #FFA500);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }

        .progress-bar-container {
          width: 100%;
          height: 8px;
          background: rgba(255, 255, 255, 0.2);
          border-radius: 100px;
          overflow: hidden;
          position: relative;
        }

        .progress-bar-fill {
          height: 100%;
          background: linear-gradient(90deg, #FFD700, #FFA500);
          border-radius: 100px;
          transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
        }

        .progress-bar-fill::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
          animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
          from {
            transform: translateX(-100%);
          }
          to {
            transform: translateX(100%);
          }
        }

        .badges-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 12px;
          margin-bottom: 24px;
        }

        .badge-card {
          aspect-ratio: 1;
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(30px);
          border-radius: 20px;
          border: 1.5px solid rgba(255, 255, 255, 0.15);
          padding: 12px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
          animation: fadeInUp 0.5s ease-out both;
        }

        .badge-card:nth-child(1) { animation-delay: 0.1s; }
        .badge-card:nth-child(2) { animation-delay: 0.15s; }
        .badge-card:nth-child(3) { animation-delay: 0.2s; }
        .badge-card:nth-child(4) { animation-delay: 0.25s; }
        .badge-card:nth-child(5) { animation-delay: 0.3s; }
        .badge-card:nth-child(6) { animation-delay: 0.35s; }
        .badge-card:nth-child(7) { animation-delay: 0.4s; }
        .badge-card:nth-child(8) { animation-delay: 0.45s; }
        .badge-card:nth-child(9) { animation-delay: 0.5s; }

        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .badge-card.unlocked {
          background: rgba(255, 255, 255, 0.18);
          border-color: rgba(255, 255, 255, 0.3);
        }

        .badge-card:hover {
          transform: translateY(-4px) scale(1.05);
          box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
        }

        .badge-card.unlocked:hover {
          background: rgba(255, 255, 255, 0.22);
        }

        .badge-glow {
          position: absolute;
          top: -50%;
          left: -50%;
          right: -50%;
          bottom: -50%;
          background: radial-gradient(circle, var(--badge-color) 0%, transparent 70%);
          opacity: 0;
          transition: opacity 0.3s;
          pointer-events: none;
        }

        .badge-card.unlocked .badge-glow {
          opacity: 0.15;
        }

        .badge-emoji {
          font-size: 36px;
          margin-bottom: 6px;
          filter: grayscale(100%) opacity(0.5);
          transition: all 0.3s;
        }

        .badge-card.unlocked .badge-emoji {
          filter: none;
          animation: bounce 0.5s ease-out;
        }

        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-8px); }
        }

        .badge-name {
          font-size: 11px;
          font-weight: 600;
          text-align: center;
          line-height: 1.2;
          margin-bottom: 4px;
          color: rgba(255, 255, 255, 0.7);
        }

        .badge-card.unlocked .badge-name {
          color: white;
        }

        .badge-progress {
          width: 100%;
          height: 3px;
          background: rgba(255, 255, 255, 0.15);
          border-radius: 100px;
          overflow: hidden;
          margin-top: 4px;
        }

        .badge-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--badge-color), var(--badge-color));
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .lock-indicator {
          position: absolute;
          top: 8px;
          right: 8px;
          width: 20px;
          height: 20px;
          background: rgba(0, 0, 0, 0.4);
          backdrop-filter: blur(10px);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 10px;
        }

        .badge-modal {
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.8);
          backdrop-filter: blur(20px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
          animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }

        .modal-content {
          background: linear-gradient(135deg, rgba(45, 45, 65, 0.98), rgba(55, 55, 75, 0.95));
          border-radius: 24px;
          padding: 28px;
          max-width: 320px;
          width: 100%;
          text-align: center;
          animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }

        .modal-badge {
          font-size: 72px;
          margin-bottom: 16px;
          filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
        }

        .modal-badge.locked {
          filter: grayscale(100%) opacity(0.6);
        }

        .modal-title {
          font-size: 24px;
          font-weight: 700;
          color: #ffffff;
          margin-bottom: 8px;
        }

        .modal-status {
          display: inline-block;
          padding: 4px 12px;
          background: linear-gradient(135deg, #10B981, #059669);
          color: white;
          font-size: 11px;
          font-weight: 600;
          border-radius: 100px;
          margin-bottom: 12px;
        }

        .modal-status.locked {
          background: linear-gradient(135deg, #6B7280, #4B5563);
        }

        .modal-description {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.7);
          line-height: 1.5;
          margin-bottom: 16px;
        }

        .modal-progress-section {
          background: rgba(255, 255, 255, 0.08);
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 20px;
        }

        .modal-progress-label {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.5);
          margin-bottom: 8px;
        }

        .modal-progress-bar {
          width: 100%;
          height: 8px;
          background: rgba(255, 255, 255, 0.15);
          border-radius: 100px;
          overflow: hidden;
        }

        .modal-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--badge-color), var(--badge-color));
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-progress-text {
          font-size: 18px;
          font-weight: 700;
          color: #ffffff;
          margin-top: 8px;
        }

        .modal-close {
          padding: 12px 24px;
          background: linear-gradient(135deg, #667eea, #764ba2);
          color: white;
          border: none;
          border-radius: 12px;
          font-size: 15px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s;
          width: 100%;
        }

        .modal-close:hover {
          transform: scale(1.02);
          box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
        }

        .tips-card {
          background: rgba(255, 255, 255, 0.08);
          border: 1px solid rgba(255, 255, 255, 0.12);
          border-radius: 16px;
          padding: 16px;
          animation: fadeIn 0.8s ease-out 0.6s both;
        }

        .tips-title {
          font-size: 14px;
          font-weight: 600;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .tips-content {
          font-size: 13px;
          color: rgba(255, 255, 255, 0.8);
          line-height: 1.5;
        }
      `}),s.jsxs("div",{className:"header",children:[s.jsx("button",{className:"back-button",onClick:()=>window.history.back(),children:"← Back"}),s.jsxs("div",{className:"title-section",children:[s.jsx("h1",{className:"main-title",children:"Badge Collection"}),s.jsx("p",{className:"subtitle",children:"Unlock achievements and show your skills"})]})]}),s.jsxs("div",{className:"progress-card",children:[s.jsxs("div",{className:"progress-header",children:[s.jsx("span",{className:"progress-label",children:"Collection Progress"}),s.jsxs("span",{className:"progress-value",children:[n,"/",nl.length]})]}),s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${r}%`}})})]}),s.jsx("div",{className:"badges-grid",children:nl.map(i=>s.jsxs("div",{className:`badge-card ${i.unlocked?"unlocked":""}`,style:{"--badge-color":i.color},onClick:()=>e(i),children:[s.jsx("div",{className:"badge-glow"}),s.jsx("div",{className:"badge-emoji",children:i.emoji}),s.jsx("div",{className:"badge-name",children:i.name}),!i.unlocked&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"badge-progress",children:s.jsx("div",{className:"badge-progress-fill",style:{width:`${i.progress}%`}})}),s.jsx("div",{className:"lock-indicator",children:"🔒"})]})]},i.id))}),s.jsxs("div",{className:"tips-card",children:[s.jsxs("div",{className:"tips-title",children:[s.jsx("span",{children:"💡"}),s.jsx("span",{children:"Pro Tip"})]}),s.jsx("div",{className:"tips-content",children:"Complete daily challenges and maintain streaks to unlock rare badges faster. Each badge gives you bonus XP and special rewards!"})]}),t&&s.jsx("div",{className:"badge-modal",onClick:()=>e(null),children:s.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[s.jsx("div",{className:`modal-badge ${t.unlocked?"":"locked"}`,children:t.emoji}),s.jsx("h3",{className:"modal-title",children:t.name}),s.jsx("span",{className:`modal-status ${t.unlocked?"":"locked"}`,children:t.unlocked?"✓ Unlocked":"🔒 Locked"}),s.jsx("p",{className:"modal-description",children:t.hint}),!t.unlocked&&s.jsxs("div",{className:"modal-progress-section",children:[s.jsx("div",{className:"modal-progress-label",children:"Progress"}),s.jsx("div",{className:"modal-progress-bar",children:s.jsx("div",{className:"modal-progress-fill",style:{width:`${t.progress}%`,"--badge-color":t.color}})}),s.jsxs("div",{className:"modal-progress-text",children:[t.progress,"%"]})]}),s.jsx("button",{className:"modal-close",onClick:()=>e(null),children:t.unlocked?"Awesome!":"Keep Going!"})]})})]})}const YN=[{id:1,title:"Quiz Master",subtitle:"Play 10 quizzes",current:7,target:10,reward:150,claimed:!1,icon:"🎯",color:"#FF6B6B"},{id:2,title:"Coin Collector",subtitle:"Earn 2,000 coins",current:1240,target:2e3,reward:200,claimed:!1,icon:"💰",color:"#4ECDC4"},{id:3,title:"Winning Streak",subtitle:"Win 3 in a row",current:3,target:3,reward:100,claimed:!0,icon:"🔥",color:"#FFD93D"},{id:4,title:"Speed Demon",subtitle:"Complete 5 under 2min",current:2,target:5,reward:300,claimed:!1,icon:"⚡",color:"#A8E6CF"},{id:5,title:"Perfect Score",subtitle:"Get 100% accuracy",current:0,target:1,reward:250,claimed:!1,icon:"⭐",color:"#C7B8FF"}];function KN(){Ir();const[t,e]=h.useState(YN),[n,r]=h.useState(null),[i,o]=h.useState(xe.getCoins()),[a,c]=h.useState(!1),[u,d]=h.useState([]),f=t.length,g=t.filter(b=>b.current>=b.target).length,y=Math.round(g/f*100);h.useEffect(()=>{const b=setInterval(()=>{d(C=>{const P={id:Date.now(),x:Math.random()*100,y:Math.random()*100,size:Math.random()*20+10};return[...C.slice(-4),P]})},3e3);return()=>clearInterval(b)},[]);const N=(b,C)=>{r(b),navigator.vibrate&&navigator.vibrate([20,10,20]),setTimeout(()=>{var P;e(_=>_.map(j=>j.id===b?{...j,claimed:!0}:j)),o(_=>_+C),xe.addCoins(C,`Achievement: ${((P=t.find(_=>_.id===b))==null?void 0:P.title)||"Completed"}`),r(null),c(!0),setTimeout(()=>c(!1),2e3)},600)};return s.jsxs("div",{className:"achievements-screen",children:[s.jsx("style",{jsx:!0,children:`
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        html {
            scroll-behavior: smooth;
            }

        .achievements-screen {
          min-height: 100vh;
          background: linear-gradient(135deg, #1a1a2e 0%, #16213e 30%, #0f3460 100%);
          padding: 20px;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
          color: white;
          position: relative;
          overflow-x: hidden;
          scroll-behavior: smooth;  /* Add this line */
          -webkit-overflow-scrolling: touch;  /* Add this line for iOS */


        }

        .animated-background {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          overflow: hidden;
        }

        .sparkle {
          position: absolute;
          border-radius: 50%;
          background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
        //   animation: twinkle 3s ease-out forwards;
        }

        @keyframes twinkle {
          0% {
            transform: scale(0) rotate(0deg);
            opacity: 1;
          }
          50% {
            transform: scale(1) rotate(180deg);
            opacity: 0.8;
          }
          100% {
            transform: scale(0) rotate(360deg);
            opacity: 0;
          }
        }

        .floating-shapes {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
        }

        .shape {
          position: absolute;
          opacity: 0.05;
        //   animation: float 20s infinite ease-in-out;
        }

        .shape-1 {
          width: 300px;
          height: 300px;
          background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
          border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
          top: -150px;
          right: -100px;
          animation-delay: 0s;
        }

        .shape-2 {
          width: 200px;
          height: 200px;
          background: linear-gradient(135deg, #FFD93D, #A8E6CF);
          border-radius: 70% 30% 30% 70% / 70% 70% 30% 30%;
          bottom: -100px;
          left: -50px;
          animation-delay: 5s;
        }

        @keyframes float {
          0%, 100% { transform: translate(0, 0) rotate(0deg); }
          33% { transform: translate(30px, -30px) rotate(120deg); }
          66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .header {
          position: relative;
          z-index: 10;
          margin-bottom: 24px;
          animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.15);
          border-radius: 12px;
          color: white;
          font-size: 15px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          margin-top: 15px;  /* Add this line */
          margin-bottom: 20px;
        }

        .back-button:hover {
          background: rgba(255, 255, 255, 0.15);
          transform: translateX(-2px);
        }

        .title-section {
          text-align: center;
          margin-bottom: 24px;
        }

        .main-title {
          font-size: 42px;
          font-weight: 800;
          margin-bottom: 8px;
          background: linear-gradient(135deg, #FFD93D, #FF6B6B, #4ECDC4);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          text-shadow: 0 0 30px rgba(255, 217, 61, 0.3);
        //   animation: glow 3s ease-in-out infinite;
        }

        @keyframes glow {
          0%, 100% { filter: brightness(1); }
          50% { filter: brightness(1.2); }
        }

        .subtitle {
          font-size: 16px;
          color: rgba(255, 255, 255, 0.8);
        }

        .coins-display {
          position: absolute;
          top: 20px;
          right: 20px;
          background: linear-gradient(135deg, #FFD93D, #FFA500);
          padding: 10px 18px;
          border-radius: 25px;
          display: flex;
          align-items: center;
          gap: 8px;
          font-weight: 700;
          font-size: 20px;
          color: #1a1a1a;
          box-shadow: 0 4px 15px rgba(255, 217, 61, 0.4);
        //   animation: float-coin 3s ease-in-out infinite;
        }

        @keyframes float-coin {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }

        .progress-overview {
          background: linear-gradient(135deg, rgba(78, 205, 196, 0.15), rgba(255, 107, 107, 0.15));
          backdrop-filter: blur(20px);
          border-radius: 24px;
          padding: 24px;
          margin-bottom: 28px;
          border: 2px solid rgba(255, 255, 255, 0.1);
          animation: fadeInScale 0.6s ease-out 0.2s both;
          position: relative;
          overflow: hidden;
        }

        // .progress-overview::before {
        //   content: '';
        //   position: absolute;
        //   top: -2px;
        //   left: -2px;
        //   right: -2px;
        //   bottom: -2px;
        //   background: linear-gradient(45deg, #FFD93D, #FF6B6B, #4ECDC4, #FFD93D);
        //   border-radius: 24px;
        //   opacity: 0.5;
        //   z-index: -1;
        //   animation: rotate-border 3s linear infinite;
        // }

        @keyframes rotate-border {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .overview-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }

        .overview-label {
          font-size: 16px;
          color: white;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 1px;
        }

        .overview-stats {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .trophy-icon {
          font-size: 32px;
          filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        //   animation: bounce-trophy 2s ease-in-out infinite;
        }

        @keyframes bounce-trophy {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          25% { transform: translateY(-3px) rotate(-5deg); }
          75% { transform: translateY(-3px) rotate(5deg); }
        }

        .overview-value {
          font-size: 28px;
          font-weight: 800;
          color: #FFD93D;
          text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .progress-bar-main {
          width: 100%;
          height: 16px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 100px;
          overflow: hidden;
          position: relative;
          box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .progress-fill-main {
          height: 100%;
          background: linear-gradient(90deg, #FFD93D, #FF6B6B, #4ECDC4);
          border-radius: 100px;
          transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
          box-shadow: 0 2px 8px rgba(255, 217, 61, 0.4);
        }

        .progress-fill-main::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
        //   animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
          from { transform: translateX(-100%); }
          to { transform: translateX(100%); }
        }

        .achievements-list {
          display: flex;
          flex-direction: column;
          gap: 16px;
          position: relative;
          z-index: 10;
        }

        .achievement-card {
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
        //   backdrop-filter: blur(20px);
          border-radius: 24px;
          padding: 20px;
          position: relative;
          overflow: hidden;
          animation: slideUp 0.5s ease-out both;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          border: 2px solid rgba(255, 255, 255, 0.1);
          will-change: transform;        /* ADD THIS LINE */
          transform: translateZ(0);       /* ADD THIS LINE */

        }

        .achievement-card:nth-child(1) { animation-delay: 0.1s; }
        .achievement-card:nth-child(2) { animation-delay: 0.2s; }
        .achievement-card:nth-child(3) { animation-delay: 0.3s; }
        .achievement-card:nth-child(4) { animation-delay: 0.4s; }
        .achievement-card:nth-child(5) { animation-delay: 0.5s; }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .achievement-card:hover {
          transform: translateY(-4px) scale(1.02);
          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
          border-color: var(--card-color);
        }

        .achievement-card.completed {
          background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
          border-color: rgba(255, 217, 61, 0.3);
        }

        .card-glow {
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: radial-gradient(circle, var(--card-color) 0%, transparent 70%);
          opacity: 0.1;
          animation: pulse-glow 3s ease-in-out infinite;
        }

        @keyframes pulse-glow {
          0%, 100% { opacity: 0.05; }
          50% { opacity: 0.15; }
        }

        .card-content {
          display: flex;
          align-items: center;
          gap: 16px;
          position: relative;
        }

        .achievement-icon {
          width: 72px;
          height: 72px;
          background: linear-gradient(135deg, var(--card-color), var(--card-color-dark));
          border-radius: 20px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 36px;
          flex-shrink: 0;
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
          position: relative;
        //   animation: icon-float 3s ease-in-out infinite;
        }

        @keyframes icon-float {
          0%, 100% { transform: translateY(0) rotate(0deg); }
          50% { transform: translateY(-5px) rotate(5deg); }
        }

        .achievement-icon::after {
          content: '';
          position: absolute;
          inset: -2px;
          background: linear-gradient(45deg, var(--card-color), transparent, var(--card-color));
          border-radius: 20px;
          opacity: 0.5;
          z-index: -1;
        //   animation: rotate-border 2s linear infinite;
        }

        .achievement-details {
          flex: 1;
          min-width: 0;
        }

        .achievement-title {
          font-size: 18px;
          font-weight: 800;
          color: white;
          margin-bottom: 4px;
          text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .achievement-subtitle {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.7);
          margin-bottom: 12px;
        }

        .progress-container {
          position: relative;
        }

        .progress-bar {
          width: 100%;
          height: 12px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 100px;
          overflow: hidden;
          box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }

        .progress-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--card-color), var(--card-color-dark));
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 2px 8px var(--card-color);
          position: relative;
        }

        .progress-fill::after {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
          animation: shimmer 2s infinite;
        }

        .progress-text {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.8);
          margin-top: 6px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .reward-badge {
          display: inline-flex;
          align-items: center;
          gap: 4px;
          padding: 4px 10px;
          background: linear-gradient(135deg, #FFD93D, #FFA500);
          color: #1a1a1a;
          border-radius: 100px;
          font-size: 12px;
          font-weight: 700;
          box-shadow: 0 2px 8px rgba(255, 217, 61, 0.3);
        //   animation: pulse-reward 2s ease-in-out infinite;
        }

        @keyframes pulse-reward {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.05); }
        }

        .claim-button {
          padding: 12px 24px;
          border-radius: 16px;
          font-size: 15px;
          font-weight: 700;
          border: none;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          min-width: 110px;
          position: relative;
          overflow: hidden;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .claim-button.can-claim {
          background: linear-gradient(135deg, #10B981, #059669);
          color: white;
          box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        //   animation: pulse-button 2s ease-in-out infinite;
        }

        @keyframes pulse-button {
          0%, 100% { 
            transform: scale(1);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
          }
          50% { 
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
          }
        }

        .claim-button.can-claim:hover {
          transform: scale(1.08) rotate(-2deg);
          box-shadow: 0 8px 30px rgba(16, 185, 129, 0.5);
        }

        .claim-button.can-claim::before {
          content: '';
          position: absolute;
          top: -50%;
          left: -50%;
          width: 200%;
          height: 200%;
          background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
          transform: rotate(45deg);
          animation: shine 3s infinite;
        }

        @keyframes shine {
          0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
          100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .claim-button.claimed {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.5);
          cursor: not-allowed;
        }

        .claim-button.in-progress {
          background: rgba(255, 255, 255, 0.05);
          color: rgba(255, 255, 255, 0.4);
          cursor: not-allowed;
          border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .claim-button.claiming {
          animation: bounceScale 0.6s ease;
        }

        @keyframes bounceScale {
          0%, 100% { transform: scale(1); }
          30% { transform: scale(0.9); }
          60% { transform: scale(1.15); }
        }

        .celebration {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 120px;
          z-index: 1000;
          pointer-events: none;
          animation: celebrate 2s ease-out forwards;
        }

        @keyframes celebrate {
          0% {
            transform: translate(-50%, -50%) scale(0) rotate(0deg);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.2) rotate(180deg);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) scale(0.8) rotate(360deg);
            opacity: 0;
          }
        }

        .completed-badge {
          position: absolute;
          top: 10px;
          right: 10px;
          width: 32px;
          height: 32px;
          background: linear-gradient(135deg, #FFD93D, #FFA500);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 18px;
          color: #1a1a1a;
          font-weight: bold;
          box-shadow: 0 4px 12px rgba(255, 217, 61, 0.4);
          animation: pop-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes pop-in {
          0% { transform: scale(0) rotate(0deg); }
          50% { transform: scale(1.2) rotate(180deg); }
          100% { transform: scale(1) rotate(360deg); }
        }
      `}),s.jsxs("div",{className:"floating-shapes",children:[s.jsx("div",{className:"shape shape-1"}),s.jsx("div",{className:"shape shape-2"})]}),s.jsxs("div",{className:"header",children:[s.jsx("button",{className:"back-button",onClick:()=>window.history.back(),children:"← Back"}),s.jsxs("div",{className:"coins-display",children:["🪙 ",i.toLocaleString()]}),s.jsxs("div",{className:"title-section",children:[s.jsx("h1",{className:"main-title",children:"ACHIEVEMENTS"}),s.jsx("p",{className:"subtitle",children:"Complete challenges and earn awesome rewards!"})]})]}),s.jsxs("div",{className:"progress-overview",children:[s.jsx("div",{className:"card-glow",style:{"--card-color":"#FFD93D"}}),s.jsxs("div",{className:"overview-header",children:[s.jsx("span",{className:"overview-label",children:"🎮 Progress Tracker"}),s.jsxs("div",{className:"overview-stats",children:[s.jsx("span",{className:"trophy-icon",children:"🏆"}),s.jsxs("span",{className:"overview-value",children:[g,"/",f]})]})]}),s.jsx("div",{className:"progress-bar-main",children:s.jsx("div",{className:"progress-fill-main",style:{width:`${y}%`}})})]}),s.jsx("div",{className:"achievements-list",children:t.map(b=>{const C=Math.min(100,Math.round(b.current/b.target*100)),P=C===100,_=b.color+"CC";return s.jsxs("div",{className:`achievement-card ${P?"completed":""}`,style:{"--card-color":b.color,"--card-color-dark":_},children:[s.jsx("div",{className:"card-glow"}),P&&b.claimed&&s.jsx("div",{className:"completed-badge",children:"✓"}),s.jsxs("div",{className:"card-content",children:[s.jsx("div",{className:"achievement-icon",children:b.icon}),s.jsxs("div",{className:"achievement-details",children:[s.jsx("div",{className:"achievement-title",children:b.title}),s.jsx("div",{className:"achievement-subtitle",children:b.subtitle}),s.jsxs("div",{className:"progress-container",children:[s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill",style:{width:`${C}%`}})}),s.jsxs("div",{className:"progress-text",children:[s.jsxs("span",{children:[b.current,"/",b.target]}),s.jsxs("span",{className:"reward-badge",children:["🪙 ",b.reward]})]})]})]}),s.jsx("button",{onClick:()=>N(b.id,b.reward),disabled:!P||b.claimed,className:`claim-button ${b.claimed?"claimed":P?"can-claim":"in-progress"} ${n===b.id?"claiming":""}`,children:b.claimed?"✓":P?"CLAIM!":`${C}%`})]})]},b.id)})}),a&&s.jsx("div",{className:"celebration",children:"🎉"})]})}function XN(){const{player:t,updateDailyStreak:e}=Ir(),n=(t==null?void 0:t.currentStreak)||0,r=(t==null?void 0:t.bestStreak)||0,i=(t==null?void 0:t.totalDays)||0;t!=null&&t.coins;const o=Ge(),a=new Date,c=a.getDay(),u=()=>{const F=new Date(a);return F.setDate(a.getDate()-a.getDay()),F.toISOString().split("T")[0]},[d,f]=h.useState(null),[g,y]=h.useState(!1),[N,b]=h.useState(null),[C,P]=h.useState(null),[_,j]=h.useState(!1),S=h.useRef(null),I=h.useRef(null),[D]=Rt("/sounds/coin.mp3",{volume:.75}),[M]=Rt("/sounds/correct.mp3",{volume:.6}),[k,m]=h.useState(()=>{const F=localStorage.getItem("streaks_claimed")||"[]",B=JSON.parse(F),$=u(),L=B.filter(z=>z!==`week_${$}_day_0`);return localStorage.setItem("streaks_claimed",JSON.stringify(L)),L});h.useEffect(()=>{const F=()=>{window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0;const $=document.querySelector("main");$&&($.scrollTop=0)};F(),requestAnimationFrame(F);const B=setTimeout(F,100);return()=>clearTimeout(B)},[]),h.useEffect(()=>{j(!0),setTimeout(()=>j(!1),3e3)},[]);const x=[{label:"Mon",short:"M",dayIndex:1},{label:"Tue",short:"T",dayIndex:2},{label:"Wed",short:"W",dayIndex:3},{label:"Thu",short:"T",dayIndex:4},{label:"Fri",short:"F",dayIndex:5},{label:"Sat",short:"S",dayIndex:6},{label:"Sun",short:"S",dayIndex:0}],w=[{day:0,reward:"10",type:"coins",icon:"🎯",label:"Welcome Bonus"},{day:1,reward:"50",type:"coins",icon:"🪙",label:"50 Coins"},{day:2,reward:"100",type:"coins",icon:"🪙",label:"100 Coins"},{day:3,reward:"2x",type:"xp",icon:"⭐",label:"2x XP Boost"},{day:4,reward:"150",type:"coins",icon:"🪙",label:"150 Coins"},{day:5,reward:"Full",type:"energy",icon:"⚡",label:"Energy Refill"},{day:6,reward:"200",type:"coins",icon:"🪙",label:"200 Coins"},{day:7,reward:"Mystery",type:"mystery",icon:"🎁",label:"Mystery Box"}],A=F=>{const B=k.includes(`week_${u()}_day_${F}`);if(F===0)return{isCompleted:!0,isClaimed:B,canClaim:!B,isLocked:!1};const $=n>=F,L=$&&!B,z=n<F;return{isCompleted:$,isClaimed:B,canClaim:L,isLocked:z}},E=(F,B,$)=>{const L=A(B);if(L.isLocked){P({day:B,currentStreak:n}),setTimeout(()=>P(null),2e3);return}L.isClaimed||L.canClaim&&(f({...F,day:B}),y(!1),setTimeout(()=>{y(!0),M(),setTimeout(()=>{if(F.type==="coins"){const Z=parseInt(F.reward);if(I.current&&S.current){const H=I.current.getBoundingClientRect();D(),b({startRect:H,count:10,amount:Z})}}const z=`week_${u()}_day_${B}`,Q=[...k,z];m(Q),localStorage.setItem("streaks_claimed",JSON.stringify(Q))},500),setTimeout(()=>{f(null),y(!1)},2500)},500))},T=(F,B)=>{if(x[B].dayIndex===c)return n>0?"today-completed":"today-pending";if(B<x.findIndex(L=>L.dayIndex===c)){const L=x.findIndex(z=>z.dayIndex===c)-B;return n>=L?"completed":"missed"}else return"future"},X=[{days:3,emoji:"⚡",label:"Starter",achieved:n>=3},{days:7,emoji:"🔥",label:"Week Warrior",achieved:n>=7},{days:30,emoji:"💎",label:"Champion",achieved:n>=30},{days:100,emoji:"👑",label:"Legend",achieved:n>=100}],te=X.find(F=>F.days>n)||X[X.length-1],ne=Math.min(100,n/te.days*100),K=()=>{window.location.href="/play"},U=()=>{o(-1)};return s.jsxs("div",{className:"streaks-screen",children:[s.jsx("style",{jsx:!0,children:`
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        .streaks-screen {
        min-height: 100vh;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        padding: 32px 16px 16px 16px;  /* Increased top padding from 16px to 32px */
        font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        color: white;
        position: relative;
        overflow-x: hidden;
        max-width: 100vw;
        }

        .header {
          position: relative;
          z-index: 10;
          margin-bottom: 24px;
        }

        .header-top {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.15);
          border-radius: 12px;
          color: white;
          font-size: 15px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
        }

        .back-button:hover {
          background: rgba(255, 255, 255, 0.15);
          transform: translateX(-2px);
        }

        .coin-pill {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 8px 16px;
          background: linear-gradient(135deg, rgba(255, 217, 61, 0.2), rgba(255, 165, 0, 0.2));
          border: 1px solid rgba(255, 217, 61, 0.3);
          border-radius: 20px;
          font-weight: 600;
          position: relative;
        }

        .coin-icon {
          font-size: 18px;
        }

        .coin-amount {
          font-size: 16px;
          color: #FFD93D;
        }

        .title-section {
          text-align: center;
          margin-bottom: 24px;
        }

        .main-title {
          font-size: 36px;
          font-weight: 800;
          margin-bottom: 6px;
          background: linear-gradient(135deg, #FFD93D, #FF6B6B);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }

        .subtitle {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.7);
        }

        .streak-hero {
          background: rgba(255, 255, 255, 0.08);
          border-radius: 20px;
          padding: 24px;
          margin-bottom: 20px;
          text-align: center;
          position: relative;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .fire-animation {
          font-size: 64px;
          margin-bottom: 12px;
          display: inline-block;
          animation: flame 2s ease-in-out infinite;
        }

        @keyframes flame {
          0%, 100% { 
            transform: scale(1) rotate(0deg);
            filter: brightness(1);
          }
          25% { 
            transform: scale(1.05) rotate(-3deg);
            filter: brightness(1.1);
          }
          50% { 
            transform: scale(1.1) rotate(3deg);
            filter: brightness(1.2);
          }
          75% { 
            transform: scale(1.05) rotate(-3deg);
            filter: brightness(1.1);
          }
        }

        .streak-number {
          font-size: 56px;
          font-weight: 900;
          line-height: 1;
          margin-bottom: 6px;
          background: linear-gradient(135deg, #FFD93D, #FFA500);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }

        .streak-label {
          font-size: 20px;
          font-weight: 600;
          color: rgba(255, 255, 255, 0.9);
          margin-bottom: 20px;
        }

        .stats-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
          margin-top: 20px;
        }

        .stat-card {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 14px;
          padding: 12px;
          text-align: center;
          border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .stat-value {
          font-size: 24px;
          font-weight: 700;
          color: #4ECDC4;
          margin-bottom: 2px;
        }

        .stat-label {
          font-size: 11px;
          color: rgba(255, 255, 255, 0.6);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .weekly-progress-card {
          background: linear-gradient(135deg, rgba(255, 107, 107, 0.15), rgba(255, 217, 61, 0.15));
          border-radius: 20px;
          padding: 20px;
          margin-bottom: 20px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .weekly-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 16px;
        }

        .weekly-title {
          font-size: 16px;
          font-weight: 700;
          color: white;
        }

        .weekly-counter {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 4px 10px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 20px;
        }

        .weekly-counter-icon {
          font-size: 16px;
        }

        .weekly-counter-text {
          font-size: 14px;
          font-weight: 600;
        }

        .weekly-days {
          display: grid;
          grid-template-columns: repeat(7, 1fr);
          gap: 6px;
          margin-bottom: 20px;
        }

        .day-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 6px;
        }

        .day-circle {
          width: 42px;
          height: 42px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 700;
          font-size: 14px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
        }

        .day-circle.completed {
          background: linear-gradient(135deg, #10B981, #059669);
          color: white;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .day-circle.today-completed {
          background: linear-gradient(135deg, #34D399, #10B981);
          color: white;
          box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.3);
          animation: pulse 2s ease-in-out infinite;
        }

        .day-circle.today-pending {
          background: linear-gradient(135deg, #FBBF24, #F59E0B);
          color: white;
          box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.3);
          animation: pulse 2s ease-in-out infinite;
        }

        .day-circle.pending {
          background: rgba(255, 255, 255, 0.08);
          border: 1px solid rgba(255, 255, 255, 0.2);
          color: rgba(255, 255, 255, 0.5);
        }

        .day-circle.future {
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.3);
        }
        .day-circle.missed {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            opacity: 0.8;
            }

        .day-circle.missed::after {
            content: '✗';
            position: absolute;
            font-size: 18px;
            color: white;
            }

        .day-circle.completed::after,
        .day-circle.today-completed::after {
          content: '✓';
          position: absolute;
          font-size: 18px;
          color: white;
        }

        @keyframes pulse {
          0%, 100% {
            box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.3);
          }
          50% {
            box-shadow: 0 0 0 6px rgba(52, 211, 153, 0.1);
          }
        }

        .day-label {
          font-size: 10px;
          color: rgba(255, 255, 255, 0.5);
          text-transform: uppercase;
        }

        .day-label.today {
          color: #34D399;
          font-weight: 600;
        }

        .rewards-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(95px, 1fr));
          gap: 8px;
        }

        .reward-item {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          padding: 10px;
          text-align: center;
          border: 1px solid rgba(255, 255, 255, 0.1);
          transition: all 0.3s;
          cursor: pointer;
          position: relative;
          overflow: hidden;
        }

        .reward-item.completed {
          background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2));
          border-color: rgba(16, 185, 129, 0.3);
        }

        .reward-item.can-claim {
          background: linear-gradient(135deg, rgba(255, 217, 61, 0.2), rgba(255, 165, 0, 0.2));
          border-color: rgba(255, 217, 61, 0.5);
          animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
          0%, 100% {
            box-shadow: 0 0 10px rgba(255, 217, 61, 0.3);
          }
          50% {
            box-shadow: 0 0 20px rgba(255, 217, 61, 0.5);
          }
        }

        .reward-item.locked {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .reward-item.locked::before {
          content: '🔒';
          position: absolute;
          top: 5px;
          right: 5px;
          font-size: 12px;
        }

        .reward-day {
          font-size: 10px;
          color: rgba(255, 255, 255, 0.5);
          margin-bottom: 4px;
        }

        .reward-icon {
          font-size: 24px;
          margin-bottom: 4px;
        }

        .reward-text {
          font-size: 11px;
          color: rgba(255, 255, 255, 0.8);
          font-weight: 600;
        }

        .reward-modal {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          z-index: 1000;
        }

        .gift-box {
          width: 200px;
          height: 200px;
          position: relative;
          animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }

        .gift-box-body {
          width: 100%;
          height: 150px;
          background: linear-gradient(135deg, #FFD700, #FFA500);
          border-radius: 20px;
          position: absolute;
          bottom: 0;
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .gift-box-lid {
          width: 110%;
          height: 60px;
          background: linear-gradient(135deg, #FF6B6B, #FF1493);
          border-radius: 15px;
          position: absolute;
          top: 40px;
          left: -5%;
          transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          transform-origin: bottom left;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .gift-box-lid.opening {
          transform: rotate(-45deg) translateY(-50px);
        }

        .gift-box-ribbon {
          position: absolute;
          width: 30px;
          height: 100%;
          background: linear-gradient(135deg, #9370DB, #4169E1);
          left: 50%;
          transform: translateX(-50%);
          border-radius: 5px;
        }

        .gift-box-ribbon-horizontal {
          position: absolute;
          width: 100%;
          height: 30px;
          background: linear-gradient(135deg, #9370DB, #4169E1);
          top: 50%;
          transform: translateY(-50%);
          border-radius: 5px;
        }

        .gift-box-bow {
          position: absolute;
          top: 30px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 40px;
        }

        .gift-content {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          text-align: center;
          opacity: 0;
          transition: opacity 0.5s ease;
        }

        .gift-content.show {
          opacity: 1;
        }

        .gift-content-icon {
          font-size: 64px;
          margin-bottom: 16px;
          animation: bounce 1s ease-in-out infinite;
        }

        @keyframes bounce {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-10px);
          }
        }

        .gift-content-title {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 4px;
        color: #1a1a2e;  /* Dark color for contrast */
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .gift-content-desc {
        font-size: 14px;
        color: #16213e;  /* Dark color for contrast */
        font-weight: 600;
        }

        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.6);
          z-index: 999;
        }

        .locked-message {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          background: rgba(0, 0, 0, 0.9);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 12px;
          padding: 16px 24px;
          z-index: 1001;
          animation: messageFade 2s ease-out forwards;
        }

        @keyframes messageFade {
          0% {
            opacity: 0;
            transform: translate(-50%, -60%);
          }
          20% {
            opacity: 1;
            transform: translate(-50%, -50%);
          }
          80% {
            opacity: 1;
            transform: translate(-50%, -50%);
          }
          100% {
            opacity: 0;
            transform: translate(-50%, -40%);
          }
        }

        .locked-message-icon {
          font-size: 20px;
          margin-right: 8px;
          display: inline-block;
        }

        .locked-message-text {
          font-size: 14px;
          color: rgba(255, 255, 255, 0.9);
          display: inline-block;
        }

        .milestone-section {
          margin-bottom: 20px;
        }

        .milestone-header {
          font-size: 14px;
          font-weight: 600;
          color: rgba(255, 255, 255, 0.8);
          margin-bottom: 12px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .milestone-progress {
          background: rgba(255, 255, 255, 0.08);
          border-radius: 16px;
          padding: 16px;
          border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .milestone-info {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }

        .milestone-current {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .milestone-emoji {
          font-size: 24px;
        }

        .milestone-text {
          font-size: 14px;
          font-weight: 600;
        }

        .milestone-target {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.6);
        }

        .progress-bar-container {
          width: 100%;
          height: 10px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 100px;
          overflow: hidden;
        }

        .progress-bar-fill {
          height: 100%;
          background: linear-gradient(90deg, #FFD93D, #FF6B6B);
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 2px 8px rgba(255, 217, 61, 0.3);
        }

        .play-button {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #10B981, #059669);
          color: white;
          border: none;
          border-radius: 16px;
          font-size: 16px;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          margin-bottom: 20px;
        }

        .play-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .motivational-text {
          text-align: center;
          margin: 16px 0;
          padding: 12px;
          background: rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          font-size: 13px;
          color: rgba(255, 255, 255, 0.8);
          font-style: italic;
        }

        .celebration {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 120px;
          z-index: 1000;
          pointer-events: none;
          animation: celebrate 3s ease-out forwards;
        }

        @keyframes celebrate {
          0% {
            transform: translate(-50%, -50%) scale(0) rotate(0deg);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.2) rotate(180deg);
            opacity: 1;
          }
          100% {
            transform: translate(-50%, -50%) scale(0.8) rotate(360deg);
            opacity: 0;
          }
        }
      `}),N&&s.jsx(as,{startRect:N.startRect,targetRef:S,count:N.count,onDone:()=>{xe.addCoins(N.amount,`Streak Reward - Day ${N.day||""}`),b(null)}}),s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"header-top",children:[s.jsx("button",{className:"back-button",onClick:U,children:"← Back"}),s.jsxs("div",{className:"coin-pill",ref:S,id:"coin-pill",children:[s.jsx("span",{className:"coin-icon",children:"🪙"}),s.jsx("span",{className:"coin-amount",children:xe.getCoins()})]})]}),s.jsxs("div",{className:"title-section",children:[s.jsx("h1",{className:"main-title",children:"STREAKS"}),s.jsx("p",{className:"subtitle",children:"Keep the fire burning!"})]})]}),s.jsxs("div",{className:"streak-hero",children:[s.jsx("div",{className:"fire-animation",children:"🔥"}),s.jsx("div",{className:"streak-number",children:n}),s.jsx("div",{className:"streak-label",children:"DAY STREAK"}),s.jsxs("div",{className:"stats-row",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-value",children:r}),s.jsx("div",{className:"stat-label",children:"Best Streak"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-value",children:i}),s.jsx("div",{className:"stat-label",children:"Total Days"})]})]})]}),s.jsxs("div",{className:"weekly-progress-card",children:[s.jsxs("div",{className:"weekly-header",children:[s.jsx("div",{className:"weekly-title",children:"This Week's Progress"}),s.jsxs("div",{className:"weekly-counter",children:[s.jsx("span",{className:"weekly-counter-icon",children:"🔥"}),s.jsxs("span",{className:"weekly-counter-text",children:[Math.min(n,7),"/7"]})]})]}),s.jsx("div",{className:"weekly-days",children:x.map((F,B)=>{const $=T(F.dayIndex,B),L=F.dayIndex===c;return s.jsxs("div",{className:"day-item",children:[s.jsx("div",{className:`day-circle ${$}`,children:$==="completed"||$==="today-completed"?"":F.short}),s.jsx("div",{className:`day-label ${L?"today":""}`,children:F.label})]},B)})}),s.jsx("div",{className:"milestone-header",children:"Daily Rewards"}),s.jsx("div",{className:"rewards-grid",children:w.map((F,B)=>{const $=A(F.day);return s.jsxs("div",{className:`reward-item ${$.isLocked?"locked":$.canClaim?"can-claim":$.isClaimed?"completed":""}`,onClick:L=>E(F,F.day),children:[s.jsxs("div",{className:"reward-day",children:["Day ",F.day]}),s.jsx("div",{className:"reward-icon",children:F.icon}),s.jsx("div",{className:"reward-text",children:F.label})]},B)})})]}),s.jsxs("div",{className:"milestone-section",children:[s.jsx("div",{className:"milestone-header",children:"Next Milestone"}),s.jsxs("div",{className:"milestone-progress",children:[s.jsxs("div",{className:"milestone-info",children:[s.jsxs("div",{className:"milestone-current",children:[s.jsx("span",{className:"milestone-emoji",children:te.emoji}),s.jsx("span",{className:"milestone-text",children:te.label})]}),s.jsxs("span",{className:"milestone-target",children:[n,"/",te.days," days"]})]}),s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${ne}%`}})})]})]}),s.jsx("div",{className:"motivational-text",children:n===0?"Start your journey! Claim your Day 0 bonus and complete a quiz!":`Day ${n} strong! Keep going to unlock more rewards!`}),s.jsxs("button",{className:"play-button",onClick:K,children:[s.jsx("span",{children:"Continue Streak"}),s.jsx("span",{children:"→"})]}),C&&s.jsxs("div",{className:"locked-message",children:[s.jsx("span",{className:"locked-message-icon",children:"🔒"}),s.jsx("span",{className:"locked-message-text",children:C.day===1&&C.currentStreak===0?"Complete your first quiz to unlock this reward!":`Reach Day ${C.day} streak to unlock this reward!`})]}),d&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"modal-overlay"}),s.jsx("div",{className:"reward-modal",ref:I,children:s.jsxs("div",{className:"gift-box",children:[s.jsxs("div",{className:"gift-box-body",children:[s.jsx("div",{className:"gift-box-ribbon"}),s.jsx("div",{className:"gift-box-ribbon-horizontal"})]}),s.jsx("div",{className:`gift-box-lid ${g?"opening":""}`,children:s.jsx("div",{className:"gift-box-bow",children:"🎀"})}),s.jsxs("div",{className:`gift-content ${g?"show":""}`,children:[s.jsx("div",{className:"gift-content-icon",children:d.icon}),s.jsxs("div",{className:"gift-content-title",children:["Day ",d.day]}),s.jsx("div",{className:"gift-content-desc",children:d.label})]})]})})]}),_&&s.jsx("div",{className:"celebration",children:"🎉"})]})}const JN=()=>{const t=new Date;return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`},Vd=()=>{const t=localStorage.getItem("questProgress");return t?JSON.parse(t):{}},n0=(t,e)=>{const n=Vd();n[t]=e,n.date=JN(),localStorage.setItem("questProgress",JSON.stringify(n))};function ZN(){const{player:t}=Ir(),e=Ge(),n=Ct(),r=Vd(),[i,o]=h.useState([{id:1,title:"Play 3 quizzes today",progress:r.dailyQuizzes||0,target:3,reward:60,claimed:r.dailyQuizzesClaimed||!1,icon:"🎮",color:"#FF6B6B",difficulty:"Easy",questType:"dailyQuizzes",route:"/quiz/play",routeParams:"?category=random&difficulty=random&from=quest"},{id:3,title:"Practice 15 questions",progress:r.practiceQuestions||0,target:15,reward:100,claimed:r.practiceQuestionsClaimed||!1,icon:"📚",color:"#FFD93D",difficulty:"Easy",questType:"practiceQuestions",route:"/practice/start",routeParams:"?questions=15&difficulty=easy&category=random&from=quest"},{id:4,title:"Win 5 in a row",progress:r.winStreak||0,target:5,reward:150,claimed:r.winStreakClaimed||!1,icon:"🔥",color:"#A8E6CF",difficulty:"Hard",questType:"winStreak",route:"/play",routeParams:"?mode=survival&from=quest"},{id:5,title:"Complete a speed run",progress:r.speedRun||0,target:1,reward:120,claimed:r.speedRunClaimed||!1,icon:"⚡",color:"#C7B8FF",difficulty:"Medium",questType:"speedRun",route:"/swipe/random-mix",routeParams:"?from=quest"}]),[a,c]=h.useState(xe.getCoins()),[u,d]=h.useState(null),[f,g]=h.useState(0),y=h.useRef(null),[N,b]=h.useState(null);h.useEffect(()=>{const I=()=>{const M=Vd();o(k=>k.map(m=>{const x=m.questType;return M[x]!==void 0?{...m,progress:M[x]}:m}))};window.addEventListener("storage",I);const D=()=>I();return window.addEventListener("focus",D),()=>{window.removeEventListener("storage",I),window.removeEventListener("focus",D)}},[]),h.useEffect(()=>{const I=M=>{console.log("Quest progress update received:",M.detail),o(k=>k.map(m=>m.questType==="practiceQuestions"&&M.detail.practiceQuestions?{...m,progress:M.detail.practiceQuestions}:m))};window.addEventListener("questProgressUpdate",I);const D=setInterval(()=>{try{const M=localStorage.getItem("questProgress");if(M){const k=JSON.parse(M);o(m=>m.map(x=>x.questType==="practiceQuestions"&&k.practiceQuestions&&x.progress!==k.practiceQuestions?{...x,progress:k.practiceQuestions}:x))}}catch(M){console.error("Error checking progress:",M)}},1e3);return()=>{window.removeEventListener("questProgressUpdate",I),clearInterval(D)}},[]),h.useEffect(()=>{var I;if((I=n.state)!=null&&I.questCompleted){const{questType:D,increment:M}=n.state;o(k=>k.map(m=>{if(m.questType===D){const x=Math.min(m.progress+(M||1),m.target);return n0(D,x),{...m,progress:x}}return m})),window.history.replaceState({},document.title)}},[n]),h.useEffect(()=>{const I=i.filter(D=>D.progress>=D.target).length;g(Math.round(I/i.length*100))},[i]),h.useEffect(()=>{c((t==null?void 0:t.coins)||0)},[t==null?void 0:t.coins]);const C=I=>{navigator.vibrate&&navigator.vibrate([20]),sessionStorage.setItem("activeQuest",JSON.stringify({id:I.id,type:I.questType,title:I.title,currentProgress:I.progress,target:I.target})),e(I.route+I.routeParams)},P=()=>{sessionStorage.getItem("questsFromHome")==="true"?(sessionStorage.removeItem("questsFromHome"),e("/")):e("/profile")},_=I=>{navigator.vibrate&&navigator.vibrate([20,10,20]);try{const D=new Audio("/sounds/coin.mp3");D.volume=.75,D.play()}catch{console.log("Sound not available")}d(I.id),b({startRect:{left:window.innerWidth/2-50,top:window.innerHeight/2,width:100,height:100},count:Math.min(I.reward/10,10),amount:I.reward,questTitle:I.title}),setTimeout(()=>{o(D=>D.map(M=>M.id===I.id?(n0(M.questType+"Claimed",!0),{...M,claimed:!0}):M)),d(null)},600)},j=I=>{switch(I){case"Easy":return"#10B981";case"Medium":return"#F59E0B";case"Hard":return"#EF4444";default:return"#6B7280"}},S=()=>{const I=new Date,D=new Date(I);D.setDate(D.getDate()+1),D.setHours(5,0,0,0);const M=D-I,k=Math.floor(M/(1e3*60*60)),m=Math.floor(M%(1e3*60*60)/(1e3*60));return`${k}h ${m}m`};return s.jsxs("div",{className:"quests-screen",children:[N&&s.jsx(as,{startRect:N.startRect,targetRef:y,count:N.count,onDone:()=>{c(I=>I+N.amount),xe.addCoins(N.amount,`Quest Reward: ${N.questTitle||"Completed"}`),b(null)}}),s.jsx("style",{jsx:!0,children:`
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        .quests-screen {
          min-height: 100vh;
          background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
          padding: 20px;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
          color: white;
          position: relative;
          overflow-x: hidden;
        }

        .animated-bg {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
        }

        .floating-icon {
          position: absolute;
          font-size: 40px;
          opacity: 0.03;
          animation: float 20s infinite ease-in-out;
        }

        .floating-icon:nth-child(1) {
          top: 10%;
          left: 10%;
          animation-delay: 0s;
        }

        .floating-icon:nth-child(2) {
          top: 20%;
          right: 10%;
          animation-delay: 5s;
        }

        .floating-icon:nth-child(3) {
          bottom: 30%;
          left: 15%;
          animation-delay: 10s;
        }

        .floating-icon:nth-child(4) {
          bottom: 20%;
          right: 20%;
          animation-delay: 15s;
        }

        @keyframes float {
          0%, 100% { transform: translate(0, 0) rotate(0deg); }
          33% { transform: translate(30px, -30px) rotate(120deg); }
          66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .header {
          position: relative;
          z-index: 10;
          margin-bottom: 24px;
          animation: slideDown 0.5s ease-out;
        }

        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .back-button {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 10px 16px;
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.15);
          border-radius: 12px;
          color: white;
          font-size: 15px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
          margin-top: 10px;
          margin-bottom: 24px;
        }

        .back-button:hover {
          background: rgba(255, 255, 255, 0.15);
          transform: translateX(-2px);
        }

        .coins-display {
          position: absolute;
          top: 20px;
          right: 20px;
          background: linear-gradient(135deg, #FFD93D, #FFA500);
          padding: 8px 16px;
          border-radius: 20px;
          display: flex;
          align-items: center;
          gap: 6px;
          font-weight: 700;
          font-size: 18px;
          color: #1a1a1a;
          box-shadow: 0 4px 12px rgba(255, 217, 61, 0.3);
        }

        .title-section {
          text-align: center;
          margin-bottom: 24px;
        }

        .main-title {
          font-size: 42px;
          font-weight: 800;
          margin-bottom: 8px;
          background: linear-gradient(135deg, #FFD93D, #FF6B6B, #4ECDC4);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          text-transform: uppercase;
          letter-spacing: 1px;
        }

        .subtitle {
          font-size: 16px;
          color: rgba(255, 255, 255, 0.7);
        }

        .daily-progress-card {
          background: rgba(255, 255, 255, 0.08);
          border-radius: 20px;
          padding: 20px;
          margin-bottom: 24px;
          border: 1px solid rgba(255, 255, 255, 0.1);
          animation: fadeInScale 0.6s ease-out 0.2s both;
        }

        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .progress-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 12px;
        }

        .progress-label {
          font-size: 14px;
          font-weight: 600;
          color: rgba(255, 255, 255, 0.8);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .progress-value {
          font-size: 24px;
          font-weight: 700;
          background: linear-gradient(135deg, #10B981, #059669);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
        }

        .progress-bar-container {
          width: 100%;
          height: 12px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 100px;
          overflow: hidden;
        }

        .progress-bar-fill {
          height: 100%;
          background: linear-gradient(90deg, #10B981, #059669);
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .quests-list {
          display: flex;
          flex-direction: column;
          gap: 14px;
          margin-bottom: 24px;
        }

        .quest-card {
          background: rgba(255, 255, 255, 0.08);
          border-radius: 20px;
          padding: 18px;
          position: relative;
          overflow: hidden;
          border: 1.5px solid rgba(255, 255, 255, 0.1);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          animation: slideUp 0.5s ease-out both;
        }

        .quest-card:nth-child(1) { animation-delay: 0.1s; }
        .quest-card:nth-child(2) { animation-delay: 0.2s; }
        .quest-card:nth-child(3) { animation-delay: 0.3s; }
        .quest-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        .quest-card:hover {
          transform: translateY(-2px);
          border-color: var(--quest-color);
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }

        .quest-card.completed {
          background: rgba(255, 255, 255, 0.1);
          border-color: rgba(255, 217, 61, 0.2);
        }

        .quest-accent {
          position: absolute;
          top: 0;
          left: 0;
          width: 4px;
          height: 100%;
          background: var(--quest-color);
          opacity: 0.8;
        }

        .quest-content {
          display: flex;
          align-items: center;
          gap: 14px;
        }

        .quest-icon-container {
          width: 60px;
          height: 60px;
          background: linear-gradient(135deg, var(--quest-color), var(--quest-color-dark));
          border-radius: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 28px;
          flex-shrink: 0;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
          position: relative;
        }

        .quest-icon-container.animating {
          animation: bounce 0.6s ease;
        }

        @keyframes bounce {
          0%, 100% { transform: scale(1); }
          30% { transform: scale(0.9); }
          60% { transform: scale(1.1); }
        }

        .quest-details {
          flex: 1;
          min-width: 0;
        }

        .quest-header {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-bottom: 4px;
        }

        .quest-title {
          font-size: 15px;
          font-weight: 600;
          color: white;
        }

        .difficulty-badge {
          padding: 2px 8px;
          border-radius: 100px;
          font-size: 10px;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .progress-info {
          margin-top: 8px;
        }

        .mini-progress-bar {
          width: 100%;
          height: 6px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 100px;
          overflow: hidden;
          margin-bottom: 6px;
        }

        .mini-progress-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--quest-color), var(--quest-color-dark));
          border-radius: 100px;
          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          box-shadow: 0 1px 4px var(--quest-color);
        }

        .progress-text {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-size: 12px;
        }

        .progress-numbers {
          color: rgba(255, 255, 255, 0.7);
        }

        .reward-display {
          display: inline-flex;
          align-items: center;
          gap: 4px;
          padding: 3px 8px;
          background: rgba(255, 217, 61, 0.15);
          border-radius: 100px;
          color: #FFD93D;
          font-weight: 600;
        }

        .action-button {
          padding: 10px 18px;
          border-radius: 14px;
          font-size: 14px;
          font-weight: 700;
          border: none;
          cursor: pointer;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          min-width: 90px;
        }

        .action-button.can-claim {
          background: linear-gradient(135deg, #10B981, #059669);
          color: white;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .action-button.can-claim:hover {
          transform: scale(1.05);
          box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .action-button.claimed {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.4);
          cursor: not-allowed;
        }

        .action-button.in-progress {
          background: linear-gradient(135deg, var(--quest-color), var(--quest-color-dark));
          color: white;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .action-button.in-progress:hover {
          transform: scale(1.02);
        }

        .timer-card {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 16px;
          padding: 16px;
          text-align: center;
          border: 1px solid rgba(255, 255, 255, 0.08);
          animation: slideUp 0.5s ease-out 0.6s both;
        }

        .timer-icon {
          font-size: 32px;
          margin-bottom: 8px;
        }

        .timer-label {
          font-size: 12px;
          color: rgba(255, 255, 255, 0.6);
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 4px;
        }

        .timer-value {
          font-size: 20px;
          font-weight: 700;
          color: #FFD93D;
        }

        .reward-animation {
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 80px;
          z-index: 1000;
          pointer-events: none;
          animation: coinCollect 1s ease-out forwards;
        }

        @keyframes coinCollect {
          0% {
            transform: translate(-50%, -50%) scale(0) rotate(0deg);
            opacity: 1;
          }
          50% {
            transform: translate(-50%, -50%) scale(1.5) rotate(180deg);
            opacity: 1;
          }
          100% {
            transform: translate(50vw, -50vh) scale(0.5) rotate(360deg);
            opacity: 0;
          }
        }

        .completed-checkmark {
          position: absolute;
          top: 12px;
          right: 12px;
          width: 24px;
          height: 24px;
          background: linear-gradient(135deg, #10B981, #059669);
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 14px;
          color: white;
          font-weight: bold;
          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }
      `}),s.jsxs("div",{className:"animated-bg",children:[s.jsx("div",{className:"floating-icon",children:"🎮"}),s.jsx("div",{className:"floating-icon",children:"🎯"}),s.jsx("div",{className:"floating-icon",children:"🏆"}),s.jsx("div",{className:"floating-icon",children:"⭐"})]}),s.jsxs("div",{className:"header",children:[s.jsx("button",{className:"back-button",onClick:P,children:"← Back"}),s.jsxs("div",{className:"coins-display",ref:y,children:["🪙 ",a]}),s.jsxs("div",{className:"title-section",children:[s.jsx("h1",{className:"main-title",children:"Daily Quests"}),s.jsx("p",{className:"subtitle",children:"Complete challenges, earn rewards!"})]})]}),s.jsxs("div",{className:"daily-progress-card",children:[s.jsxs("div",{className:"progress-header",children:[s.jsx("span",{className:"progress-label",children:"Today's Progress"}),s.jsxs("span",{className:"progress-value",children:[f,"%"]})]}),s.jsx("div",{className:"progress-bar-container",children:s.jsx("div",{className:"progress-bar-fill",style:{width:`${f}%`}})})]}),s.jsx("div",{className:"quests-list",children:i.map(I=>{const D=Math.min(100,Math.round(I.progress/I.target*100)),M=D===100,k=I.color+"CC";return s.jsxs("div",{className:`quest-card ${M?"completed":""}`,style:{"--quest-color":I.color,"--quest-color-dark":k},children:[s.jsx("div",{className:"quest-accent"}),M&&I.claimed&&s.jsx("div",{className:"completed-checkmark",children:"✓"}),s.jsxs("div",{className:"quest-content",children:[s.jsx("div",{className:`quest-icon-container ${u===I.id?"animating":""}`,children:I.icon}),s.jsxs("div",{className:"quest-details",children:[s.jsxs("div",{className:"quest-header",children:[s.jsx("span",{className:"quest-title",children:I.title}),s.jsx("span",{className:"difficulty-badge",style:{background:`${j(I.difficulty)}20`,color:j(I.difficulty)},children:I.difficulty})]}),s.jsxs("div",{className:"progress-info",children:[s.jsx("div",{className:"mini-progress-bar",children:s.jsx("div",{className:"mini-progress-fill",style:{width:`${D}%`}})}),s.jsxs("div",{className:"progress-text",children:[s.jsxs("span",{className:"progress-numbers",children:[I.progress,"/",I.target]}),s.jsxs("span",{className:"reward-display",children:["🪙 ",I.reward]})]})]})]}),s.jsx("button",{onClick:()=>{M&&!I.claimed?_(I):M||C(I)},disabled:I.claimed,className:`action-button ${I.claimed?"claimed":M?"can-claim":"in-progress"}`,style:!M&&!I.claimed?{"--quest-color":I.color,"--quest-color-dark":k}:{},children:I.claimed?"✓":M?"Claim":"Do it"})]})]},I.id)})}),s.jsxs("div",{className:"timer-card",children:[s.jsx("div",{className:"timer-icon",children:"⏰"}),s.jsx("div",{className:"timer-label",children:"New Quests In"}),s.jsx("div",{className:"timer-value",children:S()})]}),u&&s.jsx("div",{className:"reward-animation",children:"🪙"})]})}function df({title:t,subtitle:e,children:n}){const r=Ge();return s.jsxs("div",{className:"min-h-full bg-black text-white px-4 pt-12",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:()=>r(-1),className:"px-3 py-1.5 rounded-xl border border-white/10 bg-white/5 text-sm",children:"← Back"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-base font-semibold leading-tight",children:t}),e&&s.jsx("div",{className:"text-xs text-white/60 leading-tight",children:e})]}),s.jsx("div",{className:"w-[68px]"})]}),n]})}function eS(){const t=Ge(),[e,n]=h.useState(!0),[r,i]=h.useState(!0),[o,a]=h.useState(!0),[c,u]=h.useState(!1),[d,f]=h.useState("");h.useEffect(()=>{const y=Ot.getCurrentUser();y&&y.phone&&f(y.phone)},[]);const g=()=>{const N=JSON.parse(localStorage.getItem("currentUser")||"{}").phone;localStorage.removeItem("currentUser"),localStorage.removeItem("qp_player"),localStorage.removeItem("rememberCredentials"),sessionStorage.clear(),N?t("/auth/signin",{replace:!0,state:{phone:N}}):t("/auth",{replace:!0})};return s.jsxs(s.Fragment,{children:[s.jsx(df,{title:"Settings",subtitle:"Make it yours",children:s.jsx("div",{className:"flex flex-col justify-center min-h-[calc(100vh-200px)]",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-purple-900/20 to-indigo-900/20 backdrop-blur-sm p-2",children:[s.jsx("div",{className:"px-4 pt-3 pb-1",children:s.jsx("h3",{className:"text-xs font-semibold text-white/50 uppercase tracking-wider",children:"Preferences"})}),s.jsxs("div",{className:"divide-y divide-white/10",children:[s.jsx(Ks,{icon:"🔊",label:"Sound",subtitle:"Game sounds & effects",right:s.jsx(Lu,{on:e,set:n})}),s.jsx(Ks,{icon:"📳",label:"Haptics",subtitle:"Vibration feedback",right:s.jsx(Lu,{on:r,set:i})}),s.jsx(Ks,{icon:"🔔",label:"Notifications",subtitle:"Daily reminders",right:s.jsx(Lu,{on:o,set:a})})]})]}),s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-blue-900/20 to-purple-900/20 backdrop-blur-sm p-2",children:[s.jsx("div",{className:"px-4 pt-3 pb-1",children:s.jsx("h3",{className:"text-xs font-semibold text-white/50 uppercase tracking-wider",children:"Account"})}),s.jsxs("div",{className:"divide-y divide-white/10",children:[s.jsx(Ks,{icon:"📱",label:"Phone Number",subtitle:d||"Not available",right:s.jsx("span",{className:"text-white/40 text-sm",children:"🔒"})}),s.jsx(Ks,{icon:"✏️",label:"Edit Profile",subtitle:"Update your details",right:s.jsx("span",{className:"text-white/40 text-lg",children:"→"}),onClick:()=>t("/profile/edit")}),s.jsx(Ks,{icon:"🔒",label:"Privacy Policy",subtitle:"Your data is safe",right:s.jsx("span",{className:"text-white/40 text-lg",children:"→"}),onClick:()=>t("/profile/privacy")})]})]}),s.jsxs("button",{className:`w-full rounded-3xl border border-red-500/30 bg-gradient-to-r from-red-900/30 to-pink-900/30 
                       py-4 text-red-300 font-semibold backdrop-blur-sm
                       transition-all duration-200 hover:from-red-900/40 hover:to-pink-900/40 
                       active:scale-[0.98] flex items-center justify-center gap-2`,onClick:()=>u(!0),children:[s.jsx("span",{children:"🚪"}),s.jsx("span",{children:"Sign Out"})]})]})})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-6 z-50",children:s.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-3xl p-6 w-full max-w-sm border border-white/20 shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-4 animate-bounce",children:"👋"}),s.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Leaving Already?"}),s.jsx("p",{className:"text-white/60 text-sm",children:"You'll need to sign in again to continue your quiz journey"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>u(!1),className:`flex-1 py-3 rounded-2xl bg-white/10 hover:bg-white/20 
                         transition-all duration-200 font-semibold text-white`,children:"Stay"}),s.jsx("button",{onClick:g,className:`flex-1 py-3 rounded-2xl bg-gradient-to-r from-red-500 to-pink-500 
                         hover:from-red-600 hover:to-pink-600 transition-all duration-200 
                         font-semibold text-white shadow-lg`,children:"Sign Out"})]})]})})]})}function Ks({icon:t,label:e,subtitle:n,right:r,onClick:i}){return s.jsxs("button",{type:"button",onClick:i,className:`w-full flex items-center justify-between px-4 py-4 text-left
                 hover:bg-white/5 first:rounded-t-2xl last:rounded-b-2xl transition-all duration-200`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[t&&s.jsx("span",{className:"text-xl",children:t}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-semibold text-white",children:e}),n&&s.jsx("div",{className:"text-xs text-white/50 mt-0.5",children:n})]})]}),r]})}function Lu({on:t,set:e}){return s.jsx("span",{onClick:n=>{n.stopPropagation(),e(r=>!r),navigator.vibrate&&navigator.vibrate(10)},className:["inline-flex w-12 h-7 items-center rounded-full transition-all duration-300 px-1 shadow-inner",t?"bg-gradient-to-r from-green-400 to-emerald-500 justify-end":"bg-gray-600 justify-start"].join(" "),role:"switch","aria-checked":t,children:s.jsx("span",{className:["w-5 h-5 rounded-full bg-white shadow-md transition-transform duration-300",t?"scale-110":"scale-100"].join(" ")})})}/*! Capacitor: https://capacitorjs.com/ - MIT License */var _i;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(_i||(_i={}));class Mu extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const tS=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},nS=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:tS(t),o=()=>i()!=="web",a=g=>{const y=d.get(g);return!!(y!=null&&y.platforms.has(i())||c(g))},c=g=>{var y;return(y=n.PluginHeaders)===null||y===void 0?void 0:y.find(N=>N.name===g)},u=g=>t.console.error(g),d=new Map,f=(g,y={})=>{const N=d.get(g);if(N)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),N.proxy;const b=i(),C=c(g);let P;const _=async()=>(!P&&b in y?P=typeof y[b]=="function"?P=await y[b]():P=y[b]:e!==null&&!P&&"web"in y&&(P=typeof y.web=="function"?P=await y.web():P=y.web),P),j=(m,x)=>{var w,A;if(C){const E=C==null?void 0:C.methods.find(T=>x===T.name);if(E)return E.rtype==="promise"?T=>n.nativePromise(g,x.toString(),T):(T,X)=>n.nativeCallback(g,x.toString(),T,X);if(m)return(w=m[x])===null||w===void 0?void 0:w.bind(m)}else{if(m)return(A=m[x])===null||A===void 0?void 0:A.bind(m);throw new Mu(`"${g}" plugin is not implemented on ${b}`,_i.Unimplemented)}},S=m=>{let x;const w=(...A)=>{const E=_().then(T=>{const X=j(T,m);if(X){const te=X(...A);return x=te==null?void 0:te.remove,te}else throw new Mu(`"${g}.${m}()" is not implemented on ${b}`,_i.Unimplemented)});return m==="addListener"&&(E.remove=async()=>x()),E};return w.toString=()=>`${m.toString()}() { [capacitor code] }`,Object.defineProperty(w,"name",{value:m,writable:!1,configurable:!1}),w},I=S("addListener"),D=S("removeListener"),M=(m,x)=>{const w=I({eventName:m},x),A=async()=>{const T=await w;D({eventName:m,callbackId:T},x)},E=new Promise(T=>w.then(()=>T({remove:A})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await A()},E},k=new Proxy({},{get(m,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?M:I;case"removeListener":return D;default:return S(x)}}});return r[g]=k,d.set(g,{name:g,proxy:k,platforms:new Set([...Object.keys(y),...C?[b]:[]])}),k};return n.convertFileSrc||(n.convertFileSrc=g=>g),n.getPlatform=i,n.handleError=u,n.isNativePlatform=o,n.isPluginAvailable=a,n.registerPlugin=f,n.Exception=Mu,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},rS=t=>t.Capacitor=nS(t),$d=rS(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),hf=$d.registerPlugin;class Uy{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new $d.Exception(e,_i.Unimplemented)}unavailable(e="not available"){return new $d.Exception(e,_i.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const r0=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),s0=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class sS extends Uy{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=s0(i).trim(),o=s0(o).trim(),n[i]=o}),n}async setCookie(e){try{const n=r0(e.key),r=r0(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${o}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}hf("CapacitorCookies",{web:()=>new sS});const iS=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),oS=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,o,a)=>(i[o]=t[e[a]],i),{})},aS=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[o,a]=i;let c,u;return Array.isArray(a)?(u="",a.forEach(d=>{c=e?encodeURIComponent(d):d,u+=`${o}=${c}&`}),u.slice(0,-1)):(c=e?encodeURIComponent(a):a,u=`${o}=${c}`),`${r}&${u}`},"").substr(1):null,lS=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=oS(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[a,c]of Object.entries(t.data||{}))o.set(a,c);n.body=o.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((c,u)=>{o.append(u,c)});else for(const c of Object.keys(t.data))o.append(c,t.data[c]);n.body=o;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class cS extends Uy{async request(e){const n=lS(e,e.webFetchExtra),r=aS(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,n),a=o.headers.get("content-type")||"";let{responseType:c="text"}=o.ok?e:{};a.includes("application/json")&&(c="json");let u,d;switch(c){case"arraybuffer":case"blob":d=await o.blob(),u=await iS(d);break;case"json":u=await o.json();break;case"document":case"text":default:u=await o.text()}const f={};return o.headers.forEach((g,y)=>{f[y]=g}),{data:u,headers:f,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}hf("CapacitorHttp",{web:()=>new cS});const i0=hf("App",{web:()=>ef(()=>import("./web-6d14d780.js"),[]).then(t=>new t.AppWeb)});function uS(){const t=Ge(),[e,n]=h.useState(!1),[r,i]=h.useState(!1),[o,a]=h.useState(!1),[c,u]=h.useState({name:"",phone:"",gender:"",ageGroup:"",city:"",email:"",state:"",country:""}),[d,f]=h.useState({name:"",phone:"",gender:"",ageGroup:"",city:"",email:"",state:"",country:""});h.useEffect(()=>{const C=JSON.parse(localStorage.getItem("currentUser")||"{}");if(!C.phone){const I=JSON.parse(localStorage.getItem("users")||"{}"),D=Object.keys(I).find(M=>I[M].username===C.username);if(D)C.phone=D,localStorage.setItem("currentUser",JSON.stringify(C));else{t("/profile");return}}const P=Ot.getUserData(C.phone);P.password;const _=JSON.parse(localStorage.getItem(`user_profile_${C.phone}`)||"{}"),j=I=>I?I.charAt(0).toUpperCase()+I.slice(1).toLowerCase():"",S={name:_.name||C.username||P.username||"",phone:C.phone||"",gender:j(_.gender||C.gender||P.gender||""),ageGroup:_.ageGroup||C.ageGroup||P.ageGroup||"",city:_.city||"",email:_.email||"",state:_.state||"",country:_.country||""};u(S),f(S)},[t]),h.useEffect(()=>{if(e){const C=JSON.stringify(c)!==JSON.stringify(d);a(C)}},[d,c,e]);const g=()=>{n(!0),f({...c}),a(!1)},y=()=>{n(!1),f({...c}),a(!1)},N=()=>{const C=JSON.parse(localStorage.getItem("currentUser")||"{}");if(!C.phone)return;Ot.updateUserProfile(C.phone,d)&&(u({...d}),n(!1),a(!1),i(!0),setTimeout(()=>i(!1),3e3))},b=(C,P)=>{f(_=>({..._,[C]:P}))};return s.jsxs(df,{title:"Edit Profile",subtitle:"Update your information",children:[r&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:s.jsx("div",{className:"bg-green-500/20 border border-green-500/50 rounded-2xl px-8 py-4 backdrop-blur-sm animate-bounce",children:s.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-semibold text-lg",children:[s.jsx("span",{children:"Profile updated"}),s.jsx("span",{className:"text-2xl",children:"✓"})]})})}),s.jsx("div",{className:"flex flex-col justify-center min-h-[calc(100vh-200px)]",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-purple-900/20 to-indigo-900/20 backdrop-blur-sm p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-white/50 uppercase tracking-wider mb-4",children:"Basic Information"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Fr,{label:"Name",value:e?d.name:c.name,onChange:C=>b("name",C),placeholder:"Your full name",disabled:!e}),s.jsx(Fr,{label:"Phone",value:c.phone,disabled:!0,icon:"🔒",helperText:"Cannot be changed"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e?s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Gender"}),s.jsxs("select",{value:d.gender||"",onChange:C=>b("gender",C.target.value),className:`w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 
                                text-white transition-all duration-200 hover:bg-white/10 
                                focus:bg-white/10 focus:border-white/30 focus:outline-none`,children:[s.jsx("option",{value:"",children:"Not set"}),s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]})]}):s.jsx(Fr,{label:"Gender",value:c.gender||"Not set",disabled:!0}),e?s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:"Age Group"}),s.jsxs("select",{value:d.ageGroup||"",onChange:C=>b("ageGroup",C.target.value),className:`w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 
                                text-white transition-all duration-200 hover:bg-white/10 
                                focus:bg-white/10 focus:border-white/30 focus:outline-none`,children:[s.jsx("option",{value:"",children:"Not set"}),s.jsx("option",{value:"under-5",children:"Under 5 yrs"}),s.jsx("option",{value:"5-10",children:"5-10 yrs"}),s.jsx("option",{value:"11-15",children:"11-15 yrs"}),s.jsx("option",{value:"16-20",children:"16-20 yrs"}),s.jsx("option",{value:"20+",children:"20+ yrs"})]})]}):s.jsx(Fr,{label:"Age Group",value:c.ageGroup||"Not set",disabled:!0})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-blue-900/20 to-purple-900/20 backdrop-blur-sm p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-white/50 uppercase tracking-wider mb-4",children:"Contact & Location"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(Fr,{label:"Email",value:e?d.email:c.email,onChange:C=>b("email",C),placeholder:"yourname@example.com",type:"email",helperText:e?"Optional":c.email?"":"Not provided",disabled:!e}),s.jsx(Fr,{label:"City",value:e?d.city:c.city,onChange:C=>b("city",C),placeholder:"Add your city name",disabled:!e}),s.jsx(Fr,{label:"State",value:e?d.state:c.state,onChange:C=>b("state",C),placeholder:"Your state/province",disabled:!e}),s.jsx(Fr,{label:"Country",value:e?d.country:c.country,onChange:C=>b("country",C),placeholder:"Your country",disabled:!e})]})]}),e?s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:y,className:`flex-1 py-3 rounded-2xl bg-white/10 hover:bg-white/20 
                         transition-all duration-200 font-semibold text-white`,children:"Cancel"}),s.jsx("button",{onClick:N,disabled:!o,className:`flex-1 py-3 rounded-2xl font-semibold text-white shadow-lg
                         transition-all duration-200 ${o?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 cursor-pointer":"bg-gray-600 cursor-not-allowed opacity-50"}`,children:"Save Changes"})]}):s.jsx("button",{onClick:g,className:`w-full py-3 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 
                       hover:from-purple-600 hover:to-pink-600 transition-all duration-200 
                       font-semibold text-white shadow-lg`,children:"Edit"})]})})]})}function Fr({label:t,value:e,onChange:n,disabled:r,placeholder:i,type:o="text",icon:a,helperText:c}){return s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-white/60 mb-1 block",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:o,value:e||"",onChange:u=>n&&n(u.target.value),disabled:r,placeholder:i,className:`w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 
                   text-white placeholder-white/30 transition-all duration-200
                   ${r?"opacity-50 cursor-not-allowed":"hover:bg-white/10 focus:bg-white/10 focus:border-white/30 focus:outline-none"}`}),a&&s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/50",children:a})]}),c&&s.jsx("p",{className:"text-xs text-white/40 mt-1",children:c})]})}function dS(){const t=Ge();return s.jsx(df,{title:"Privacy Policy",subtitle:"Your data, your control",children:s.jsx("div",{className:"flex flex-col justify-center min-h-[calc(100vh-200px)]",children:s.jsx("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-purple-900/20 to-indigo-900/20 backdrop-blur-sm p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Privacy Policy"}),s.jsx("p",{className:"text-white/60 text-lg mb-6",children:"Will be updated soon"}),s.jsxs("div",{className:"space-y-3 text-left text-white/50 text-sm",children:[s.jsx("p",{children:"• Your data is encrypted and secure"}),s.jsx("p",{children:"• We never share your personal information"}),s.jsx("p",{children:"• You can delete your account anytime"}),s.jsx("p",{children:"• Minimal data collection for best experience"})]}),s.jsx("button",{onClick:()=>t(-1),className:`mt-8 px-8 py-3 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 
                       hover:from-purple-600 hover:to-pink-600 transition-all duration-200 
                       font-semibold text-white shadow-lg`,children:"Got it"})]})})})})}const hS=t=>JSON.parse(localStorage.getItem("users")||"{}")[t],fS=()=>!!localStorage.getItem("currentUser");function mS(){const t=Ge(),e=Ct(),[n,r]=h.useState(()=>{var g;return sessionStorage.getItem("tempPhone")||((g=e.state)==null?void 0:g.phone)||""}),[i,o]=h.useState(()=>sessionStorage.getItem("tempCountryCode")||"+91"),[a,c]=h.useState(!1),[u,d]=h.useState("");h.useEffect(()=>{sessionStorage.setItem("tempPhone",n),sessionStorage.setItem("tempCountryCode",i)},[n,i]);const f=async()=>{c(!0),d("");const g=n.replace(/\D/g,""),y=i+g;if(g.length!==10){d("Please enter a valid 10-digit phone number"),c(!1);return}sessionStorage.setItem("fullPhone",y);const N=JSON.parse(localStorage.getItem("users")||"{}"),b=N[y]!==void 0;console.log("Users in database:",N),console.log("Phone checking:",y),console.log("User exists?:",b),b?t("/auth/signin",{state:{phone:y}}):t("/auth/avatar",{state:{phone:y}}),c(!1)};return h.useEffect(()=>{var g,y;if(!((g=e.state)!=null&&g.preventAutoSubmit)&&!((y=e.state)!=null&&y.fromAvatar)&&n&&n.length===10){const N=setTimeout(()=>{f()},500);return()=>clearTimeout(N)}},[]),s.jsxs("div",{className:"auth-screen",style:{background:"linear-gradient(135deg, #aa529bff 0%, #6d4397ff 100%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:[s.jsxs("div",{className:"decorative-icons",children:[s.jsx("div",{className:"floating-icon",style:{top:"5%",left:"10%",animationDelay:"0s"},children:"🎮"}),s.jsx("div",{className:"floating-icon",style:{top:"15%",right:"10%",animationDelay:"5s"},children:"🏆"}),s.jsx("div",{className:"floating-icon",style:{top:"20%",left:"15%",animationDelay:"10s"},children:"⭐"}),s.jsx("div",{className:"floating-icon",style:{top:"75%",right:"20%",animationDelay:"15s"},children:"🎯"}),s.jsx("div",{className:"floating-icon",style:{top:"85%",left:"25%",animationDelay:"20s"},children:"🪙"})]}),s.jsx("div",{className:"mascot",style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"24px"},children:s.jsx("div",{style:{fontSize:"100px"},children:"🎮"})}),s.jsxs("div",{className:"content-card",children:[s.jsx("h1",{className:"title",children:"Ready to Play?"}),s.jsx("p",{className:"subtitle",children:"Enter your phone to start!"}),s.jsxs("div",{className:"phone-input-group",style:{display:"flex",gap:"8px",marginBottom:"24px",alignItems:"center",justifyContent:"center"},children:[s.jsxs("select",{className:"country-select",value:i,onChange:g=>o(g.target.value),style:{width:"auto",minWidth:"95px",padding:"16px 8px",border:"2px solid #e2e8f0",borderRadius:"16px",fontSize:"16px",fontWeight:"600",background:"white",transition:"all 0.3s",color:"#333",textAlign:"center"},children:[s.jsx("option",{value:"+91",children:"🇮🇳 +91"}),s.jsx("option",{value:"+1",children:"🇺🇸 +1"}),s.jsx("option",{value:"+44",children:"🇬🇧 +44"}),s.jsx("option",{value:"+86",children:"🇨🇳 +86"}),s.jsx("option",{value:"+81",children:"🇯🇵 +81"})]}),s.jsx("input",{type:"tel",className:"phone-input",placeholder:"Phone number",value:n,onChange:g=>{const y=g.target.value.replace(/\D/g,"");y.length<=10&&(r(y),u&&d(""))},maxLength:"10",inputMode:"numeric",pattern:"[0-9]*",style:{flex:1,padding:"16px",paddingLeft:"12px",border:"2px solid #e2e8f0",borderRadius:"16px",fontSize:"18px",fontWeight:"600",transition:"all 0.3s",background:"white",color:"#333",WebkitTextFillColor:"#333"}})]}),n.length>0&&n.length<10&&s.jsxs("p",{style:{color:"#f59e0b",fontSize:"14px",textAlign:"center",marginTop:"-16px",marginBottom:"16px"},children:["Enter ",10-n.length," more digit",10-n.length>1?"s":""]}),s.jsxs("button",{className:"submit-button",onClick:f,disabled:a||n.length!==10,style:{width:"100%",padding:"18px",background:n.length===10?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #94a3b8 0%, #cbd5e1 100%)",color:"white",border:"none",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:n.length===10&&!a?"pointer":"not-allowed",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[a?"Loading...":"Continue",s.jsx("span",{children:"→"})]}),u&&s.jsx("p",{className:"error-message",style:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginTop:"12px",fontWeight:"600"},children:u})]})]})}function pS(){const t=Ct(),e=Ge(),{phone:n,firebaseUser:r}=t.state||{},[i,o]=h.useState(""),[a,c]=h.useState(!1),[u,d]=h.useState(""),[f,g]=h.useState(!1),[y,N]=h.useState(!1),[b,C]=h.useState(""),P=hS(n),[_,j]=h.useState(!1),[S,I]=h.useState(""),[D,M]=h.useState(!1);h.useEffect(()=>{if(localStorage.getItem("rememberCredentials")==="true"&&N(!0),n){const T=JSON.parse(localStorage.getItem(`user_profile_${n}`)||"{}"),te=JSON.parse(localStorage.getItem("users")||"{}")[n]||{},ne=T.name||te.username||(P==null?void 0:P.username)||"";C(ne)}},[n,P]);const k=async()=>{if(!i){d("Please enter your password");return}g(!0),d(""),await new Promise(E=>setTimeout(E,500)),P&&P.password===i?(Ot.setCurrentUser(n),r&&localStorage.setItem("firebaseUser",JSON.stringify({uid:r.uid,phoneNumber:r.phoneNumber})),y&&localStorage.setItem("rememberCredentials","true"),e("/",{replace:!0})):(d("Wrong password"),g(!1),setTimeout(()=>d(""),3e3))},m=()=>{alert("OTP feature coming soon!")},x=()=>{sessionStorage.removeItem("tempPhone"),sessionStorage.removeItem("tempCountryCode");const E=(n==null?void 0:n.slice(-10))||"";e("/auth",{replace:!0,state:{phone:E,preventAutoSubmit:!0}})},w=()=>{sessionStorage.removeItem("tempPhone"),sessionStorage.removeItem("tempCountryCode"),e("/auth",{replace:!0,state:{isNewAccount:!0}})},A=E=>{E.key==="Enter"&&k()};return s.jsxs("div",{className:"auth-screen",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[s.jsx("button",{className:"back-button",onClick:x,style:{position:"absolute",top:"40px",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,backdropFilter:"blur(10px)",transition:"all 0.3s ease"},onMouseEnter:E=>E.target.style.background="rgba(255,255,255,0.3)",onMouseLeave:E=>E.target.style.background="rgba(255,255,255,0.2)",children:s.jsx("span",{style:{fontSize:"24px",color:"white"},children:"‹"})}),s.jsxs("div",{className:"decorative-icons",children:[s.jsx("div",{className:"floating-icon",style:{top:"10%",left:"5%",animationDelay:"0s"},children:"🎮"}),s.jsx("div",{className:"floating-icon",style:{top:"20%",right:"10%",animationDelay:"2s"},children:"🏆"}),s.jsx("div",{className:"floating-icon",style:{top:"70%",left:"8%",animationDelay:"4s"},children:"⭐"}),s.jsx("div",{className:"floating-icon",style:{top:"80%",right:"5%",animationDelay:"6s"},children:"🎯"})]}),s.jsxs("div",{className:"content-card",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",borderRadius:"32px",padding:"32px",width:"90%",maxWidth:"400px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",margin:"0 auto"},children:[(P==null?void 0:P.avatar)&&s.jsx("div",{style:{fontSize:"60px",textAlign:"center",marginBottom:"16px",animation:"bounce 2s infinite"},children:P.avatar.emoji}),s.jsxs("div",{className:"welcome-back",children:[s.jsx("h1",{className:"title",style:{fontSize:"28px",fontWeight:"800",textAlign:"center",marginBottom:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Welcome Back! 👋"}),s.jsx("p",{className:"subtitle",style:{fontSize:"16px",color:"#64748b",textAlign:"center",marginBottom:"24px"},children:b?`Hey ${b}!`:"Good to see you again!"})]}),s.jsx("div",{className:"phone-display",style:{fontSize:"18px",fontWeight:"600",color:"#667eea",marginBottom:"24px",textAlign:"center",padding:"12px",background:"rgba(102, 126, 234, 0.1)",borderRadius:"12px"},children:n}),s.jsxs("div",{style:{position:"relative",marginBottom:"16px"},children:[s.jsx("input",{type:a?"text":"password",className:"phone-input",placeholder:"Enter your password",value:i,onChange:E=>{o(E.target.value),u&&d("")},onKeyPress:A,style:{width:"100%",paddingRight:"45px",border:u?"2px solid #ef4444":"2px solid #e2e8f0",color:"#333",fontSize:"16px",WebkitTextFillColor:"#333",backgroundColor:"white"},autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>c(!a),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"5px",fontSize:"20px",color:"#667eea"},"aria-label":a?"Hide password":"Show password",children:a?"👁️":"👁️‍🗨️"})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"20px"},children:[s.jsx("input",{type:"checkbox",id:"rememberMe",checked:y,onChange:E=>N(E.target.checked),style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"#667eea"}}),s.jsx("label",{htmlFor:"rememberMe",style:{fontSize:"14px",color:"#64748b",cursor:"pointer",userSelect:"none"},children:"Remember me"})]}),u&&s.jsxs("div",{style:{color:"#f59e0b",fontSize:"13px",textAlign:"center",marginTop:"-12px",marginBottom:"16px",fontWeight:"500"},children:["⚠️ ",u]}),s.jsx("button",{className:"submit-button",onClick:k,disabled:f,style:{width:"100%",padding:"18px",background:f?"linear-gradient(135deg, #94a3b8 0%, #cbd5e1 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:f?"not-allowed":"pointer",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"20px"},children:f?s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Signing in..."}),s.jsx("span",{className:"animate-spin",children:"⚙️"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Sign In"}),s.jsx("span",{children:"🎮"})]})}),s.jsx("div",{className:"divider",style:{textAlign:"center",margin:"20px 0",position:"relative"},children:s.jsx("span",{className:"divider-text",style:{background:"rgba(255, 255, 255, 0.95)",padding:"0 16px",position:"relative",color:"#94a3b8",fontSize:"14px"},children:"OR"})}),s.jsx("button",{className:"otp-button",onClick:m,style:{width:"100%",padding:"16px",background:"white",border:"2px solid #e2e8f0",borderRadius:"16px",fontSize:"16px",fontWeight:"600",color:"#667eea",cursor:"pointer",transition:"all 0.3s",marginBottom:"12px"},onMouseEnter:E=>{E.currentTarget.style.background="rgba(102, 126, 234, 0.05)",E.currentTarget.style.borderColor="#667eea"},onMouseLeave:E=>{E.currentTarget.style.background="white",E.currentTarget.style.borderColor="#e2e8f0"},children:"Send OTP Instead"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #e2e8f0"},children:[s.jsx("a",{href:"#",onClick:E=>{E.preventDefault(),j(!0)},style:{color:"#7c3aed",fontSize:"14px",textDecoration:"none",fontWeight:"600"},children:"Forgot password?"}),s.jsx("a",{href:"#",onClick:E=>{E.preventDefault(),w()},style:{color:"#7c3aed",fontSize:"14px",textDecoration:"none",fontWeight:"600"},children:"Create new account"})]})]}),_&&s.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-6 z-50",children:s.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-3xl p-6 w-full max-w-sm border border-white/20 shadow-2xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-5xl mb-4",children:"🔐"}),s.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:"Reset Password"}),s.jsx("p",{className:"text-white/60 text-sm",children:"Enter your new password"})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{type:a?"text":"password",value:S,onChange:E=>I(E.target.value),placeholder:"New password (min 6 characters)",className:`w-full px-4 py-3 pr-12 rounded-xl bg-white/10 border border-white/20 
                        text-white placeholder-white/50`,autoFocus:!0}),s.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/70 hover:text-white",style:{background:"none",border:"none",cursor:"pointer",padding:"5px",fontSize:"20px"},children:a?"👁️":"👁️‍🗨️"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{j(!1),I("")},className:`flex-1 py-3 rounded-2xl bg-white/10 hover:bg-white/20 
                         transition-all duration-200 font-semibold text-white`,children:"Cancel"}),s.jsx("button",{onClick:()=>{if(S.length>=6){const E=JSON.parse(localStorage.getItem("users")||"{}");E[n]&&(E[n].password=S,localStorage.setItem("users",JSON.stringify(E)),j(!1),I(""),o(S),M(!0),setTimeout(()=>M(!1),2e3))}else alert("Password must be at least 6 characters")},className:`flex-1 py-3 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 
                         hover:from-green-600 hover:to-emerald-600 transition-all duration-200 
                         font-semibold text-white shadow-lg`,children:"Reset"})]})]})}),D&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:s.jsx("div",{className:"bg-green-500 rounded-2xl px-8 py-6 animate-bounce-in",children:s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mb-3 animate-scale-in",children:s.jsx("span",{className:"text-green-500 text-3xl",children:"✓"})}),s.jsx("p",{className:"text-white font-semibold text-lg",children:"Password reset successfully!"})]})})}),s.jsx("style",{jsx:!0,children:`
        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes scale-in {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
        .animate-bounce-in {
            animation: bounce-in 0.5s ease-out;
        }
        .animate-scale-in {
            animation: scale-in 0.3s ease-out 0.2s both;
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-20px); }
        }
        
        .animate-spin {
          display: inline-block;
          animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `})]})}function gS(){const t=Ct(),e=Ge(),{phone:n,firebaseUser:r}=t.state||{},[i,o]=h.useState(()=>{var d;if((d=t.state)!=null&&d.avatar)return t.state.avatar;const u=sessionStorage.getItem("tempAvatar");return u?JSON.parse(u):null}),a=[{id:1,emoji:"🤖",name:"Robot",color:"#667eea"},{id:2,emoji:"🦄",name:"Unicorn",color:"#ec4899"},{id:3,emoji:"🐉",name:"Dragon",color:"#10b981"},{id:4,emoji:"🧙",name:"Wizard",color:"#8b5cf6"},{id:5,emoji:"👨‍🚀",name:"Astronaut",color:"#3b82f6"},{id:6,emoji:"🥷",name:"Ninja",color:"#1f2937"}];h.useEffect(()=>{i&&sessionStorage.setItem("tempAvatar",JSON.stringify(i))},[i]);const c=()=>{i&&e("/auth/username",{state:{phone:n,avatar:i,firebaseUser:r}})};return s.jsxs("div",{className:"auth-screen",style:{background:"linear-gradient(135deg, #1e3a8a 0%, #3730a3 35%, #6d28d9 70%, #a78bfa 100%)"},children:[s.jsx("button",{className:"back-button",onClick:()=>e("/auth",{state:{phone:n==null?void 0:n.replace(/^\+\d{1,3}/,""),fromAvatar:!0}}),style:{position:"absolute",top:"40px",left:"20px",background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,backdropFilter:"blur(10px)",transition:"all 0.3s ease"},onMouseEnter:u=>u.target.style.background="rgba(255,255,255,0.25)",onMouseLeave:u=>u.target.style.background="rgba(255,255,255,0.15)",children:s.jsx("span",{style:{fontSize:"24px",color:"rgba(194, 128, 190, 0.9)"},children:"‹"})}),s.jsxs("div",{className:"content-card",style:{background:"rgba(248, 250, 252, 0.95)",backdropFilter:"blur(20px)",borderRadius:"32px",padding:"24px 20px",width:"95%",maxWidth:"100%",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},children:[s.jsxs("div",{className:"progress-dots",children:[s.jsx("div",{className:"dot active",style:{background:"#3730a3"}}),s.jsx("div",{className:"dot",style:{background:"#bf89ceff"}})]}),s.jsx("h1",{className:"title",style:{fontSize:"28px",fontWeight:"800",textAlign:"center",marginBottom:"8px",background:"linear-gradient(135deg, #1e3a8a 0%, #6d28d9 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Pick Your Hero!"}),s.jsx("p",{className:"subtitle",style:{fontSize:"16px",color:"#64748b",textAlign:"center",marginBottom:"32px"},children:"Choose your quiz champion"}),s.jsx("div",{className:"avatar-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px",marginBottom:"32px",padding:"0",maxWidth:"500px",margin:"0 auto 32px auto"},children:a.map(u=>s.jsxs("div",{className:`avatar-card ${(i==null?void 0:i.id)===u.id?"selected":""}`,onClick:()=>o(u),style:{aspectRatio:"1",borderRadius:"20px",background:(i==null?void 0:i.id)===u.id?"linear-gradient(135deg, rgba(55, 48, 163, 0.1), rgba(109, 40, 217, 0.1))":"white",border:(i==null?void 0:i.id)===u.id?"3px solid #3730a3":"3px solid transparent",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s",boxShadow:(i==null?void 0:i.id)===u.id?"0 4px 20px rgba(55, 48, 163, 0.2)":"0 2px 10px rgba(0, 0, 0, 0.05)",transform:(i==null?void 0:i.id)===u.id?"scale(1.05)":"scale(1)"},onMouseEnter:d=>{(i==null?void 0:i.id)!==u.id&&(d.currentTarget.style.transform="scale(1.05)",d.currentTarget.style.boxShadow="0 4px 20px rgba(55, 48, 163, 0.15)")},onMouseLeave:d=>{(i==null?void 0:i.id)!==u.id&&(d.currentTarget.style.transform="scale(1)",d.currentTarget.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.05)")},children:[s.jsx("div",{className:"avatar-emoji",style:{fontSize:"40px",marginBottom:"8px"},children:u.emoji}),s.jsx("div",{className:"avatar-name",style:{fontSize:"14px",fontWeight:"600",color:(i==null?void 0:i.id)===u.id?"#3730a3":"#64748b"},children:u.name})]},u.id))}),s.jsxs("button",{className:"submit-button",disabled:!i,onClick:c,style:{width:"100%",padding:"18px",background:i?"linear-gradient(135deg, #3730a3 0%, #6d28d9 100%)":"linear-gradient(135deg, #94a3b8 0%, #cbd5e1 100%)",color:"white",border:"none",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:i?"pointer":"not-allowed",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:i?"0 4px 20px rgba(55, 48, 163, 0.3)":"none"},onMouseEnter:u=>{i&&(u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 30px rgba(55, 48, 163, 0.4)")},onMouseLeave:u=>{i&&(u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 20px rgba(55, 48, 163, 0.3)")},children:["Continue",s.jsx("span",{children:"→"})]})]})]})}const xS=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,f=o>>2,g=(o&3)<<4|c>>4;let y=(c&15)<<2|d>>6,N=d&63;u||(N=64,a||(y=64)),r.push(n[f],n[g],n[y],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||d==null||g==null)throw new vS;const y=o<<2|c>>4;if(r.push(y),d!==64){const N=c<<4&240|d>>2;if(r.push(N),g!==64){const b=d<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bS=function(t){const e=qy(t);return Hy.encodeByteArray(e,!0)},nc=function(t){return bS(t).replace(/\./g,"")},wS=function(t){try{return Hy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=()=>jS().__FIREBASE_DEFAULTS__,SS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wS(t[1]);return e&&JSON.parse(e)},ff=()=>{try{return xS()||NS()||SS()||kS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ES=t=>{var e,n;return(n=(e=ff())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_S=t=>{const e=ES(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qy=()=>{var t;return(t=ff())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[nc(JSON.stringify(n)),nc(JSON.stringify(a)),c].join(".")}const Co={};function IS(){const t={prod:[],emulator:[]};for(const e of Object.keys(Co))Co[e]?t.emulator.push(e):t.prod.push(e);return t}function RS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let o0=!1;function PS(t,e){if(typeof window>"u"||typeof document>"u"||!mf(window.location.host)||Co[t]===e||Co[t]||o0)return;Co[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",o=IS().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,N){y.setAttribute("width","24"),y.setAttribute("id",N),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{o0=!0,a()},y}function f(y,N){y.setAttribute("id",N),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=RS(r),N=n("text"),b=document.getElementById(N)||document.createElement("span"),C=n("learnmore"),P=document.getElementById(C)||document.createElement("a"),_=n("preprendIcon"),j=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const S=y.element;c(S),f(P,C);const I=d();u(j,_),S.append(j,b,P,I),document.body.appendChild(S)}o?(b.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LS(){var t;const e=(t=ff())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MS(){return!LS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OS(){try{return typeof indexedDB=="object"}catch{return!1}}function FS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zS,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gy.prototype.create)}}class Gy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?VS(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new $i(i,c,r)}}function VS(t,e){return t.replace($S,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $S=/\{\$([^}]+)}/g;function rc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(a0(o)&&a0(a)){if(!rc(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function a0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){return t&&t._delegate?t._delegate:t}class Jo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qS(e))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ws){return this.instances.has(e)}getOptions(e=ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:US(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ws){return this.component?this.component.multipleInstances?e:ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function US(t){return t===ws?void 0:t}function qS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const QS={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},GS=Ve.INFO,WS={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},YS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WS[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wy{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=YS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const KS=(t,e)=>e.some(n=>t instanceof n);let l0,c0;function XS(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JS(){return c0||(c0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yy=new WeakMap,Bd=new WeakMap,Ky=new WeakMap,Ou=new WeakMap,pf=new WeakMap;function ZS(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(rs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Yy.set(n,t)}).catch(()=>{}),pf.set(e,t),e}function ek(t){if(Bd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Bd.set(t,e)}let Ud={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ky.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tk(t){Ud=t(Ud)}function nk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fu(this),e,...n);return Ky.set(r,e.sort?e.sort():[e]),rs(r)}:JS().includes(t)?function(...e){return t.apply(Fu(this),e),rs(Yy.get(this))}:function(...e){return rs(t.apply(Fu(this),e))}}function rk(t){return typeof t=="function"?nk(t):(t instanceof IDBTransaction&&ek(t),KS(t,XS())?new Proxy(t,Ud):t)}function rs(t){if(t instanceof IDBRequest)return ZS(t);if(Ou.has(t))return Ou.get(t);const e=rk(t);return e!==t&&(Ou.set(t,e),pf.set(e,t)),e}const Fu=t=>pf.get(t);function sk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),c=rs(a);return r&&a.addEventListener("upgradeneeded",u=>{r(rs(a.result),u.oldVersion,u.newVersion,rs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const ik=["get","getKey","getAll","getAllKeys","count"],ok=["put","add","delete","clear"],zu=new Map;function u0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zu.get(e))return zu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ok.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ik.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return zu.set(e,o),o}tk(t=>({...t,get:(e,n,r)=>u0(e,n)||t.get(e,n,r),has:(e,n)=>!!u0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qd="@firebase/app",d0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new Wy("@firebase/app"),ck="@firebase/app-compat",uk="@firebase/analytics-compat",dk="@firebase/analytics",hk="@firebase/app-check-compat",fk="@firebase/app-check",mk="@firebase/auth",pk="@firebase/auth-compat",gk="@firebase/database",xk="@firebase/data-connect",yk="@firebase/database-compat",vk="@firebase/functions",bk="@firebase/functions-compat",wk="@firebase/installations",jk="@firebase/installations-compat",Nk="@firebase/messaging",Sk="@firebase/messaging-compat",kk="@firebase/performance",Ek="@firebase/performance-compat",_k="@firebase/remote-config",Ck="@firebase/remote-config-compat",Tk="@firebase/storage",Ak="@firebase/storage-compat",Ik="@firebase/firestore",Rk="@firebase/ai",Pk="@firebase/firestore-compat",Dk="firebase",Lk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="[DEFAULT]",Mk={[qd]:"fire-core",[ck]:"fire-core-compat",[dk]:"fire-analytics",[uk]:"fire-analytics-compat",[fk]:"fire-app-check",[hk]:"fire-app-check-compat",[mk]:"fire-auth",[pk]:"fire-auth-compat",[gk]:"fire-rtdb",[xk]:"fire-data-connect",[yk]:"fire-rtdb-compat",[vk]:"fire-fn",[bk]:"fire-fn-compat",[wk]:"fire-iid",[jk]:"fire-iid-compat",[Nk]:"fire-fcm",[Sk]:"fire-fcm-compat",[kk]:"fire-perf",[Ek]:"fire-perf-compat",[_k]:"fire-rc",[Ck]:"fire-rc-compat",[Tk]:"fire-gcs",[Ak]:"fire-gcs-compat",[Ik]:"fire-fst",[Pk]:"fire-fst-compat",[Rk]:"fire-vertex","fire-js":"fire-js",[Dk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,Ok=new Map,Qd=new Map;function h0(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oc(t){const e=t.name;if(Qd.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;Qd.set(e,t);for(const n of ic.values())h0(n,t);for(const n of Ok.values())h0(n,t);return!0}function Fk(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zk(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Gy("app","Firebase",Vk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=Lk;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hd,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ss.create("bad-app-name",{appName:String(i)});if(n||(n=Qy()),!n)throw ss.create("no-options");const o=ic.get(i);if(o){if(rc(n,o.options)&&rc(r,o.config))return o;throw ss.create("duplicate-app",{appName:i})}const a=new HS(i);for(const u of Qd.values())a.addComponent(u);const c=new $k(n,r,a);return ic.set(i,c),c}function Uk(t=Hd){const e=ic.get(t);if(!e&&t===Hd&&Qy())return Xy();if(!e)throw ss.create("no-app",{appName:t});return e}function xi(t,e,n){var r;let i=(r=Mk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(c.join(" "));return}oc(new Jo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="firebase-heartbeat-database",Hk=1,Zo="firebase-heartbeat-store";let Vu=null;function Jy(){return Vu||(Vu=sk(qk,Hk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Vu}async function Qk(t){try{const n=(await Jy()).transaction(Zo),r=await n.objectStore(Zo).get(Zy(t));return await n.done,r}catch(e){if(e instanceof $i)Tr.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function f0(t,e){try{const r=(await Jy()).transaction(Zo,"readwrite");await r.objectStore(Zo).put(e,Zy(t)),await r.done}catch(n){if(n instanceof $i)Tr.warn(n.message);else{const r=ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function Zy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=1024,Wk=30;class Yk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=m0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Wk){const a=Jk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=m0(),{heartbeatsToSend:r,unsentEntries:i}=Kk(this._heartbeatsCache.heartbeats),o=nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Tr.warn(n),""}}}function m0(){return new Date().toISOString().substring(0,10)}function Kk(t,e=Gk){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),p0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),p0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OS()?FS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function p0(t){return nc(JSON.stringify({version:2,heartbeats:t})).length}function Jk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){oc(new Jo("platform-logger",e=>new ak(e),"PRIVATE")),oc(new Jo("heartbeat",e=>new Yk(e),"PRIVATE")),xi(qd,d0,t),xi(qd,d0,"esm2017"),xi("fire-js","")}Zk("");var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gf;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,m){function x(){}x.prototype=m.prototype,k.D=m.prototype,k.prototype=new x,k.prototype.constructor=k,k.C=function(w,A,E){for(var T=Array(arguments.length-2),X=2;X<arguments.length;X++)T[X-2]=arguments[X];return m.prototype[A].apply(w,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,m,x){x||(x=0);var w=Array(16);if(typeof m=="string")for(var A=0;16>A;++A)w[A]=m.charCodeAt(x++)|m.charCodeAt(x++)<<8|m.charCodeAt(x++)<<16|m.charCodeAt(x++)<<24;else for(A=0;16>A;++A)w[A]=m[x++]|m[x++]<<8|m[x++]<<16|m[x++]<<24;m=k.g[0],x=k.g[1],A=k.g[2];var E=k.g[3],T=m+(E^x&(A^E))+w[0]+3614090360&4294967295;m=x+(T<<7&4294967295|T>>>25),T=E+(A^m&(x^A))+w[1]+3905402710&4294967295,E=m+(T<<12&4294967295|T>>>20),T=A+(x^E&(m^x))+w[2]+606105819&4294967295,A=E+(T<<17&4294967295|T>>>15),T=x+(m^A&(E^m))+w[3]+3250441966&4294967295,x=A+(T<<22&4294967295|T>>>10),T=m+(E^x&(A^E))+w[4]+4118548399&4294967295,m=x+(T<<7&4294967295|T>>>25),T=E+(A^m&(x^A))+w[5]+1200080426&4294967295,E=m+(T<<12&4294967295|T>>>20),T=A+(x^E&(m^x))+w[6]+2821735955&4294967295,A=E+(T<<17&4294967295|T>>>15),T=x+(m^A&(E^m))+w[7]+4249261313&4294967295,x=A+(T<<22&4294967295|T>>>10),T=m+(E^x&(A^E))+w[8]+1770035416&4294967295,m=x+(T<<7&4294967295|T>>>25),T=E+(A^m&(x^A))+w[9]+2336552879&4294967295,E=m+(T<<12&4294967295|T>>>20),T=A+(x^E&(m^x))+w[10]+4294925233&4294967295,A=E+(T<<17&4294967295|T>>>15),T=x+(m^A&(E^m))+w[11]+2304563134&4294967295,x=A+(T<<22&4294967295|T>>>10),T=m+(E^x&(A^E))+w[12]+1804603682&4294967295,m=x+(T<<7&4294967295|T>>>25),T=E+(A^m&(x^A))+w[13]+4254626195&4294967295,E=m+(T<<12&4294967295|T>>>20),T=A+(x^E&(m^x))+w[14]+2792965006&4294967295,A=E+(T<<17&4294967295|T>>>15),T=x+(m^A&(E^m))+w[15]+1236535329&4294967295,x=A+(T<<22&4294967295|T>>>10),T=m+(A^E&(x^A))+w[1]+4129170786&4294967295,m=x+(T<<5&4294967295|T>>>27),T=E+(x^A&(m^x))+w[6]+3225465664&4294967295,E=m+(T<<9&4294967295|T>>>23),T=A+(m^x&(E^m))+w[11]+643717713&4294967295,A=E+(T<<14&4294967295|T>>>18),T=x+(E^m&(A^E))+w[0]+3921069994&4294967295,x=A+(T<<20&4294967295|T>>>12),T=m+(A^E&(x^A))+w[5]+3593408605&4294967295,m=x+(T<<5&4294967295|T>>>27),T=E+(x^A&(m^x))+w[10]+38016083&4294967295,E=m+(T<<9&4294967295|T>>>23),T=A+(m^x&(E^m))+w[15]+3634488961&4294967295,A=E+(T<<14&4294967295|T>>>18),T=x+(E^m&(A^E))+w[4]+3889429448&4294967295,x=A+(T<<20&4294967295|T>>>12),T=m+(A^E&(x^A))+w[9]+568446438&4294967295,m=x+(T<<5&4294967295|T>>>27),T=E+(x^A&(m^x))+w[14]+3275163606&4294967295,E=m+(T<<9&4294967295|T>>>23),T=A+(m^x&(E^m))+w[3]+4107603335&4294967295,A=E+(T<<14&4294967295|T>>>18),T=x+(E^m&(A^E))+w[8]+1163531501&4294967295,x=A+(T<<20&4294967295|T>>>12),T=m+(A^E&(x^A))+w[13]+2850285829&4294967295,m=x+(T<<5&4294967295|T>>>27),T=E+(x^A&(m^x))+w[2]+4243563512&4294967295,E=m+(T<<9&4294967295|T>>>23),T=A+(m^x&(E^m))+w[7]+1735328473&4294967295,A=E+(T<<14&4294967295|T>>>18),T=x+(E^m&(A^E))+w[12]+2368359562&4294967295,x=A+(T<<20&4294967295|T>>>12),T=m+(x^A^E)+w[5]+4294588738&4294967295,m=x+(T<<4&4294967295|T>>>28),T=E+(m^x^A)+w[8]+2272392833&4294967295,E=m+(T<<11&4294967295|T>>>21),T=A+(E^m^x)+w[11]+1839030562&4294967295,A=E+(T<<16&4294967295|T>>>16),T=x+(A^E^m)+w[14]+4259657740&4294967295,x=A+(T<<23&4294967295|T>>>9),T=m+(x^A^E)+w[1]+2763975236&4294967295,m=x+(T<<4&4294967295|T>>>28),T=E+(m^x^A)+w[4]+1272893353&4294967295,E=m+(T<<11&4294967295|T>>>21),T=A+(E^m^x)+w[7]+4139469664&4294967295,A=E+(T<<16&4294967295|T>>>16),T=x+(A^E^m)+w[10]+3200236656&4294967295,x=A+(T<<23&4294967295|T>>>9),T=m+(x^A^E)+w[13]+681279174&4294967295,m=x+(T<<4&4294967295|T>>>28),T=E+(m^x^A)+w[0]+3936430074&4294967295,E=m+(T<<11&4294967295|T>>>21),T=A+(E^m^x)+w[3]+3572445317&4294967295,A=E+(T<<16&4294967295|T>>>16),T=x+(A^E^m)+w[6]+76029189&4294967295,x=A+(T<<23&4294967295|T>>>9),T=m+(x^A^E)+w[9]+3654602809&4294967295,m=x+(T<<4&4294967295|T>>>28),T=E+(m^x^A)+w[12]+3873151461&4294967295,E=m+(T<<11&4294967295|T>>>21),T=A+(E^m^x)+w[15]+530742520&4294967295,A=E+(T<<16&4294967295|T>>>16),T=x+(A^E^m)+w[2]+3299628645&4294967295,x=A+(T<<23&4294967295|T>>>9),T=m+(A^(x|~E))+w[0]+4096336452&4294967295,m=x+(T<<6&4294967295|T>>>26),T=E+(x^(m|~A))+w[7]+1126891415&4294967295,E=m+(T<<10&4294967295|T>>>22),T=A+(m^(E|~x))+w[14]+2878612391&4294967295,A=E+(T<<15&4294967295|T>>>17),T=x+(E^(A|~m))+w[5]+4237533241&4294967295,x=A+(T<<21&4294967295|T>>>11),T=m+(A^(x|~E))+w[12]+1700485571&4294967295,m=x+(T<<6&4294967295|T>>>26),T=E+(x^(m|~A))+w[3]+2399980690&4294967295,E=m+(T<<10&4294967295|T>>>22),T=A+(m^(E|~x))+w[10]+4293915773&4294967295,A=E+(T<<15&4294967295|T>>>17),T=x+(E^(A|~m))+w[1]+2240044497&4294967295,x=A+(T<<21&4294967295|T>>>11),T=m+(A^(x|~E))+w[8]+1873313359&4294967295,m=x+(T<<6&4294967295|T>>>26),T=E+(x^(m|~A))+w[15]+4264355552&4294967295,E=m+(T<<10&4294967295|T>>>22),T=A+(m^(E|~x))+w[6]+2734768916&4294967295,A=E+(T<<15&4294967295|T>>>17),T=x+(E^(A|~m))+w[13]+1309151649&4294967295,x=A+(T<<21&4294967295|T>>>11),T=m+(A^(x|~E))+w[4]+4149444226&4294967295,m=x+(T<<6&4294967295|T>>>26),T=E+(x^(m|~A))+w[11]+3174756917&4294967295,E=m+(T<<10&4294967295|T>>>22),T=A+(m^(E|~x))+w[2]+718787259&4294967295,A=E+(T<<15&4294967295|T>>>17),T=x+(E^(A|~m))+w[9]+3951481745&4294967295,k.g[0]=k.g[0]+m&4294967295,k.g[1]=k.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,k.g[2]=k.g[2]+A&4294967295,k.g[3]=k.g[3]+E&4294967295}r.prototype.u=function(k,m){m===void 0&&(m=k.length);for(var x=m-this.blockSize,w=this.B,A=this.h,E=0;E<m;){if(A==0)for(;E<=x;)i(this,k,E),E+=this.blockSize;if(typeof k=="string"){for(;E<m;)if(w[A++]=k.charCodeAt(E++),A==this.blockSize){i(this,w),A=0;break}}else for(;E<m;)if(w[A++]=k[E++],A==this.blockSize){i(this,w),A=0;break}}this.h=A,this.o+=m},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var m=1;m<k.length-8;++m)k[m]=0;var x=8*this.o;for(m=k.length-8;m<k.length;++m)k[m]=x&255,x/=256;for(this.u(k),k=Array(16),m=x=0;4>m;++m)for(var w=0;32>w;w+=8)k[x++]=this.g[m]>>>w&255;return k};function o(k,m){var x=c;return Object.prototype.hasOwnProperty.call(x,k)?x[k]:x[k]=m(k)}function a(k,m){this.h=m;for(var x=[],w=!0,A=k.length-1;0<=A;A--){var E=k[A]|0;w&&E==m||(x[A]=E,w=!1)}this.g=x}var c={};function u(k){return-128<=k&&128>k?o(k,function(m){return new a([m|0],0>m?-1:0)}):new a([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return g;if(0>k)return P(d(-k));for(var m=[],x=1,w=0;k>=x;w++)m[w]=k/x|0,x*=4294967296;return new a(m,0)}function f(k,m){if(k.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(k.charAt(0)=="-")return P(f(k.substring(1),m));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(m,8)),w=g,A=0;A<k.length;A+=8){var E=Math.min(8,k.length-A),T=parseInt(k.substring(A,A+E),m);8>E?(E=d(Math.pow(m,E)),w=w.j(E).add(d(T))):(w=w.j(x),w=w.add(d(T)))}return w}var g=u(0),y=u(1),N=u(16777216);t=a.prototype,t.m=function(){if(C(this))return-P(this).m();for(var k=0,m=1,x=0;x<this.g.length;x++){var w=this.i(x);k+=(0<=w?w:4294967296+w)*m,m*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(b(this))return"0";if(C(this))return"-"+P(this).toString(k);for(var m=d(Math.pow(k,6)),x=this,w="";;){var A=I(x,m).g;x=_(x,A.j(m));var E=((0<x.g.length?x.g[0]:x.h)>>>0).toString(k);if(x=A,b(x))return E+w;for(;6>E.length;)E="0"+E;w=E+w}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function b(k){if(k.h!=0)return!1;for(var m=0;m<k.g.length;m++)if(k.g[m]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=_(this,k),C(k)?-1:b(k)?0:1};function P(k){for(var m=k.g.length,x=[],w=0;w<m;w++)x[w]=~k.g[w];return new a(x,~k.h).add(y)}t.abs=function(){return C(this)?P(this):this},t.add=function(k){for(var m=Math.max(this.g.length,k.g.length),x=[],w=0,A=0;A<=m;A++){var E=w+(this.i(A)&65535)+(k.i(A)&65535),T=(E>>>16)+(this.i(A)>>>16)+(k.i(A)>>>16);w=T>>>16,E&=65535,T&=65535,x[A]=T<<16|E}return new a(x,x[x.length-1]&-2147483648?-1:0)};function _(k,m){return k.add(P(m))}t.j=function(k){if(b(this)||b(k))return g;if(C(this))return C(k)?P(this).j(P(k)):P(P(this).j(k));if(C(k))return P(this.j(P(k)));if(0>this.l(N)&&0>k.l(N))return d(this.m()*k.m());for(var m=this.g.length+k.g.length,x=[],w=0;w<2*m;w++)x[w]=0;for(w=0;w<this.g.length;w++)for(var A=0;A<k.g.length;A++){var E=this.i(w)>>>16,T=this.i(w)&65535,X=k.i(A)>>>16,te=k.i(A)&65535;x[2*w+2*A]+=T*te,j(x,2*w+2*A),x[2*w+2*A+1]+=E*te,j(x,2*w+2*A+1),x[2*w+2*A+1]+=T*X,j(x,2*w+2*A+1),x[2*w+2*A+2]+=E*X,j(x,2*w+2*A+2)}for(w=0;w<m;w++)x[w]=x[2*w+1]<<16|x[2*w];for(w=m;w<2*m;w++)x[w]=0;return new a(x,0)};function j(k,m){for(;(k[m]&65535)!=k[m];)k[m+1]+=k[m]>>>16,k[m]&=65535,m++}function S(k,m){this.g=k,this.h=m}function I(k,m){if(b(m))throw Error("division by zero");if(b(k))return new S(g,g);if(C(k))return m=I(P(k),m),new S(P(m.g),P(m.h));if(C(m))return m=I(k,P(m)),new S(P(m.g),m.h);if(30<k.g.length){if(C(k)||C(m))throw Error("slowDivide_ only works with positive integers.");for(var x=y,w=m;0>=w.l(k);)x=D(x),w=D(w);var A=M(x,1),E=M(w,1);for(w=M(w,2),x=M(x,2);!b(w);){var T=E.add(w);0>=T.l(k)&&(A=A.add(x),E=T),w=M(w,1),x=M(x,1)}return m=_(k,A.j(m)),new S(A,m)}for(A=g;0<=k.l(m);){for(x=Math.max(1,Math.floor(k.m()/m.m())),w=Math.ceil(Math.log(x)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),E=d(x),T=E.j(m);C(T)||0<T.l(k);)x-=w,E=d(x),T=E.j(m);b(E)&&(E=y),A=A.add(E),k=_(k,T)}return new S(A,k)}t.A=function(k){return I(this,k).h},t.and=function(k){for(var m=Math.max(this.g.length,k.g.length),x=[],w=0;w<m;w++)x[w]=this.i(w)&k.i(w);return new a(x,this.h&k.h)},t.or=function(k){for(var m=Math.max(this.g.length,k.g.length),x=[],w=0;w<m;w++)x[w]=this.i(w)|k.i(w);return new a(x,this.h|k.h)},t.xor=function(k){for(var m=Math.max(this.g.length,k.g.length),x=[],w=0;w<m;w++)x[w]=this.i(w)^k.i(w);return new a(x,this.h^k.h)};function D(k){for(var m=k.g.length+1,x=[],w=0;w<m;w++)x[w]=k.i(w)<<1|k.i(w-1)>>>31;return new a(x,k.h)}function M(k,m){var x=m>>5;m%=32;for(var w=k.g.length-x,A=[],E=0;E<w;E++)A[E]=0<m?k.i(E+x)>>>m|k.i(E+x+1)<<32-m:k.i(E+x);return new a(A,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,gf=a}).apply(typeof g0<"u"?g0:typeof self<"u"?self:typeof window<"u"?window:{});var rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ev,xo,tv,kl,Gd,nv,rv,sv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,v){return l==Array.prototype||l==Object.prototype||(l[p]=v.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof rl=="object"&&rl];for(var p=0;p<l.length;++p){var v=l[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(l,p){if(p)e:{var v=r;l=l.split(".");for(var R=0;R<l.length-1;R++){var V=l[R];if(!(V in v))break e;v=v[V]}l=l[l.length-1],R=v[l],p=p(R),p!=R&&p!=null&&e(v,l,{configurable:!0,writable:!0,value:p})}}function o(l,p){l instanceof String&&(l+="");var v=0,R=!1,V={next:function(){if(!R&&v<l.length){var W=v++;return{value:p(W,l[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(l){return l||function(){return o(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function d(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function f(l,p,v){return l.call.apply(l.bind,arguments)}function g(l,p,v){if(!l)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,R),l.apply(p,V)}}return function(){return l.apply(p,arguments)}}function y(l,p,v){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function N(l,p){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),l.apply(this,R)}}function b(l,p){function v(){}v.prototype=p.prototype,l.aa=p.prototype,l.prototype=new v,l.prototype.constructor=l,l.Qb=function(R,V,W){for(var fe=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)fe[tt-2]=arguments[tt];return p.prototype[V].apply(R,fe)}}function C(l){const p=l.length;if(0<p){const v=Array(p);for(let R=0;R<p;R++)v[R]=l[R];return v}return[]}function P(l,p){for(let v=1;v<arguments.length;v++){const R=arguments[v];if(u(R)){const V=l.length||0,W=R.length||0;l.length=V+W;for(let fe=0;fe<W;fe++)l[V+fe]=R[fe]}else l.push(R)}}class _{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function j(l){return/^[\s\xa0]*$/.test(l)}function S(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function I(l){return I[" "](l),l}I[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(l,p,v){for(const R in l)p.call(v,l[R],R,l)}function k(l,p){for(const v in l)p.call(void 0,l[v],v,l)}function m(l){const p={};for(const v in l)p[v]=l[v];return p}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,p){let v,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(v in R)l[v]=R[v];for(let W=0;W<x.length;W++)v=x[W],Object.prototype.hasOwnProperty.call(R,v)&&(l[v]=R[v])}}function A(l){var p=1;l=l.split(":");const v=[];for(;0<p&&l.length;)v.push(l.shift()),p--;return l.length&&v.push(l.join(":")),v}function E(l){c.setTimeout(()=>{throw l},0)}function T(){var l=F;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class X{constructor(){this.h=this.g=null}add(p,v){const R=te.get();R.set(p,v),this.h?this.h.next=R:this.g=R,this.h=R}}var te=new _(()=>new ne,l=>l.reset());class ne{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let K,U=!1,F=new X,B=()=>{const l=c.Promise.resolve(void 0);K=()=>{l.then($)}};var $=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(v){E(v)}var p=te;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}U=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const v=()=>{};c.addEventListener("test",v,p),c.removeEventListener("test",v,p)}catch{}return l}();function Z(l,p){if(z.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var v=this.type=l.type,R=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(D){e:{try{I(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else v=="mouseover"?p=l.fromElement:v=="mouseout"&&(p=l.toElement);this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:H[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Z.aa.h.call(this)}}b(Z,z);var H={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),Y=0;function q(l,p,v,R,V){this.listener=l,this.proxy=null,this.src=p,this.type=v,this.capture=!!R,this.ha=V,this.key=++Y,this.da=this.fa=!1}function ae(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function J(l){this.src=l,this.g={},this.h=0}J.prototype.add=function(l,p,v,R,V){var W=l.toString();l=this.g[W],l||(l=this.g[W]=[],this.h++);var fe=re(l,p,R,V);return-1<fe?(p=l[fe],v||(p.fa=!1)):(p=new q(p,this.src,W,!!R,V),p.fa=v,l.push(p)),p};function ee(l,p){var v=p.type;if(v in l.g){var R=l.g[v],V=Array.prototype.indexOf.call(R,p,void 0),W;(W=0<=V)&&Array.prototype.splice.call(R,V,1),W&&(ae(p),l.g[v].length==0&&(delete l.g[v],l.h--))}}function re(l,p,v,R){for(var V=0;V<l.length;++V){var W=l[V];if(!W.da&&W.listener==p&&W.capture==!!v&&W.ha==R)return V}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),G={};function O(l,p,v,R,V){if(R&&R.once)return pe(l,p,v,R,V);if(Array.isArray(p)){for(var W=0;W<p.length;W++)O(l,p[W],v,R,V);return null}return v=Me(v),l&&l[oe]?l.K(p,v,d(R)?!!R.capture:!!R,V):le(l,p,v,!1,R,V)}function le(l,p,v,R,V,W){if(!p)throw Error("Invalid event type");var fe=d(V)?!!V.capture:!!V,tt=$e(l);if(tt||(l[ie]=tt=new J(l)),v=tt.add(p,v,R,fe,W),v.proxy)return v;if(R=ue(),v.proxy=R,R.src=l,R.listener=v,l.addEventListener)Q||(V=fe),V===void 0&&(V=!1),l.addEventListener(p.toString(),R,V);else if(l.attachEvent)l.attachEvent(Ae(p.toString()),R);else if(l.addListener&&l.removeListener)l.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ue(){function l(v){return p.call(l.src,l.listener,v)}const p=Tt;return l}function pe(l,p,v,R,V){if(Array.isArray(p)){for(var W=0;W<p.length;W++)pe(l,p[W],v,R,V);return null}return v=Me(v),l&&l[oe]?l.L(p,v,d(R)?!!R.capture:!!R,V):le(l,p,v,!0,R,V)}function we(l,p,v,R,V){if(Array.isArray(p))for(var W=0;W<p.length;W++)we(l,p[W],v,R,V);else R=d(R)?!!R.capture:!!R,v=Me(v),l&&l[oe]?(l=l.i,p=String(p).toString(),p in l.g&&(W=l.g[p],v=re(W,v,R,V),-1<v&&(ae(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete l.g[p],l.h--)))):l&&(l=$e(l))&&(p=l.g[p.toString()],l=-1,p&&(l=re(p,v,R,V)),(v=-1<l?p[l]:null)&&Re(v))}function Re(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[oe])ee(p.i,l);else{var v=l.type,R=l.proxy;p.removeEventListener?p.removeEventListener(v,R,l.capture):p.detachEvent?p.detachEvent(Ae(v),R):p.addListener&&p.removeListener&&p.removeListener(R),(v=$e(p))?(ee(v,l),v.h==0&&(v.src=null,p[ie]=null)):ae(l)}}}function Ae(l){return l in G?G[l]:G[l]="on"+l}function Tt(l,p){if(l.da)l=!0;else{p=new Z(p,this);var v=l.listener,R=l.ha||l.src;l.fa&&Re(l),l=v.call(R,p)}return l}function $e(l){return l=l[ie],l instanceof J?l:null}var nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(l){return typeof l=="function"?l:(l[nt]||(l[nt]=function(p){return l.handleEvent(p)}),l[nt])}function _e(){L.call(this),this.i=new J(this),this.M=this,this.F=null}b(_e,L),_e.prototype[oe]=!0,_e.prototype.removeEventListener=function(l,p,v,R){we(this,l,p,v,R)};function qe(l,p){var v,R=l.F;if(R)for(v=[];R;R=R.F)v.push(R);if(l=l.M,R=p.type||p,typeof p=="string")p=new z(p,l);else if(p instanceof z)p.target=p.target||l;else{var V=p;p=new z(R,l),w(p,V)}if(V=!0,v)for(var W=v.length-1;0<=W;W--){var fe=p.g=v[W];V=St(fe,R,!0,p)&&V}if(fe=p.g=l,V=St(fe,R,!0,p)&&V,V=St(fe,R,!1,p)&&V,v)for(W=0;W<v.length;W++)fe=p.g=v[W],V=St(fe,R,!1,p)&&V}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var v=l.g[p],R=0;R<v.length;R++)ae(v[R]);delete l.g[p],l.h--}}this.F=null},_e.prototype.K=function(l,p,v,R){return this.i.add(String(l),p,!1,v,R)},_e.prototype.L=function(l,p,v,R){return this.i.add(String(l),p,!0,v,R)};function St(l,p,v,R){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,W=0;W<p.length;++W){var fe=p[W];if(fe&&!fe.da&&fe.capture==v){var tt=fe.listener,Ut=fe.ha||fe.src;fe.fa&&ee(l.i,fe),V=tt.call(Ut,R)!==!1&&V}}return V&&!R.defaultPrevented}function Ye(l,p,v){if(typeof l=="function")v&&(l=y(l,v));else if(l&&typeof l.handleEvent=="function")l=y(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:c.setTimeout(l,p||0)}function rt(l){l.g=Ye(()=>{l.g=null,l.i&&(l.i=!1,rt(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class dt extends L{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(l){L.call(this),this.h=l,this.g={}}b(Dt,L);var Je=[];function ht(l){M(l.g,function(p,v){this.g.hasOwnProperty(v)&&Re(p)},l),l.g={}}Dt.prototype.N=function(){Dt.aa.N.call(this),ht(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xt=c.JSON.stringify,Xt=c.JSON.parse,un=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Nn(){}Nn.prototype.h=null;function Rr(l){return l.h||(l.h=l.i())}function he(){}var je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oe(){z.call(this,"d")}b(Oe,z);function De(){z.call(this,"c")}b(De,z);var We={},Le=null;function Ze(){return Le=Le||new _e}We.La="serverreachability";function He(l){z.call(this,We.La,l)}b(He,z);function et(l){const p=Ze();qe(p,new He(p))}We.STAT_EVENT="statevent";function Ne(l,p){z.call(this,We.STAT_EVENT,l),this.stat=p}b(Ne,z);function ve(l){const p=Ze();qe(p,new Ne(p,l))}We.Ma="timingevent";function ke(l,p){z.call(this,We.Ma,l),this.size=p}b(ke,z);function ot(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},p)}function me(){this.g=!0}me.prototype.xa=function(){this.g=!1};function ye(l,p,v,R,V,W){l.info(function(){if(l.g)if(W)for(var fe="",tt=W.split("&"),Ut=0;Ut<tt.length;Ut++){var Qe=tt[Ut].split("=");if(1<Qe.length){var Jt=Qe[0];Qe=Qe[1];var Zt=Jt.split("_");fe=2<=Zt.length&&Zt[1]=="type"?fe+(Jt+"="+Qe+"&"):fe+(Jt+"=redacted&")}}else fe=null;else fe=W;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+p+`
`+v+`
`+fe})}function Ee(l,p,v,R,V,W,fe){l.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+p+`
`+v+`
`+W+" "+fe})}function Ie(l,p,v,R){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Lt(l,v)+(R?" "+R:"")})}function Fe(l,p){l.info(function(){return"TIMEOUT: "+p})}me.prototype.info=function(){};function Lt(l,p){if(!l.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(l=0;l<v.length;l++)if(Array.isArray(v[l])){var R=v[l];if(!(2>R.length)){var V=R[1];if(Array.isArray(V)&&!(1>V.length)){var W=V[0];if(W!="noop"&&W!="stop"&&W!="close")for(var fe=1;fe<V.length;fe++)V[fe]=""}}}}return xt(v)}catch{return p}}var kt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function dr(){}b(dr,Nn),dr.prototype.g=function(){return new XMLHttpRequest},dr.prototype.i=function(){return{}},Bn=new dr;function Pn(l,p,v,R){this.j=l,this.i=p,this.l=v,this.R=R||1,this.U=new Dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vf}function Vf(){this.i=null,this.g="",this.h=!1}var $f={},Qc={};function Gc(l,p,v){l.L=1,l.v=wa(hr(p)),l.m=v,l.P=!0,Bf(l,null)}function Bf(l,p){l.F=Date.now(),ya(l),l.A=hr(l.v);var v=l.A,R=l.R;Array.isArray(R)||(R=[String(R)]),nm(v.i,"t",R),l.C=0,v=l.j.J,l.h=new Vf,l.g=bm(l.j,v?p:null,!l.m),0<l.O&&(l.M=new dt(y(l.Y,l,l.g),l.O)),p=l.U,v=l.g,R=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Je[0]=V.toString()),V=Je);for(var W=0;W<V.length;W++){var fe=O(v,V[W],R||p.handleEvent,!1,p.h||p);if(!fe)break;p.g[fe.key]=fe}p=l.H?m(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),et(),ye(l.i,l.u,l.A,l.l,l.R,l.m)}Pn.prototype.ca=function(l){l=l.target;const p=this.M;p&&fr(l)==3?p.j():this.Y(l)},Pn.prototype.Y=function(l){try{if(l==this.g)e:{const Zt=fr(this.g);var p=this.g.Ba();const Ws=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||cm(this.g)))){this.J||Zt!=4||p==7||(p==8||0>=Ws?et(3):et(2)),Wc(this);var v=this.g.Z();this.X=v;t:if(Uf(this)){var R=cm(this.g);l="";var V=R.length,W=fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),qi(this);var fe="";break t}this.h.i=new c.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,l+=this.h.i.decode(R[p],{stream:!(W&&p==V-1)});R.length=0,this.h.g+=l,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=v==200,Ee(this.i,this.u,this.A,this.l,this.R,Zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Ut=this.g;if((tt=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(tt)){var Qe=tt;break t}}Qe=null}if(v=Qe)Ie(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yc(this,v);else{this.o=!1,this.s=3,ve(12),ps(this),qi(this);break e}}if(this.P){v=!0;let Un;for(;!this.J&&this.C<fe.length;)if(Un=c1(this,fe),Un==Qc){Zt==4&&(this.s=4,ve(14),v=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==$f){this.s=4,ve(15),Ie(this.i,this.l,fe,"[Invalid Chunk]"),v=!1;break}else Ie(this.i,this.l,Un,null),Yc(this,Un);if(Uf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||fe.length!=0||this.h.h||(this.s=1,ve(16),v=!1),this.o=this.o&&v,!v)Ie(this.i,this.l,fe,"[Invalid Chunked Response]"),ps(this),qi(this);else if(0<fe.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),tu(Jt),Jt.M=!0,ve(11))}}else Ie(this.i,this.l,fe,null),Yc(this,fe);Zt==4&&ps(this),this.o&&!this.J&&(Zt==4?gm(this.j,this):(this.o=!1,ya(this)))}else E1(this.g),v==400&&0<fe.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),ps(this),qi(this)}}}catch{}finally{}};function Uf(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function c1(l,p){var v=l.C,R=p.indexOf(`
`,v);return R==-1?Qc:(v=Number(p.substring(v,R)),isNaN(v)?$f:(R+=1,R+v>p.length?Qc:(p=p.slice(R,R+v),l.C=R+v,p)))}Pn.prototype.cancel=function(){this.J=!0,ps(this)};function ya(l){l.S=Date.now()+l.I,qf(l,l.I)}function qf(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=ot(y(l.ba,l),p)}function Wc(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Pn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Fe(this.i,this.A),this.L!=2&&(et(),ve(17)),ps(this),this.s=2,qi(this)):qf(this,this.S-l)};function qi(l){l.j.G==0||l.J||gm(l.j,l)}function ps(l){Wc(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,ht(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Yc(l,p){try{var v=l.j;if(v.G!=0&&(v.g==l||Kc(v.h,l))){if(!l.K&&Kc(v.h,l)&&v.G==3){try{var R=v.Da.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<l.F)_a(v),ka(v);else break e;eu(v),ve(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=ot(y(v.Za,v),6e3));if(1>=Gf(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xs(v,11)}else if((l.K||v.g==l)&&_a(v),!j(p))for(V=v.Da.g.parse(p),p=0;p<V.length;p++){let Qe=V[p];if(v.T=Qe[0],Qe=Qe[1],v.G==2)if(Qe[0]=="c"){v.K=Qe[1],v.ia=Qe[2];const Jt=Qe[3];Jt!=null&&(v.la=Jt,v.j.info("VER="+v.la));const Zt=Qe[4];Zt!=null&&(v.Aa=Zt,v.j.info("SVER="+v.Aa));const Ws=Qe[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(R=1.5*Ws,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Un=l.g;if(Un){const Ta=Un.g?Un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var W=R.h;W.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Xc(W,W.h),W.h=null))}if(R.D){const nu=Un.g?Un.g.getResponseHeader("X-HTTP-Session-Id"):null;nu&&(R.ya=nu,at(R.I,R.D,nu))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-l.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var fe=l;if(R.qa=vm(R,R.J?R.ia:null,R.W),fe.K){Wf(R.h,fe);var tt=fe,Ut=R.L;Ut&&(tt.I=Ut),tt.B&&(Wc(tt),ya(tt)),R.g=fe}else mm(R);0<v.i.length&&Ea(v)}else Qe[0]!="stop"&&Qe[0]!="close"||xs(v,7);else v.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?xs(v,7):Zc(v):Qe[0]!="noop"&&v.l&&v.l.ta(Qe),v.v=0)}}et(4)}catch{}}var u1=class{constructor(l,p){this.g=l,this.map=p}};function Hf(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qf(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Gf(l){return l.h?1:l.g?l.g.size:0}function Kc(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Xc(l,p){l.g?l.g.add(p):l.h=p}function Wf(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Hf.prototype.cancel=function(){if(this.i=Yf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Yf(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const v of l.g.values())p=p.concat(v.D);return p}return C(l.i)}function d1(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],v=l.length,R=0;R<v;R++)p.push(l[R]);return p}p=[],v=0;for(R in l)p[v++]=l[R];return p}function h1(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var v=0;v<l;v++)p.push(v);return p}p=[],v=0;for(const R in l)p[v++]=R;return p}}}function Kf(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var v=h1(l),R=d1(l),V=R.length,W=0;W<V;W++)p.call(void 0,R[W],v&&v[W],l)}var Xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f1(l,p){if(l){l=l.split("&");for(var v=0;v<l.length;v++){var R=l[v].indexOf("="),V=null;if(0<=R){var W=l[v].substring(0,R);V=l[v].substring(R+1)}else W=l[v];p(W,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function gs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof gs){this.h=l.h,va(this,l.j),this.o=l.o,this.g=l.g,ba(this,l.s),this.l=l.l;var p=l.i,v=new Gi;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Jf(this,v),this.m=l.m}else l&&(p=String(l).match(Xf))?(this.h=!1,va(this,p[1]||"",!0),this.o=Hi(p[2]||""),this.g=Hi(p[3]||"",!0),ba(this,p[4]),this.l=Hi(p[5]||"",!0),Jf(this,p[6]||"",!0),this.m=Hi(p[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}gs.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Qi(p,Zf,!0),":");var v=this.g;return(v||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Qi(p,Zf,!0),"@"),l.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&l.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&l.push("/"),l.push(Qi(v,v.charAt(0)=="/"?g1:p1,!0))),(v=this.i.toString())&&l.push("?",v),(v=this.m)&&l.push("#",Qi(v,y1)),l.join("")};function hr(l){return new gs(l)}function va(l,p,v){l.j=v?Hi(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function ba(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function Jf(l,p,v){p instanceof Gi?(l.i=p,v1(l.i,l.h)):(v||(p=Qi(p,x1)),l.i=new Gi(p,l.h))}function at(l,p,v){l.i.set(p,v)}function wa(l){return at(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Hi(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Qi(l,p,v){return typeof l=="string"?(l=encodeURI(l).replace(p,m1),v&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function m1(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Zf=/[#\/\?@]/g,p1=/[#\?:]/g,g1=/[#\?]/g,x1=/[#\?@]/g,y1=/#/g;function Gi(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Pr(l){l.g||(l.g=new Map,l.h=0,l.i&&f1(l.i,function(p,v){l.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Gi.prototype,t.add=function(l,p){Pr(this),this.i=null,l=Qs(this,l);var v=this.g.get(l);return v||this.g.set(l,v=[]),v.push(p),this.h+=1,this};function em(l,p){Pr(l),p=Qs(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function tm(l,p){return Pr(l),p=Qs(l,p),l.g.has(p)}t.forEach=function(l,p){Pr(this),this.g.forEach(function(v,R){v.forEach(function(V){l.call(p,V,R,this)},this)},this)},t.na=function(){Pr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let R=0;R<p.length;R++){const V=l[R];for(let W=0;W<V.length;W++)v.push(p[R])}return v},t.V=function(l){Pr(this);let p=[];if(typeof l=="string")tm(this,l)&&(p=p.concat(this.g.get(Qs(this,l))));else{l=Array.from(this.g.values());for(let v=0;v<l.length;v++)p=p.concat(l[v])}return p},t.set=function(l,p){return Pr(this),this.i=null,l=Qs(this,l),tm(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function nm(l,p,v){em(l,p),0<v.length&&(l.i=null,l.g.set(Qs(l,p),C(v)),l.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var R=p[v];const W=encodeURIComponent(String(R)),fe=this.V(R);for(R=0;R<fe.length;R++){var V=W;fe[R]!==""&&(V+="="+encodeURIComponent(String(fe[R]))),l.push(V)}}return this.i=l.join("&")};function Qs(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function v1(l,p){p&&!l.j&&(Pr(l),l.i=null,l.g.forEach(function(v,R){var V=R.toLowerCase();R!=V&&(em(this,R),nm(this,V,v))},l)),l.j=p}function b1(l,p){const v=new me;if(c.Image){const R=new Image;R.onload=N(Dr,v,"TestLoadImage: loaded",!0,p,R),R.onerror=N(Dr,v,"TestLoadImage: error",!1,p,R),R.onabort=N(Dr,v,"TestLoadImage: abort",!1,p,R),R.ontimeout=N(Dr,v,"TestLoadImage: timeout",!1,p,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=l}else p(!1)}function w1(l,p){const v=new me,R=new AbortController,V=setTimeout(()=>{R.abort(),Dr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:R.signal}).then(W=>{clearTimeout(V),W.ok?Dr(v,"TestPingServer: ok",!0,p):Dr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),Dr(v,"TestPingServer: error",!1,p)})}function Dr(l,p,v,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(v)}catch{}}function j1(){this.g=new un}function N1(l,p,v){const R=v||"";try{Kf(l,function(V,W){let fe=V;d(V)&&(fe=xt(V)),p.push(R+W+"="+encodeURIComponent(fe))})}catch(V){throw p.push(R+"type="+encodeURIComponent("_badmap")),V}}function ja(l){this.l=l.Ub||null,this.j=l.eb||!1}b(ja,Nn),ja.prototype.g=function(){return new Na(this.l,this.j)},ja.prototype.i=function(l){return function(){return l}}({});function Na(l,p){_e.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Na,_e),t=Na.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Yi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||c).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rm(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function rm(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Wi(this):Yi(this),this.readyState==3&&rm(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Wi(this))},t.Qa=function(l){this.g&&(this.response=l,Wi(this))},t.ga=function(){this.g&&Wi(this)};function Wi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Yi(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,l.push(v[0]+": "+v[1]),v=p.next();return l.join(`\r
`)};function Yi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sm(l){let p="";return M(l,function(v,R){p+=R,p+=":",p+=v,p+=`\r
`}),p}function Jc(l,p,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=sm(v),typeof l=="string"?v!=null&&encodeURIComponent(String(v)):at(l,p,v))}function wt(l){_e.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(wt,_e);var S1=/^https?$/i,k1=["POST","PUT"];t=wt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Rr(this.o):Rr(Bn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(W){im(this,W);return}if(l=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)v.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())v.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),V=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(k1,p,void 0))||R||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of v)this.g.setRequestHeader(W,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lm(this),this.u=!0,this.g.send(l),this.u=!1}catch(W){im(this,W)}};function im(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,om(l),Sa(l)}function om(l){l.A||(l.A=!0,qe(l,"complete"),qe(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,qe(this,"complete"),qe(this,"abort"),Sa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?am(this):this.bb())},t.bb=function(){am(this)};function am(l){if(l.h&&typeof a<"u"&&(!l.v[1]||fr(l)!=4||l.Z()!=2)){if(l.u&&fr(l)==4)Ye(l.Ea,0,l);else if(qe(l,"readystatechange"),fr(l)==4){l.h=!1;try{const fe=l.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var R;if(R=fe===0){var V=String(l.D).match(Xf)[1]||null;!V&&c.self&&c.self.location&&(V=c.self.location.protocol.slice(0,-1)),R=!S1.test(V?V.toLowerCase():"")}v=R}if(v)qe(l,"complete"),qe(l,"success");else{l.m=6;try{var W=2<fr(l)?l.g.statusText:""}catch{W=""}l.l=W+" ["+l.Z()+"]",om(l)}}finally{Sa(l)}}}}function Sa(l,p){if(l.g){lm(l);const v=l.g,R=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||qe(l,"ready");try{v.onreadystatechange=R}catch{}}}function lm(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function fr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Xt(p)}};function cm(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function E1(l){const p={};l=(l.g&&2<=fr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<l.length;R++){if(j(l[R]))continue;var v=A(l[R]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=p[V]||[];p[V]=W,W.push(v)}k(p,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(l,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[l]||p}function um(l){this.Aa=0,this.i=[],this.j=new me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ki("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ki("baseRetryDelayMs",5e3,l),this.cb=Ki("retryDelaySeedMs",1e4,l),this.Wa=Ki("forwardChannelMaxRetries",2,l),this.wa=Ki("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Hf(l&&l.concurrentRequestLimit),this.Da=new j1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=um.prototype,t.la=8,t.G=1,t.connect=function(l,p,v,R){ve(0),this.W=l,this.H=p||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=vm(this,null,this.W),Ea(this)};function Zc(l){if(dm(l),l.G==3){var p=l.U++,v=hr(l.I);if(at(v,"SID",l.K),at(v,"RID",p),at(v,"TYPE","terminate"),Xi(l,v),p=new Pn(l,l.j,p),p.L=2,p.v=wa(hr(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&c.Image&&(new Image().src=p.v,v=!0),v||(p.g=bm(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ya(p)}ym(l)}function ka(l){l.g&&(tu(l),l.g.cancel(),l.g=null)}function dm(l){ka(l),l.u&&(c.clearTimeout(l.u),l.u=null),_a(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ea(l){if(!Qf(l.h)&&!l.s){l.s=!0;var p=l.Ga;K||B(),U||(K(),U=!0),F.add(p,l),l.B=0}}function _1(l,p){return Gf(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=ot(y(l.Ga,l,p),xm(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Pn(this,this.j,l);let W=this.o;if(this.S&&(W?(W=m(W),w(W,this.S)):W=this.S),this.m!==null||this.O||(V.H=W,W=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=fm(this,V,p),v=hr(this.I),at(v,"RID",l),at(v,"CVER",22),this.D&&at(v,"X-HTTP-Session-Id",this.D),Xi(this,v),W&&(this.O?p="headers="+encodeURIComponent(String(sm(W)))+"&"+p:this.m&&Jc(v,this.m,W)),Xc(this.h,V),this.Ua&&at(v,"TYPE","init"),this.P?(at(v,"$req",p),at(v,"SID","null"),V.T=!0,Gc(V,v,null)):Gc(V,v,p),this.G=2}}else this.G==3&&(l?hm(this,l):this.i.length==0||Qf(this.h)||hm(this))};function hm(l,p){var v;p?v=p.l:v=l.U++;const R=hr(l.I);at(R,"SID",l.K),at(R,"RID",v),at(R,"AID",l.T),Xi(l,R),l.m&&l.o&&Jc(R,l.m,l.o),v=new Pn(l,l.j,v,l.B+1),l.m===null&&(v.H=l.o),p&&(l.i=p.D.concat(l.i)),p=fm(l,v,1e3),v.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Xc(l.h,v),Gc(v,R,p)}function Xi(l,p){l.H&&M(l.H,function(v,R){at(p,R,v)}),l.l&&Kf({},function(v,R){at(p,R,v)})}function fm(l,p,v){v=Math.min(l.i.length,v);var R=l.l?y(l.l.Na,l.l,l):null;e:{var V=l.i;let W=-1;for(;;){const fe=["count="+v];W==-1?0<v?(W=V[0].g,fe.push("ofs="+W)):W=0:fe.push("ofs="+W);let tt=!0;for(let Ut=0;Ut<v;Ut++){let Qe=V[Ut].g;const Jt=V[Ut].map;if(Qe-=W,0>Qe)W=Math.max(0,V[Ut].g-100),tt=!1;else try{N1(Jt,fe,"req"+Qe+"_")}catch{R&&R(Jt)}}if(tt){R=fe.join("&");break e}}}return l=l.i.splice(0,v),p.D=l,R}function mm(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;K||B(),U||(K(),U=!0),F.add(p,l),l.v=0}}function eu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=ot(y(l.Fa,l),xm(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,pm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=ot(y(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),ka(this),pm(this))};function tu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function pm(l){l.g=new Pn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=hr(l.qa);at(p,"RID","rpc"),at(p,"SID",l.K),at(p,"AID",l.T),at(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&at(p,"TO",l.ja),at(p,"TYPE","xmlhttp"),Xi(l,p),l.m&&l.o&&Jc(p,l.m,l.o),l.L&&(l.g.I=l.L);var v=l.g;l=l.ia,v.L=1,v.v=wa(hr(p)),v.m=null,v.P=!0,Bf(v,l)}t.Za=function(){this.C!=null&&(this.C=null,ka(this),eu(this),ve(19))};function _a(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function gm(l,p){var v=null;if(l.g==p){_a(l),tu(l),l.g=null;var R=2}else if(Kc(l.h,p))v=p.D,Wf(l.h,p),R=1;else return;if(l.G!=0){if(p.o)if(R==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var V=l.B;R=Ze(),qe(R,new ke(R,v)),Ea(l)}else mm(l);else if(V=p.s,V==3||V==0&&0<p.X||!(R==1&&_1(l,p)||R==2&&eu(l)))switch(v&&0<v.length&&(p=l.h,p.i=p.i.concat(v)),V){case 1:xs(l,5);break;case 4:xs(l,10);break;case 3:xs(l,6);break;default:xs(l,2)}}}function xm(l,p){let v=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(v*=2),v*p}function xs(l,p){if(l.j.info("Error code "+p),p==2){var v=y(l.fb,l),R=l.Xa;const V=!R;R=new gs(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||va(R,"https"),wa(R),V?b1(R.toString(),v):w1(R.toString(),v)}else ve(2);l.G=0,l.l&&l.l.sa(p),ym(l),dm(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function ym(l){if(l.G=0,l.ka=[],l.l){const p=Yf(l.h);(p.length!=0||l.i.length!=0)&&(P(l.ka,p),P(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function vm(l,p,v){var R=v instanceof gs?hr(v):new gs(v);if(R.g!="")p&&(R.g=p+"."+R.g),ba(R,R.s);else{var V=c.location;R=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var W=new gs(null);R&&va(W,R),p&&(W.g=p),V&&ba(W,V),v&&(W.l=v),R=W}return v=l.D,p=l.ya,v&&p&&at(R,v,p),at(R,"VER",l.la),Xi(l,R),R}function bm(l,p,v){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new wt(new ja({eb:v})):new wt(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wm(){}t=wm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(l,p){return new kn(l,p)};function kn(l,p){_e.call(this),this.g=new um(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!j(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!j(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Gs(this)}b(kn,_e),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Zc(this.g)},kn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var v={};v.__data__=l,l=v}else this.u&&(v={},v.__data__=xt(l),l=v);p.i.push(new u1(p.Ya++,l)),p.G==3&&Ea(p)},kn.prototype.N=function(){this.g.l=null,delete this.j,Zc(this.g),delete this.g,kn.aa.N.call(this)};function jm(l){Oe.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const v in p){l=v;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}b(jm,Oe);function Nm(){De.call(this),this.status=1}b(Nm,De);function Gs(l){this.g=l}b(Gs,wm),Gs.prototype.ua=function(){qe(this.g,"a")},Gs.prototype.ta=function(l){qe(this.g,new jm(l))},Gs.prototype.sa=function(l){qe(this.g,new Nm)},Gs.prototype.ra=function(){qe(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,sv=function(){return new Ca},rv=function(){return Ze()},nv=We,Gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kt.NO_ERROR=0,kt.TIMEOUT=8,kt.HTTP_ERROR=6,kl=kt,Sn.COMPLETE="complete",tv=Sn,he.EventType=je,je.OPEN="a",je.CLOSE="b",je.ERROR="c",je.MESSAGE="d",_e.prototype.listen=_e.prototype.K,xo=he,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,ev=wt}).apply(typeof rl<"u"?rl:typeof self<"u"?self:typeof window<"u"?window:{});const x0="@firebase/firestore",y0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bi="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Wy("@firebase/firestore");function Xs(){return Os.logLevel}function be(t,...e){if(Os.logLevel<=Ve.DEBUG){const n=e.map(xf);Os.debug(`Firestore (${Bi}): ${t}`,...n)}}function Fs(t,...e){if(Os.logLevel<=Ve.ERROR){const n=e.map(xf);Os.error(`Firestore (${Bi}): ${t}`,...n)}}function Ci(t,...e){if(Os.logLevel<=Ve.WARN){const n=e.map(xf);Os.warn(`Firestore (${Bi}): ${t}`,...n)}}function xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iv(t,r,n)}function iv(t,e,n){let r=`FIRESTORE (${Bi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fs(r),new Error(r)}function Nt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||iv(e,i,r)}function it(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class tE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nE{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new As;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new As,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new As)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new ov(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class rE{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sE{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new rE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zk(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nt(this.o===void 0,3512);const r=o=>{o.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=oE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function Wd(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Be(r,i);{const o=aE(),a=lE(o.encode(b0(t,n)),o.encode(b0(e,n)));return a!==0?a:Be(r,i)}}n+=r>65535?2:1}return Be(t.length,e.length)}function b0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function lE(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Be(t[n],e[n]);return Be(t.length,e.length)}function Ti(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="__name__";class ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=ir.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Be(e.length,n.length)}static compareSegments(e,n){const r=ir.isNumericId(e),i=ir.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ir.extractNumericId(e).compare(ir.extractNumericId(n)):Wd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gf.fromString(e.substring(4,e.length-2))}}class _t extends ir{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const cE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends ir{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return cE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===w0}static keyField(){return new Gt([w0])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Se(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Se(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new Se(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(_t.fromString(e))}static fromName(e){return new Ce(_t.fromString(e).popFirst(5))}static empty(){return new Ce(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e,n){if(!n)throw new Se(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dE(t,e,n,r){if(e===!0&&r===!0)throw new Se(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j0(t){if(!Ce.isDocumentKey(t))throw new Se(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function av(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function Yd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vf(t);throw new Se(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ha(t,e){if(!av(t))throw new Se(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Se(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=-62135596800,S0=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*S0);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<N0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/S0}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ha(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-N0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Pt("string",pt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new pt(0,0))}static max(){return new ft(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=-1;function hE(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ft.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ls(i,Ce.empty(),e)}function fE(t){return new ls(t.readTime,t.key,ea)}class ls{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ls(ft.min(),Ce.empty(),ea)}static max(){return new ls(ft.max(),Ce.empty(),ea)}}function mE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==pE)throw t;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&n()},u=>r(u))}),a=!0,o===i&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(i=>i?se.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new se((r,i)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===o&&r(a)},f=>i(f))}})}static doWhile(e,n){return new se((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function xE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}wf.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function Nf(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function yE(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="";function vE(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=k0(e)),e=bE(t.get(n),e);return k0(e)}function bE(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case lv:n+="";break;default:n+=o}}return n}function k0(t){return t+lv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new jn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sl(this.root,e,this.comparator,!0)}}class sl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Ht.RED,this.left=i??Ht.EMPTY,this.right=o??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Ht(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _0(this.data.getIterator())}getIteratorFrom(e){return new _0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class _0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Yt(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wE("Invalid base64 string: "+o):o}}(e);return new cr(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new cr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const jE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(t){if(Nt(!!t,39018),typeof t=="string"){let e=0;const n=jE.exec(t);if(Nt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ai(t){return typeof t=="string"?cr.fromBase64String(t):cr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="server_timestamp",dv="__type__",hv="__previous_value__",fv="__local_write_time__";function Sf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[dv])===null||n===void 0?void 0:n.stringValue)===uv}function kf(t){const e=t.mapValue.fields[hv];return Sf(e)?kf(e):e}function lc(t){const e=zs(t.mapValue.fields[fv].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r,i,o,a,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const cc="(default)";class uc{constructor(e,n){this.projectId=e,this.database=n||cc}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__type__",pv="__max__",il={mapValue:{fields:{__type__:{stringValue:pv}}}},gv="__vector__",Kd="value";function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sf(t)?4:kE(t)?9007199254740991:SE(t)?10:11:Te(28295,{value:t})}function ur(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=zs(i.timestampValue),c=zs(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ai(i.bytesValue).isEqual(Ai(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Qt(i.geoPointValue.latitude)===Qt(o.geoPointValue.latitude)&&Qt(i.geoPointValue.longitude)===Qt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Qt(i.integerValue)===Qt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=Qt(i.doubleValue),c=Qt(o.doubleValue);return a===c?ac(a)===ac(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(E0(a)!==E0(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!ur(a[u],c[u])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function ta(t,e){return(t.values||[]).find(n=>ur(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=Vs(t),r=Vs(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Qt(o.integerValue||o.doubleValue),u=Qt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return C0(t.timestampValue,e.timestampValue);case 4:return C0(lc(t),lc(e));case 5:return Wd(t.stringValue,e.stringValue);case 6:return function(o,a){const c=Ai(o),u=Ai(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Be(c[d],u[d]);if(f!==0)return f}return Be(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=Be(Qt(o.latitude),Qt(a.latitude));return c!==0?c:Be(Qt(o.longitude),Qt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return T0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,f;const g=o.fields||{},y=a.fields||{},N=(c=g[Kd])===null||c===void 0?void 0:c.arrayValue,b=(u=y[Kd])===null||u===void 0?void 0:u.arrayValue,C=Be(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:T0(N,b)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===il.mapValue&&a===il.mapValue)return 0;if(o===il.mapValue)return 1;if(a===il.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const y=Wd(u[g],f[g]);if(y!==0)return y;const N=Ii(c[u[g]],d[f[g]]);if(N!==0)return N}return Be(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{le:n})}}function C0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=zs(t),r=zs(e),i=Be(n.seconds,r.seconds);return i!==0?i:Be(n.nanos,r.nanos)}function T0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Ii(n[i],r[i]);if(o)return o}return Be(n.length,r.length)}function Ri(t){return Xd(t)}function Xd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Xd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Xd(n.fields[a])}`;return i+"}"}(t.mapValue):Te(61005,{value:t})}function El(t){switch(Vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+El(e):16;case 5:return 2*t.stringValue.length;case 6:return Ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+El(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ui(r.fields,(o,a)=>{i+=o.length+El(a)}),i}(t.mapValue);default:throw Te(13486,{value:t})}}function Jd(t){return!!t&&"integerValue"in t}function Ef(t){return!!t&&"arrayValue"in t}function _l(t){return!!t&&"mapValue"in t}function SE(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mv])===null||n===void 0?void 0:n.stringValue)===gv}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Gt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=To(a):i.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());_l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_l(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Kn(To(this.value))}}function xv(t){const e=[];return Ui(t.fields,(n,r)=>{const i=new Gt([n]);if(_l(r)){const o=xv(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,o,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Yn(e,0,ft.min(),ft.min(),ft.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,i){return new Yn(e,1,n,ft.min(),r,i,0)}static newNoDocument(e,n){return new Yn(e,2,n,ft.min(),ft.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new Yn(e,3,n,ft.min(),ft.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.position=e,this.inclusive=n}}function A0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=Ce.comparator(Ce.fromName(a.referenceValue),n.key):r=Ii(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function I0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function EE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{}class $t extends yv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CE(e,n,r):n==="array-contains"?new IE(e,r):n==="in"?new RE(e,r):n==="not-in"?new PE(e,r):n==="array-contains-any"?new DE(e,r):new $t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TE(e,r):new AE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ii(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends yv{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new cs(e,n)}matches(e){return vv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function vv(t){return t.op==="and"}function bv(t){return _E(t)&&vv(t)}function _E(t){for(const e of t.filters)if(e instanceof cs)return!1;return!0}function Zd(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Ri(t.value);if(bv(t))return t.filters.map(e=>Zd(e)).join(",");{const e=t.filters.map(n=>Zd(n)).join(",");return`${t.op}(${e})`}}function wv(t,e){return t instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&ur(r.value,i.value)}(t,e):t instanceof cs?function(r,i){return i instanceof cs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&wv(a,i.filters[c]),!0):!1}(t,e):void Te(19439)}function jv(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${Ri(n.value)}`}(t):t instanceof cs?function(n){return n.op.toString()+" {"+n.getFilters().map(jv).join(" ,")+"}"}(t):"Filter"}class CE extends $t{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class TE extends $t{constructor(e,n){super(e,"in",n),this.keys=Nv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AE extends $t{constructor(e,n){super(e,"not-in",n),this.keys=Nv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Nv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class IE extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ef(n)&&ta(n.arrayValue,this.value)}}class RE extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ta(this.value.arrayValue,n)}}class PE extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ta(this.value.arrayValue,n)}}class DE extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ef(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.Pe=null}}function R0(t,e=null,n=[],r=[],i=null,o=null,a=null){return new LE(t,e,n,r,i,o,a)}function _f(t){const e=it(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ri(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ri(r)).join(",")),e.Pe=n}return e.Pe}function Cf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I0(t.startAt,e.startAt)&&I0(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n=null,r=[],i=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function ME(t,e,n,r,i,o,a,c){return new zc(t,e,n,r,i,o,a,c)}function OE(t){return new zc(t)}function P0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FE(t){return t.collectionGroup!==null}function Ao(t){const e=it(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Yt(Gt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new hc(o,r))}),n.has(Gt.keyField().canonicalString())||e.Te.push(new hc(Gt.keyField(),r))}return e.Te}function Is(t){const e=it(t);return e.Ie||(e.Ie=zE(e,Ao(t))),e.Ie}function zE(t,e){if(t.limitType==="F")return R0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new hc(i.field,o)});const n=t.endAt?new dc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dc(t.startAt.position,t.startAt.inclusive):null;return R0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function eh(t,e,n){return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sv(t,e){return Cf(Is(t),Is(e))&&t.limitType===e.limitType}function kv(t){return`${_f(Is(t))}|lt:${t.limitType}`}function ho(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jv(i)).join(", ")}]`),Nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ri(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ri(i)).join(",")),`Target(${r})`}(Is(t))}; limitType=${t.limitType})`}function Tf(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ao(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){const d=A0(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Ao(r),i)||r.endAt&&!function(a,c,u){const d=A0(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Ao(r),i))}(t,e)}function VE(t){return(e,n)=>{let r=!1;for(const i of Ao(t)){const o=$E(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $E(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Ii(u,d):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return cv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=new jn(Ce.comparator);function fc(){return BE}const Ev=new jn(Ce.comparator);function ol(...t){let e=Ev;for(const n of t)e=e.insert(n.key,n);return e}function _v(t){let e=Ev;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return Io()}function Cv(){return Io()}function Io(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const UE=new jn(Ce.comparator),qE=new Yt(Ce.comparator);function an(...t){let e=qE;for(const n of t)e=e.add(n);return e}const HE=new Yt(Be);function QE(){return HE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function Tv(t){return{integerValue:""+t}}function GE(t,e){return yE(e)?Tv(e):Af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function WE(t,e,n){return t instanceof mc?function(i,o){const a={fields:{[dv]:{stringValue:uv},[fv]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sf(o)&&(o=kf(o)),o&&(a.fields[hv]=o),{mapValue:a}}(n,e):t instanceof na?Iv(t,e):t instanceof ra?Rv(t,e):function(i,o){const a=Av(i,o),c=D0(a)+D0(i.Ee);return Jd(a)&&Jd(i.Ee)?Tv(c):Af(i.serializer,c)}(t,e)}function YE(t,e,n){return t instanceof na?Iv(t,e):t instanceof ra?Rv(t,e):n}function Av(t,e){return t instanceof pc?function(r){return Jd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class mc extends Vc{}class na extends Vc{constructor(e){super(),this.elements=e}}function Iv(t,e){const n=Pv(e);for(const r of t.elements)n.some(i=>ur(i,r))||n.push(r);return{arrayValue:{values:n}}}class ra extends Vc{constructor(e){super(),this.elements=e}}function Rv(t,e){let n=Pv(e);for(const r of t.elements)n=n.filter(i=>!ur(i,r));return{arrayValue:{values:n}}}class pc extends Vc{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function D0(t){return Qt(t.integerValue||t.doubleValue)}function Pv(t){return Ef(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KE(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof na&&i instanceof na||r instanceof ra&&i instanceof ra?Ti(r.elements,i.elements,ur):r instanceof pc&&i instanceof pc?ur(r.Ee,i.Ee):r instanceof mc&&i instanceof mc}(t.transform,e.transform)}class XE{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $c{}function Dv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mv(t.key,wr.none()):new ma(t.key,t.data,wr.none());{const n=t.data,r=Kn.empty();let i=new Yt(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Hs(t.key,r,new Jn(i.toArray()),wr.none())}}function JE(t,e,n){t instanceof ma?function(i,o,a){const c=i.value.clone(),u=M0(i.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,o,a){if(!Cl(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=M0(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(Lv(i)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ro(t,e,n,r){return t instanceof ma?function(o,a,c,u){if(!Cl(o.precondition,a))return c;const d=o.value.clone(),f=O0(o.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(o,a,c,u){if(!Cl(o.precondition,a))return c;const d=O0(o.fieldTransforms,u,a),f=a.data;return f.setAll(Lv(o)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(o,a,c){return Cl(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function ZE(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Av(r.transform,i||null);o!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,o))}return n||null}function L0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ti(r,i,(o,a)=>KE(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ma extends $c{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends $c{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function M0(t,e,n){const r=new Map;Nt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,YE(a,c,n[i]))}return r}function O0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,WE(o,a,e))}return r}class Mv extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e_ extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&JE(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ro(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ro(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Cv();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(i.key)?null:c;const u=Dv(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ft.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),an())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>L0(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>L0(n,r))}}class If{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return UE}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new If(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,ze;function r_(t){switch(t){case ce.OK:return Te(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function s_(t){if(t===void 0)return Fs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case At.OK:return ce.OK;case At.CANCELLED:return ce.CANCELLED;case At.UNKNOWN:return ce.UNKNOWN;case At.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case At.INTERNAL:return ce.INTERNAL;case At.UNAVAILABLE:return ce.UNAVAILABLE;case At.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case At.NOT_FOUND:return ce.NOT_FOUND;case At.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case At.ABORTED:return ce.ABORTED;case At.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case At.DATA_LOSS:return ce.DATA_LOSS;default:return Te(39323,{code:t})}}(ze=At||(At={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new gf([4294967295,4294967295],0);class i_{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function th(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function o_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a_(t,e){return th(t,e.toTimestamp())}function yi(t){return Nt(!!t,49232),ft.fromTimestamp(function(n){const r=zs(n);return new pt(r.seconds,r.nanos)}(t))}function Ov(t,e){return nh(t,e).canonicalString()}function nh(t,e){const n=function(i){return new _t(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function l_(t){const e=_t.fromString(t);return Nt(g_(e),10190,{key:e.toString()}),e}function rh(t,e){return Ov(t.databaseId,e.path)}function c_(t){const e=l_(t);return e.length===4?_t.emptyPath():d_(e)}function u_(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d_(t){return Nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F0(t,e,n){return{name:rh(t,e),fields:n.value.mapValue.fields}}function h_(t,e){let n;if(e instanceof ma)n={update:F0(t,e.key,e.value)};else if(e instanceof Mv)n={delete:rh(t,e.key)};else if(e instanceof Hs)n={update:F0(t,e.key,e.data),updateMask:p_(e.fieldMask)};else{if(!(e instanceof e_))return Te(16599,{Rt:e.type});n={verify:rh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof mc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof na)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ra)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof pc)return{fieldPath:a.field.canonicalString(),increment:c.Ee};throw Te(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:a_(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)}(t,e.precondition)),n}function f_(t,e){return t&&t.length>0?(Nt(e!==void 0,14353),t.map(n=>function(i,o){let a=i.updateTime?yi(i.updateTime):yi(o);return a.isEqual(ft.min())&&(a=yi(o)),new XE(a,i.transformResults||[])}(n,e))):[]}function m_(t){let e=c_(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Nt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=function(g){const y=Fv(g);return y instanceof cs&&bv(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(b){return new hc(Js(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(g){let y;return y=typeof g=="object"?g.value:g,Nf(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,N=g.values||[];return new dc(N,y)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const y=!g.before,N=g.values||[];return new dc(N,y)}(n.endAt)),ME(e,i,a,o,c,"F",u,d)}function Fv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Js(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Js(n.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Js(n.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Js(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(Js(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cs.create(n.compositeFilter.filters.map(r=>Fv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function Js(t){return Gt.fromServerFormat(t.fieldPath)}function p_(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function g_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this.gt=e}}function y_(t){const e=m_({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?eh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.Dn=new b_}addToCollectionParentIndex(e,n){return this.Dn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(ls.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(ls.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class b_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Yt(_t.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Yt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zv=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(zv,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Pi(0)}static ur(){return new Pi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="LruGarbageCollector",w_=1048576;function $0([t,e],[n,r]){const i=Be(t,n);return i===0?Be(e,r):i}class j_{constructor(e){this.Tr=e,this.buffer=new Yt($0),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N_{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){be(V0,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fa(n)?be(V0,"Ignoring IndexedDB error during garbage collection: ",n):await bf(n)}await this.Rr(3e5)})}}class S_{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(wf.ue);const r=new j_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(z0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,a,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,a=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,c=Date.now(),this.removeTargets(e,r,n))).next(g=>(o=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Xs()<=Ve.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${g} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}function k_(t,e){return new S_(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ro(r.mutation,i,Jn.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,an()).next(()=>r))}getLocalViewOfDocuments(e,n,r=an()){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=ol();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,an()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let o=fc();const a=Io(),c=function(){return Io()}();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof Hs)?o=o.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Ro(f.mutation,d,f.mutation.getFieldMask(),pt.now())):a.set(d.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new __(f,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Io();let i=new jn((a,c)=>a-c),o=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Jn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const g=(i.get(c.batchId)||an()).add(u);i=i.insert(c.batchId,g)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,g=Cv();f.forEach(y=>{if(!o.has(y)){const N=Dv(n.get(y),r.get(y));N!==null&&g.set(y,N),o=o.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return se.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return Ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):se.resolve(_s());let c=ea,u=o;return a.next(d=>se.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(f)?se.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,an())).next(f=>({batchId:c,changes:_v(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(r=>{let i=ol();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=ol();return this.indexManager.getCollectionParents(e,o).next(c=>se.forEach(c,u=>{const d=function(g,y){return new zc(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Yn.newInvalidDocument(f)))});let c=ol();return a.forEach((u,d)=>{const f=o.get(u);f!==void 0&&Ro(f.mutation,d,Jn.empty(),pt.now()),Tf(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return se.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yi(i.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:y_(i.bundledQuery),readTime:yi(i.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.overlays=new jn(Ce.comparator),this.kr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return se.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const i=_s(),o=n.length+1,a=new Ce(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new jn((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=o.get(d.largestBatchId);f===null&&(f=_s(),o=o.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=_s(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return se.resolve(c)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new n_(n,r));let o=this.kr.get(n);o===void 0&&(o=an(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.qr=new Yt(zt.Qr),this.$r=new Yt(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new zt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ce(new _t([])),r=new zt(n,e),i=new zt(n,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ce(new _t([])),r=new zt(n,e),i=new zt(n,e+1);let o=an();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new zt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ce.comparator(e.key,n.key)||Be(e.Hr,n.Hr)}static Ur(e,n){return Be(e.Hr,n.Hr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Yt(zt.Qr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new t_(o,n,r,i);this.mutationQueue.push(a);for(const c of i)this.Yr=this.Yr.add(new zt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return se.resolve(a)}lookupMutationBatch(e,n){return se.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?jf:this.er-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),i=new zt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{const c=this.Zr(a.Hr);o.push(c)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Be);return n.forEach(i=>{const o=new zt(i,0),a=new zt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],c=>{r=r.add(c.Hr)})}),se.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Ce.isDocumentKey(o)||(o=o.child(""));const a=new zt(new Ce(o),0);let c=new Yt(Be);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Hr)),!0)},a),se.resolve(this.ei(c))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Nt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return se.forEach(n.mutations,i=>{const o=new zt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new zt(n,0),i=this.Yr.firstAfterOrEqual(r);return se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.ni=e,this.docs=function(){return new jn(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():Yn.newInvalidDocument(n))}getEntries(e,n){let r=fc();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yn.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=fc();const a=n.path,c=new Ce(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||mE(fE(f),r)<=0||(i.has(f.key)||Tf(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Te(9500)}ri(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D_(this)}getSize(e){return se.resolve(this.size)}}class D_ extends E_{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.persistence=e,this.ii=new qs(n=>_f(n),Cf),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.si=0,this.oi=new Rf,this.targetCount=0,this._i=Pi.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),se.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.hr(n),se.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),se.waitFor(o).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){this.ai={},this.overlays={},this.ui=new wf(0),this.ci=!1,this.ci=!0,this.li=new I_,this.referenceDelegate=e(this),this.hi=new L_(this),this.indexManager=new v_,this.remoteDocumentCache=function(i){return new P_(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new x_(n),this.Ti=new T_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new R_(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){be("MemoryPersistence","Starting transaction:",e);const i=new M_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return se.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class M_ extends gE{constructor(e){super(),this.currentSequenceNumber=e}}class Pf{constructor(e){this.persistence=e,this.Ai=new Rf,this.Ri=null}static Vi(e){return new Pf(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.mi,r=>{const i=Ce.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ft.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return se.or([()=>se.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class gc{constructor(e,n){this.persistence=e,this.gi=new qs(r=>vE(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=k_(this,n)}static Vi(e,n){return new gc(e,n)}Ii(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return se.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?se.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,n).next(c=>{c||(r++,o.removeEntry(a,ft.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),se.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=El(e.data.value)),n}Sr(e,n,r){return se.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=an(),i=an();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Df(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return MS()?8:xE(DS())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new O_;return this.ws(e,n,a).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,n,a,c.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Xs()<=Ve.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(Xs()<=Ve.DEBUG&&be("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Xs()<=Ve.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Is(n))):se.resolve())}ps(e,n){if(P0(n))return se.resolve(null);let r=Is(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=eh(n,null,"F"),r=Is(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=an(...o);return this.gs.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,c);return this.Ds(n,d,a,u.readTime)?this.ps(e,eh(n,null,"F")):this.vs(e,d,n,u)}))})))}ys(e,n,r,i){return P0(n)||i.isEqual(ft.min())?se.resolve(null):this.gs.getDocuments(e,r).next(o=>{const a=this.bs(n,o);return this.Ds(n,a,r,i)?se.resolve(null):(Xs()<=Ve.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ho(n)),this.vs(e,a,n,hE(i,ea)).next(c=>c))})}bs(e,n){let r=new Yt(VE(e));return n.forEach((i,o)=>{Tf(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Xs()<=Ve.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ho(n)),this.gs.getDocumentsMatchingQuery(e,n,ls.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LocalStore";class V_{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new jn(Be),this.Ms=new qs(o=>_f(o),Cf),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function $_(t,e,n,r){return new V_(t,e,n,r)}async function $v(t,e){const n=it(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=an();for(const d of i){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of o){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:c}))})})}function B_(t,e){const n=it(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const g=d.batch,y=g.keys();let N=se.resolve();return y.forEach(b=>{N=N.next(()=>f.getEntry(u,b)).next(C=>{const P=d.docVersions.get(b);Nt(P!==null,48541),C.version.compareTo(P)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),N.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=an();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function U_(t){const e=it(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function q_(t,e){const n=it(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}class B0{constructor(){this.activeTargetIds=QE()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H_{constructor(){this.Fo=new B0,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new B0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="ConnectivityMonitor";class q0{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){be(U0,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){be(U0,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al=null;function sh(){return al===null?al=function(){return 268435456+Math.round(2147483648*Math.random())}():al++,"0x"+al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="RestConnection",G_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W_{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===cc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const a=sh(),c=this.Go(e,n.toUriEncodedString());be($u,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);const{host:d}=new URL(c),f=mf(d);return this.jo(e,c,u,r,f).then(g=>(be($u,`Received RPC '${e}' ${a}: `,g),g),g=>{throw Ci($u,`RPC '${e}' ${a} failed with error: `,g,"url: ",c,"request:",r),g})}Jo(e,n,r,i,o,a){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=G_[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class K_ extends W_{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const a=sh();return new Promise((c,u)=>{const d=new ev;d.setWithCredentials(!0),d.listenOnce(tv.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case kl.NO_ERROR:const g=d.getResponseJson();be(nn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),c(g);break;case kl.TIMEOUT:be(nn,`RPC '${e}' ${a} timed out`),u(new Se(ce.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const y=d.getStatus();if(be(nn,`RPC '${e}' ${a} failed with status:`,y,"response text:",d.getResponseText()),y>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const b=N==null?void 0:N.error;if(b&&b.status&&b.message){const C=function(_){const j=_.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(j)>=0?j:ce.UNKNOWN}(b.status);u(new Se(C,b.message))}else u(new Se(ce.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Se(ce.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{be(nn,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(i);be(nn,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",f,r,15)})}P_(e,n,r){const i=sh(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sv(),c=rv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=o.join("");be(nn,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=a.createWebChannel(f,u);this.T_(g);let y=!1,N=!1;const b=new Y_({Ho:P=>{N?be(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(y||(be(nn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),be(nn,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},Yo:()=>g.close()}),C=(P,_,j)=>{P.listen(_,S=>{try{j(S)}catch(I){setTimeout(()=>{throw I},0)}})};return C(g,xo.EventType.OPEN,()=>{N||(be(nn,`RPC '${e}' stream ${i} transport opened.`),b.s_())}),C(g,xo.EventType.CLOSE,()=>{N||(N=!0,be(nn,`RPC '${e}' stream ${i} transport closed`),b.__(),this.I_(g))}),C(g,xo.EventType.ERROR,P=>{N||(N=!0,Ci(nn,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),b.__(new Se(ce.UNAVAILABLE,"The operation could not be completed")))}),C(g,xo.EventType.MESSAGE,P=>{var _;if(!N){const j=P.data[0];Nt(!!j,16349);const S=j,I=(S==null?void 0:S.error)||((_=S[0])===null||_===void 0?void 0:_.error);if(I){be(nn,`RPC '${e}' stream ${i} received error:`,I);const D=I.status;let M=function(x){const w=At[x];if(w!==void 0)return s_(w)}(D),k=I.message;M===void 0&&(M=ce.INTERNAL,k="Unknown error status: "+D+" with message "+I.message),N=!0,b.__(new Se(M,k)),g.close()}else be(nn,`RPC '${e}' stream ${i} received:`,j),b.a_(j)}}),C(c,nv.STAT_EVENT,P=>{P.stat===Gd.PROXY?be(nn,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Gd.NOPROXY&&be(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.o_()},0),b}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Bu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t){return new i_(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="PersistentStream";class X_{constructor(e,n,r,i,o,a,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bv(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Fs(n.toString()),Fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Se(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return be(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(be(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J_ extends X_{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=f_(e.writeResults,e.commitTime),r=yi(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=u_(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>h_(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{}class eC extends Z_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,nh(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ce.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Jo(e,nh(n,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Se(ce.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class tC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Fs(n),this._a=!1):be("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class nC{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(async()=>{xa(this)&&(be(pa,"Restarting streams for network reachability change."),await async function(u){const d=it(u);d.Ia.add(4),await ga(d),d.Aa.set("Unknown"),d.Ia.delete(4),await Uc(d)}(this))})}),this.Aa=new tC(r,i)}}async function Uc(t){if(xa(t))for(const e of t.da)await e(!0)}async function ga(t){for(const e of t.da)await e(!1)}function xa(t){return it(t).Ia.size===0}async function Uv(t,e,n){if(!fa(e))throw e;t.Ia.add(1),await ga(t),t.Aa.set("Offline"),n||(n=()=>U_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{be(pa,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Uc(t)})}function qv(t,e){return e().catch(n=>Uv(t,n,e))}async function qc(t){const e=it(t),n=us(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jf;for(;rC(e);)try{const i=await q_(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,sC(e,i)}catch(i){await Uv(e,i)}Hv(e)&&Qv(e)}function rC(t){return xa(t)&&t.Pa.length<10}function sC(t,e){t.Pa.push(e);const n=us(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Hv(t){return xa(t)&&!us(t).M_()&&t.Pa.length>0}function Qv(t){us(t).start()}async function iC(t){us(t).na()}async function oC(t){const e=us(t);for(const n of t.Pa)e.X_(n.mutations)}async function aC(t,e,n){const r=t.Pa.shift(),i=If.from(r,e,n);await qv(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await qc(t)}async function lC(t,e){e&&us(t).Z_&&await async function(r,i){if(function(a){return r_(a)&&a!==ce.ABORTED}(i.code)){const o=r.Pa.shift();us(r).N_(),await qv(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await qc(r)}}(t,e),Hv(t)&&Qv(t)}async function Q0(t,e){const n=it(t);n.asyncQueue.verifyOperationInProgress(),be(pa,"RemoteStore received new credentials");const r=xa(n);n.Ia.add(3),await ga(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Uc(n)}async function cC(t,e){const n=it(t);e?(n.Ia.delete(2),await Uc(n)):e||(n.Ia.add(2),await ga(n),n.Aa.set("Unknown"))}function us(t){return t.ma||(t.ma=function(n,r,i){const o=it(n);return o.ia(),new J_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:iC.bind(null,t),n_:lC.bind(null,t),ea:oC.bind(null,t),ta:aC.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await qc(t)):(await t.ma.stop(),t.Pa.length>0&&(be(pa,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,c=new Lf(e,n,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gv(t,e){if(Fs("AsyncQueue",`${e}: ${t}`),fa(t))return new Se(ce.UNAVAILABLE,`${e}: ${t}`);throw t}class uC{constructor(){this.queries=G0(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=it(n),o=i.queries;i.queries=G0(),o.forEach((a,c)=>{for(const u of c.wa)u.onError(r)})})(this,new Se(ce.ABORTED,"Firestore shutting down"))}}function G0(){return new qs(t=>kv(t),Sv)}function dC(t){t.Da.forEach(e=>{e.next()})}var W0,Y0;(Y0=W0||(W0={})).Fa="default",Y0.Cache="cache";const hC="SyncEngine";class fC{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new qs(c=>kv(c),Sv),this.Tu=new Map,this.Iu=new Set,this.du=new jn(Ce.comparator),this.Eu=new Map,this.Au=new Rf,this.Ru={},this.Vu=new Map,this.mu=Pi.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mC(t,e,n){const r=yC(t);try{const i=await function(a,c){const u=it(a),d=pt.now(),f=c.reduce((N,b)=>N.add(b.key),an());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let b=fc(),C=an();return u.Os.getEntries(N,f).next(P=>{b=P,b.forEach((_,j)=>{j.isValidDocument()||(C=C.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,b)).next(P=>{g=P;const _=[];for(const j of c){const S=ZE(j,g.get(j.key).overlayedDocument);S!=null&&_.push(new Hs(j.key,S,xv(S.value.mapValue),wr.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,_,c)}).next(P=>{y=P;const _=P.applyToLocalDocumentSet(g,C);return u.documentOverlayCache.saveOverlays(N,P.batchId,_)})}).then(()=>({batchId:y.batchId,changes:_v(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new jn(Be)),d=d.insert(c,u),a.Ru[a.currentUser.toKey()]=d}(r,i.batchId,n),await Hc(r,i.changes),await qc(r.remoteStore)}catch(i){const o=Gv(i,"Failed to persist write");n.reject(o)}}function K0(t,e,n){const r=it(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,a)=>{const c=a.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=it(a);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(const y of g.wa)y.va(c)&&(d=!0)}),d&&dC(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pC(t,e){const n=it(t),r=e.batch.batchId;try{const i=await B_(n.localStore,e);Yv(n,r,null),Wv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hc(n,i)}catch(i){await bf(i)}}async function gC(t,e,n){const r=it(t);try{const i=await function(a,c){const u=it(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(Nt(g!==null,37113),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Yv(r,e,n),Wv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hc(r,i)}catch(i){await bf(i)}}function Wv(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Yv(t,e,n){const r=it(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}async function Hc(t,e,n){const r=it(t),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{a.push(r.gu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){i.push(d);const g=Df.Es(u.targetId,d);o.push(g)}}))}),await Promise.all(a),r.hu.J_(i),await async function(u,d){const f=it(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>se.forEach(d,y=>se.forEach(y.Is,N=>f.persistence.referenceDelegate.addReference(g,y.targetId,N)).next(()=>se.forEach(y.ds,N=>f.persistence.referenceDelegate.removeReference(g,y.targetId,N)))))}catch(g){if(!fa(g))throw g;be(z_,"Failed to update sequence numbers: "+g)}for(const g of d){const y=g.targetId;if(!g.fromCache){const N=f.Fs.get(y),b=N.snapshotVersion,C=N.withLastLimboFreeSnapshotVersion(b);f.Fs=f.Fs.insert(y,C)}}}(r.localStore,o))}async function xC(t,e){const n=it(t);if(!n.currentUser.isEqual(e)){be(hC,"User change. New user:",e.toKey());const r=await $v(n.localStore,e);n.currentUser=e,function(o,a){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new Se(ce.CANCELLED,a))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hc(n,r.Bs)}}function yC(t){const e=it(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return $_(this.persistence,new F_,e.initialUser,this.serializer)}Du(e){return new Vv(Pf.Vi,this.serializer)}bu(e){return new H_}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class vC extends xc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Nt(this.persistence.referenceDelegate instanceof gc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N_(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Vv(r=>gc.Vi(r,n),this.serializer)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xC.bind(null,this.syncEngine),await cC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uC}()}createDatastore(e){const n=Bc(e.databaseInfo.databaseId),r=function(o){return new K_(o)}(e.databaseInfo);return function(o,a,c,u){return new eC(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,c){return new nC(r,i,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>K0(this.syncEngine,n,0),function(){return q0.C()?new q0:new Q_}())}createSyncEngine(e,n){return function(i,o,a,c,u,d,f){const g=new fC(i,o,a,c,u,d);return f&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=it(i);be(pa,"RemoteStore shutting down."),o.Ia.add(5),await ga(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class bC{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sn.UNAUTHENTICATED,this.clientId=yf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{be(ds,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(be(ds,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Uu(t,e){t.asyncQueue.verifyOperationInProgress(),be(ds,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $v(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ci("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{be("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ci("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function X0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wC(t);be(ds,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Q0(e.remoteStore,i)),t._onlineComponents=e}async function wC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){be(ds,"Using user provided OfflineComponentProvider");try{await Uu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ce.FAILED_PRECONDITION||i.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ci("Error using user provided cache. Falling back to memory cache: "+n),await Uu(t,new xc)}}else be(ds,"Using default OfflineComponentProvider"),await Uu(t,new vC(void 0));return t._offlineComponents}async function jC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(be(ds,"Using user provided OnlineComponentProvider"),await X0(t,t._uninitializedComponentsProvider._online)):(be(ds,"Using default OnlineComponentProvider"),await X0(t,new ih))),t._onlineComponents}function NC(t){return jC(t).then(e=>e.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firestore.googleapis.com",Z0=!0;class eg{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xv,this.ssl=Z0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w_)throw new Se(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eE;switch(r.type){case"firstParty":return new sE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J0.get(n);r&&(be("ComponentProvider","Removing Datastore"),J0.delete(n),r.terminate())}(this),Promise.resolve()}}function SC(t,e,n,r={}){var i;t=Yd(t,Mf);const o=mf(e),a=t._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(TS(`https://${u}`),PS("Firestore",!0)),a.host!==Xv&&a.host!==u&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:o,emulatorOptions:r});if(!rc(d,c)&&(t._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=sn.MOCK_USER;else{f=AS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Se(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new sn(y)}t._authCredentials=new tE(new ov(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Of(this.firestore,e,this._query)}}class ln{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}toJSON(){return{type:ln._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ha(n,ln._jsonSchema))return new ln(e,r||null,new Ce(_t.fromString(n.referencePath)))}}ln._jsonSchemaVersion="firestore/documentReference/1.0",ln._jsonSchema={type:Pt("string",ln._jsonSchemaVersion),referencePath:Pt("string")};class sa extends Of{constructor(e,n,r){super(e,n,OE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Ce(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function kC(t,e,...n){if(t=sc(t),arguments.length===1&&(e=yf.newId()),uE("doc","path",e),t instanceof Mf){const r=_t.fromString(e,...n);return j0(r),new ln(t,null,new Ce(r))}{if(!(t instanceof ln||t instanceof sa))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return j0(r),new ln(t.firestore,t instanceof sa?t.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="AsyncQueue";class ng{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bv(this,"async_queue_retry"),this.oc=()=>{const r=Bu();r&&be(tg,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Bu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Bu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new As;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fa(e))throw e;be(tg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Fs("INTERNAL UNHANDLED ERROR: ",rg(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Lf.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Te(47125,{hc:rg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function rg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Jv extends Mf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ng,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ng(e),this._firestoreClient=void 0,await e}}}function EC(t,e){const n=typeof t=="object"?t:Uk(),r=typeof t=="string"?t:e||cc,i=Fk(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=_S("firestore");o&&SC(i,...o)}return i}function _C(t){if(t._terminated)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CC(t),t._firestoreClient}function CC(t){var e,n,r;const i=t._freezeSettings(),o=function(c,u,d,f){return new NE(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Kv(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new bC(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(cr.fromBase64String(e))}catch(n){throw new Se(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xn(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ha(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:Pt("string",Xn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(ha(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:Pt("string",jr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ha(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nr(e.vectorValues);throw new Se(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:Pt("string",Nr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=/^__.*__$/;class AC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ma(e,this.data,n,this.fieldTransforms)}}function e1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:t})}}class zf{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return yc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(e1(this.Ec)&&TC.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class IC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bc(e)}Dc(e,n,r,i=!1){return new zf({Ec:e,methodName:n,bc:r,path:Gt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RC(t){const e=t._freezeSettings(),n=Bc(t._databaseId);return new IC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PC(t,e,n,r,i,o={}){const a=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);s1("Data must be an object, but it was:",a,r);const c=n1(r,a);let u,d;if(o.merge)u=new Jn(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const f=[];for(const g of o.mergeFields){const y=DC(e,g,n);if(!a.contains(y))throw new Se(ce.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);MC(f,y)||f.push(y)}u=new Jn(f),d=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=a.fieldTransforms;return new AC(new Kn(c),u,d)}function t1(t,e){if(r1(t=sc(t)))return s1("Unsupported field value:",e,t),n1(t,e);if(t instanceof Zv)return function(r,i){if(!e1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const c of r){let u=t1(c,i.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=sc(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=pt.fromDate(r);return{timestampValue:th(i.serializer,o)}}if(r instanceof pt){const o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:th(i.serializer,o)}}if(r instanceof jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xn)return{bytesValue:o_(i.serializer,r._byteString)};if(r instanceof ln){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ov(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nr)return function(a,c){return{mapValue:{fields:{[mv]:{stringValue:gv},[Kd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.wc("VectorValues must only contain numeric values.");return Af(c.serializer,d)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${vf(r)}`)}(t,e)}function n1(t,e){const n={};return cv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,i)=>{const o=t1(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function r1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof jr||t instanceof Xn||t instanceof ln||t instanceof Zv||t instanceof Nr)}function s1(t,e,n){if(!r1(n)||!av(n)){const r=vf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function DC(t,e,n){if((e=sc(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return i1(t,e);throw yc("Field path arguments must be of type string or ",t,!1,void 0,n)}const LC=new RegExp("[~\\*/\\[\\]]");function i1(t,e,n){if(e.search(LC)>=0)throw yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ff(...e.split("."))._internalPath}catch{throw yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yc(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new Se(ce.INVALID_ARGUMENT,c+t+u)}function MC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(a1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OC extends o1{data(){return super.data()}}function a1(t,e){return typeof e=="string"?i1(t,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ll{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vi extends o1{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(a1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",vi._jsonSchema={type:Pt("string",vi._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Tl extends vi{data(e={}){return super.data(e)}}class Po{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ll(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tl(this._firestore,this._userDataWriter,r.key,r,new ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new Tl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new Tl(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:zC(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}Po._jsonSchemaVersion="firestore/querySnapshot/1.0",Po._jsonSchema={type:Pt("string",Po._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};function VC(t,e,n){t=Yd(t,ln);const r=Yd(t.firestore,Jv),i=FC(t.converter,e,n);return $C(r,[PC(RC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wr.none())])}function $C(t,e){return function(r,i){const o=new As;return r.asyncQueue.enqueueAndForget(async()=>mC(await NC(r),i,o)),o.promise}(_C(t),e)}(function(e,n=!0){(function(i){Bi=i})(Bk),oc(new Jo("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new Jv(new nE(r.getProvider("auth-internal")),new iE(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Se(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(d.options.projectId,f)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),xi(x0,y0,e),xi(x0,y0,"esm2017")})();var BC="firebase",UC="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(BC,UC,"app");const qC={apiKey:"AIzaSyBteLG6N6Sr-AXt0M13CYpS0Cflu6kv_AQ",authDomain:"quizify-43799.firebaseapp.com",projectId:"quizify-43799",storageBucket:"quizify-43799.firebasestorage.app",messagingSenderId:"389410159905",appId:"1:389410159905:web:e81a297fd64eb0bc4a1260",measurementId:"G-7BFF7BFNJS"},HC=Xy(qC),QC=EC(HC),GC=async(t,e)=>{console.log("Starting Firestore save for:",t),console.log("User data:",JSON.stringify(e));try{return await VC(kC(QC,"users",t),e),console.log("Firestore save successful"),!0}catch(n){return console.error("Firestore save error:",n),console.error("Error details:",JSON.stringify(n)),!1}};function WC(){const t=Ct(),e=Ge(),{phone:n,avatar:r,firebaseUser:i}=t.state||{},[o,a]=h.useState(""),[c,u]=h.useState(""),[d,f]=h.useState(""),[g,y]=h.useState(""),[N,b]=h.useState(""),C=[{value:"under-5",label:"Under 5 yrs"},{value:"5-10",label:"5-10 yrs"},{value:"11-15",label:"11-15 yrs"},{value:"16-20",label:"16-20 yrs"},{value:"20+",label:"20+ yrs"}],P=()=>{if(b(""),!o){b("Please enter your name");return}if(!c||c.length<6){b("Password must be at least 6 characters");return}if(!d){b("Please select your gender");return}if(!g){b("Please select your age group");return}const j=c||"123456",S=JSON.parse(localStorage.getItem("users")||"{}");S[n]={username:o,gender:d,ageGroup:g,avatar:r,password:j,phone:n,createdAt:new Date().toISOString()},localStorage.setItem("users",JSON.stringify(S)),GC(n,{username:o,gender:d,ageGroup:g,avatar:r,password:j,createdAt:new Date().toISOString()}).then(()=>{console.log("User saved to Firestore")}).catch(D=>{console.log("Firestore save failed:",D)}),i&&localStorage.setItem("firebaseUser",JSON.stringify({uid:i.uid,phoneNumber:i.phoneNumber})),localStorage.setItem("currentUser",JSON.stringify({phone:n,username:o,gender:d,ageGroup:g,avatar:r}));const I={name:o,level:1,coins:0,currentStreak:0,xp:0};localStorage.setItem("qp_player",JSON.stringify(I)),localStorage.setItem("userName",o),e("/welcome",{state:{username:o},replace:!0})},_=()=>{e("/auth/avatar",{state:{phone:n,avatar:r,firebaseUser:i}})};return s.jsxs("div",{className:"auth-screen",style:{background:"linear-gradient(135deg, #6b46c1 0%, #9333ea 50%, #ec4899 100%)"},children:[s.jsx("button",{className:"back-button",onClick:_,style:{position:"absolute",top:"40px",left:"20px",background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,backdropFilter:"blur(10px)",transition:"all 0.3s ease"},onMouseEnter:j=>j.target.style.background="rgba(255,255,255,0.3)",onMouseLeave:j=>j.target.style.background="rgba(255,255,255,0.2)",children:s.jsx("span",{style:{fontSize:"24px",color:"white"},children:"‹"})}),s.jsxs("div",{className:"content-card",children:[s.jsxs("div",{className:"progress-dots",children:[s.jsx("div",{className:"dot"}),s.jsx("div",{className:"dot active",style:{background:"#9333ea"}})]}),s.jsx("div",{style:{fontSize:"60px",textAlign:"center",marginBottom:"16px"},children:r==null?void 0:r.emoji}),s.jsx("h1",{className:"title",style:{background:"linear-gradient(135deg, #6b46c1 0%, #ec4899 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Almost Done!"}),s.jsx("p",{className:"subtitle",children:"Tell us about yourself"}),s.jsxs("div",{style:{marginBottom:"24px"},children:[s.jsx("input",{type:"text",className:"phone-input",placeholder:"Enter your name...",value:o,onChange:j=>a(j.target.value),style:{width:"100%",marginBottom:"20px",color:"#333",fontSize:"16px",WebkitTextFillColor:"#333",backgroundColor:"white"}}),s.jsx("input",{type:"password",className:"phone-input",placeholder:"Create a password...",value:c,onChange:j=>u(j.target.value),style:{width:"100%",marginBottom:"20px",marginTop:"10px"}}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",display:"block"},children:"Gender"}),s.jsxs("div",{style:{display:"flex",gap:"8px"},children:[s.jsx("button",{onClick:()=>f("male"),style:{flex:1,padding:"12px",border:"2px solid",borderColor:d==="male"?"#9333ea":"#e9d5ff",borderRadius:"12px",background:d==="male"?"rgba(147, 51, 234, 0.1)":"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",color:d==="male"?"#9333ea":"#64748b",transition:"all 0.3s"},children:"👦 Male"}),s.jsx("button",{onClick:()=>f("female"),style:{flex:1,padding:"12px",border:"2px solid",borderColor:d==="female"?"#9333ea":"#e9d5ff",borderRadius:"12px",background:d==="female"?"rgba(147, 51, 234, 0.1)":"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",color:d==="female"?"#9333ea":"#64748b",transition:"all 0.3s"},children:"👧 Female"}),s.jsx("button",{onClick:()=>f("other"),style:{flex:1,padding:"12px",border:"2px solid",borderColor:d==="other"?"#9333ea":"#e9d5ff",borderRadius:"12px",background:d==="other"?"rgba(147, 51, 234, 0.1)":"white",cursor:"pointer",fontSize:"14px",fontWeight:"600",color:d==="other"?"#9333ea":"#64748b",transition:"all 0.3s"},children:"🌈 Other"})]})]}),s.jsxs("div",{style:{marginBottom:"20px"},children:[s.jsx("label",{style:{fontSize:"14px",color:"#64748b",marginBottom:"8px",display:"block"},children:"Age Group"}),s.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px"},children:C.map(j=>s.jsx("button",{onClick:()=>y(j.value),style:{padding:"10px 4px",border:"2px solid",borderColor:g===j.value?"#9333ea":"#e9d5ff",borderRadius:"12px",background:g===j.value?"rgba(147, 51, 234, 0.1)":"white",cursor:"pointer",fontSize:"12px",fontWeight:"600",color:g===j.value?"#9333ea":"#64748b",transition:"all 0.3s"},children:j.label},j.value))})]}),N&&s.jsx("div",{style:{color:"#ef4444",fontSize:"14px",textAlign:"center",marginBottom:"16px"},children:N})]}),s.jsx("button",{className:"submit-button",onClick:P,disabled:!o||!d||!g,style:{width:"100%",padding:"18px",background:o&&d&&g?"linear-gradient(135deg, #6b46c1 0%, #ec4899 100%)":"linear-gradient(135deg, #94a3b8 0%, #cbd5e1 100%)",color:"white",border:"none",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:o&&d&&g?"pointer":"not-allowed",transition:"all 0.3s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:"Let's Start! 🚀"})]})]})}function YC(){var g;const t=Ge(),e=Ct(),[n,r]=h.useState(!1),[i,o]=h.useState(!1),[a,c]=h.useState(!1),u=((g=e.state)==null?void 0:g.username)||localStorage.getItem("userName")||"Champion",d=u.length>12;h.useEffect(()=>{sessionStorage.setItem("justSignedUp","true"),setTimeout(()=>r(!0),100),setTimeout(()=>o(!0),2e3)},[]);const f=()=>{c(!0),setTimeout(()=>{t("/",{replace:!0})},350)};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden transition-opacity",style:{background:"radial-gradient(circle at center, #1a1a2e 0%, #0f0f0f 100%)",opacity:a?.3:1,transitionDuration:"400ms"},children:[s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[s.jsx("div",{className:"absolute",style:{width:"100px",height:"100px",borderRadius:"50%",background:"radial-gradient(circle, rgba(147, 51, 234, 0.8), transparent)",animation:"pulseExpand 2.5s ease-out infinite"}}),s.jsx("div",{className:"absolute",style:{width:"100px",height:"100px",borderRadius:"50%",background:"radial-gradient(circle, rgba(236, 72, 153, 0.8), transparent)",animation:"pulseExpand 2.5s ease-out 0.5s infinite"}}),s.jsx("div",{className:"absolute",style:{width:"100px",height:"100px",borderRadius:"50%",background:"radial-gradient(circle, rgba(59, 130, 246, 0.8), transparent)",animation:"pulseExpand 2.5s ease-out 1s infinite"}}),s.jsx("div",{className:"absolute",style:{width:"80px",height:"80px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(147, 51, 234, 0.4))",boxShadow:"0 0 60px 20px rgba(147, 51, 234, 0.6)",animation:"glow 2s ease-in-out infinite"}})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:[...Array(12)].map((y,N)=>s.jsx("div",{className:"absolute",style:{width:"2px",height:"100%",background:"linear-gradient(to bottom, transparent, rgba(147, 51, 234, 0.3), transparent)",transform:`rotate(${N*30}deg)`,animation:`fadeInOut 2.5s ease-in-out ${N*.1}s infinite`}},N))}),s.jsx("div",{className:`absolute z-10 transition-all duration-1000
        ${n?"opacity-100":"opacity-0"}`,style:{top:"calc(50% - 200px)",left:"50%",transform:"translateX(-50%)",textAlign:"center",width:"90%",maxWidth:"500px"},children:s.jsxs("h1",{style:{color:"#fff",fontFamily:"system-ui, -apple-system, sans-serif",letterSpacing:"1px",textShadow:"0 0 30px rgba(147, 51, 234, 0.5)",animation:"fadeInUp 1s ease-out forwards",margin:0},children:[s.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",marginBottom:d?"-5px":"-10px"},children:"Welcome"}),s.jsx("div",{style:{fontSize:"48px",fontWeight:"bold",wordWrap:"break-word",overflowWrap:"break-word",lineHeight:d?"1.2":"1.1",padding:"0 20px",marginTop:d?"5px":"0"},children:u})]})}),i&&s.jsx("div",{className:"absolute z-10",style:{bottom:"250px",left:"50%",transform:"translateX(-50%)"},children:s.jsxs("button",{onClick:f,className:"welcome-start-button",style:{background:"linear-gradient(135deg, #9333ea 0%, #ec4899 100%)",color:"white",padding:"18px 40px",borderRadius:"50px",fontSize:"20px",fontWeight:"bold",border:"none",cursor:"pointer",transform:"scale(1)",transition:"all 0.3s ease",display:"inline-flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 30px rgba(147, 51, 234, 0.4)",animation:"slideUp 0.5s ease-out forwards",whiteSpace:"nowrap"},onMouseEnter:y=>{y.currentTarget.style.transform="scale(1.05)",y.currentTarget.style.boxShadow="0 6px 40px rgba(147, 51, 234, 0.6)"},onMouseLeave:y=>{y.currentTarget.style.transform="scale(1)",y.currentTarget.style.boxShadow="0 4px 30px rgba(147, 51, 234, 0.4)"},children:["Let's Learn ",s.jsx("span",{style:{fontSize:"24px"},children:"🚀"})]})}),s.jsx("style",{jsx:!0,children:`
        @keyframes pulseExpand {
          0% {
            width: 100px;
            height: 100px;
            opacity: 0.8;
          }
          100% {
            width: 800px;
            height: 800px;
            opacity: 0;
          }
        }
        
        @keyframes glow {
          0%, 100% {
            transform: scale(1);
            opacity: 0.9;
          }
          50% {
            transform: scale(1.1);
            opacity: 1;
          }
        }
        
        @keyframes fadeInOut {
          0%, 100% {
            opacity: 0;
          }
          50% {
            opacity: 0.6;
          }
        }
        
        @keyframes fadeInUp {
          0% {
            opacity: 0;
            transform: translateY(20px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes slideUp {
          0% {
            opacity: 0;
            transform: translateY(30px);
          }
          100% {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})}function KC(){return h.useState(!1),null}const XC={name:(()=>{const t=JSON.parse(localStorage.getItem("currentUser")||"{}");return t.username?t.username.split(" ")[0]:"Player"})(),avatar:"wizard",level:1,totalXP:0,energy:rn.MAX_ENERGY,energyRegenAt:null,comboStreak:0,bestCombo:0,currentStreak:0,bestStreak:0,totalDays:0,lastPlayedDate:null,totalQuizzes:0,totalCorrect:0,achievements:[],unlockedAvatars:["wizard","knight"],createdAt:Date.now()};function JC(){const[t,e]=h.useState(()=>{const d=localStorage.getItem(rn.STORAGE_KEYS.PLAYER),f=JSON.parse(localStorage.getItem("currentUser")||"{}");if(d){const g=JSON.parse(d);return f.username&&(g.name=f.username.split(" ")[0]),g.unlockedAvatars||(g.unlockedAvatars=["wizard","knight"]),g}return XC});h.useEffect(()=>{localStorage.setItem(rn.STORAGE_KEYS.PLAYER,JSON.stringify(t))},[t]),h.useEffect(()=>{if(t.energy<rn.MAX_ENERGY&&t.energyRegenAt){const d=setInterval(()=>{const f=Date.now();f>=t.energyRegenAt&&e(g=>({...g,energy:Math.min(g.energy+1,rn.MAX_ENERGY),energyRegenAt:g.energy+1<rn.MAX_ENERGY?f+rn.ENERGY_REGEN_TIME:null}))},6e4);return()=>clearInterval(d)}},[t.energy,t.energyRegenAt]);const n=h.useCallback(d=>{e(f=>{const g=f.totalXP+d,y=zp(f.totalXP),N=zp(g);let b=[...f.unlockedAvatars];return N>y&&rn.AVATARS.forEach(C=>{C.unlockLevel<=N&&!b.includes(C.id)&&b.push(C.id)}),{...f,totalXP:g,level:N,unlockedAvatars:b}})},[]),r=h.useCallback(d=>{console.log("[DEPRECATED] addCoins called with:",d)},[]),i=h.useCallback((d=1)=>t.energy<d?!1:(e(f=>({...f,energy:f.energy-d,energyRegenAt:f.energyRegenAt||Date.now()+rn.ENERGY_REGEN_TIME})),!0),[t.energy]),o=h.useCallback(d=>{e(f=>{const g=d?f.comboStreak+1:0;return{...f,comboStreak:g,bestCombo:Math.max(f.bestCombo,g)}})},[]),a=h.useCallback(()=>{e(d=>({...d,comboStreak:0}))},[]),c=h.useCallback(d=>{t.unlockedAvatars.includes(d)&&e(f=>({...f,avatar:d}))},[t.unlockedAvatars]),u=h.useCallback(()=>{const d=new Date().toDateString();e(f=>{if(f.lastPlayedDate===d)return f;const g=new Date;g.setDate(g.getDate()-1);const y=g.toDateString();let N=f.currentStreak;return f.lastPlayedDate===y?N=f.currentStreak+1:(f.lastPlayedDate,N=1),{...f,currentStreak:N,bestStreak:Math.max(f.bestStreak,N),totalDays:f.totalDays+1,lastPlayedDate:d}})},[]);return{player:t,addXP:n,addCoins:r,useEnergy:i,updateCombo:o,resetCombo:a,changeAvatar:c,updateDailyStreak:u,levelProgress:V5(t.totalXP)}}window.history.replaceState({path:window.location.pathname,preventBack:!0},"",window.location.pathname);window.history.pushState({path:window.location.pathname,preventBack:!0},"",window.location.pathname);window.userService=Ot;const l1=h.createContext(null),Ir=()=>{const t=h.useContext(l1);if(!t)throw new Error("useGame must be used within GameProvider");return t};function ZC({children:t}){const e=JC(),n=Oc(),r={...e,coins:n.coins,xp:n.xp,level:n.level,recordQuizComplete:n.recordQuizComplete,recordPracticeComplete:n.recordPracticeComplete,getTodaySummary:n.getTodaySummary};return s.jsx(l1.Provider,{value:r,children:t})}function e4(){const[t,e]=h.useState(!1),[n,r]=h.useState(!1);return h.useEffect(()=>{(()=>{const o=fS();r(o),e(!0)})()},[]),h.useEffect(()=>{let i=0,o=null,a=null;return(async()=>{try{a=await i0.addListener("backButton",()=>{const u=window.location.pathname;u==="/"||u==="/home"?(i++,i===1?(console.log("Press back again to exit"),o=setTimeout(()=>{i=0},2e3)):i===2&&(clearTimeout(o),i0.minimizeApp())):window.history.back()})}catch(u){console.error("Error setting up back button handler:",u)}})(),()=>{a&&typeof a.remove=="function"&&a.remove(),o&&clearTimeout(o)}},[]),t?!n&&!window.location.pathname.startsWith("/auth")?(window.location.href="/auth",null):s.jsxs(ZC,{children:[s.jsxs(X2,{children:[s.jsx(Ke,{path:"/auth",element:s.jsx(mS,{})}),s.jsx(Ke,{path:"/auth/signin",element:s.jsx(pS,{})}),s.jsx(Ke,{path:"/auth/avatar",element:s.jsx(gS,{})}),s.jsx(Ke,{path:"/auth/username",element:s.jsx(WC,{})}),s.jsx(Ke,{path:"/welcome",element:s.jsx(YC,{})}),s.jsxs(Ke,{element:s.jsx(P5,{}),children:[s.jsx(Ke,{path:"/",element:s.jsx(Vp,{})}),s.jsx(Ke,{path:"/play",element:s.jsx(Rj,{})}),s.jsx(Ke,{path:"/play/classic",element:s.jsx(mj,{})}),s.jsx(Ke,{path:"/play/party",element:s.jsx(tN,{})}),s.jsx(Ke,{path:"/profile",element:s.jsx(kN,{})}),s.jsx(Ke,{path:"/profile/leaderboard",element:s.jsx(EN,{})}),s.jsx(Ke,{path:"/profile/history",element:s.jsx(RN,{})}),s.jsx(Ke,{path:"/profile/rewards",element:s.jsx(GN,{})}),s.jsx(Ke,{path:"/profile/badges",element:s.jsx(WN,{})}),s.jsx(Ke,{path:"/profile/achievements",element:s.jsx(KN,{})}),s.jsx(Ke,{path:"/profile/streaks",element:s.jsx(XN,{})}),s.jsx(Ke,{path:"/profile/quests",element:s.jsx(ZN,{})}),s.jsx(Ke,{path:"/profile/settings",element:s.jsx(eS,{})}),s.jsx(Ke,{path:"/profile/edit",element:s.jsx(uS,{})}),s.jsx(Ke,{path:"/profile/privacy",element:s.jsx(dS,{})}),s.jsx(Ke,{path:"/swipe",element:s.jsx(rN,{})}),s.jsx(Ke,{path:"/leaders",element:s.jsx(W2,{to:"/profile/leaderboard",replace:!0})}),s.jsx(Ke,{path:"/quiz/:category",element:s.jsx(Gj,{})}),s.jsx(Ke,{path:"/quiz/play",element:s.jsx(iN,{})}),s.jsx(Ke,{path:"/practice/start",element:s.jsx(oN,{})}),s.jsx(Ke,{path:"/surprise",element:s.jsx(SN,{})}),s.jsx(Ke,{path:"*",element:s.jsx(Vp,{})})]})]}),s.jsx(KC,{})]}):s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#000"},children:s.jsx("div",{style:{color:"#fff"},children:"Loading..."})})}qu.createRoot(document.getElementById("root")).render(s.jsx(dn.StrictMode,{children:s.jsx(j5,{children:s.jsx(e4,{})})}));export{Uy as W,C1 as c,sg as g};
